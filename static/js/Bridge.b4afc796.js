(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Bridge"],{"049a":function(e,t,o){},"05f3":function(e,t,o){"use strict";o.r(t);o("b0c0");var n=o("7a23"),i={class:"tabs-container"},a={class:"tabs"},s=["onClick"];function l(e,t,o,l,r,c){var d=Object(n["resolveComponent"])("RebateImg"),u=Object(n["resolveComponent"])("SwapBridge"),m=Object(n["resolveComponent"])("Limit"),b=Object(n["resolveComponent"])("Liquidity");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[Object(n["createElementVNode"])("div",null,[Object(n["createVNode"])(d)]),Object(n["createElementVNode"])("div",i,[Object(n["createElementVNode"])("div",a,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(c.tabs,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{class:Object(n["normalizeClass"])({active:e.value===l.tabActive}),key:t,onClick:Object(n["withModifiers"])((function(t){return c.handleTab(e)}),["stop"])},Object(n["toDisplayString"])(e.name),11,s)})),128))])]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",null,[Object(n["createVNode"])(u,{ref:"swapBridge"},null,512)],512),[[n["vShow"],"swap"===l.tabActive]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",null,[Object(n["createVNode"])(m,{ref:"limitBridge"},null,512)],512),[[n["vShow"],"limit"===l.tabActive]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",null,[Object(n["createVNode"])(b,{ref:"liquidityBridge"},null,512)],512),[[n["vShow"],"liquidity"===l.tabActive]])])}var r=o("497e"),c=(o("4de4"),o("d3b7"),o("a9e3"),o("99af"),o("fb6a"),o("e524")),d=o.n(c),u=function(e){return Object(n["pushScopeId"])("data-v-65b8aeea"),e=e(),Object(n["popScopeId"])(),e},m={class:"bridge-container"},b={class:"card-container t"},p={class:"card-container_top"},h={class:"flex items-center"},f={class:"flex justify-between items-center mt-40"},v={class:"switch-container"},g=u((function(){return Object(n["createElementVNode"])("i",{class:"iconfont icon-switch"},null,-1)})),k=[g],O={class:"card-container b"},j={class:"card-container_top"},w={class:"flex justify-between items-center mt-40"},T={key:0,class:"card-container flex items-center justify-between mt-6 min-h-40"},y={key:0},S={key:1},N={key:3,class:"swap-label"},x={class:"swap-label_item-left"},V={style:{display:"flex","align-items":"center"}},E={style:{"margin-right":"0.1rem"}},_={class:"swap-label_item-left"},B={style:{display:"flex","align-items":"center"}},$={key:0},A={key:1},C={class:"swap-label_item-left"},D={key:0},I={class:"swap-label_item-left"},L={class:"swap-label_item-right",style:{color:"#F81111"}},F={key:4,class:"swap-label"},P={class:"swap-label_item-left"},R={key:1,style:{display:"flex","align-items":"center"}},U={style:{"margin-right":"0.1rem"}},M={key:2,style:{display:"flex","align-items":"center"}},z={style:{"margin-right":"0.1rem"}},q={class:"swap-label_item-left"},W={style:{display:"flex","align-items":"center"}},H={class:"swap-label_item-left"},Q={class:"swap-label_item-left"},G={key:0},K={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:d.a,alt:"",srcset:""},J={key:1},Z={key:1,class:"path-list"},Y={key:0},X={key:1,class:"path-amm"},ee=u((function(){return Object(n["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:d.a,alt:"",srcset:""},null,-1)})),te={key:0,class:"select-token iconfont icon-collapse-down"},oe={key:2},ne={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:d.a,alt:"",srcset:""},ie={key:1},ae={key:0},se={key:1,class:"path-amm"},le=u((function(){return Object(n["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:d.a,alt:"",srcset:""},null,-1)})),re={key:0,class:"select-token iconfont icon-collapse-down"},ce={key:0},de={class:"swap-label_item-left"},ue={class:"card-container txs-container"},me={class:"van-hairline--bottom"},be={class:"pop-content"},pe={class:"icon-container"},he={class:"text-1"},fe={class:"select-container"},ve={class:"select-title"},ge=u((function(){return Object(n["createElementVNode"])("div",{class:"select-placeholder"},null,-1)})),ke={key:0,class:"select-content"},Oe=["onClick"],je={class:"select-item_left"},we={class:"select-item_left-top"},Te={class:"select-item_left-bottom"},ye={key:1,class:"select-content"},Se=["onClick"],Ne={class:"select-item_left"},xe={class:"select-item_left-top"},Ve={class:"select-item_left-bottom"},Ee={style:{background:"#fff","padding-bottom":"1rem"}},_e={class:"token-item header"},Be={class:"flex-2"},$e={class:"flex-1"},Ae={class:"flex-1 right-label"},Ce=u((function(){return Object(n["createElementVNode"])("span",{style:{width:"0.32rem"}},null,-1)})),De=["onClick"],Ie={class:"path-list flex-start flex-2"},Le={key:0},Fe={key:1,class:"path-amm"},Pe=u((function(){return Object(n["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:d.a,alt:"",srcset:""},null,-1)})),Re={key:0,class:"tag"},Ue={class:"flex-1"},Me=Object(n["createTextVNode"])(" <0.01% "),ze=Object(n["createTextVNode"])(" >40% ");function qe(e,t,i,a,s,l){var r=this,c=Object(n["resolveComponent"])("van-count-down"),d=Object(n["resolveComponent"])("van-button"),u=Object(n["resolveComponent"])("SelectBridgeToken"),g=Object(n["resolveComponent"])("van-field"),qe=Object(n["resolveComponent"])("SlippageButton"),We=Object(n["resolveComponent"])("SelectDex"),He=Object(n["resolveComponent"])("SwapModeSet"),Qe=Object(n["resolveComponent"])("van-image"),Ge=Object(n["resolveComponent"])("van-form"),Ke=Object(n["resolveComponent"])("van-empty"),Je=Object(n["resolveComponent"])("BridgeTxItem"),Ze=Object(n["resolveComponent"])("DynamicScrollerItem"),Ye=Object(n["resolveComponent"])("DynamicScroller"),Xe=Object(n["resolveComponent"])("ConfirmBridgeSwap"),et=Object(n["resolveComponent"])("van-icon"),tt=Object(n["resolveComponent"])("van-action-sheet"),ot=Object(n["resolveComponent"])("ConfirmSwap"),nt=Object(n["resolveDirective"])("copy");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",m,[Object(n["createVNode"])(c,{style:{position:"absolute",opacity:"0",height:"0"},ref:"countDown",class:"icon-countDown",time:3e4,format:"sss",onFinish:l.onCountDownFinish},{default:Object(n["withCtx"])((function(e){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.seconds)+"s ",1)]})),_:1},8,["onFinish"]),Object(n["createVNode"])(Ge,{class:"form-container",onSubmit:l.onSubmit},{default:Object(n["withCtx"])((function(){var i,r,c,m,ue,me,be,pe,he,fe,ve,ge,ke,Oe,je,we,Te,ye,Se,Ne,xe,Ve,Ee;return[Object(n["createElementVNode"])("div",b,[Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("from")),1),Object(n["createElementVNode"])("div",h,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(i=a.fromToken)||void 0===i?void 0:i.balance)||"0")),1),Object(n["createVNode"])(d,{plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:Object(n["withModifiers"])(l.handleMax,["stop"])},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("max")),1)]})),_:1},8,["onClick"])])]),Object(n["createElementVNode"])("div",f,[Object(n["createVNode"])(u,{ref:"selectFrom",token:a.fromToken,"onUpdate:token":[t[0]||(t[0]=function(e){return a.fromToken=e}),t[1]||(t[1]=function(e){return l.handelTokenChange("from")})],otherToken:a.toToken,tokens:a.tokens,balanceList:null===(r=s.userBalanceTokens)||void 0===r||null===(c=r.filter)||void 0===c?void 0:c.call(r,(function(e){return!e.isWrapped})),switchChain:""},null,8,["token","otherToken","tokens","balanceList"]),Object(n["createVNode"])(g,{modelValue:s.fromTokenAmount,"onUpdate:modelValue":[t[2]||(t[2]=function(e){return s.fromTokenAmount=e}),l.watchFromAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number"},null,8,["modelValue","onUpdate:modelValue"])])]),Object(n["createElementVNode"])("div",v,[Object(n["createElementVNode"])("div",{class:"switch-box",onClick:t[3]||(t[3]=Object(n["withModifiers"])((function(){return l.switchToken&&l.switchToken.apply(l,arguments)}),["stop"]))},k)]),Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("div",j,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("to")),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(m=a.toToken)||void 0===m?void 0:m.balance)||"0")),1)]),Object(n["createElementVNode"])("div",w,[Object(n["createVNode"])(u,{ref:"selectTo",token:a.toToken,"onUpdate:token":[t[4]||(t[4]=function(e){return a.toToken=e}),t[5]||(t[5]=function(e){return l.handelTokenChange("to")})],otherToken:a.fromToken,tokens:a.tokens,balanceList:null===(ue=s.userBalanceTokens)||void 0===ue||null===(me=ue.filter)||void 0===me?void 0:me.call(ue,(function(e){return!e.isWrapped}))},null,8,["token","otherToken","tokens","balanceList"]),l.isSwap()&&!l.isOnlyGetAmountsOut?(Object(n["openBlock"])(),Object(n["createBlock"])(g,{key:l.isSwap(),modelValue:s.toAmount,"onUpdate:modelValue":[t[6]||(t[6]=function(e){return s.toAmount=e}),l.watchToAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number"},null,8,["modelValue","onUpdate:modelValue"])):(Object(n["openBlock"])(),Object(n["createBlock"])(g,{key:1,"model-value":l.toTokenAmount,readonly:"",placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number"},null,8,["model-value"]))])]),l.isSwap()?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",T,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("receiveAddress")),1),Object(n["createVNode"])(g,{modelValue:s.toAddress,"onUpdate:modelValue":t[7]||(t[7]=function(e){return s.toAddress=e}),onBlur:t[8]||(t[8]=function(e){return l.watchFromAmount(s.fromTokenAmount)}),placeholder:e.$t("noCex"),"input-align":"right",clearable:"",class:"input-address"},null,8,["modelValue","placeholder"]),s.isAppGetContactList?(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",{key:0,class:"iconfont icon-contacts clickable",onClick:t[9]||(t[9]=Object(n["withModifiers"])((function(e){return s.show1=!0}),["stop"]))})):Object(n["createCommentVNode"])("",!0)])),-1===l.errorCode?(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:1,class:"submit-btn",block:"",loadingText:s.loadingText,loading:s.loadingApprove,"native-type":"submit",color:"#3F80F7"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(l.submitMsg||""),1)]})),_:1},8,["loadingText","loading"])):(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:2,class:"submit-btn",block:"","native-type":"submit",color:l.errorCode<=1||s.loading?l.isSwap()&&null!==(be=l.priceImpactV)&&void 0!==be&&null!==(pe=be.gt)&&void 0!==pe&&pe.call(be,.4)?"#aaa":"#3F80F7":"#aaa",loading:s.loading||s.loading1,"loading-text":s.loadingText,disabled:(l.errorCode>1||!s.fromTokenAmount||!l.toTokenAmount)&&1!==l.errorCode||!(null!==(he=e.$refs)&&void 0!==he&&null!==(fe=he.selectFrom)&&void 0!==fe&&fe.isCanSwap)||!(null!==(ve=e.$refs)&&void 0!==ve&&null!==(ge=ve.selectTo)&&void 0!==ge&&ge.isCanSwap)||l.isSwap()&&(null===(ke=l.priceImpactV)||void 0===ke||null===(Oe=ke.gt)||void 0===Oe?void 0:Oe.call(ke,.4))},{default:Object(n["withCtx"])((function(){var t,o;return[l.isSwap()&&null!==(t=l.priceImpactV)&&void 0!==t&&null!==(o=t.gt)&&void 0!==o&&o.call(t,.4)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",y,Object(n["toDisplayString"])(e.$t("priceImpactTooHigh")),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",S,Object(n["toDisplayString"])(l.submitMsg||""),1))]})),_:1},8,["color","loading","loading-text","disabled"])),l.isSwap()?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",F,[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",P,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("slippage1")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[13]||(t[13]=Object(n["withModifiers"])((function(t){return l.alertTips(e.$t("slippage1"),e.$t("minimumReceivedTips"))}),["stop"]))})]),"solana"!==l.chain&&"ton"!==l.chain?(Object(n["openBlock"])(),Object(n["createBlock"])(He,{key:0,swapMode:s.customSwapMode,"onUpdate:swapMode":t[14]||(t[14]=function(e){return s.customSwapMode=e}),autoSwapMode:s.autoSwapMode,slippage:s.customSlippage,"onUpdate:slippage":t[15]||(t[15]=function(e){return s.customSlippage=e}),autoSlippage:s.autoSlippageValue},null,8,["swapMode","autoSwapMode","slippage","autoSlippage"])):"solana"===l.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",R,[Object(n["createElementVNode"])("span",U,Object(n["toDisplayString"])(s.solanaSlippage)+"%",1),Object(n["createVNode"])(qe,{slippage:s.solanaSlippage,"onUpdate:slippage":t[16]||(t[16]=function(e){return s.solanaSlippage=e}),icon:1,onOnSubmit:l.onSubmitSolanaSlippage},null,8,["slippage","onOnSubmit"])])):"ton"===l.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",M,[Object(n["createElementVNode"])("span",z,Object(n["toDisplayString"])(s.tonSlippage)+"%",1),Object(n["createVNode"])(qe,{slippage:s.tonSlippage,"onUpdate:slippage":t[17]||(t[17]=function(e){return s.tonSlippage=e}),icon:1,onOnSubmit:l.onSubmitTonSlippage},null,8,["slippage","onOnSubmit"])])):Object(n["createCommentVNode"])("",!0)]),Object(n["withDirectives"])(Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",q,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("estimatedAveragePrice")),1)]),Object(n["createElementVNode"])("div",W,[Object(n["createElementVNode"])("span",null,"$"+Object(n["toDisplayString"])(l.getAvgPrice()),1)])],512),[[n["vShow"],s.fromTokenAmount&&l.toTokenAmount]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",H,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("priceImpact")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[18]||(t[18]=Object(n["withModifiers"])((function(t){return l.alertTips(e.$t("priceImpact"),e.$t("priceImpactTips"))}),["stop"]))})]),Object(n["createElementVNode"])("div",{style:Object(n["normalizeStyle"])({color:l.priceImpactColor})},Object(n["toDisplayString"])(l.priceImpact)+Object(n["toDisplayString"])(null!==(Ne=l.priceImpactV)&&void 0!==Ne&&null!==(xe=Ne.gt)&&void 0!==xe&&xe.call(Ne,.05)?"(".concat(e.$t("excessivePriceImpact"),")"):""),5)],512),[[n["vShow"],s.fromTokenAmount&&l.toTokenAmount]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",Q,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("tokenRoute")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[19]||(t[19]=Object(n["withModifiers"])((function(t){return l.alertTips(e.$t("tokenRoute"),e.$t("tokenRouteTips"))}),["stop"]))})]),"solana"===l.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",G,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])([a.fromToken,a.toToken],(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:t},[0!==t?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",K)):Object(n["createCommentVNode"])("",!0),e.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",J,Object(n["toDisplayString"])(e.symbol),1)):Object(n["createCommentVNode"])("",!0)],64)})),128))])):"ton"===l.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Z,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(s.swapRouterPath,(function(t,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:i},[t.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Y,Object(n["toDisplayString"])(t.symbol),1)):Object(n["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",X,[Object(n["createVNode"])(Qe,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(t.nextAmm,".jpeg"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),ee])):Object(n["createCommentVNode"])("",!0)],64)})),128)),s.listRouter.length>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",te)):Object(n["createCommentVNode"])("",!0)])):1===(null===(Ve=s.swapQuoteInfo)||void 0===Ve?void 0:Ve.toWrapper)||2===(null===(Ee=s.swapQuoteInfo)||void 0===Ee?void 0:Ee.toWrapper)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",oe,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(s.swapRouterPath,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:t},[0!==t?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",ne)):Object(n["createCommentVNode"])("",!0),e.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",ie,Object(n["toDisplayString"])(e.symbol),1)):Object(n["createCommentVNode"])("",!0)],64)})),128))])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:3,class:"path-list clickable",onClick:t[20]||(t[20]=Object(n["withModifiers"])((function(e){return s.dialogListRouterVisible=!0}),["stop","prevent"]))},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(s.swapRouterPath,(function(t,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:i},[t.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",ae,Object(n["toDisplayString"])(t.symbol),1)):Object(n["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",se,[Object(n["createVNode"])(Qe,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(t.nextAmm,".jpeg"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),le])):Object(n["createCommentVNode"])("",!0)],64)})),128)),s.listRouter.length>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",re)):Object(n["createCommentVNode"])("",!0)]))],512),[[n["vShow"],s.fromTokenAmount&&l.toTokenAmount]]),Number(l.estimatedFee)>0&&"solana"!==l.chain&&"ton"!==l.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",ce,[Object(n["createElementVNode"])("div",de,Object(n["toDisplayString"])(e.$t("estimatedGas")),1),Object(n["createElementVNode"])("div",null,"â‰ˆ $"+Object(n["toDisplayString"])(l.estimatedFee),1)])):Object(n["createCommentVNode"])("",!0)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",N,[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",x,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[10]||(t[10]=Object(n["withModifiers"])((function(t){return l.alertTips(e.$t("slippage"),e.$t("minimumReceivedTips"))}),["stop"]))})]),Object(n["createElementVNode"])("div",V,[Object(n["createElementVNode"])("span",E,Object(n["toDisplayString"])(s.slippage)+"%",1),Object(n["createVNode"])(qe,{slippage:s.slippage,"onUpdate:slippage":t[11]||(t[11]=function(e){return s.slippage=e}),icon:1},null,8,["slippage"])])]),Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",_,Object(n["toDisplayString"])(e.$t("exchangeRates")),1),Object(n["createElementVNode"])("div",B,[s.rateType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",$,"1 "+Object(n["toDisplayString"])(a.fromToken.symbol)+" = "+Object(n["toDisplayString"])(l.getRate(1))+" "+Object(n["toDisplayString"])(a.toToken.symbol),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",A,"1 "+Object(n["toDisplayString"])(a.toToken.symbol)+" = "+Object(n["toDisplayString"])(l.getRate(0))+" "+Object(n["toDisplayString"])(a.fromToken.symbol),1)),Object(n["createElementVNode"])("i",{class:"iconfont icon-switch-h ml-5 clickable",onClick:t[12]||(t[12]=Object(n["withModifiers"])((function(e){return s.rateType=!s.rateType}),["stop"]))})])]),Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("span",C,Object(n["toDisplayString"])(e.$t("exchangeChannel")),1),Object(n["createVNode"])(We,{ref:"selectDex",bridge:s.bridge,"bridge-list":s.bridgeList,style:{background:"transparent"}},null,8,["bridge","bridge-list"])]),Number(null===(je=s.bridge)||void 0===je||null===(we=je.router)||void 0===we?void 0:we.otherNativeFee)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",D,[Object(n["createElementVNode"])("span",I,Object(n["toDisplayString"])(e.$t("otherNativeFee")),1),Object(n["createElementVNode"])("span",L,Object(n["toDisplayString"])(s.utils.formatEther(null===(Te=s.bridge)||void 0===Te||null===(ye=Te.router)||void 0===ye?void 0:ye.otherNativeFee))+" "+Object(n["toDisplayString"])(null===(Se=e.$store.getters.chainInfo)||void 0===Se?void 0:Se.mainName),1)])):Object(n["createCommentVNode"])("",!0)]))]})),_:1},8,["onSubmit"]),Object(n["createElementVNode"])("div",ue,[Object(n["createElementVNode"])("h3",me,Object(n["toDisplayString"])(e.$t("exchangeHistory")),1),Object(n["withDirectives"])(Object(n["createVNode"])(Ke,{description:e.$t("empty"),class:"empty"},null,8,["description"]),[[n["vShow"],l.totalTxs&&0===l.totalTxs.length&&!s.loadingTxs]]),Object(n["createElementVNode"])("ul",null,[Object(n["createVNode"])(Ye,{items:l.totalTxs,"min-item-size":30,"key-field":"createTimeT",class:"tokens"},{default:Object(n["withCtx"])((function(e){var t=e.item,o=e.index,i=e.active;return[Object(n["createVNode"])(Ze,{item:t,active:i,"data-index":o},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(Je,{item:t},null,8,["item"])]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])])]),Object(n["createVNode"])(Xe,{visible:s.show,"onUpdate:visible":t[21]||(t[21]=function(e){return s.show=e}),fromToken:a.fromToken,toToken:a.toToken,bridge:s.bridge,fromTokenAmount:s.fromTokenAmount,toTokenAmount:l.toTokenAmount,bridgeSwapTxData:s.bridgeSwapTxData,loading:s.loadingConfirm,onConfirmSwap:l.confirmSwap},null,8,["visible","fromToken","toToken","bridge","fromTokenAmount","toTokenAmount","bridgeSwapTxData","loading","onConfirmSwap"]),Object(n["createVNode"])(tt,{show:s.confirmTxVisible,"onUpdate:show":t[23]||(t[23]=function(e){return s.confirmTxVisible=e}),title:e.$t("confirmSwap")},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",be,[Object(n["createElementVNode"])("div",pe,[Object(n["createVNode"])(et,{class:"icon-s",name:"success",size:"0.64rem",color:"#3F80F7"})]),Object(n["createElementVNode"])("div",he,Object(n["toDisplayString"])(e.$t("transactionSubmitted")),1),Object(n["createElementVNode"])("a",{class:"text-2 clickable",href:"javascript:;",onClick:t[22]||(t[22]=function(t){return e.$f.openBrowser(e.$f.formatExplorerUrl(a.fromToken.chain,r.txHash,"tx"))}),rel:"noopener noreferrer"},Object(n["toDisplayString"])(e.$t("viewBlockExplorerTransactionHistory")),1)])]})),_:1},8,["show","title"]),Object(n["createVNode"])(tt,{show:s.show1,"onUpdate:show":t[28]||(t[28]=function(e){return s.show1=e}),title:" ",style:{height:"50%","--van-popup-background-color":"#fff"},class:"select-action-pop"},{default:Object(n["withCtx"])((function(){var o,i,a,r,c,d;return[Object(n["createElementVNode"])("div",fe,[Object(n["createElementVNode"])("div",ve,[Object(n["createElementVNode"])("button",{class:Object(n["normalizeClass"])({active:"contact"===s.tabActive}),onClick:t[24]||(t[24]=Object(n["withModifiers"])((function(e){return s.tabActive="contact"}),["stop"]))},Object(n["toDisplayString"])(e.$t("contacts")),3),Object(n["createElementVNode"])("button",{class:Object(n["normalizeClass"])({active:"wallet"===s.tabActive}),onClick:t[25]||(t[25]=Object(n["withModifiers"])((function(e){return s.tabActive="wallet"}),["stop"]))},Object(n["toDisplayString"])(e.$t("myWallet")),3)]),ge,"contact"===s.tabActive?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",ke,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(s.accounts.contact,(function(e,o){var i,a,r,c,d,u,m,b;return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:o,class:"select-item clickable",onClick:Object(n["withModifiers"])((function(t){return l.handleSelectAccount(e)}),["stop"])},[Object(n["createElementVNode"])("div",je,[Object(n["createElementVNode"])("div",we,Object(n["toDisplayString"])((null===e||void 0===e?void 0:e.contact_name)||""),1),Object(n["createElementVNode"])("div",Te,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(null!==e&&void 0!==e&&e.contact_address?(null===e||void 0===e||null===(i=e.contact_address)||void 0===i||null===(a=i.slice)||void 0===a?void 0:a.call(i,0,10))+"..."+(null===e||void 0===e||null===(r=e.contact_address)||void 0===r||null===(c=r.slice)||void 0===c?void 0:c.call(r,-5)):""),1),Object(n["withDirectives"])(Object(n["createElementVNode"])("i",{class:"iconfont icon-copy clickable",onClick:t[26]||(t[26]=Object(n["withModifiers"])((function(){}),["stop"]))},null,512),[[nt,(null===e||void 0===e?void 0:e.contact_address)||""]])])]),(null===e||void 0===e||null===(d=e.contact_address)||void 0===d||null===(u=d.toLowerCase)||void 0===u?void 0:u.call(d))===(null===(m=s.toAddress)||void 0===m||null===(b=m.toLowerCase)||void 0===b?void 0:b.call(m))?(Object(n["openBlock"])(),Object(n["createBlock"])(et,{key:0,size:"0.32rem",color:"#3F80F7",name:"success"})):Object(n["createCommentVNode"])("",!0)],8,Oe)})),128)),Object(n["withDirectives"])(Object(n["createVNode"])(Ke,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[n["vShow"],(null===(o=s.accounts)||void 0===o?void 0:o.contact)&&0===(null===(i=s.accounts)||void 0===i||null===(a=i.contact)||void 0===a?void 0:a.length)]])])):Object(n["createCommentVNode"])("",!0),"wallet"===s.tabActive?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",ye,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(s.accounts.wallet,(function(e,o){var i,a,r,c,d,u,m,b;return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:o,class:"select-item clickable",onClick:Object(n["withModifiers"])((function(t){return l.handleSelectAccount(e)}),["stop"])},[Object(n["createElementVNode"])("div",Ne,[Object(n["createElementVNode"])("div",xe,Object(n["toDisplayString"])((null===e||void 0===e?void 0:e.contact_name)||""),1),Object(n["createElementVNode"])("div",Ve,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(null!==e&&void 0!==e&&e.contact_address?(null===e||void 0===e||null===(i=e.contact_address)||void 0===i||null===(a=i.slice)||void 0===a?void 0:a.call(i,0,10))+"..."+(null===e||void 0===e||null===(r=e.contact_address)||void 0===r||null===(c=r.slice)||void 0===c?void 0:c.call(r,-5)):""),1),Object(n["withDirectives"])(Object(n["createElementVNode"])("i",{class:"iconfont icon-copy clickable",onClick:t[27]||(t[27]=Object(n["withModifiers"])((function(){}),["stop"]))},null,512),[[nt,(null===e||void 0===e?void 0:e.contact_address)||""]])])]),(null===e||void 0===e||null===(d=e.contact_address)||void 0===d||null===(u=d.toLowerCase)||void 0===u?void 0:u.call(d))===(null===(m=s.toAddress)||void 0===m||null===(b=m.toLowerCase)||void 0===b?void 0:b.call(m))?(Object(n["openBlock"])(),Object(n["createBlock"])(et,{key:0,size:"0.32rem",color:"#3F80F7",name:"success"})):Object(n["createCommentVNode"])("",!0)],8,Se)})),128)),Object(n["withDirectives"])(Object(n["createVNode"])(Ke,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[n["vShow"],(null===(r=s.accounts)||void 0===r?void 0:r.wallet)&&0===(null===(c=s.accounts)||void 0===c||null===(d=c.wallet)||void 0===d?void 0:d.length)]])])):Object(n["createCommentVNode"])("",!0)])]})),_:1},8,["show"]),Object(n["createVNode"])(tt,{show:s.dialogListRouterVisible,"onUpdate:show":t[29]||(t[29]=function(e){return s.dialogListRouterVisible=e}),title:e.$t("selectRouter"),style:{height:"60%","--van-popup-background-color":"#fff"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("ul",Ee,[Object(n["createElementVNode"])("li",_e,[Object(n["createElementVNode"])("span",Be,Object(n["toDisplayString"])(e.$t("router")),1),Object(n["createElementVNode"])("span",$e,Object(n["toDisplayString"])(s.isAmount?e.$t("expectedAmount"):e.$t("expectedPay")),1),Object(n["createElementVNode"])("span",Ae,Object(n["toDisplayString"])(e.$t("priceImpact")),1),Ce]),Object(n["withDirectives"])(Object(n["createVNode"])(Ke,{description:e.$t("emptyData"),class:"empty"},null,8,["description"]),[[n["vShow"],s.listRouter&&0===s.listRouter.length]]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(s.listRouter,(function(t,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:i,class:"token-item",onClick:Object(n["withModifiers"])((function(e){return l.getSelectedRouter(i)}),["stop"])},[Object(n["createElementVNode"])("div",Ie,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t,(function(t,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:i},[t.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Le,Object(n["toDisplayString"])(t.symbol),1)):Object(n["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Fe,[Object(n["createVNode"])(Qe,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(t.nextAmm,".jpeg"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),Pe])):Object(n["createCommentVNode"])("",!0)],64)})),128)),0===i?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Re,Object(n["toDisplayString"])(e.$t("best")),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("span",Ue,Object(n["toDisplayString"])(e.$f.formatNumber2(t.amount)),1),t.priceImpact<10?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"right-label flex-1",style:Object(n["normalizeStyle"])({color:l.formatPriceImpactColor(t.priceImpact)})},[Number(t.priceImpact)<.01?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Me],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.formatNumber2(t.priceImpact,2))+"% ",1)],64))],4)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:1,class:"right-label flex-1",style:Object(n["normalizeStyle"])({color:l.formatPriceImpactColor(t.priceImpact)})},[Number(t.priceImpact)>40?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[ze],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.formatNumber2(t.priceImpact,2))+"% ",1)],64))],4)),s.selectedRouterIndex===i?(Object(n["openBlock"])(),Object(n["createBlock"])(et,{key:2,size:"0.32rem",color:"#558BED",name:"success"})):(Object(n["openBlock"])(),Object(n["createBlock"])(et,{key:3,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,De)})),128))])]})),_:1},8,["show","title"]),Object(n["createVNode"])(ot,{visible:s.dialogVisibleSwap,"onUpdate:visible":t[30]||(t[30]=function(e){return s.dialogVisibleSwap=e}),swapInfo:s.swapInfo,slippage:"solana"===l.chain?s.solanaSlippage:"ton"===l.chain?s.tonSlippage:l.swapSlippage,onSubmit:l.submitSwap,loading:s.loadingConfirmSwap,chain:e.$store.getters.netId||a.fromToken.chain,nativePrice:s.nativePrice,gasPrice:s.gasPrice},null,8,["visible","swapInfo","slippage","onSubmit","loading","chain","nativePrice","gasPrice"])])}var We=o("d0af"),He=o("54f8"),Qe=o("c964"),Ge=o("d0ff"),Ke=o("f3f3"),Je=(o("96cf"),o("7db0"),o("ac1f"),o("00b4"),o("5319"),o("498a"),o("2ca0"),o("b680"),o("d81d"),o("4e82"),o("25f0"),o("caad"),o("4d63"),o("c607"),o("2c3e"),o("9129"),o("c740"),o("1276"),o("466d"),o("2532"),o("b64b"),o("159b"),o("449c")),Ze=function(e){return Object(n["pushScopeId"])("data-v-3e2c88f8"),e=e(),Object(n["popScopeId"])(),e},Ye={class:"select-box"},Xe={key:0,class:"token-container"},et={class:"icon-token-container"},tt=["src"],ot={class:"text-s"},nt={class:"text-l"},it={class:"un-tag"},at={key:1},st=Ze((function(){return Object(n["createElementVNode"])("i",{class:"iconfont icon-collapse-down"},null,-1)})),lt={class:"rules-content"},rt={key:0,class:"search-bar",action:"/"},ct={key:1,class:"search-bar",action:"/"},dt={class:"flex justify-between items-center"},ut={style:{width:"calc(100vw - 0.7rem)"}},mt=["onClick"],bt={class:"main"},pt={key:0,class:"risk-status high"},ht={key:0,class:"minor"},ft=Ze((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),vt={class:"right-label"},gt=Ze((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),kt={key:0,class:"minor"},Ot=["onClick"],jt=Ze((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)}));function wt(e,t,i,a,s,l){var r,c,d,u,m=Object(n["resolveComponent"])("van-image"),b=Object(n["resolveComponent"])("van-search"),p=Object(n["resolveComponent"])("van-tab"),h=Object(n["resolveComponent"])("van-tabs"),f=Object(n["resolveComponent"])("van-icon"),v=Object(n["resolveComponent"])("van-empty"),g=Object(n["resolveComponent"])("van-action-sheet");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ye,[Object(n["createElementVNode"])("button",{class:"select-container",type:"button",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return s.show=!0}),["stop"]))},[i.token.address?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Xe,[Object(n["createElementVNode"])("div",et,[Object(n["createVNode"])(m,{round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:i.token.logoURI||(i.token.logo_url?e.$f.formatIcon({logo_url:i.token.logo_url}):"/icon-default.png"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),null!==(r=i.token)&&void 0!==r&&r.chain||s.active?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat((null===(c=i.token)||void 0===c?void 0:c.chain)||s.active,".png"),alt:"",srcset:""},null,8,tt)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",ot,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])((null===(d=i.token)||void 0===d?void 0:d.symbol)||""),1),Object(n["createElementVNode"])("span",nt,Object(n["toDisplayString"])(l.getChainName(null===(u=i.token)||void 0===u?void 0:u.chain)||s.active),1)]),Object(n["createElementVNode"])("div",it,Object(n["toDisplayString"])(l.isCanSwap?"":e.$t("notSupported")),1)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",at,Object(n["toDisplayString"])(e.$t("pleaseSelectToken")),1)),st]),Object(n["createVNode"])(g,{show:s.show,"onUpdate:show":t[6]||(t[6]=function(e){return s.show=e}),title:e.$t("selectToken"),style:{height:"80vh","--van-popup-background-color":"#fff"},"lazy-render":!1},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",lt,[s.isSearchChain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("form",rt,[Object(n["createVNode"])(b,{modelValue:s.keyword1,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.keyword1=e}),modelModifiers:{trim:!0},clearable:"","show-action":"",background:"#fff",shape:"round",placeholder:e.$t("searchChain"),onCancel:t[2]||(t[2]=function(e){s.isSearchChain=!1,s.keyword1=""})},null,8,["modelValue","placeholder"])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("form",ct,[Object(n["createVNode"])(b,{modelValue:s.keyword,"onUpdate:modelValue":t[3]||(t[3]=function(e){return s.keyword=e}),modelModifiers:{trim:!0},clearable:"",background:"#fff",shape:"round",placeholder:e.$t("searchContractORName")},null,8,["modelValue","placeholder"])])),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div",dt,[Object(n["createElementVNode"])("div",ut,[Object(n["createVNode"])(h,{class:"tabs",active:s.active,"onUpdate:active":t[4]||(t[4]=function(e){return s.active=e}),shrink:"",color:"#558BED",style:{"--van-tabs-nav-background-color":"#fff"},onChange:l.tabChainChange},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(l.chains,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(p,{title:e.name,name:e.chain,key:t},null,8,["title","name"])})),128))]})),_:1},8,["active","onChange"])]),Object(n["createElementVNode"])("button",{class:"search-icon",type:"button",onClick:t[5]||(t[5]=Object(n["withModifiers"])((function(e){return s.isSearchChain=!0}),["stop"]))},[Object(n["createVNode"])(f,{name:"search",size:"0.4rem"})])]),(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",{style:{background:"#fff","padding-bottom":"1rem"},key:s.active},[Object(n["withDirectives"])(Object(n["createVNode"])(v,{description:e.$t("empty"),class:"empty"},null,8,["description"]),[[n["vShow"],l.searchTokens1&&0===l.searchTokens1.length&&!s.loading]]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(l.searchTokens1,(function(t,a){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:"token-item",key:a,onClick:Object(n["withModifiers"])((function(e){return l.handleSelectToken(t)}),["stop"])},[Object(n["createVNode"])(m,{class:"icon-token",round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:t.logoURI||(t.logo_url?e.$f.formatIcon({logo_url:t.logo_url}):"/icon-default.png"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div",bt,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(t.symbol),1),(t.risk_score>55||t.risk_level<0)&&1!==t.risk_level?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",pt,Object(n["toDisplayString"])(e.$t("highRisk")),1)):Object(n["createCommentVNode"])("",!0)]),t.address!==s.NATIVE_TOKEN?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ht,Object(n["toDisplayString"])(t.address.slice(0,6)+"..."+t.address.slice(-6)),1)):Object(n["createCommentVNode"])("",!0)]),ft,Object(n["createElementVNode"])("div",vt,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(t.balance&&0!==Number(t.balance)?e.$f.formatNumber2(t.balance):""),1),gt,t.price?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",kt,Object(n["toDisplayString"])(t.balance?e.$f.formatNumberCurrencyUnit(t.balance*t.price):""),1)):Object(n["createCommentVNode"])("",!0)]),t.address===i.token.address&&s.active===i.token.chain?(Object(n["openBlock"])(),Object(n["createBlock"])(f,{key:0,size:"0.32rem",color:"#558BED",name:"success"})):(Object(n["openBlock"])(),Object(n["createBlock"])(f,{key:1,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,mt)})),128))]))],512),[[n["vShow"],!s.isSearchChain]]),s.isSearchChain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",{style:{background:"#fff","padding-bottom":"1rem"},key:s.active},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(l.filterChains,(function(t,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:"token-item flex justify-between",key:i,onClick:Object(n["withModifiers"])((function(e){return l.selectChain(t)}),["stop"])},[Object(n["createVNode"])(m,{class:"icon-token",round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(t.chain,".png"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(t.name),1),jt,t.chain===s.active?(Object(n["openBlock"])(),Object(n["createBlock"])(f,{key:0,size:"0.32rem",color:"#558BED",name:"success"})):Object(n["createCommentVNode"])("",!0)],8,Ot)})),128))])):Object(n["createCommentVNode"])("",!0)])]})),_:1},8,["show","title"])])}var Tt=o("fc11"),yt=(o("07ac"),o("841c"),o("c9d9")),St=o("fa7d"),Nt=o("365c"),xt=o("6779"),Vt=o("335a"),Et=null,_t={name:"SelectBridgeToken",props:{tokens:{type:Object,default:function(){return{}}},balanceList:{type:Array,default:function(){return[]}},token:{type:Object,default:function(){return{address:"",chain:""}}},otherToken:{type:Object,default:function(){return{address:"",chain:""}}},switchChain:{type:Boolean,default:!1}},emits:["onSelect","update:token"],data:function(){return{show:!1,keyword:"",loading:!1,NATIVE_TOKEN:yt["k"],active:"",searchTokens:[],isSearchChain:!1,keyword1:""}},computed:{filterTokens:function(){var e,t=this;if(!this.active||!this.tokens)return[];var o=Object(Nt["s"])(this.active,2)||this.active,n=(null===(e=this.tokens)||void 0===e?void 0:e[o])||[],i=[];this.balanceList&&this.balanceList.length>0&&this.balanceList[0].chain===this.active&&(i=this.otherToken.chain===this.active?this.balanceList:this.balanceList.filter((function(e){return n.some((function(t){var o,n,i,a;return(null===t||void 0===t||null===(o=t.address)||void 0===o||null===(n=o.toLowerCase)||void 0===n?void 0:n.call(o))===(null===(i=e.address)||void 0===i||null===(a=i.toLowerCase)||void 0===a?void 0:a.call(i))}))})));var a=Object(Ge["a"])(i.slice());if(n.slice().forEach((function(e){var o=a.find((function(o){var n,i,a,s;return(null===(n=o.id)||void 0===n||null===(i=n.toLowerCase)||void 0===i?void 0:i.call(n))===(null===e||void 0===e||null===(a=(s=e.address).toLowerCase)||void 0===a?void 0:a.call(s))+"-"+t.active}));o?o.logoURI=e.logoURI:a.push(e)})),""===this.keyword)return a;var s=new RegExp(this.keyword,"i");return n.filter((function(e){return s.test(e.symbol)||s.test(e.name)||s.test(e.address)}))},searchTokens1:function(){var e;return(null===(e=this.searchTokens)||void 0===e?void 0:e.length)>0?this.searchTokens:this.filterTokens},chain:function(){return this.$store.getters.netId},tabChain:function(){return Object(Nt["s"])(this.active)},chains:function(){var e,t,o,n=Vt["a"].get("chainConfig",yt["l"])||{},i=Object.values(n).sort((function(e,t){return e.sort_id-t.sort_id})),a=Vt["a"].get("okxBridgeChains",Nt["b"])||[],s=function(e){return a.some((function(t){return t.chainId===Object(Nt["A"])(e)}))},l=(null===i||void 0===i||null===(e=i.filter)||void 0===e||null===(t=e.call(i,(function(e){return!!yt["y"][e.netName]||Object(Nt["s"])(e.netName,2)||s(e.netName)})))||void 0===t||null===(o=t.map)||void 0===o?void 0:o.call(t,(function(e){return{chain:e.netName,name:e.name,mainName:e.mainName,bridgeChain:Object(Nt["s"])(e.netName,2),okxChainId:Object(Nt["A"])(e.netName)}})))||[];return l},isCanSwap:function(){var e=this;if(this.token.chain){var t,o,n,i,a,s=Object(Nt["s"])(this.token.chain,2),l=Object(Nt["A"])(this.token.chain),r=Vt["a"].get("OkxSupportChain",{}),c=this.otherToken.chain,d=null===r||void 0===r||null===(t=r[this.token.chain])||void 0===t||null===(o=t.find)||void 0===o?void 0:o.call(t,(function(e){return e===c}));if(!s&&this.otherToken.chain!==this.token.chain&&(!l||!d))return!1;if("brc20"===this.token.chain&&this.switchChain&&(null===(n=window)||void 0===n||null===(i=n._tw_)||void 0===i||!i.appGetContactListV2))return!1;var u=this.tokens[s];return!(this.otherToken.chain!==this.token.chain&&null!==u&&void 0!==u&&null!==(a=u.every)&&void 0!==a&&a.call(u,(function(t){return(t.address||t.token)!==e.token.address})))}return!0},filterChains:function(){if(this.keyword1){var e=new RegExp(this.keyword1,"i");return this.chains.filter((function(t){return e.test(t.name)||e.test(t.mainName)&&"ETH"!==t.mainName||e.test(t.bridgeChain)||e.test(t.chain)}))}return this.chains}},watch:{show:function(e){var t,o,n,i=this;e&&this.$nextTick((function(){i.active=i.token.chain||i.$store.getters.netId})),this.keyword="",this.keyword1="",this.isSearchChain=!1,null===(t=window)||void 0===t||null===(o=t._tw_)||void 0===o||null===(n=o.isRefreshEnable)||void 0===n||n.call(o,"bridge",!e)},tokens:function(){this.tokens[this.active]&&this.getBalanceList(this.active)},keyword:function(e){""!==e?this.tokenSearch():this.searchTokens=[]}},created:function(){this.getOkxSupportChain()},methods:{getBridgeChain:Nt["s"],getBalanceList:function(e){var t,o,n=this,i=Object(Nt["s"])(e,2),a=(null===(t=this.tokens)||void 0===t?void 0:t[i])||[];Array.isArray(null===(o=this.tokens)||void 0===o?void 0:o[i])&&"TRON"!==i&&"TON"!==i&&"BTC"!==i&&"SOLANA"!==i&&/^0x[0-9a-zA-Z]{40}$/.test(this.$store.state.currentAccount)&&Object(Nt["r"])(a.map((function(e){return e.address})),e).then((function(e){n.tokens[i]=a.map((function(t,o){return Object(Ke["a"])(Object(Ke["a"])({},t),{},{balance:xt["utils"].formatUnits(e[o].toString(),t.decimals)})}))}))},getChainName:function(e){var t,o=Vt["a"].get("chainConfig",yt["l"])||{};return(null===(t=o[e])||void 0===t?void 0:t.name)||e},getUserTokenList:function(e){var t=this;Object(Nt["eb"])(e).then((function(o){var n=(null===o||void 0===o?void 0:o.map((function(e){return Object(Ke["a"])(Object(Ke["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token})})))||[];t.tokens[e]=n,Object(Nt["nb"])(e).then((function(o){var i,a,s,l,r,c=[];"solana"===e?c=o:c=null===(a=(null===o||void 0===o||null===(l=o.map((function(e){return Object(Ke["a"])(Object(Ke["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token,balance:(null===e||void 0===e?void 0:e.value)||0})})))||void 0===l||null===(r=l.filter)||void 0===r?void 0:r.call(l,(function(e){return(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag})))||[])||void 0===a||null===(s=a.filter)||void 0===s?void 0:s.call(a,(function(e){return Number(e.balance)>0}));var d=(null===n||void 0===n||null===(i=n.filter)||void 0===i?void 0:i.call(n,(function(e){var t,o;return null===(t=c)||void 0===t||null===(o=t.every)||void 0===o?void 0:o.call(t,(function(t){return e.token!==t.token}))})))||[];c=[].concat(Object(Ge["a"])(c),Object(Ge["a"])(d)),t.tokens[e]=c,c.length>0&&"tron"!==e&&"ton"!==e&&"brc20"!==e&&"SOLANA"!==e&&/^0x[0-9a-zA-Z]{40}$/.test(t.$store.state.currentAccount)&&Object(Nt["r"])(c.map((function(e){return e.token||""})),e).then((function(o){var n,i;c=null===(n=c)||void 0===n||null===(i=n.map)||void 0===i?void 0:i.call(n,(function(e,t){return Object(Ke["a"])(Object(Ke["a"])({},e),{},{balance:xt["utils"].formatUnits(o[t],e.decimals||0)})})),t.tokens[e]=c}))}))}))},tabChainChange:function(e){var t=Object(Nt["s"])(e,2);this.show&&(t?this.getBalanceList(e):this.getUserTokenList(e))},tokenSearch:function(){var e=this;this.otherToken.chain===this.active&&(Et&&(clearTimeout(Et),Et=null),Et=setTimeout((function(){e.search()}),500))},search:function(){var e=this;if(""!==this.keyword){var t,o=new RegExp(this.keyword,"i"),n=Object(Nt["s"])(this.active,2),i=(null===(t=this.tokens)||void 0===t?void 0:t[n])||[],a=i.filter((function(e){return o.test(e.address)||o.test(e.symbol)||o.test(e.name)}));this.loading=!0,Object(Nt["wb"])(this.keyword,this.active).then((function(t){var o,n,i,s=null===(o=t.filter)||void 0===o||null===(n=o.call(t,(function(t){return t.chain===e.active&&!a.some((function(e){return(e.token||e.address)===(t.token||t.address)}))})))||void 0===n||null===(i=n.map)||void 0===i?void 0:i.call(n,(function(e){return Object(Ke["a"])(Object(Ke["a"])({},e),{},{address:e.token,decimals:e.decimals||e.decimal})}));e.searchTokens=[].concat(Object(Ge["a"])(a),Object(Ge["a"])(s))})).catch((function(t){console.log(t),e.searchTokens=[]})).finally((function(){e.loading=!1}))}else this.searchTokens=this.filterTokens},handleSelectToken:function(e){var t=this;if(null!==e&&void 0!==e&&e.address){var o=Object(Ke["a"])(Object(Ke["a"])({},e),{},{chain:this.active,bridgeChain:Object(Nt["s"])(this.active,2)||this.active});if(this.$emit("update:token",o),Object.keys(o).forEach((function(e){t.token[e]=o[e]})),this.show=!1,this.switchChain){var n,i,a,s,l=this.active;if("tron"!==l||window.tronLink)if("brc20"!==l||window.unisat)if("ton"!==l||null!==(n=window)&&void 0!==n&&null!==(i=n.mytonwallet)&&void 0!==i&&i.tonconnect)if("solana"!==l||(null!==(a=window)&&void 0!==a&&null!==(s=a.trustwallet)&&void 0!==s&&s.solana||window.solana))if(l&&"tron"!==l&&"brc20"!==l&&"ton"!==l&&!window.ethereum){var r=this.getChainName(l);this.$dialog.alert({title:this.$t("tips"),message:this.$t("goEvm",{chain:r}),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})}else l&&"tron"!==l&&"ton"!==l&&"brc20"!==l&&window.ethereum&&Object(St["i"])(l);else this.$dialog.alert({title:this.$t("tips"),message:this.$t("goSolana"),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"});else this.$dialog.alert({title:this.$t("tips"),message:this.$t("goEvm",{chain:"TON"}),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"});else this.$dialog.alert({title:this.$t("tips"),message:this.$t("goBtc"),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"});else this.$dialog.alert({title:this.$t("tips"),message:this.$t("goTron"),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})}this.getOkxSupportChain()}},selectChain:function(e){var t=this;this.isSearchChain=!1,this.$nextTick((function(){t.active=e.chain,t.tabChainChange(t.active),t.keyword1=""}))},getOkxSupportChain:function(){var e,t,o=null===(e=this.token)||void 0===e?void 0:e.chain,n=null===(t=this.otherToken)||void 0===t?void 0:t.chain;if(o&&n){var i=Object(Nt["A"])(o);if(!i)return;Object(Nt["R"])(i).then((function(e){console.log(e);var t=Vt["a"].get("OkxSupportChain",{});t=Object(Ke["a"])(Object(Ke["a"])({},t),{},Object(Tt["a"])({},o,null===e||void 0===e?void 0:e.map((function(e){return Object(Nt["A"])(e.chainId,1)})))),Vt["a"].set("OkxSupportChain",t)}))}}}},Bt=(o("3ee7"),o("6b0d")),$t=o.n(Bt);const At=$t()(_t,[["render",wt],["__scopeId","data-v-3e2c88f8"]]);var Ct=At,Dt=function(e){return Object(n["pushScopeId"])("data-v-316f5c8e"),e=e(),Object(n["popScopeId"])(),e},It={class:"select-box"},Lt={key:1,class:"tag color-3f80f7"},Ft=Dt((function(){return Object(n["createElementVNode"])("i",{class:"iconfont icon-collapse-down"},null,-1)})),Pt={key:1},Rt={style:{background:"#fff","padding-bottom":"1rem"}},Ut={class:"token-item header"},Mt=Dt((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),zt={class:"right-label"},qt=Dt((function(){return Object(n["createElementVNode"])("span",{style:{width:"0.32rem"}},null,-1)})),Wt=["onClick"],Ht={class:"token-item"},Qt={class:"main"},Gt={key:1,class:"tag"},Kt=Dt((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),Jt={class:"right-label"},Zt={key:0,class:"tag-no-gas"},Yt={key:0,class:"tag-no-gas_content"},Xt={key:1,class:"tag-no-gas_content"};function eo(e,t,i,a,s,l){var r,c,d,u,m=Object(n["resolveComponent"])("van-image"),b=Object(n["resolveComponent"])("van-empty"),p=Object(n["resolveComponent"])("van-icon"),h=Object(n["resolveComponent"])("van-action-sheet");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",It,[i.bridge.dex||null!==(r=i.bridge)&&void 0!==r&&null!==(c=r.router)&&void 0!==c&&c.bridgeName?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:0,class:"select-container",type:"button",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return s.show=!0}),["stop"]))},[i.bridge.logoUrl?(Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:0,class:"icon-token mr-5",round:"",width:"0.36rem",height:"0.36rem","lazy-load":"","show-loading":"",src:i.bridge.logoUrl,"error-icon":o("aeccf")},null,8,["src","error-icon"])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(null!==(d=i.bridge)&&void 0!==d&&d.isOkx?null===(u=i.bridge.router)||void 0===u?void 0:u.bridgeName:i.bridge.dex),1),i.bridge.isSupportNoGas?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Lt,Object(n["toDisplayString"])(e.$t("noGasSwap")),1)):Object(n["createCommentVNode"])("",!0),Ft])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Pt,"--")),Object(n["createVNode"])(h,{show:s.show,"onUpdate:show":t[1]||(t[1]=function(e){return s.show=e}),title:e.$t("exchangeChannel"),style:{height:"50%","--van-popup-background-color":"#fff"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("ul",Rt,[Object(n["createElementVNode"])("li",Ut,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("channel")),1),Mt,Object(n["createElementVNode"])("span",zt,Object(n["toDisplayString"])(e.$t("expectedAmount1")),1),qt]),Object(n["withDirectives"])(Object(n["createVNode"])(b,{description:e.$t("empty"),class:"empty"},null,8,["description"]),[[n["vShow"],i.bridgeList&&0===i.bridgeList.length&&!s.loading]]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(i.bridgeList,(function(t,a){var s;return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:Object(n["normalizeClass"])(["token-item-li",{"no-gas":t.isSupportNoGas}]),key:a,onClick:Object(n["withModifiers"])((function(e){return l.handleSelectToken(t)}),["stop"])},[Object(n["createElementVNode"])("div",Ht,[t.logoUrl?(Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:0,class:"icon-token",round:"",width:"0.48rem",height:"0.48rem","icon-size":"0.48rem","lazy-load":"","show-loading":"",src:t.logoUrl,"error-icon":o("aeccf")},null,8,["src","error-icon"])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",Qt,Object(n["toDisplayString"])(t.dex||(null===t||void 0===t||null===(s=t.router)||void 0===s?void 0:s.bridgeName)),1),0===a?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Gt,Object(n["toDisplayString"])(e.$t("best")),1)):Object(n["createCommentVNode"])("",!0),Kt,Object(n["createElementVNode"])("div",Jt,Object(n["toDisplayString"])(t.toTokenAmount),1),t.dex===i.bridge.dex?(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:2,size:"0.32rem",color:"#558BED",name:"success"})):(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:3,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))]),t.isSupportNoGas?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Zt,[0===a?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Yt,Object(n["toDisplayString"])(e.$t("noGasSwapTips")),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Xt,Object(n["toDisplayString"])(e.$t("channelProvidesNoGasSwap")),1))])):Object(n["createCommentVNode"])("",!0)],10,Wt)})),128))])]})),_:1},8,["show","title"])])}var to={name:"SelectDex",props:{bridgeList:{type:Array,default:function(){return[]}},bridge:{type:Object,default:function(){return{dex:"",logoUrl:""}}}},emits:["onSelect","update:bridge"],data:function(){return{show:!1,keyword:"",loading:!1}},watch:{show:function(e){var t,o,n;console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(o=t._tw_)||void 0===o||null===(n=o.isRefreshEnable)||void 0===n||n.call(o,"bridge",!e)}},methods:{handleSelectToken:function(e){var t=this;if(null!==e&&void 0!==e&&e.dex){var o=Object(Ke["a"])({},e);this.$emit("update:bridge",o),Object.keys(o).forEach((function(e){var n;t.bridge[e]=o[e],t.bridge.isSupportNoGas=null!==(n=null===o||void 0===o?void 0:o.isSupportNoGas)&&void 0!==n&&n})),this.show=!1}}}};o("2b92");const oo=$t()(to,[["render",eo],["__scopeId","data-v-316f5c8e"]]);var no=oo,io=function(e){return Object(n["pushScopeId"])("data-v-620e29eb"),e=e(),Object(n["popScopeId"])(),e},ao={style:{background:"#fff","padding-bottom":"1rem"},class:"swap-container"},so={class:"flex justify-between"},lo=io((function(){return Object(n["createElementVNode"])("span",null,null,-1)})),ro={class:"flex justify-between mt-20"},co={key:0,class:"token-container"},uo={class:"icon-token-container"},mo=["src"],bo={class:"flex justify-between mt-20"},po={key:0,class:"token-container"},ho={class:"icon-token-container"},fo=["src"],vo={class:"flex justify-between li-item mt-20"},go={class:"flex justify-between li-item"},ko={class:"flex justify-between items-center"},Oo={key:1,class:"tag"},jo={class:"flex justify-between li-item"},wo={key:0},To={key:1},yo={class:"flex justify-between li-item"},So={class:"flex justify-between li-item"},No={key:0,class:"flex justify-between li-item"},xo={class:"tips"};function Vo(e,t,i,a,s,l){var r=Object(n["resolveComponent"])("van-image"),c=Object(n["resolveComponent"])("van-button"),d=Object(n["resolveComponent"])("van-action-sheet");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{show:l.show,"onUpdate:show":t[1]||(t[1]=function(e){return l.show=e}),title:e.$t("confirmSwap"),style:{height:"70%","--van-popup-background-color":"#fff"}},{default:Object(n["withCtx"])((function(){var a,s,l,d,u,m,b,p,h,f,v,g,k,O,j,w,T,y,S,N,x,V,E,_,B,$;return[Object(n["createElementVNode"])("ul",ao,[Object(n["createElementVNode"])("li",so,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("youWillSwap")),1),lo]),Object(n["createElementVNode"])("li",ro,[i.fromToken.address?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",co,[Object(n["createElementVNode"])("div",uo,[Object(n["createVNode"])(r,{round:"",width:"0.48rem",height:"0.48rem","icon-size":"0.48rem","lazy-load":"","show-loading":"",src:i.fromToken.logoURI||(i.fromToken.logo_url?e.$f.formatIcon(i.fromToken):"/icon-default.png"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),null!==(a=i.fromToken)&&void 0!==a&&a.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(null===(s=i.fromToken)||void 0===s?void 0:s.chain,".png"),alt:"",srcset:""},null,8,mo)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])((null===(l=i.fromToken)||void 0===l?void 0:l.symbol)||""),1)])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.fromTokenAmount),1)]),Object(n["createElementVNode"])("li",bo,[i.fromToken.address?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",po,[Object(n["createElementVNode"])("div",ho,[Object(n["createVNode"])(r,{round:"",width:"0.48rem",height:"0.48rem","icon-size":"0.48rem","lazy-load":"","show-loading":"",src:i.toToken.logoURI||(i.toToken.logo_url?e.$f.formatIcon(i.toToken):"/icon-default.png"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),null!==(d=i.toToken)&&void 0!==d&&d.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(null===(u=i.toToken)||void 0===u?void 0:u.chain,".png"),alt:"",srcset:""},null,8,fo)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])((null===(m=i.toToken)||void 0===m?void 0:m.symbol)||""),1)])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.bridge.toTokenAmount),1)]),Object(n["createElementVNode"])("li",vo,[Object(n["createElementVNode"])("span",null,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("receiveAddress")),1),(null!==(b=i.bridgeSwapTxData)&&void 0!==b&&null!==(p=b.txInfo)&&void 0!==p&&null!==(h=p.toAddress)&&void 0!==h&&null!==(f=h.startsWith)&&void 0!==f&&f.call(h,"0x")?null===(v=i.bridgeSwapTxData)||void 0===v||null===(g=v.txInfo)||void 0===g||null===(k=g.toAddress)||void 0===k||null===(O=k.toLowerCase)||void 0===O?void 0:O.call(k):null===(j=i.bridgeSwapTxData)||void 0===j||null===(w=j.txInfo)||void 0===w?void 0:w.toAddress)===e.$store.state.currentAccount?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createTextVNode"])("("+Object(n["toDisplayString"])(e.$t("defaultCurrentAddress"))+")",1)],64)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])((null===(T=i.bridgeSwapTxData)||void 0===T||null===(y=T.txInfo)||void 0===y||null===(S=y.toAddress)||void 0===S?void 0:S.slice(0,6))+"..."+(null===(N=i.bridgeSwapTxData)||void 0===N||null===(x=N.txInfo)||void 0===x||null===(V=x.toAddress)||void 0===V?void 0:V.slice(-3))),1)]),Object(n["createElementVNode"])("li",go,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("exchangeChannel")),1),Object(n["createElementVNode"])("div",ko,[i.bridge.logoUrl?(Object(n["openBlock"])(),Object(n["createBlock"])(r,{key:0,class:"mr-5",round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem","lazy-load":"","show-loading":"",src:i.bridge.logoUrl,"error-icon":o("aeccf")},null,8,["src","error-icon"])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.bridge.dex||""),1),null!==(E=i.bridge)&&void 0!==E&&E.isSupportNoGas?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Oo,Object(n["toDisplayString"])(e.$t("noGasSwap")),1)):Object(n["createCommentVNode"])("",!0)])]),Object(n["createElementVNode"])("li",jo,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("fee")),1),null!==(_=i.bridge)&&void 0!==_&&_.okxFee?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",wo,"$"+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(B=i.bridge)||void 0===B?void 0:B.okxFee)||0)),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",To,Object(n["toDisplayString"])(e.$f.formatNumber2((i.fromTokenAmount||0)*(i.bridge.fee||0)))+" "+Object(n["toDisplayString"])(i.fromToken.symbol)+" ("+Object(n["toDisplayString"])(100*i.bridge.fee)+"%)",1))]),Object(n["createElementVNode"])("li",yo,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("referenceRate")),1),Object(n["createElementVNode"])("span",null,"1 "+Object(n["toDisplayString"])(i.fromToken.symbol)+" = "+Object(n["toDisplayString"])(e.$f.formatNumber2(i.toTokenAmount/i.fromTokenAmount))+" "+Object(n["toDisplayString"])(i.toToken.symbol),1)]),Object(n["createElementVNode"])("li",So,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("expectedReceipt")),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber2((null===($=i.bridge)||void 0===$?void 0:$.receiveTokenAmount)||"0"))+" "+Object(n["toDisplayString"])(i.toToken.symbol),1)]),i.bridge.estimatedTime?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",No,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("estimatedCompletionTime")),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.bridge.estimatedTime)+"~"+Object(n["toDisplayString"])(i.bridge.estimatedTime+2)+" "+Object(n["toDisplayString"])(e.$t("min")),1)])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(c,{class:"submit-btn",block:"",round:"",loading:i.loading,"loading-text":e.$t("confirmSwap"),onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(t){return e.$emit("confirmSwap")}),["stop"])),size:"normal",type:"primary"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirmSwap")),1)]})),_:1},8,["loading","loading-text"]),Object(n["createElementVNode"])("div",xo,"*"+Object(n["toDisplayString"])(e.$t("confirmSwapTips")),1)])]})),_:1},8,["show","title"])}var Eo={name:"confirmBridgeSwap",props:{visible:{type:Boolean,default:!1},fromToken:Object,toToken:Object,fromTokenAmount:String,toTokenAmount:[String,Number],bridge:Object,loading:Boolean,bridgeSwapTxData:Object},emits:["update:visible","confirmSwap"],data:function(){return{}},computed:{show:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}}};o("f6ba");const _o=$t()(Eo,[["render",Vo],["__scopeId","data-v-620e29eb"]]);var Bo=_o,$o={class:"flex items-center"},Ao={class:"label mr-20"},Co={key:0,class:"token-container"},Do={class:"icon-token-container mr-5"},Io=["src"],Lo={class:"mr-5"},Fo={class:"flex items-center mt-10"},Po={class:"label mr-20"},Ro={key:0,class:"token-container"},Uo={class:"icon-token-container mr-5"},Mo=["src"],zo={class:"mr-5"},qo={class:"flex items-center justify-between mt-10 label"};function Wo(e,t,i,a,s,l){var r,c,d,u,m,b,p,h,f,v,g,k,O=Object(n["resolveComponent"])("van-image"),j=Object(n["resolveComponent"])("van-loading");return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:"tx-li-item van-hairline--bottom clickable",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return l.goBridgeTx(i.item)}),["stop"]))},[Object(n["createElementVNode"])("div",$o,[Object(n["createElementVNode"])("span",Ao,Object(n["toDisplayString"])(e.$t("from")),1),i.item.txHash?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Co,[Object(n["createElementVNode"])("div",Do,[Object(n["createVNode"])(O,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:i.item.fromTokenUrl||(null!==(r=i.item)&&void 0!==r&&r.from_address_logo_url?e.$f.formatIcon({logo_url:i.item.from_address_logo_url}):"/icon-default.png"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),null!==(c=i.item)&&void 0!==c&&c.fromTokenChain||i.item.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(null!==(d=i.item)&&void 0!==d&&d.isOkx?null===(u=i.item)||void 0===u?void 0:u.fromTokenChain:i.item.chain||s.getBridgeChain(null===(m=i.item)||void 0===m?void 0:m.fromTokenChain),".png"),alt:"",srcset:""},null,8,Io)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("span",Lo,Object(n["toDisplayString"])(e.$f.formatNumber2(i.item.fromAmount,5)),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])((null===(b=i.item)||void 0===b?void 0:b.fromTokenSymbol)||""),1)])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",Fo,[Object(n["createElementVNode"])("span",Po,Object(n["toDisplayString"])(e.$t("to")),1),i.item.txHash?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ro,[Object(n["createElementVNode"])("div",Uo,[Object(n["createVNode"])(O,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:i.item.toTokenUrl||(null!==(p=i.item)&&void 0!==p&&p.to_address_logo_url?e.$f.formatIcon({logo_url:i.item.to_address_logo_url}):"/icon-default.png"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),null!==(h=i.item)&&void 0!==h&&h.toTokenChain||i.item.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(null!==(f=i.item)&&void 0!==f&&f.isOkx?null===(v=i.item)||void 0===v?void 0:v.toTokenChain:i.item.chain||s.getBridgeChain(null===(g=i.item)||void 0===g?void 0:g.toTokenChain),".png"),alt:"",srcset:""},null,8,Mo)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("span",zo,Object(n["toDisplayString"])(e.$f.formatNumber2(i.item.toTokenAmount,5)),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])((null===(k=i.item)||void 0===k?void 0:k.toTokenSymbol)||""),1)])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",qo,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatDate(i.item.createTimeT)),1),"pending"===i.item.status||"wait_kyc"===i.item.status||"wait_refund"===i.item.status?(Object(n["openBlock"])(),Object(n["createBlock"])(j,{key:0,size:"0.24rem",color:"#3F80F7","text-size":"0.24rem"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(l.formatStatus(i.item.status)),1)]})),_:1})):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:1,style:Object(n["normalizeStyle"])({color:l.formatStatusColor(i.item.status)})},Object(n["toDisplayString"])(l.formatStatus(i.item.status)),5))])])}var Ho={name:"BridgeTxItem",props:{item:{type:Object,default:function(){return{}}}},data:function(){return{getBridgeChain:Nt["s"]}},methods:{goBridgeTx:function(e){"solana"===e.chain||"ton"===e.chain?this.$f.openBrowser(this.$f.formatExplorerUrl(e.chain,e.transaction,"tx")):e.chain&&e.transaction?this.$router.push({name:"BridgeTx",params:{hash:"".concat(e.transaction,"-").concat(e.chain,"-").concat(e.source_type)}}):e.isOkx?this.$router.push({name:"BridgeTx",params:{hash:e.txHash},query:{isOkx:"1"}}):this.$router.push({name:"BridgeTx",params:{hash:e.txHash}})},formatStatus:function(e){var t,o={pending:this.$t("pending"),success:this.$t("succeed"),fail:this.$t("failed"),wait_kyc:this.$t("wait_kyc"),wait_refund:this.$t("wait_refund"),refund_complete:this.$t("refund_complete"),timeout:this.$t("timeout"),PENDING:this.$t("pending"),SUCCESS:this.$t("succeed"),FAILURE:this.$t("failed"),REFUND:this.$t("refund")};return null!==(t=o[e])&&void 0!==t?t:e},formatStatusColor:function(e){return"pending"===e||"PENDING"===e||"wait_kyc"===e||"wait_refund"===e?"#3F80F7":"success"===e||"SUCCESS"===e||"refund_complete"===e||"REFUND"===e?"#12B886":"#999999"}}};o("817e");const Qo=$t()(Ho,[["render",Wo],["__scopeId","data-v-3e224b94"]]);var Go=Qo,Ko=o("a2ef"),Jo=o("fadf"),Zo=o("e36d"),Yo=o("901e"),Xo=o.n(Yo),en=o("2c28"),tn=o("940b"),on=o("4360"),nn=o("a18c");function an(){var e;null===(e=window.unisat)||void 0===e||e.on("accountsChanged",(function(e){var t=Array.isArray(e)?e:[];on["a"].commit("setCurrentAccount",(null===t||void 0===t?void 0:t[0])||""),nn["a"].go(0)}))}function sn(){return new Promise((function(e,t){window.unisat?e(!0):setTimeout((function(){window.unisat?(console.log("unisat successfully detected!"),e(!0)):(console.log("Please install unisat-Extension!"),t("Please install unisat-Extension!"))}),3e3)}))}function ln(){return new Promise((function(e,t){sn().then((function(){var o,n;null===(o=window)||void 0===o||null===(n=o.unisat)||void 0===n||n.requestAccounts().then((function(t){console.log("unisat requestAccounts",t),on["a"].commit("setProvider",window.unisat),on["a"].commit("setChainId","brc20"),on["a"].commit("setWallet","Unisat"),on["a"].commit("setCurrentAccount",(null===t||void 0===t?void 0:t[0])||""),an(),e((null===t||void 0===t?void 0:t[0])||"")})).catch((function(e){console.log("connect unisat error",e),4001===e.code?t("è¯·è¿žæŽ¥"):console.error(e)}))}))}))}var rn,cn,dn,un=o("847c"),mn=o("8e2e"),bn=o("a002"),pn=o.n(bn),hn=o("20c2"),fn="2";function vn(e){return new Promise((function(t){setTimeout(t,e)}))}var gn={name:"Bridge",components:{SlippageButton:Je["a"],SelectBridgeToken:Ct,SelectDex:no,ConfirmBridgeSwap:Bo,BridgeTxItem:Go,ConfirmSwap:Ko["a"],SwapModeSet:Jo["a"]},setup:function(){var e,t,o,n,i=Object(en["useStorage"])("bridge_FromToken",{address:"",chain:"",symbol:"",decimals:0},sessionStorage),a=Object(en["useStorage"])("bridge_toToken",{address:"",chain:"",symbol:"",decimals:0},sessionStorage),s=Object(en["useStorage"])("bridge_swapSlippageInfo",{slippage:fn,auto:!0},localStorage),l=Object(en["useStorage"])("bridge_tokens",{},localStorage),r=Object(en["useStorage"])("solanaTxs",[]),c=Object(mn["a"])("solanaTxs1",r.value.slice()),d=Object(mn["a"])("okxBridgeTxs",[]);c.value=null===(e=c.value)||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,(function(e){return 1===(null===e||void 0===e?void 0:e.is_merged)||1!==e.is_merged&&1e3*(null===e||void 0===e?void 0:e.time)<=Date.now()-864e5}));var u=Object(mn["a"])("tonTxs",[]);return u.value=null===(o=u.value)||void 0===o||null===(n=o.filter)||void 0===n?void 0:n.call(o,(function(e){return 1===(null===e||void 0===e?void 0:e.is_merged)||1!==e.is_merged&&1e3*(null===e||void 0===e?void 0:e.time)<=Date.now()-864e5})),{fromToken:i,toToken:a,swapSlippageInfo:s,tokens:l,solanaTxs:c,okxBridgeTxs:d,tonTxs:u}},data:function(){var e,t,o,n,i=localStorage.swapSlippage||"auto";return{utils:xt["utils"],currentTime:Date.now(),slippageVisible:!1,slippage:fn,fromTokenAmount:"",toAddress:this.$store.state.currentAccount||"",bridge:{dex:"",logoUrl:""},bridgeList:[],loading:!1,loadingApprove:!1,loadingText:"",bridgeSwapTxData:{},show:!1,loadingConfirm:!1,allowance:Zo["a"].from(yt["i"]),loading1:!1,txHash:"",txs:[],getBridgeChain:Nt["s"],loadingTxs:!1,rateType:!0,confirmTxVisible:!1,show1:!1,isAppGetContactList:(null===(e=window)||void 0===e||null===(t=e._tw_)||void 0===t?void 0:t.appGetContactList)||(null===(o=window)||void 0===o||null===(n=o._tw_)||void 0===n?void 0:n.appGetContactListV2),tabActive:"wallet",accounts:{wallet:[],contact:[]},swapQuoteInfo:{},swapRouterPath:[],listRouter:[],isTax:!1,isTaxHigh:!1,dialogListRouterVisible:!1,selectedRouterIndex:0,isAmount:!0,isCannotSellAll:!1,toAmount:"",fromAmount:"",dialogVisibleSwap:!1,loadingConfirmSwap:!1,nativePrice:0,gasPrice:"0",swapSubmitInfo:{},swapInfo:{fromToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""},toToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""},isAmountOut:!1},swapTxs:[],fromTokenInfo:{},userBalanceTokens:[],autoSwapMode:"fast",customSwapMode:localStorage.swapMode||"auto",autoSlippageValue:fn,customSlippage:i,gasBalance:0,solanaQuoteResponse:{},swapTokenPrice:[0,0],quoteSolanaPreParams:{},solanaSlippage:localStorage.solanaSlippage||"9",priceImpactSolana:0,bridgeHashTimes:{},okxBridgeError:"",tonSlippage:localStorage.tonSlippage||"2",tonQuoteResponse:{},priceImpactTon:0,tonSwapTokenPrice:[0,0],tonSwapBaseTokenPrice:0}},computed:{swapMode:function(){return"auto"===this.customSwapMode?this.autoSwapMode:this.customSwapMode},swapSlippage:function(){return"auto"===this.customSlippage?this.autoSlippageValue:this.customSlippage},errorCode:function(){this.currentTime;var e=this.isSwap();if(!this.$store.state.currentAccount)return 1;if(this.fromToken.chain&&this.fromToken.chain!==this.$store.getters.netId)return 2;if(new Xo.a(this.fromTokenAmount||0).gt(this.fromToken.balance||0))return 3;if("ton"===this.chain){var t,o,n,i,a=(null===(t=this.tonQuoteResponse)||void 0===t?void 0:t.totalTransferAmount)||0,s=(null===(o=this.userBalanceTokens)||void 0===o||null===(n=o.find)||void 0===n||null===(i=n.call(o,(function(e){return e.address===yt["k"]})))||void 0===i?void 0:i.initBalance)||0;if(a&&new Xo.a(a).gt(s))return 3}if(!e&&!/(^0x[0-9a-zA-Z]{40}$)|(^(T|t)[0-9a-zA-Z]{33}$)|(^(bc1|[13])[a-zA-HJ-NP-Z0-9]{20,62}$)|(^[1-9A-HJ-NP-Za-km-z]{32,44}$)/.test(this.toAddress)&&!Object(yt["t"])(this.toAddress)&&this.toAddress)return 6;var l=(Object(yt["u"])(this.toToken.address)||"tron"===this.toToken.chain)&&!Object(yt["u"])(this.toAddress),r=(yt["o"].test(this.toToken.address)||"brc20"===this.toToken.chain)&&!yt["o"].test(this.toAddress),c=(Object(yt["s"])(this.toToken.address)||"solana"===this.toToken.chain)&&!Object(yt["s"])(this.toAddress),d=(Object(yt["t"])(this.toToken.address)||"ton"===this.toToken.chain)&&!Object(yt["t"])(this.toAddress),u=("TRON"!==this.toToken.bridgeChain||"tron"!==this.toToken.chain)&&("BTC"!==this.toToken.bridgeChain||"brc20"!==this.toToken.chain)&&("SOLANA"!==this.toToken.bridgeChain||"solana"!==this.toToken.chain)&&("TON"!==this.toToken.bridgeChain||"ton"!==this.toToken.chain)&&!yt["r"].test(this.toAddress);if((l||r||u||c||d)&&!e)return 6;if(new Xo.a(this.fromTokenAmount).lt(this.bridge.depositMin||0)&&this.bridge.depositMin)return 4;if(new Xo.a(this.fromTokenAmount).gt(this.bridge.depositMax||0)&&this.bridge.depositMax)return 5;var m=this.fromToken.chain,b=this.$f.getSwapContract(m),p=e?b:this.bridge.contractAddress;return Number(this.allowance)&&!this.allowance.lt(xt["utils"].parseUnits(this.fromTokenAmount||"0",this.fromToken.decimals||0))||!p||"solana"===this.chain||"ton"===this.chain?this.okxBridgeError?7:this.isSwap()?.5:0:-1},submitMsg:function(){var e,t=this.fromToken.chain,o=Vt["a"].get("chainConfig",yt["l"])||{},n=(null===(e=o[t])||void 0===e?void 0:e.name)||t;if(7===this.errorCode&&this.okxBridgeError){if(/Minimum amount is/i.test(this.okxBridgeError)){var i,a,s,l,r=null===(i=this.okxBridgeError)||void 0===i||null===(a=i.replace)||void 0===a||null===(s=a.call(i,/Minimum amount is /i,""))||void 0===s||null===(l=s.trim)||void 0===l?void 0:l.call(s);if(Number(r))return r=xt["utils"].formatUnits(r,this.fromToken.decimals),"".concat(this.$t("swapAmountCannotLess")," ").concat(r||0," ").concat(this.fromToken.symbol)}if(/Maximum amount is/i.test(this.okxBridgeError)){var c,d,u,m,b=null===(c=this.okxBridgeError)||void 0===c||null===(d=c.replace)||void 0===d||null===(u=d.call(c,/Maximum amount is /i,""))||void 0===u||null===(m=u.trim)||void 0===m?void 0:m.call(u);if(Number(b))return b=xt["utils"].formatUnits(b,this.fromToken.decimals),"".concat(this.$t("swapAmountCannotMore")," ").concat(b||0," ").concat(this.fromToken.symbol)}if(/quote route is higher than/i.test(this.okxBridgeError)){var p,h,f,v,g=null===(p=this.okxBridgeError)||void 0===p||null===(h=p.replace)||void 0===h||null===(f=h.call(p,/(.*quote route is higher than )([0-9]+)(%,.*)/i,"$2"))||void 0===f||null===(v=f.trim)||void 0===v?void 0:v.call(f);if(Number(g))return this.$t("quoteRouteIsHigherThan",{dif:g})}if(/Insufficient liquidity/i.test(this.okxBridgeError))return this.$t("insufficientLiquidity1")}if("ton"===this.chain){var k,O,j,w,T=(null===(k=this.tonQuoteResponse)||void 0===k?void 0:k.totalTransferAmount)||0,y=(null===(O=this.userBalanceTokens)||void 0===O||null===(j=O.find)||void 0===j||null===(w=j.call(O,(function(e){return e.address===yt["k"]})))||void 0===w?void 0:w.initBalance)||0;if(T&&new Xo.a(T).gt(y))return this.$t("tonInsufficientBalance")}var S={0:this.$t("oneClickCrossChain"),.5:this.$t("oneClickSwap"),1:this.$t("connectWallet"),2:this.$t("switchChain2",{chain:n}),3:this.$t("insufficientBalance"),6:this.$t("pleaseEnterCorrectReceiveAddress"),4:"".concat(this.$t("swapAmountCannotLess")," ").concat(this.bridge.depositMin||0," ").concat(this.fromToken.symbol),5:"".concat(this.$t("swapAmountCannotMore")," ").concat(this.bridge.depositMax||0," ").concat(this.fromToken.symbol),"-1":this.$t("approve"),7:this.okxBridgeError};return S[this.errorCode]},toTokenAmount:function(){if(this.isSwap())return this.toAmount||"";this.toAmount;return this.bridge.toTokenAmount||""},addressPattern:function(){return/^0x[0-9a-zA-Z]{40}$/},priceImpactV:function(){var e,t,o,n,i;if(!Number(this.fromTokenAmount)&&!Number(this.toTokenAmount)||!this.isSwap())return"";var a=this.$store.getters.netId||this.fromToken.chain;if("evm"!==localStorage.okxwallet_chain&&(window.solana||null!==(e=window)&&void 0!==e&&null!==(t=e.trustwallet)&&void 0!==t&&t.solana&&(null===(o=window.ethereum)||void 0===o||null===(n=o.address)||void 0===n||null===(i=n.startsWith)||void 0===i||!i.call(n,"0x"))&&window.ethereum.address)&&(a="solana"),"solana"===a)return new Xo.a(this.priceImpactSolana||0);if("ton"===a)return new Xo.a(this.priceImpactTon||0);var s=this.swapQuoteInfo.routerPath,l=(null===s||void 0===s?void 0:s.length)>0?null===s||void 0===s?void 0:s[0]:null,r=(null===s||void 0===s?void 0:s.length)>0?null===s||void 0===s?void 0:s[s.length-1]:null;if(l&&r){var c=this.swapQuoteInfo.from_price,d=this.swapQuoteInfo.to_price,u=xt["utils"].formatUnits(l.amount,l.decimals),m=xt["utils"].formatUnits(r.amount,r.decimals);return new Xo.a(u).times(c).div(new Xo.a(m).times(d)).minus(1).abs()}return""},priceImpact:function(){return this.priceImpactV?this.$f.formatNumber2(this.priceImpactV.times(100).toFixed(),2)+"%":""},priceImpactColor:function(){var e,t,o,n,i,a;return null!==(e=this.priceImpactV)&&void 0!==e&&null!==(t=e.gt)&&void 0!==t&&t.call(e,.4)?"#F81111":null!==(o=this.priceImpactV)&&void 0!==o&&null!==(n=o.gt)&&void 0!==n&&n.call(o,.1)?"#F7933F":null!==(i=this.priceImpactV)&&void 0!==i&&null!==(a=i.gt)&&void 0!==a&&a.call(i,.05)?"#f8be46":""},contractAddress:function(){var e=this.bridge.contractAddress;return this.isSwap()?this.$f.getSwapContract(this.fromToken.chain):e},totalTxs:function(){var e,t,o,n,i,a,s=this,l="solana"===this.chain?null===(e=this.solanaTxs)||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,(function(e){return e.wallet_address===s.$store.state.currentAccount||!e.wallet_address})):this.swapTxs;"ton"===this.chain&&(l=null===(i=this.tonTxs)||void 0===i||null===(a=i.filter)||void 0===a?void 0:a.call(i,(function(e){return e.wallet_address===s.$store.state.currentAccount||!e.wallet_address})));var r=l.map((function(e){return Object(Ke["a"])(Object(Ke["a"])({},e),{},{createTimeT:1e3*e.time,txHash:e.transaction,fromTokenAddress:e.from_address,fromAmount:e.from_amount,fromTokenSymbol:e.from_symbol,toTokenAddress:e.to_address,toTokenAmount:e.to_amount,toTokenSymbol:e.to_symbol,status:1===e.is_merged?"success":(1e3*(null===e||void 0===e?void 0:e.time)<Date.now()-6e4||"timeout"===e.status||"fail"===e.status)&&0===e.is_merged?"fail"===e.status?"fail":"timeout":"pending"})})),c=[].concat(Object(Ge["a"])(this.txs),Object(Ge["a"])(r),Object(Ge["a"])(null===(o=this.okxBridgeTxs)||void 0===o||null===(n=o.filter)||void 0===n?void 0:n.call(o,(function(e){var t,o;return(null===e||void 0===e||null===(t=e.walletAddress)||void 0===t||null===(o=t.toLowerCase)||void 0===o?void 0:o.call(t))===s.$store.state.currentAccount||!e.walletAddress}))));return c=c.sort((function(e,t){return t.createTimeT-e.createTimeT})),c},estimatedFee:function(){var e=this.swapInfo.gasValue;if(!e)return"0";var t=this.gasPrice,o=this.nativePrice;return this.$f.formatNumber2(new Xo.a(e.toString()).times(o).times(t).div(String(Math.pow(10,18))).toFixed()||"0",2)},chain:function(){var e,t,o,n,i,a=this.$store.getters.netId||this.fromToken.chain;return"evm"!==localStorage.okxwallet_chain&&(window.solana||null!==(e=window)&&void 0!==e&&null!==(t=e.trustwallet)&&void 0!==t&&t.solana&&(null===(o=window.ethereum)||void 0===o||null===(n=o.address)||void 0===n||null===(i=n.startsWith)||void 0===i||!i.call(n,"0x"))&&window.ethereum.address)&&(a="solana"),a},isOnlyGetAmountsOut:function(){var e,t,o,n,i,a,s=["viridian","aerodrome"],l=(null===(e=this.fromTokenInfo)||void 0===e||null===(t=e.pairs)||void 0===t||null===(o=t[0])||void 0===o?void 0:o.amm)&&s.includes(null===(n=this.fromTokenInfo)||void 0===n||null===(i=n.pairs)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.amm);return"ton"===this.chain||l||!1},isInsufficientTon:function(){if("ton"===this.chain){var e,t,o,n,i=(null===(e=this.tonQuoteResponse)||void 0===e?void 0:e.totalTransferAmount)||0,a=(null===(t=this.userBalanceTokens)||void 0===t||null===(o=t.find)||void 0===o||null===(n=o.call(t,(function(e){return e.address===yt["k"]})))||void 0===n?void 0:n.initBalance)||0;if(i&&new Xo.a(i).gt(a))return!0}return!1}},watch:{contractAddress:function(e){e?(this.loadingText=this.$t("checkingAllowance"),this.getBalanceAndAllowance()):this.isSwap()||(this.allowance=Zo["a"].from(yt["i"]))},fromTokenAmount:function(e){""===e&&(this.bridge={dex:"",logoUrl:"",toTokenAmount:""},this.isSwap()&&this.isAmount&&(this.toAmount=""))},"$store.state.currentAccount":function(e){e&&!this.toAddress&&(this.toAddress=e)},show1:function(e){var t,o,n;console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(o=t._tw_)||void 0===o||null===(n=o.isRefreshEnable)||void 0===n||n.call(o,"bridge",!e)}},methods:{init:function(){var e,t,o,n,i,a,s,l,r,c,d=this;this.fromToken=Object(en["useStorage"])("bridge_FromToken",{address:"",chain:"",symbol:"",decimals:0},sessionStorage),this.toToken=Object(en["useStorage"])("bridge_toToken",{address:"",chain:"",symbol:"",decimals:0},sessionStorage),null!==(e=window)&&void 0!==e&&e.tronLink?Object(tn["a"])().then((function(e){console.log("connectTron"),console.log("currentAccount",d.$store.state.currentAccount),d.toAddress=e,d.currentTime=Date.now(),d.getBalance(),d.getUserTokenList(),d.getBridgeTokens()})):null!==(t=window)&&void 0!==t&&t.unisat?ln().then((function(e){console.log("connectUnisat"),console.log("currentAccount",d.$store.state.currentAccount),d.toAddress=e,d.currentTime=Date.now(),d.getBalance(),d.getUserTokenList(),d.getBridgeTokens()})):"evm"!==localStorage.okxwallet_chain&&(null!==(o=window)&&void 0!==o&&o.solana||null!==(n=window)&&void 0!==n&&null!==(i=n.trustwallet)&&void 0!==i&&i.solana&&(null===(a=window.ethereum)||void 0===a||null===(s=a.address)||void 0===s||null===(l=s.startsWith)||void 0===l||!l.call(s,"0x"))&&window.ethereum.address)?Object(un["d"])().then((function(e){console.log("connectSolana"),console.log("currentAccount",d.$store.state.currentAccount),d.toAddress=e,d.currentTime=Date.now(),d.getBalance(),d.getUserTokenList(),d.getBridgeTokens()})):null!==(r=window)&&void 0!==r&&null!==(c=r.mytonwallet)&&void 0!==c&&c.tonconnect?Object(hn["a"])().then((function(e){console.log("connectTonWallet"),console.log("currentAccount",d.$store.state.currentAccount),d.toAddress=e,d.currentTime=Date.now(),d.getBalance(),d.getUserTokenList(),d.getBridgeTokens()})):(this.fromToken.chain&&this.fromToken.chain!==this.$store.getters.netId&&window.ethereum&&Object(St["i"])(this.fromToken.chain),this.getBalance(),this.getUserTokenList(),this.getBridgeTokens()),this.getBridgeTransData(),this.appGetContactList(),this.getUserAllTxs(),this.$f.setSwapSendType(""),this.getGasBalance(),Object(Nt["R"])(),this.initOkxBridgeTxs()},getGasBalance:function(){var e=this;"tron"!==this.$store.getters.netId&&"brc20"!==this.$store.getters.netId&&"solana"!==this.$store.getters.netId&&"ton"!==this.$store.getters.netId&&Object(Nt["D"])().then((function(t){e.gasBalance=t}))},appGetContactList:function(){var e,t,o,n,i=this;if(null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appGetContactListV2){var a,s,l,r,c,d=this.toToken.chain||this.fromToken.chain||this.$store.getters.netId,u=null===(a=window)||void 0===a||null===(s=a._tw_)||void 0===s||null===(l=s.appGetContactListV2)||void 0===l?void 0:l.call(s,d);console.log("accounts",u),this.accounts=u&&Object(St["h"])(u)?JSON.parse(u):{wallet:[],contact:[]},console.log("this.accounts",this.accounts),this.tabActive=null!==(r=this.accounts)&&void 0!==r&&null!==(c=r.contact)&&void 0!==c&&c.some((function(e){return e.contact_address===i.toAddress}))?"contact":"wallet",console.log("tabActive",this.tabActive)}else if(null!==(o=window)&&void 0!==o&&null!==(n=o._tw_)&&void 0!==n&&n.appGetContactList){var m,b,p,h,f,v=null===(m=window)||void 0===m||null===(b=m._tw_)||void 0===b||null===(p=b.appGetContactList)||void 0===p?void 0:p.call(b);console.log("accounts",v),this.accounts=v&&Object(St["h"])(v)?JSON.parse(v):{wallet:[],contact:[]},console.log("this.accounts",this.accounts),this.tabActive=null!==(h=this.accounts)&&void 0!==h&&null!==(f=h.contact)&&void 0!==f&&f.some((function(e){return e.contact_address===i.toAddress}))?"contact":"wallet",console.log("tabActive",this.tabActive)}},getBridgeTokens:function(){var e=this;Object(Nt["v"])().then((function(t){console.log(t),e.tokens=t.tokens,e.initToken(),e.getSwapTokenList((function(){e.initToken()}))}))},initToken:function(){var e=this,t=this.$store.getters.netId,o=t?Object(Nt["s"])(this.$store.getters.netId,2)||t:"";if(o&&this.tokens[o]){var n,i;if(this.fromToken.address&&this.fromToken.bridgeChain){if(this.fromToken.address){var a=this.tokens[o].find((function(t){var o,n,i,a,s;return(null===(o=t.address)||void 0===o||null===(n=o.toLowerCase)||void 0===n?void 0:n.call(o))===(null===(i=e.fromToken)||void 0===i||null===(a=i.address)||void 0===a||null===(s=a.toLowerCase)||void 0===s?void 0:s.call(a))}));a&&(this.fromToken=Object(Ke["a"])(Object(Ke["a"])(Object(Ke["a"])({},this.fromToken),a),{},{chain:t,bridgeChain:o}))}}else{var s,l,r,c,d,u=(null===(s=this.tokens)||void 0===s||null===(l=s[o])||void 0===l||null===(r=l.find)||void 0===r?void 0:r.call(l,(function(e){return(null===e||void 0===e?void 0:e.address)===yt["k"]})))||(null===(c=this.tokens)||void 0===c||null===(d=c[o])||void 0===d?void 0:d[0]);this.fromToken=Object(Ke["a"])(Object(Ke["a"])({},u),{},{chain:t,bridgeChain:o})}if(this.toToken.address&&this.toToken.bridgeChain||null===(n=this.tokens)||void 0===n||null===(i=n[o])||void 0===i||!i[1]){if(this.toToken.address&&this.toToken.bridgeChain){var m=Object(Nt["s"])(this.toToken.bridgeChain),b=this.toToken.bridgeChain;if(m){var p=this.tokens[b].find((function(t){var o,n,i,a,s;return(null===(o=t.address)||void 0===o||null===(n=o.toLowerCase)||void 0===n?void 0:n.call(o))===(null===(i=e.toToken)||void 0===i||null===(a=i.address)||void 0===a||null===(s=a.toLowerCase)||void 0===s?void 0:s.call(a))}));p&&(this.toToken=Object(Ke["a"])(Object(Ke["a"])(Object(Ke["a"])({},this.toToken),p),{},{chain:m,bridgeChain:b}))}}}else{var h,f,v,g,k,O=null===(h=this.tokens)||void 0===h||null===(f=h[o])||void 0===f?void 0:f.find((function(e){return new RegExp("USDT").test(e.symbol)}));O=O||(null===(v=this.tokens)||void 0===v||null===(g=v[o])||void 0===g?void 0:g.find((function(e){return new RegExp("USDT").test(e.symbol)}))),this.toToken=Object(Ke["a"])(Object(Ke["a"])({},null!==(k=O)&&void 0!==k?k:this.tokens[o][1]),{},{chain:t,bridgeChain:o})}var j=(Object(yt["u"])(this.toToken.address)||"tron"===this.toToken.chain)&&!Object(yt["u"])(this.toAddress),w=(yt["o"].test(this.toToken.address)||"brc20"===this.toToken.chain)&&!yt["o"].test(this.toAddress),T=(Object(yt["s"])(this.toToken.address)||"solana"===this.toToken.chain)&&!Object(yt["s"])(this.toAddress),y=(Object(yt["t"])(this.toToken.address)||"ton"===this.toToken.chain)&&!Object(yt["t"])(this.toAddress),S=("TRON"!==this.toToken.bridgeChain||"tron"!==this.toToken.chain)&&("BTC"!==this.toToken.bridgeChain||"brc20"!==this.toToken.chain)&&("SOLANA"!==this.toToken.bridgeChain||"solana"!==this.toToken.chain)&&("TON"!==this.toToken.bridgeChain||"ton"!==this.toToken.chain)&&!yt["r"].test(this.toAddress);(j||w||S||T||y)&&(this.toAddress=""),this.fromToken.address&&this.fromToken.chain&&this.getBalanceAndAllowance()}},getBalanceAndAllowance:function(){var e=this;if("brc20"===this.fromToken.chain||"solana"===this.fromToken.chain||"ton"===this.fromToken.chain||this.fromToken.address===yt["k"])return this.allowance=Zo["a"].from(yt["i"]),this.getFromBalance(),void this.getToBalance();if(!this.fromToken.chain||this.fromToken.chain===this.$store.getters.netId){this.loadingText=this.$t("checkingAllowance"),this.loading1=!0;var t=this.isSwap()?this.$f.getSwapContract(this.fromToken.chain):this.bridge.contractAddress;Object(Nt["p"])(this.fromToken.address,t||this.bridge.contractAddress,this.fromToken.chain).then((function(t){e.allowance=t.allowance,e.fromToken.balance=xt["utils"].formatUnits(t.balance.toString(),e.fromToken.decimals)})).finally((function(){e.loading1=!1})),this.getToBalance()}},getBalance:function(){this.getFromBalance(),this.getToBalance()},getFromBalance:function(){var e=this;this.fromToken.address&&this.fromToken.chain&&this.$store.state.currentAccount&&Object(Nt["q"])(this.fromToken.address,this.fromToken.chain).then((function(t){t.decimals&&(e.fromToken.decimals=t.decimals),e.fromToken.balance=xt["utils"].formatUnits(null===t||void 0===t?void 0:t.balance.toString(),e.fromToken.decimals)}))},getToBalance:function(){var e=this;this.toToken.address&&this.toToken.chain&&this.$store.state.currentAccount&&Object(Nt["q"])(this.toToken.address,this.toToken.chain).then((function(t){t.decimals&&(e.toToken.decimals=t.decimals),e.toToken.balance=xt["utils"].formatUnits(null===t||void 0===t?void 0:t.balance.toString(),e.toToken.decimals)}))},watchFromAmount:function(e){var t=this;if(this.isSwap()){if(this.loading&&!this.isAmount)return;var o=Number(e);if(""===e||"."===e)return this.fromTokenAmount="",this.toAmount="",void(this.loading=!1);if(0===o&&0!==Number(this.toAmount))return this.toAmount=0,void(this.loading=!1);o&&(this.isAmount=!0,this.toAmount="")}(Number(e)<0||Number.isNaN(Number(e)))&&(this.fromTokenAmount="0"),this.fromToken.address&&this.toToken.address&&this.fromTokenAmount&&this.fromToken.bridgeChain&&this.toToken.bridgeChain&&this.$store.state.currentAccount&&(new Xo.a(this.fromTokenAmount).lte(0)||(rn&&(clearTimeout(rn),rn=null),this.loading=!0,this.loadingText=this.$t("lookingForBestChannel"),rn=setTimeout((function(){t.getBridgeQuote()}),500)))},watchToAmount:function(e){var t=this;if(this.isSwap()){if(this.loading&&this.isAmount)return;var o=Number(e);if(""===e||"."===e)return this.fromTokenAmount="",this.toAmount="",void(this.loading=!1);if(0===o&&0!==Number(this.fromTokenAmount))return this.fromTokenAmount=0,void(this.loading=!1);o&&(this.fromTokenAmount="",this.isAmount=!1)}(Number(e)<0||Number.isNaN(Number(e)))&&(this.toAmount="0"),this.fromToken.address&&this.toToken.address&&this.toAmount&&this.fromToken.bridgeChain&&this.toToken.bridgeChain&&this.$store.state.currentAccount&&(new Xo.a(this.toAmount).lte(0)||(rn&&(clearTimeout(rn),rn=null),this.loading=!0,this.loadingText=this.$t("lookingForBestChannel"),rn=setTimeout((function(){t.getBridgeQuote(!1)}),500)))},handelTokenChange:function(e){if(this.bridgeList=[],this.bridge={},"from"===e){var t;this.fromTokenAmount="";var o=this.isSwap()?this.$f.getSwapContract(this.fromToken.chain):this.bridge.contractAddress;o?this.getBalanceAndAllowance():this.getFromBalance(),0!==(null===(t=this.userBalanceTokens)||void 0===t?void 0:t.length)&&this.userBalanceTokens[0].chain===this.fromToken.chain||this.getUserTokenList()}else{this.getToBalance();var n=(Object(yt["u"])(this.toToken.address)||"tron"===this.toToken.chain)&&!Object(yt["u"])(this.toAddress),i=("TRON"!==this.toToken.bridgeChain||"tron"!==this.toToken.chain)&&!yt["r"].test(this.toAddress)&&("BTC"!==this.toToken.bridgeChain||"brc20"!==this.toToken.chain)&&("SOLANA"!==this.toToken.bridgeChain||"solana"!==this.toToken.chain)&&("TON"!==this.toToken.bridgeChain||"ton"!==this.toToken.chain),a=(yt["o"].test(this.toToken.address)||"tron"===this.toToken.chain)&&!yt["o"].test(this.toAddress),s=(Object(yt["s"])(this.toToken.address)||"solana"===this.toToken.chain)&&!Object(yt["s"])(this.toAddress),l=(Object(yt["t"])(this.toToken.address)||"ton"===this.toToken.chain)&&!Object(yt["t"])(this.toAddress);(n||i||a||s||l)&&(this.toAddress=""),this.appGetContactList()}this.watchFromAmount(this.fromTokenAmount)},onCountDownFinish:function(){var e,t;this.loading||this.loading1||this.loadingConfirm||this.show||"hidden"===document.visibilityState||null!==(e=this.$refs)&&void 0!==e&&null!==(t=e.selectDex)&&void 0!==t&&t.show?this.countDownFinishReset():(this.bridgeList=[],this.bridge={},this.isSwap()&&!this.isAmount?this.watchToAmount(this.toAmount):this.watchFromAmount(this.fromTokenAmount))},countDownFinishReset:function(){this.$refs.countDown.reset(),this.isSwap()&&this.dialogVisibleSwap&&.5===this.errorCode&&!this.loadingConfirmSwap&&this.getSwapTx(!1)},switchToken:function(){var e=Object(Ke["a"])({},this.fromToken);this.fromToken=this.toToken,this.toToken=e,this.fromTokenAmount="",this.getBridgeQuote(),this.getBalanceAndAllowance(),this.fromToken.chain!==this.$store.getters.netId&&Object(St["i"])(this.fromToken.chain)},getBridgeQuote:function(){var e,t=this;if(this.fromToken.address&&this.toToken.address&&(this.fromTokenAmount||this.toAmount)&&this.fromToken.bridgeChain&&this.toToken.bridgeChain&&this.$store.state.currentAccount){if(this.fromToken.address===this.toToken.address&&this.fromToken.bridgeChain===this.toToken.bridgeChain)return this.okxBridgeError="",this.$toast({position:"top",message:this.$t("twoTokensCannotBeTheSame")}),void(this.loading=!1);if(this.isSwap())this.getQuoteInfo(this.isAmount);else{if(!this.$refs.selectFrom.isCanSwap||!this.$refs.selectTo.isCanSwap){this.okxBridgeError="";var o=this.$refs.selectFrom.isCanSwap?this.toToken.chain:this.fromToken.chain,n=Object(Nt["s"])(o,2);if(!n){var i,a=Vt["a"].get("chainConfig",yt["l"])||{};null===(i=a[o])||void 0===i||i.name;return this.$toast({position:"top",message:this.$t("tokenDoesNotSupportCross-chain")}),void(this.loading=!1)}var s=this.$refs.selectFrom.isCanSwap?this.toToken.symbol:this.fromToken.symbol;return this.$toast({position:"top",message:"".concat(s," ")+this.$t("tokenDoesNotSupportCross-chain")}),void(this.loading=!1)}var l=""===this.toAddress,r=(Object(yt["u"])(this.toToken.address)||"tron"===this.toToken.chain)&&!Object(yt["u"])(this.toAddress),c=("TRON"!==this.toToken.bridgeChain||"tron"!==this.toToken.chain)&&!yt["r"].test(this.toAddress)&&("BTC"!==this.toToken.bridgeChain||"brc20"!==this.toToken.chain)&&("SOLANA"!==this.toToken.bridgeChain||"solana"!==this.toToken.chain)&&("TON"!==this.toToken.bridgeChain||"ton"!==this.toToken.chain),d=(yt["o"].test(this.toToken.address)||"brc20"===this.toToken.chain)&&!yt["o"].test(this.toAddress),u=(Object(yt["s"])(this.toToken.address)||"solana"===this.toToken.chain)&&!Object(yt["s"])(this.toAddress),m=(Object(yt["t"])(this.toToken.address)||"ton"===this.toToken.chain)&&!Object(yt["t"])(this.toAddress);if(l||r||c||d||u||m)return this.okxBridgeError="",this.$toast({position:"top",message:this.$t("pleaseEnterCorrectReceiveAddress")}),void(this.loading=!1);var b=this.fromToken.chain,p=this.toToken.chain;if(Object(Nt["s"])(b,2)&&Object(Nt["s"])(p,2)){var h={fromTokenAddress:this.fromToken.address,toTokenAddress:this.toToken.address,fromTokenAmount:null===(e=xt["utils"].parseUnits(this.fromTokenAmount,this.fromToken.decimals||0))||void 0===e?void 0:e.toString(),fromTokenChain:this.fromToken.bridgeChain,toTokenChain:this.toToken.bridgeChain,toAddress:this.toAddress||this.$store.state.currentAccount||"",slippage:this.slippage};this.okxBridgeError="",this.loading=!0,this.loadingText=this.$t("lookingForBestChannel"),Object(Nt["t"])(h).then((function(e){var o,n,i,a=(e.txData||[]).filter((function(e){return h.fromTokenChain!==h.toTokenChain&&["SWFT","Bridgers","Aggregator"].includes(e.dex)||h.fromTokenChain===h.toTokenChain}));if(null!==(o=window)&&void 0!==o&&null!==(n=o._tw_)&&void 0!==n&&n.appSendSwftTxs&&"ETH"!==h.fromTokenChain&&"TRON"!==h.fromTokenChain&&"BTC"!==h.toTokenChain||(a=a.map((function(e){return Object(Ke["a"])(Object(Ke["a"])({},e),{},{isSupportNoGas:!1})}))),t.hasNoGas()){var s=a.findIndex((function(e){return e.isSupportNoGas}));if(s>-1&&a.length>1){var l=Object(Ke["a"])({},a[s]),r=Object(Ke["a"])({},a[0]);a[0]=l,a[s]=r}}t.bridgeList=a,t.bridge=Object(Ke["a"])({},t.bridgeList[0]),null!==(i=t.bridgeList)&&void 0!==i&&i[0]||t.$toast({position:"top",message:t.$t("noChannel")})})).catch((function(e){console.log(e),t.$toast({position:"top",message:e})})).finally((function(){t.loading=!1,t.countDownFinishReset()}))}else this.getOkxBridgeQuote()}}else this.okxBridgeError=""},getOkxBridgeQuote:function(){var e,t,o,n=this,i={fromChainId:Object(Nt["A"])(this.fromToken.chain),toChainId:Object(Nt["A"])(this.toToken.chain),fromTokenAddress:null===(e=this.fromToken)||void 0===e?void 0:e.address,toTokenAddress:null===(t=this.toToken)||void 0===t?void 0:t.address,amount:null===(o=xt["utils"].parseUnits(this.fromTokenAmount,this.fromToken.decimals||0))||void 0===o?void 0:o.toString(),slippage:new Xo.a(this.slippage).div(100).toFixed(),priceImpactProtectionPercentage:.4,sort:"2",userWalletAddress:this.$store.state.currentAccount,receiveAddress:this.toAddress||this.$store.state.currentAccount||""};Object(Nt["P"])(i).then((function(e){var t,o,i,a,s;n.okxBridgeError="",console.log("getOkxBridgeQuote",e),null!==e&&void 0!==e&&e[0]||n.$toast({position:"top",message:n.$t("noChannel")}),n.bridgeList=null===e||void 0===e?void 0:e.map((function(e){var t;return Object(Ke["a"])(Object(Ke["a"])({},e),{},{toTokenAmount:xt["utils"].formatUnits(e.toTokenAmount||"0",n.toToken.decimals||0),dex:(null===e||void 0===e||null===(t=e.router)||void 0===t?void 0:t.bridgeName)||"OKX"})}));var l=Object(Nt["Q"])(n.fromToken.chain);n.bridge=Object(Ke["a"])(Object(Ke["a"])({},n.bridgeList[0]),{},{isOkx:!0,contractAddress:l});var r=yt["k"]+"-"+(null===(t=n.fromToken)||void 0===t?void 0:t.chain),c=(null===(o=n.bridge)||void 0===o||null===(i=o.router)||void 0===i?void 0:i.crossChainFeeTokenAddress)+"-"+(null===(a=n.fromToken)||void 0===a?void 0:a.chain),d=(null===(s=n.bridge)||void 0===s?void 0:s.router)||{},u=d.crossChainFee,m=d.otherNativeFee,b=[r];Number(u||0)>0&&b.push(c),b.length>0&&Object(Nt["ib"])(b).then((function(e){var t,o;console.log("getTokensPrice",e);var i=e[0],a=e[1],s=a?new Xo.a(u||0).times((null===a||void 0===a?void 0:a.current_price_usd)||0).div(new Xo.a(10).pow(a.decimals||(null===a||void 0===a?void 0:a.decimal)||0)):new Xo.a(0),l=i?new Xo.a(m||0).times((null===i||void 0===i?void 0:i.current_price_usd)||0).div(new Xo.a(10).pow(i.decimals||(null===i||void 0===i?void 0:i.decimal)||0)):new Xo.a(0),r=(null===(t=n.bridge)||void 0===t?void 0:t.tx)||{},c=r.gasPrice,d=r.gasLimit,b=i?new Xo.a(c||0).times(d||0).times((null===i||void 0===i?void 0:i.current_price_usd)||0).div(new Xo.a(10).pow(i.decimals||(null===i||void 0===i?void 0:i.decimal)||0)):new Xo.a(0),p=new Xo.a(s).plus(new Xo.a(l)).plus(new Xo.a(b)).toFixed();n.bridge=Object(Ke["a"])(Object(Ke["a"])({},n.bridge),{},{okxFee:p,receiveTokenAmount:null===(o=n.bridge)||void 0===o?void 0:o.toTokenAmount})}))})).catch((function(e){n.okxBridgeError=e})).finally((function(){n.loading=!1,n.countDownFinishReset()}))},getBridgeSwap:function(){var e,t,o=this;if(null!==(e=this.bridge)&&void 0!==e&&e.isOkx)this.getOkxBridgeSwap();else{var n={fromTokenAddress:this.fromToken.address,toTokenAddress:this.toToken.address,fromAddress:this.$store.state.currentAccount,amountOutMin:this.bridge.amountOutMin||this.$f.formatNumShort(this.bridge.toTokenAmount*(1-this.slippage/100),3)||"0",routerPath:this.bridge.path,amounts:[],dex:this.bridge.dex,aggregator:"",fromTokenChain:this.fromToken.bridgeChain,toTokenChain:this.toToken.bridgeChain,toAddress:this.toAddress||this.$store.state.currentAccount||"",fromTokenAmount:this.bridge.fromTokenAmount,slippage:this.slippage,isNoGas:(null===(t=this.bridge)||void 0===t?void 0:t.isSupportNoGas)||!1};this.loading=!0,this.loadingText=this.$t("oneClickCrossChain"),Object(Nt["u"])(n).then((function(e){var t,i,a,s;(console.log(null===e||void 0===e||null===(t=e.txData)||void 0===t?void 0:t.noGasTxInfo),"TRON"===n.fromTokenChain||"BTC"===n.fromTokenChain||"SOLANA"===n.fromTokenChain||"TON"===n.fromTokenChain)?o.bridgeSwapTxData=Object(Ke["a"])(Object(Ke["a"])({},(null===e||void 0===e?void 0:e.txData)||{}),{},{bridge:n,txInfo:Object(Ke["a"])(Object(Ke["a"])({},n),{},{toTokenAmount:o.bridge.toTokenAmount}),isSupportNoGas:null!==(i=null===n||void 0===n?void 0:n.isNoGas)&&void 0!==i&&i}):o.bridgeSwapTxData=Object(Ke["a"])(Object(Ke["a"])({from:(null===e||void 0===e||null===(a=e.txData)||void 0===a?void 0:a.from)||o.$store.state.currentAccount||void 0},(null===e||void 0===e?void 0:e.txData)||{}),{},{txInfo:Object(Ke["a"])(Object(Ke["a"])({},n),{},{toTokenAmount:o.bridge.toTokenAmount}),isSupportNoGas:null!==(s=null===n||void 0===n?void 0:n.isNoGas)&&void 0!==s&&s});e.txData?o.show=!0:o.$toast({position:"top",message:o.$t("failedTransation")})})).catch((function(e){console.log(e),o.$toast({position:"top",message:e})})).finally((function(){o.countDownFinishReset(),o.loading=!1}))}},getOkxBridgeSwap:function(){var e,t,o,n={fromTokenAddress:this.fromToken.address,toTokenAddress:this.toToken.address,fromAddress:this.$store.state.currentAccount,amountOutMin:this.bridge.amountOutMin||this.$f.formatNumShort(this.bridge.toTokenAmount*(1-this.slippage/100),3)||"0",routerPath:this.bridge.path,amounts:[],dex:this.bridge.dex,aggregator:"",fromTokenChain:this.fromToken.chain,toTokenChain:this.toToken.chain,toAddress:this.toAddress||this.$store.state.currentAccount||"",fromTokenAmount:this.fromTokenAmount,toTokenAmount:this.toTokenAmount,slippage:this.slippage,fromToken:this.fromToken,toToken:this.toToken,from_address_logo_url:null===(e=this.fromToken)||void 0===e?void 0:e.logo_url,to_address_logo_url:null===(t=this.toToken)||void 0===t?void 0:t.logo_url};this.loading=!0,this.loadingText=this.$t("oneClickCrossChain"),this.bridgeSwapTxData=Object(Ke["a"])(Object(Ke["a"])({},this.bridge.tx),{},{txInfo:Object(Ke["a"])(Object(Ke["a"])({},n),{},{toTokenAmount:this.bridge.toTokenAmount,isOkx:!0})}),null!==(o=this.bridge)&&void 0!==o&&o.isOkx&&(this.show=!0,this.loading=!1)},confirmSwap:function(){var e,t,o,n,i,a,s,l,r=this;if("TRON"===(null===(e=this.bridgeSwapTxData)||void 0===e||null===(t=e.bridge)||void 0===t?void 0:t.fromTokenChain))this.confirmSwapTron();else if("BTC"===(null===(o=this.bridgeSwapTxData)||void 0===o||null===(n=o.bridge)||void 0===n?void 0:n.fromTokenChain))this.confirmSwapBTC();else if("SOLANA"===(null===(i=this.bridgeSwapTxData)||void 0===i||null===(a=i.bridge)||void 0===a?void 0:a.fromTokenChain))this.confirmSwapSolana();else if("TON"===(null===(s=this.bridgeSwapTxData)||void 0===s||null===(l=s.bridge)||void 0===l?void 0:l.fromTokenChain))this.confirmSwapTon();else if(this.bridgeSwapTxData.to){var c,d;console.log(this.bridgeSwapTxData),this.bridgeSwapTxData.isSupportNoGas&&null!==(c=window)&&void 0!==c&&null!==(d=c._tw_)&&void 0!==d&&d.appSendSwftTxs&&"ETH"!==this.bridgeSwapTxData.bridge.fromTokenChain?this.confirmNoGasSwap():(this.loadingConfirm=!0,Object(Nt["zb"])(this.bridgeSwapTxData).then((function(e){var t,o,n,i,a;r.txHash=e.hash;var s={fromTokenAmount:null===e||void 0===e||null===(t=e.transferData)||void 0===t?void 0:t.fromTokenAmount,fromTokenAddress:null===e||void 0===e||null===(o=e.transferData)||void 0===o?void 0:o.fromTokenAddress,fromAddress:null===e||void 0===e||null===(n=e.transferData)||void 0===n?void 0:n.fromAddress};return null!==(i=r.bridgeSwapTxData)&&void 0!==i&&null!==(a=i.txInfo)&&void 0!==a&&a.isOkx?r.getOkxBridgeTxStatus({hash:e.hash}):r.addBridgeTransData(e.hash,s),r.show=!1,r.fromTokenAmount="",r.bridge={dex:"",logoUrl:""},""!==e.hash&&(r.confirmTxVisible=!0),e.wait()})).then((function(e){console.log(e),r.getBalanceAndAllowance()})).catch((function(e){r.$f.handleError(e)})).finally((function(){r.loadingConfirm=!1})))}},getOkxBridgeTxStatus:function(e){var t,o,n,i,a,s,l,r,c,d,u,m,b,p,h,f=this,v=e.hash;if(v&&"Bridge"===this.$route.name){var g={fromTokenSymbol:null===this||void 0===this||null===(t=this.fromToken)||void 0===t?void 0:t.symbol,fromAmount:null===this||void 0===this?void 0:this.fromTokenAmount,toTokenAddress:null===this||void 0===this||null===(o=this.toToken)||void 0===o?void 0:o.address,toTokenAmount:null===this||void 0===this?void 0:this.toTokenAmount,toTokenSymbol:null===this||void 0===this||null===(n=this.toToken)||void 0===n?void 0:n.symbol,toTokenChain:null===this||void 0===this||null===(i=this.toToken)||void 0===i?void 0:i.chain,fromTokenAddress:null===this||void 0===this||null===(a=this.fromToken)||void 0===a?void 0:a.address,fromDecimals:null===this||void 0===this||null===(s=this.fromToken)||void 0===s?void 0:s.decimals,toDecimals:null===this||void 0===this||null===(l=this.toToken)||void 0===l?void 0:l.decimals,txHash:v,fromTokenChain:null===this||void 0===this||null===(r=this.fromToken)||void 0===r?void 0:r.chain,status:"pending",createTimeT:Date.now(),dexName:(null===this||void 0===this||null===(c=this.bridge)||void 0===c?void 0:c.dex)||"OKX",walletAddress:this.$store.state.currentAccount,receiveAddress:this.toAddress||(null===(d=this.bridgeSwapTxData)||void 0===d?void 0:d.toAddress)||"",from_address_logo_url:(null===(u=this.fromToken)||void 0===u?void 0:u.logo_url)||(null===(m=this.fromToken)||void 0===m?void 0:m.logoURI)||"",to_address_logo_url:(null===(b=this.toToken)||void 0===b?void 0:b.logo_url)||(null===(p=this.toToken)||void 0===p?void 0:p.logoURI)||"",isOkx:!0};null!==(h=this.okxBridgeTxs)&&void 0!==h&&h.some((function(e){return e.txHash===g.txHash}))||(this.okxBridgeTxs=[g].concat(Object(Ge["a"])(this.okxBridgeTxs)));for(var k=[],O=function(e){var t=f.okxBridgeTxs[e];k.some((function(e){return e.txHash===t.txHash}))||k.unshift(t)},j=this.okxBridgeTxs.length-1;j>=0;j--)O(j);this.okxBridgeTxs=k,Object(Nt["S"])({hash:v}).then((function(e){console.log(e);var t,o,n,i=null===e||void 0===e?void 0:e[0];i&&(f.okxBridgeTxs=null===(t=f.okxBridgeTxs)||void 0===t||null===(o=t.map)||void 0===o?void 0:o.call(t,(function(e){return e.txHash===i.fromTxHash?(console.log(e,i),Object(Ke["a"])(Object(Ke["a"])(Object(Ke["a"])({},e),i),{},{fromAmount:null!==i&&void 0!==i&&i.fromAmount&&"0"!==(null===i||void 0===i?void 0:i.fromAmount)?xt["utils"].formatUnits(null===i||void 0===i?void 0:i.fromAmount,e.fromDecimals):null===e||void 0===e?void 0:e.fromAmount,toTokenAmount:i.toAmount&&"0"!==i.toAmount?xt["utils"].formatUnits(i.toAmount,e.toDecimals):null===e||void 0===e?void 0:e.toTokenAmount,status:"NOT_FOUND"===i.status&&Date.now()-e.createTimeT<6e4?"pending":i.status})):e})),"SUCCESS"===(null===(n=f.txInfo)||void 0===n?void 0:n.status)||"NOT_FOUND"===i.status&&Date.now()-g.createTimeT<6e4?f.getBalanceAndAllowance():setTimeout((function(){f.getOkxBridgeTxStatus({hash:v})}),1e4))}))}},initOkxBridgeTxs:function(){var e=this;return Object(Qe["a"])(regeneratorRuntime.mark((function t(){var o,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pn.a.getItem("okxBridgeTxs").catch(Object(Qe["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))));case 2:o=t.sent,n=Object(He["a"])(o),t.prev=4,n.s();case 6:if((i=n.n()).done){t.next=14;break}if(a=i.value,"SUCCESS"===(null===a||void 0===a?void 0:a.status)||"NOT_FOUND"===a.status&&Date.now()-a.createTimeT<6e4){t.next=12;break}return e.getOkxBridgeTxStatus({hash:a.fromTxHash}),t.next=12,vn(1e4);case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](4),n.e(t.t0);case 19:return t.prev=19,n.f(),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[4,16,19,22]])})))()},confirmNoGasSwap:function(){var e,t=this;if(this.bridgeSwapTxData.isSupportNoGas&&(null!==(e=window)&&void 0!==e&&e._tw_)){var o,n,i;this.loadingConfirm=!0;var a={ave_method:"appSendSwftTxs",transactionData:this.bridgeSwapTxData.noGasTxInfo,orderId:this.bridgeSwapTxData.orderId};console.log(a),this.loadingConfirm=!0,null===(o=window)||void 0===o||null===(n=o.ethereum)||void 0===n||null===(i=n.request)||void 0===i||i.call(n,{method:"wallet_switchEthereumChain",params:[a]}).then((function(e){console.log("appSendSwftTxs result json",e);var o=e;if(e&&Object(St["h"])(e)){var n,i;if(o=JSON.parse(e),console.log("appSendSwftTxs result object",e),800!==Number(o.resCode))return t.$toast({position:"top",message:null===(i=o)||void 0===i?void 0:i.resMsg}),void(t.loadingConfirm=!1);o=(null===(n=o)||void 0===n?void 0:n.data)||o||{}}if(t.txHash=o.transactionHash,t.addBridgeTransData(t.txHash),t.show=!1,t.fromTokenAmount="",t.bridge={dex:"",logoUrl:""},""!==o.transactionHash&&(t.confirmTxVisible=!0),o.transactionHash&&window.ethereum){var a=new xt["providers"].Web3Provider(window.ethereum);a.waitForTransaction(o.transactionHash).then((function(e){console.log(e),t.getBalanceAndAllowance()}))}})).catch((function(e){t.$f.handleError(e)})).finally((function(){t.loadingConfirm=!1}))}},confirmSwapTron:function(){var e=this;return Object(Qe["a"])(regeneratorRuntime.mark((function t(){var o,n,i,a,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.bridgeSwapTxData),"TRON"===(null===(o=e.bridgeSwapTxData)||void 0===o||null===(n=o.bridge)||void 0===n?void 0:n.fromTokenChain)&&(a=null===(i=e.bridgeSwapTxData)||void 0===i?void 0:i.bridge,"SWFT"===a.dex?(e.loadingConfirm=!0,a.fromTokenAddress===yt["k"]?(s=window.tronWeb,s.trx.sendTransaction(e.bridgeSwapTxData.platformAddr,a.fromTokenAmount).then((function(t){var o;console.log("sendTransaction",t);var n=null===t||void 0===t||null===(o=t.transaction)||void 0===o?void 0:o.txID;e.txHash=n,e.addBridgeTransData(n),e.show=!1,e.fromTokenAmount="",e.bridge={dex:"",logoUrl:""},""!==n&&(e.confirmTxVisible=!0)})).catch((function(t){console.log(t),e.$f.handleError(t)})).finally((function(){e.loadingConfirm=!1}))):Object(Nt["c"])(a.fromTokenAddress,e.bridgeSwapTxData.platformAddr,a.fromTokenAmount).then((function(t){var o,n;(console.log("TRC20Transfer",t),null!==t&&void 0!==t&&t.hash)&&(e.txHash=null===(o=t.hash)||void 0===o||null===(n=o.transaction)||void 0===n?void 0:n.txID,e.addBridgeTransData(e.txHash),e.show=!1,e.fromTokenAmount="",e.bridge={dex:"",logoUrl:""},""!==e.txHash&&(e.confirmTxVisible=!0));return t.wait()})).then((function(t){console.log(t),e.getBalanceAndAllowance()})).catch((function(t){console.log("error",t),e.$f.handleError(t.error||t.code||t)})).finally((function(){e.loadingConfirm=!1}))):(l=window.tronWeb,e.loadingConfirm=!0,l.transactionBuilder.triggerSmartContract(e.bridgeSwapTxData.tronRouterAddrees,e.bridgeSwapTxData.functionName,e.bridgeSwapTxData.options,e.bridgeSwapTxData.parameter,e.bridgeSwapTxData.fromAddress).then((function(t){var o;return console.log("triggerSmartContract result",t),e.txHash=null===t||void 0===t||null===(o=t.transaction)||void 0===o?void 0:o.txID,l.trx.sign(t.transaction)})).then((function(e){return console.log("signedTx",e),l.trx.sendRawTransaction(e)})).then((function(t){if(console.log("broastTx",t),!t.result)throw new Error(t.code);var o=e.txHash;o&&(e.addBridgeTransData(o),e.show=!1,e.fromTokenAmount="",e.bridge={dex:"",logoUrl:""},""!==o&&(e.confirmTxVisible=!0))})).catch((function(t){e.$f.handleError(t.code||t)})).finally((function(){e.loadingConfirm=!1}))));case 2:case"end":return t.stop()}}),t)})))()},confirmSwapTon:function(){var e=this;return Object(Qe["a"])(regeneratorRuntime.mark((function t(){var o,n,i,a,s,l,r,c,d,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.bridgeSwapTxData),"TON"===(null===(o=e.bridgeSwapTxData)||void 0===o||null===(n=o.bridge)||void 0===n?void 0:n.fromTokenChain)&&(l=null===(i=e.bridgeSwapTxData)||void 0===i?void 0:i.bridge,r=null===(a=e.bridgeSwapTxData)||void 0===a||null===(s=a.platformAddr)||void 0===s?void 0:s.split("#"),c=Object(We["a"])(r,2),d=c[0],u=c[1],e.loadingConfirm=!0,Object(hn["g"])({token:l.fromTokenAddress,address:d,amount:l.fromTokenAmount,comment:u}).then((function(t){return null!==t&&void 0!==t&&t.hash&&(e.txHash=t.hash,e.addBridgeTransData(e.txHash),e.show=!1,e.fromTokenAmount="",e.bridge={dex:"",logoUrl:""},""!==e.txHash&&(e.confirmTxVisible=!0)),t.wait()})).then((function(t){console.log(t),e.getBalanceAndAllowance()})).catch((function(t){console.log("error",t),e.$f.handleError(t.error||t.code||t)})).finally((function(){e.loadingConfirm=!1})));case 2:case"end":return t.stop()}}),t)})))()},confirmSwapTronOkx:function(){var e=this;return Object(Qe["a"])(regeneratorRuntime.mark((function t(){var o,n,i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.bridgeSwapTxData),"tron"===(null===(o=e.bridgeSwapTxData)||void 0===o||null===(n=o.bridge)||void 0===n?void 0:n.fromTokenChain)&&(a=null===(i=e.bridgeSwapTxData)||void 0===i?void 0:i.bridge,e.loadingConfirm=!0,s=window.tronWeb,s.trx.sendTransaction(e.bridgeSwapTxData.platformAddr,a.fromTokenAmount).then((function(t){var o;console.log("sendTransaction",t);var n=null===t||void 0===t||null===(o=t.transaction)||void 0===o?void 0:o.txID;e.txHash=n,e.addBridgeTransData(n),e.show=!1,e.fromTokenAmount="",e.bridge={dex:"",logoUrl:""},""!==n&&(e.confirmTxVisible=!0)})).catch((function(t){console.log(t),e.$f.handleError(t)})).finally((function(){e.loadingConfirm=!1})));case 2:case"end":return t.stop()}}),t)})))()},confirmSwapBTC:function(){var e=this;return Object(Qe["a"])(regeneratorRuntime.mark((function t(){var o,n,i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.bridgeSwapTxData),"BTC"===(null===(o=e.bridgeSwapTxData)||void 0===o||null===(n=o.bridge)||void 0===n?void 0:n.fromTokenChain)&&(a=null===(i=e.bridgeSwapTxData)||void 0===i?void 0:i.bridge,"SWFT"===a.dex&&(e.loadingConfirm=!0,a.fromTokenAddress===yt["k"]&&(s=window.unisat,null===s||void 0===s||s.sendBitcoin(e.bridgeSwapTxData.platformAddr,Number(a.fromTokenAmount)).then((function(t){console.log("sendBitcoin",t);var o=t;e.txHash=o,e.addBridgeTransData(o),e.show=!1,e.fromTokenAmount="",e.bridge={dex:"",logoUrl:""},""!==o&&(e.confirmTxVisible=!0)})).catch((function(t){console.log(t),e.$f.handleError(t)})).finally((function(){e.loadingConfirm=!1})))));case 2:case"end":return t.stop()}}),t)})))()},confirmSwapSolana:function(){var e=this;return Object(Qe["a"])(regeneratorRuntime.mark((function t(){var o,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("solana",e.bridgeSwapTxData),"SOLANA"===(null===(o=e.bridgeSwapTxData)||void 0===o||null===(n=o.bridge)||void 0===n?void 0:n.fromTokenChain)&&(a=null===(i=e.bridgeSwapTxData)||void 0===i?void 0:i.bridge,"SWFT"===a.dex&&(e.loadingConfirm=!0,Object(un["l"])(e.bridgeSwapTxData.platformAddr,a.fromTokenAddress,Number(a.fromTokenAmount)).then((function(t){console.log("sendSolanaToken",t);var o=t;e.txHash=o,e.addBridgeTransData(o),e.show=!1,e.fromTokenAmount="",e.bridge={dex:"",logoUrl:""},""!==o&&(e.confirmTxVisible=!0)})).catch((function(t){console.log("error",t),e.$f.handleError(t)})).finally((function(){e.loadingConfirm=!1}))));case 2:case"end":return t.stop()}}),t)})))()},approve:function(){var e=this;this.loading=!0,this.loadingApprove=!0,this.loadingText=this.$t("approve");var t=this.isSwap()?this.$f.getSwapContract(this.fromToken.chain):this.bridge.contractAddress;"bsc"!==this.$store.getters.netId&&"eth"!==this.$store.getters.netId||this.$f.setSwapSendType("fast"),Object(Nt["i"])(this.fromToken.address,t).then((function(e){return e.wait()})).then((function(t){console.log(t),e.getBalanceAndAllowance(),e.getGasBalance()})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loading=!1,e.loadingApprove=!1,e.$f.setSwapSendType("")}))},onSubmit:function(){var e=this;1===this.errorCode?this.$store.dispatch("handleWalletAddress").then((function(t){"tron"===t&&(e.getBalance(),e.getUserTokenList(),e.getBridgeTokens())})):-1===this.errorCode?this.approve():this.isSwap()?this.getSwapTx():this.getBridgeSwap()},handleMax:function(){var e,t=null===(e=this.fromToken)||void 0===e?void 0:e.balance;if(this.fromToken.address===yt["k"]||"So11111111111111111111111111111111111111112"===this.fromToken.address){var o=this.fromToken.chain,n=yt["j"][o]||.01;t=new Xo.a(t).minus(n).toFixed()}if(Number(t)>0){if(this.fromTokenAmount===t)return;this.fromTokenAmount=t,this.watchFromAmount(this.fromTokenAmount)}},addBridgeTransData:function(){var e,t,o,n,i,a=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.txHash,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(s){this.bridgeHashTimes[s]=((null===(e=this.bridgeHashTimes)||void 0===e?void 0:e[s])||0)+1;var r=(null===(t=this.bridgeSwapTxData)||void 0===t?void 0:t.txInfo)||{},c={fromTokenAddress:l.fromTokenAddress||r.fromTokenAddress||this.fromToken.address,toTokenAddress:r.toTokenAddress||this.toToken.address,fromAddress:l.fromAddress||r.fromAddress||this.$store.state.currentAccount,toAddress:r.toAddress||this.toAddress||this.$store.state.currentAccount||"",fromTokenAmount:l.fromTokenAmount||r.fromTokenAmount||this.bridge.fromTokenAmount,fromChain:r.fromTokenChain||this.fromToken.bridgeChain,toChain:r.toTokenChain||this.toToken.bridgeChain,slippage:r.slippage||this.slippage,hash:s,toTokenAmount:r.toTokenAmount||this.toTokenAmount,dexName:r.dex||this.bridge.dex,transferData:null!==(o=null===(n=this.bridgeSwapTxData)||void 0===n?void 0:n.transferData)&&void 0!==o?o:null,orderId:null===(i=this.bridgeSwapTxData)||void 0===i?void 0:i.orderId};Object(Nt["d"])(c).then((function(e){console.log(e),a.getBridgeTransData(s),["success","refund_complete"].includes(null===e||void 0===e?void 0:e.finalStatus)?a.$toast.success(a.$t("swapSucceed")):a.getBridgeTransDetail(s),a.bridgeHashTimes={}})).catch((function(e){var t;console.log(e),((null===(t=a.bridgeHashTimes)||void 0===t?void 0:t[s])||0)<3?setTimeout((function(){a.addBridgeTransData(s,l)}),2e3):a.$toast({position:"top",message:e})}))}},getBridgeTransDetail:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.txHash;Object(Nt["x"])(t).then((function(o){console.log(o),["success","refund_complete"].includes(null===o||void 0===o?void 0:o.finalStatus)?(e.confirmTxVisible=!1,e.$toast.success(e.$t("swapSucceed")),e.getBridgeTransData()):setTimeout((function(){e.getBridgeTransDetail(t)}),8e3)})).catch((function(t){console.log(t),e.$toast({position:"top",message:t})}))},getBridgeTransData:function(){var e=this,t={pageNo:1,pageSize:1e3};this.$store.state.currentAccount&&(this.loadingTxs=!0,Object(Nt["w"])(t).then((function(t){var o;console.log(t),e.txs=null!==(o=t.list)&&void 0!==o?o:[]})).catch((function(t){console.log(t),e.$toast({position:"top",message:t})})).finally((function(){e.loadingTxs=!1})))},getRate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fromTokenAmount&&this.toTokenAmount?0===e?this.$f.formatNumber2(new Xo.a(this.fromTokenAmount).div(this.toTokenAmount).toFixed()):this.$f.formatNumber2(new Xo.a(this.toTokenAmount).div(this.fromTokenAmount).toFixed()):"--"},goBridgeTx:function(e){this.$router.push({name:"BridgeTx",params:{hash:e.txHash}})},handleSelectAccount:function(e){this.toAddress=(null===e||void 0===e?void 0:e.contact_address)||"",this.show1=!1},getAvgPrice:function(){if((!this.fromTokenAmount||!this.toTokenAmount)&&this.fromToken.chain===this.toToken.chain)return"--";var e=this.fromTokenAmount,t=this.toTokenAmount;if(this.isTax){var o,n,i,a,s=(null===(o=this.swapQuoteInfo)||void 0===o?void 0:o.totalTax)||((null===(n=this.swapQuoteInfo)||void 0===n?void 0:n.total_sell_tax)||0)+((null===(i=this.swapQuoteInfo)||void 0===i?void 0:i.total_buy_tax)||0);s=Math.min(49,s),null!==(a=this.swapQuoteInfo)&&void 0!==a&&a.isAmountOut?e=new Xo.a(e).times(100+s).div(100):t=new Xo.a(t).times(100-s).div(100)}var l="solana"===this.chain||"ton"===this.chain?this.swapTokenPrice[0]:this.swapQuoteInfo.from_price,r="solana"===this.chain||"ton"===this.chain?this.swapTokenPrice[1]:this.swapQuoteInfo.to_price;return l&&r?this.$f.formatNumber2(t/e/(l/r)*l):"--"},onSubmitSlippage:function(e){this.swapSlippageInfo.auto!==e.autoSlippage&&e.autoSlippage?this.swapSlippageInfo={slippage:fn,auto:e.autoSlippage}:this.swapSlippageInfo={slippage:e.slippage,auto:e.autoSlippage}},alertTips:function(e,t){this.$dialog.alert({title:e,message:t,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"}).then((function(){}))},getSelectedRouter:function(e){this.dialogListRouterVisible=!1,this.selectedRouterIndex=e,this.selectedRouter()},getQuoteInfo:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!Number(this.fromTokenAmount)&&t||!Number(this.toAmount)&&!t)this.loading=!1;else if(this.fromToken.address!==this.toToken.address){cn&&(clearTimeout(cn),cn=null);var o=this.fromToken.chain;cn=setTimeout((function(){e.dealGetQuoteInfo(t,o)}),500)}else this.$toast({position:"top",message:this.$t("twoIdenticalTokens")})},dealGetQuoteInfo:function(e,t){var o=this;if((this.fromTokenAmount||this.toAmount)&&this.fromToken.address&&this.toToken.address){var n;if(console.log("isAmount",e,t),"solana"===t)return void this.quoteSolana(e,t);if("ton"===t)return void this.quoteTon(e,t);var i=this.fromToken.decimals,a=this.toToken.decimals;this.loading=!0,this.loadingText=this.$t("lookingForBestChannel");var s={from_token:this.fromToken.address,to_token:this.toToken.address,amountIn:e?xt["utils"].parseUnits(new Xo.a(this.fromTokenAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(i,"})?")))[0],i).toString():0,amountOut:e?0:xt["utils"].parseUnits(new Xo.a(this.toAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0],a).toString()},l=null===(n=this.fromTokenInfo)||void 0===n?void 0:n.pairs,r="";if("core"===t&&(null===l||void 0===l?void 0:l.length)>0){var c,d=(null===l||void 0===l||null===(c=l.find)||void 0===c?void 0:c.call(l,(function(e){var t=[e.token0_address,e.token1_address];return t.includes(s.token0_address)||t.includes(s.token1_address)})))||(null===l||void 0===l?void 0:l[0]),u=null===d||void 0===d?void 0:d.amm,m={shadowswap:"0x191e94fa59739e188dce837f7f6978d84727ad01"};r=(null===m||void 0===m?void 0:m[u])||"0x40375c92d9faf44d2f9db9bd9ba41a3317a2404f"}Object(Nt["qb"])(s,r,t).then((function(e){o.swapPathList=e,o.selectedRouter(e),o.getSwapGas()})).catch((function(e){o.$f.handleError(e),o.$nextTick((function(){setTimeout((function(){o.loading=!1,o.countDownFinishReset()}),800)}))}))}},quoteSolana:function(e,t){var o=this;if("solana"===t){var n=this.fromToken.decimals,i=this.toToken.decimals;console.log("fromAmount",this.fromAmount,this.fromToken),console.log("toToken",this.toToken);var a={inputMint:this.fromToken.address,inputDecimals:n,inputMintSymbol:this.fromToken.symbol,inputMintName:this.fromToken.symbol,inputAmount:this.fromTokenAmount||0,outputMint:this.toToken.address,outputDecimals:i,outputMintSymbol:this.toToken.symbol,outputMintName:this.toToken.symbol,amount:e?xt["utils"].parseUnits(new Xo.a(this.fromTokenAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(n,"})?")))[0],n).toString():xt["utils"].parseUnits(new Xo.a(this.toAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(i,"})?")))[0],i).toString(),slippageBps:new Xo.a(this.solanaSlippage).times(100).toFixed(0),swapMode:e?"ExactIn":"ExactOut",slippage:this.solanaSlippage||19},s=this.quoteSolanaPreParams.amount&&Object.keys(this.quoteSolanaPreParams).every((function(e){return a[e]===o.quoteSolanaPreParams[e]}));if(s)return;this.quoteSolanaPreParams=Object(Ke["a"])({},a),setTimeout((function(){o.quoteSolanaPreParams={}}),15e3),this.loading=!0,Object(un["h"])(a).then((function(t){var a,s,l,r,c,d,u,m;(console.log("solanaQuoteResponse",t),t.routeInfo&&t.transaction)?(o.solanaQuoteResponse=t,console.log("amountOut",(null===(a=t.routeInfo)||void 0===a||null===(s=a.amountOut)||void 0===s||null===(l=s.amount)||void 0===l?void 0:l.toFixed())||"0"),o.toAmount=(null===(r=t.routeInfo)||void 0===r||null===(c=r.amountOut)||void 0===c||null===(d=c.amount)||void 0===d?void 0:d.toFixed())||"0",o.quoteSwapTokenPrice()):e?t.outAmount?(o.solanaQuoteResponse=t,o.toAmount=xt["utils"].formatUnits(t.outAmount||"0",i||(null===(u=o.toToken)||void 0===u?void 0:u.decimals)),o.quoteSwapTokenPrice()):o.$f.handleError("can not get quote"):t.inAmount?(o.solanaQuoteResponse=t,o.fromTokenAmount=xt["utils"].formatUnits(t.inAmount||"0",n||(null===(m=o.fromToken)||void 0===m?void 0:m.decimals)),o.quoteSwapTokenPrice()):o.$f.handleError("can not get quote");o.getSwapTx(!1),o.loading=!1,o.quoteSolanaPreParams={}})).catch((function(e){console.log(e),o.$f.handleError((null===e||void 0===e?void 0:e.error)||e),o.$nextTick((function(){setTimeout((function(){o.loading=!1,o.quoteSolanaPreParams={},o.countDownFinishReset()}),800)}))}))}},quoteTon:function(e,t){var o=this;return Object(Qe["a"])(regeneratorRuntime.mark((function n(){var i,a,s,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("ton"!==t){n.next=9;break}return i=o.fromToken.decimals,a=o.toToken.decimals,console.log("fromAmount",o.fromTokenAmount,o.fromToken),console.log("toToken",o.toToken),s=o.fromToken.address===yt["k"]?new Xo.a(o.fromTokenAmount||0).times("0.997"):new Xo.a(o.fromTokenAmount||0),l={inputToken:o.fromToken.address,outputToken:o.toToken.address,inputTokenAmount:xt["utils"].parseUnits(s.toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(i,"})?")))[0],i).toString(),slippageBps:new Xo.a(o.tonSlippage).times(100).toFixed(0)},o.quoteLoading=!0,n.abrupt("return",Object(Nt["kb"])(l).then((function(t){var n,i;if(console.log("tonQuoteResponse",t),t.amountOut&&t.payload){var s,l;if(o.tonQuoteResponse=t,console.log("amountIn",t.routeInfo),e)console.log("toDecimals",a,null===(s=o.toToken)||void 0===s?void 0:s.decimals),o.toAmount=xt["utils"].formatUnits(t.amountOut||"0",a||(null===(l=o.toToken)||void 0===l?void 0:l.decimals));console.log("amountOut",o.toAmount),o.quoteSwapTokenPrice()}else o.$f.handleError("can not get quote");return o.tonSwapBaseTokenPrice=null===(n=o.fromTokenInfo)||void 0===n||null===(i=n.token)||void 0===i?void 0:i.current_price_usd,o.getSwapTx(!1),o.loading=!1,t})).catch((function(e){return console.log(e),o.$f.handleError((null===e||void 0===e?void 0:e.error)||e),o.$nextTick((function(){setTimeout((function(){o.loading=!1,o.quoteSolanaPreParams={},o.countDownFinishReset()}),800)})),Promise.resolve("")})));case 9:case"end":return n.stop()}}),n)})))()},quoteSwapTokenPrice:function(){var e=this,t=this.fromToken.chain,o=this.fromToken.address+"-"+t,n=this.toToken.address+"-"+t;return sessionStorage.swap_tokenPrice===o+"-"+n?(this.swapTokenPrice=[0,0],"solana"===t?this.priceImpactSolana=0:"ton"===t&&(this.priceImpactTon=0,this.tonSwapTokenPrice=[0,0])):sessionStorage.swap_tokenPrice=o+"-"+n,Object(Nt["ib"])([o,n]).then(function(){var o=Object(Qe["a"])(regeneratorRuntime.mark((function o(n){var i,a,s,l,r,c,d;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:s=(null===n||void 0===n||null===(i=n[0])||void 0===i?void 0:i.current_price_usd)||0,l=(null===n||void 0===n||null===(a=n[1])||void 0===a?void 0:a.current_price_usd)||0,e.swapTokenPrice=[s,l],r=e.fromTokenAmount||0,c=e.toAmount||0,d=Math.abs(Number(r)*s/(Number(c)*l)-1),"solana"===t?e.priceImpactSolana=d:"ton"===t&&(e.priceImpactTon=d,e.tonSwapTokenPrice=[s,l]);case 7:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}())},selectedRouter:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.swapPathList,o=t[this.selectedRouterIndex],n=t[this.selectedRouterIndex].routerPath,i=this.isAmount,a=this.fromToken.decimals,s=this.toToken.decimals,l=!1;if(i){var r,c=xt["utils"].parseUnits(new Xo.a(this.fromTokenAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0],a).toString(),d=(null===(r=n[0])||void 0===r?void 0:r.amount)||0;l=c===d}else{var u,m=xt["utils"].parseUnits(new Xo.a(this.toAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(s,"})?")))[0],s).toString(),b=(null===(u=n[n.length-1])||void 0===u?void 0:u.amount)||0;l=m===b}if(l){if(1===o.from_cannot_sell_all){var p,h=new Xo.a(xt["utils"].parseUnits(String(this.fromToken.balance),null===(p=this.fromToken)||void 0===p?void 0:p.decimals).toString()),f=new Xo.a(null===o||void 0===o?void 0:o.routerPath[0].amount);this.isCannotSellAll=h.gt(0)&&f.div(h).gt(.99999)}else this.isCannotSellAll=!1;this.isTax=o.totalTax>0||o.total_sell_tax>0||o.total_buy_tax>0;var v=this.getPriceImpact(o);if(console.log("routerInfo",o),this.isTax||v.gt(.5)){this.isTaxHigh=o.total_sell_tax+o.total_buy_tax+1>49.99;var g=o.totalTax||o.total_sell_tax+o.total_buy_tax,k=Number(v);if("auto"===this.customSlippage){var O=g+k+(g>5||k>5?2.5:2);O=Math.max(Math.min(O,49.99),.5),this.autoSlippageValue=String(Number(O.toFixed(2)))}}else this.isTaxHigh=!1,"auto"===this.customSlippage&&(this.autoSlippageValue=fn);if(o.weight>5e4||o.totalTax>0||o.total_sell_tax>0||o.total_buy_tax>0?this.autoSwapMode="fast":this.autoSwapMode="protect",console.log("autoSwapMode",this.autoSwapMode),this.swapQuoteInfo=o,this.swapRouterPath=n.map((function(e,t){var n,i;return{symbol:e.symbol,nextAmm:(null===o||void 0===o||null===(n=o.pair_path)||void 0===n||null===(i=n[t])||void 0===i?void 0:i.amm)||""}})),this.listRouter=t.map((function(t){var o=0,n=0;if(i){var a,s=t.routerPath[t.routerPath.length-1];o=xt["utils"].formatUnits(s.amount||"0",(null===s||void 0===s?void 0:s.decimals)||(null===(a=e.toToken)||void 0===a?void 0:a.decimals))}else{var l=t.routerPath[0];n=xt["utils"].formatUnits(l.amount||"0",(null===l||void 0===l?void 0:l.decimals)||e.fromToken.decimals)}var r=t.routerPath.map((function(e,o){var n,i;return{symbol:e.symbol,nextAmm:(null===t||void 0===t||null===(n=t.pair_path)||void 0===n||null===(i=n[o])||void 0===i?void 0:i.amm)||""}}));return Object(Ke["a"])(Object(Ke["a"])({},r),{},{amount:i?o:n,priceImpact:t.priceImpact})})),i){var j,w=n[n.length-1];this.toAmount=xt["utils"].formatUnits(w.amount||"0",(null===w||void 0===w?void 0:w.decimals)||(null===(j=this.toToken)||void 0===j?void 0:j.decimals))}else{var T,y=n[0];this.fromTokenAmount=xt["utils"].formatUnits(y.amount||"0",(null===y||void 0===y?void 0:y.decimals)||(null===(T=this.fromToken)||void 0===T?void 0:T.decimals))}l&&this.$nextTick((function(){setTimeout((function(){e.loading=!1,e.countDownFinishReset()}),800)}))}},getPriceImpact:function(e){if(!Number(this.fromTokenAmount)&&!Number(this.toTokenAmount))return new Xo.a(0);var t=e.routerPath,o=(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t[0]:null,n=(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t[t.length-1]:null;if(o&&n){var i=e.from_price,a=e.to_price,s=xt["utils"].formatUnits(o.amount,o.decimals),l=xt["utils"].formatUnits(n.amount,n.decimals);return new Xo.a(s).times(i).div(new Xo.a(l).times(a)).minus(1).abs().times(100)}return new Xo.a(0)},isSwap:function(){var e=!this.hasNoGas(),t=Object.keys(yt["y"]);return this.fromToken.chain===this.toToken.chain&&this.fromToken.chain&&(t.includes(this.fromToken.chain)&&e||"solana"===this.fromToken.chain||"ton"===this.fromToken.chain)},hasNoGas:function(){var e,t,o=new Xo.a(this.gasBalance||0),n=this.fromToken.chain||this.$store.getters.netId,i=new Xo.a(yt["j"][n]||.001).div(2);return o.lt(i)&&(null===(e=window)||void 0===e||null===(t=e._tw_)||void 0===t?void 0:t.appSendSwftTxs)&&"eth"!==n},formatPriceImpactColor:function(e){return e>40?"#F81111":e>10?"#F7933F":e>5?"#f8be46":""},getSwapGas:function(){var e=this;dn&&(clearTimeout(dn),dn=null),dn=setTimeout((function(){var t,o;.5===e.errorCode&&e.$store.state.currentAccount&&!e.loading&&(null===(t=e.swapQuoteInfo)||void 0===t||null===(o=t.routerPath)||void 0===o?void 0:o.length)>0&&(Object(Nt["Cb"])(e.swapQuoteInfo,e.swapSlippage).then(function(){var t=Object(Qe["a"])(regeneratorRuntime.mark((function t(o){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.swapSubmitInfo=o,e.swapInfo=Object(Ke["a"])(Object(Ke["a"])({},o.swapInfo),{},{fromToken:Object(Ke["a"])(Object(Ke["a"])({},e.fromToken),(null===o||void 0===o||null===(n=o.swapInfo)||void 0===n?void 0:n.fromToken)||{}),toToken:Object(Ke["a"])(Object(Ke["a"])({},e.toToken),(null===o||void 0===o||null===(i=o.swapInfo)||void 0===i?void 0:i.toToken)||{})}),e.swapInfo.gasValue=o.gasValue,e.swapInfo.swapRouterPath=e.swapRouterPath;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$f.handleError(t)})),e.getNativeTokenPrice(),e.getGasPrice())}),3e3)},getSwapTx:function(){var e,t,o=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if("ton"===this.chain){console.log("tonQuoteResponse",this.tonQuoteResponse);var i=[this.fromToken,this.toToken].map((function(e,t){var n;return{symbol:e.symbol,nextAmm:0===t&&(null===(n=o.tonQuoteResponse)||void 0===n?void 0:n.dex)||""}}));this.swapInfo={swapRouterPath:i,fromAmount:this.fromTokenAmount,toAmount:this.toAmount,fromToken:this.fromToken,toToken:this.toToken},n&&(this.dialogVisibleSwap=!0),this.swapRouterPath=i}else if("solana"===this.chain){var a=[this.fromToken,this.toToken].map((function(e,t){return{symbol:e.symbol,nextAmm:""}}));this.swapInfo={swapRouterPath:a,fromAmount:this.fromTokenAmount,toAmount:this.toAmount,fromToken:this.fromToken,toToken:this.toToken},n&&(this.dialogVisibleSwap=!0)}else(null===(e=this.swapQuoteInfo)||void 0===e||null===(t=e.routerPath)||void 0===t?void 0:t.length)>0&&(this.loading=!0,this.loadingText=this.$t("oneClickSwap"),console.log("this.swapSlippage",this.swapSlippage),Object(Nt["Cb"])(this.swapQuoteInfo,this.swapSlippage).then(function(){var e=Object(Qe["a"])(regeneratorRuntime.mark((function e(t){var i,a,s,l,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o.swapSubmitInfo=t,o.swapInfo=Object(Ke["a"])(Object(Ke["a"])({},t.swapInfo),{},{fromToken:Object(Ke["a"])(Object(Ke["a"])({},o.fromToken),(null===t||void 0===t||null===(i=t.swapInfo)||void 0===i?void 0:i.fromToken)||{}),toToken:Object(Ke["a"])(Object(Ke["a"])({},o.toToken),(null===t||void 0===t||null===(a=t.swapInfo)||void 0===a?void 0:a.toToken)||{})}),o.swapInfo.gasValue=t.gasValue,o.swapInfo.swapRouterPath=o.swapRouterPath,o.loading=!1,n&&(c=(null===(s=window)||void 0===s||null===(l=s._tw_)||void 0===l||null===(r=l.appGetFreePay)||void 0===r?void 0:r.call(l))||!1,c=!!c&&JSON.parse(c),c?o.submitSwap():o.dialogVisibleSwap=!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){o.loading=!1,o.$f.handleError(e)})),this.getNativeTokenPrice(),this.getGasPrice())},getNativeTokenPrice:function(){var e=this,t=this.$store.getters.netId||this.fromToken.chain;Object(Nt["N"])(t).then((function(t){e.nativePrice=t}))},getGasPrice:function(){var e,t,o,n,i,a=this,s=this.$store.getters.netId||this.fromToken.chain;"evm"!==localStorage.okxwallet_chain&&(window.solana||null!==(e=window)&&void 0!==e&&null!==(t=e.trustwallet)&&void 0!==t&&t.solana&&(null===(o=window.ethereum)||void 0===o||null===(n=o.address)||void 0===n||null===(i=n.startsWith)||void 0===i||!i.call(n,"0x"))&&window.ethereum.address)&&(s="solana"),"solana"!==s&&Object(Nt["E"])(s).then((function(e){a.gasPrice=e.toString()})).catch((function(e){console.log(e),a.gasPrice="0"}))},submitSwap:function(){var e=arguments,t=this;return Object(Qe["a"])(regeneratorRuntime.mark((function o(){var n,i,a,s,l,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(n=e.length>0&&void 0!==e[0]?e[0]:t.swapSubmitInfo,o.prev=1,"solana"!==t.chain){o.next=5;break}return t.submitSolanaSwap(),o.abrupt("return");case 5:if("ton"!==t.chain){o.next=8;break}return t.submitTonSwap(),o.abrupt("return");case 8:return t.loading=!0,t.loadingConfirmSwap=!0,console.log("swapSubmitInfo",n),o.next=13,n.swapCallStatic();case 13:i=o.sent,console.log("swapCallStaticResult",i.toString()),a=n.swapInfo,s=!(a.fromToken.isWrapper&&a.toToken.isETH||a.toToken.isWrapper&&a.fromToken.isETH),l={from_address:a.fromToken.address,from_symbol:a.fromToken.symbol,from_amount:Number(xt["utils"].formatUnits(a.fromTokenAmount||0,a.fromToken.decimals)),to_address:a.toToken.address,to_symbol:a.toToken.symbol,to_amount:Number(xt["utils"].formatUnits(a.toTokenAmount||0,a.toToken.decimals)),chain:t.netId,transaction:"",wallet_address:t.$store.state.currentAccount},r={},"bsc"!==t.$store.getters.netId&&"eth"!==t.$store.getters.netId||t.$f.setSwapSendType(t.swapMode||"fast"),n.swap().then((function(e){var o,n,i;return console.log("---confirm transaction---",e),t.swapInfo.transaction=e.hash,s&&(l.transaction=e.hash,r={time:parseInt(Date.now()/1e3),id:l.transaction,chain:t.fromToken.chain,transaction:e.hash,from_address:l.from_address,from_price_eth:0,from_price_usd:"",from_symbol:a.fromToken.symbol,from_amount:Number(xt["utils"].formatUnits(a.fromTokenAmount||0,a.fromToken.decimals)),to_address:l.to_address,to_price_eth:0,to_price_usd:"",to_symbol:a.toToken.symbol,to_amount:Number(xt["utils"].formatUnits(a.toTokenAmount||0,a.toToken.decimals)),is_merged:0,from_address_logo_url:a.fromToken.logo_url,to_address_logo_url:a.toToken.logo_url},t.swapTxs.unshift(r)),t.loading=!1,t.loadingConfirmSwap=!1,t.fromTokenAmount="",t.toAmount="",null===(o=t.$refs)||void 0===o||null===(n=o.percentStep)||void 0===n||null===(i=n.handleClick)||void 0===i||i.call(n,0),t.dialogVisibleSwap=!1,e.wait()})).then((function(e){return console.log("----transaction---",e),1===e.status?(t.$notify({type:"success",message:t.$t("tradeSuccess")}),t.fromToken.address&&t.fromToken.chain&&t.getBalanceAndAllowance(),s&&(t.swapTxs.forEach((function(t){t.transaction===e.transactionHash&&(t.is_merged=1,t.time=parseInt(Date.now()/1e3))})),t.getUserAllTxs(r))):(t.$notify({type:"error",message:t.$t("tradeFail")}),s&&(t.swapTxs=t.swapTxs.filter((function(t){return t.transaction!==e.transactionHash})))),t.getGasBalance(),t.$f.setSwapSendType(""),e})).catch((function(e){t.$refs.countDown.reset(),t.loading=!1,t.loadingConfirmSwap=!1,s&&t.getUserAllTxs(),t.$f.handleError(e,"swap"),t.$f.setSwapSendType("")})),o.next=29;break;case 23:o.prev=23,o.t0=o["catch"](1),t.loading=!1,t.loadingConfirmSwap=!1,t.$f.handleError(o.t0,"swap"),t.$f.setSwapSendType("");case 29:case"end":return o.stop()}}),o,null,[[1,23]])})))()},submitSolanaSwap:function(){var e=this;return Object(Qe["a"])(regeneratorRuntime.mark((function t(){var o,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.loading=!0,e.loadingConfirmSwap=!0,o=e.swapInfo,n={from_address:o.fromToken.address,from_symbol:o.fromToken.symbol,from_amount:Number(xt["utils"].formatUnits(o.fromTokenAmount||0,o.fromToken.decimals)),to_address:o.toToken.address,to_symbol:o.toToken.symbol,to_amount:Number(xt["utils"].formatUnits(o.toTokenAmount||0,o.toToken.decimals)),chain:e.netId,transaction:"",wallet_address:e.$store.state.currentAccount},i={},setTimeout((function(){e.dialogVisibleSwap||(e.loading=!1,e.loadingConfirmSwap=!1)}),6e3),a=!0,Object(un["k"])(e.solanaQuoteResponse).then((function(t){var s,l,r,c,d;(console.warn("swap confirm time end",e.$f.formatDate(Date.now())),console.log("---confirm transaction---",t),e.swapInfo.transaction=t.hash,a)&&(n.transaction=t.hash,i={time:parseInt(Date.now()/1e3),id:n.transaction,chain:"solana",transaction:t.hash,from_address:n.from_address,from_price_eth:0,from_price_usd:"",from_symbol:o.fromToken.symbol,from_amount:o.fromAmount,to_address:n.to_address,to_price_eth:0,to_price_usd:"",to_symbol:o.toToken.symbol,to_amount:o.toAmount,is_merged:0,wallet_address:e.$store.state.currentAccount||"",from_address_logo_url:o.fromToken.logo_url,to_address_logo_url:o.toToken.logo_url},e.solanaTxs.unshift(i),e.solanaTxs=null===(c=e.solanaTxs)||void 0===c||null===(d=c.slice)||void 0===d?void 0:d.call(c,0,500));return e.loading=!1,e.loadingConfirmSwap=!1,e.fromTokenAmount="",e.toAmount="",null===(s=e.$refs)||void 0===s||null===(l=s.percentStep)||void 0===l||null===(r=l.handleClick)||void 0===r||r.call(l,0),e.dialogVisibleSwap=!1,t.wait()})).then((function(t){if(console.warn("swap transaction end",e.$f.formatDate(Date.now())),console.log("----transaction---",t),t){var n=Object(un["j"])(t,o.fromToken.address,o.toToken.address),i=Object(We["a"])(n,2),s=i[0],l=i[1];e.$notify({type:"success",message:e.$t("tradeSuccess")}),e.fromToken.address&&e.fromToken.chain&&e.getBalanceAndAllowance(),a&&(e.solanaTxs=e.solanaTxs.slice().map((function(e){var o,n=Object(Ke["a"])({},e);return e.transaction===(null===t||void 0===t||null===(o=t.transaction)||void 0===o?void 0:o.signatures[0])&&(n.is_merged=1,n.time=null===t||void 0===t?void 0:t.blockTime,s&&Number(s)>0&&(n.from_amount=s),l&&Number(l)>0&&(n.to_amount=l)),n})))}else e.$notify({type:"danger",message:e.$t("tradeFail")}),a&&(e.solanaTxs=e.solanaTxs.filter((function(e){return e.transaction!==t.transactionHash})));return e.$f.setSwapSendType(""),t})).catch((function(t){if("Timeout"===(t||(null===t||void 0===t?void 0:t.message)))e.solanaTxs=e.solanaTxs.map((function(e){return e.transaction===n.transaction?Object(Ke["a"])(Object(Ke["a"])({},e),{},{status:"timeout"}):Object(Ke["a"])({},e)}));else if("Swap fail"===(t||(null===t||void 0===t?void 0:t.message)))e.solanaTxs=e.solanaTxs.map((function(e){return e.transaction===n.transaction?Object(Ke["a"])(Object(Ke["a"])({},e),{},{status:"fail"}):Object(Ke["a"])({},e)}));else{var o,i;e.solanaTxs=(null===(o=e.solanaTxs)||void 0===o||null===(i=o.filter)||void 0===i?void 0:i.call(o,(function(e){return e.transaction!==n.transaction})))||[]}e.$refs.countDown.reset(),e.loading=!1,e.loadingConfirmSwap=!1,e.$f.handleError(t,"solana"),e.$f.setSwapSendType("")}))}catch(s){e.loading=!1,e.loadingConfirmSwap=!1,e.$f.handleError(s,"solana"),e.$f.setSwapSendType("")}case 1:case"end":return t.stop()}}),t)})))()},submitTonSwap:function(){var e=this;return Object(Qe["a"])(regeneratorRuntime.mark((function t(){var o,n,i,a,s,l,r,c,d,u,m,b,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.loadingConfirmSwap=!0,e.loadingSwap=!0,l=(null===(o=e.fromTokenInfo)||void 0===o||null===(n=o.token)||void 0===n?void 0:n.current_price_usd)||0,r=!e.tonSwapBaseTokenPrice||new Xo.a(l).minus(e.tonSwapBaseTokenPrice).times(100).div(e.tonSwapBaseTokenPrice).abs().gt(e.tonSlippage),console.log("price",l,e.solanaSwapBaseTokenPrice,r),!r){t.next=9;break}return t.next=9,e.quoteTon(e.isAmount,"ton");case 9:return c=e.swapInfo,d={from_address:c.fromToken.address,from_symbol:c.fromToken.symbol,from_amount:null===c||void 0===c?void 0:c.fromAmount,from_decimals:null===c||void 0===c?void 0:c.fromToken.decimals,to_address:c.toToken.address,to_symbol:c.toToken.symbol,to_amount:null===c||void 0===c?void 0:c.toAmount,to_decimals:null===c||void 0===c?void 0:c.toToken.decimals,chain:"ton",transaction:"",wallet_address:e.$store.state.currentAccount},console.log("txInfo",d),u={},setTimeout((function(){e.dialogVisibleSwap||(e.loadingSwap=!1,e.loadingConfirmSwap=!1)}),6e3),m=!0,console.log("tonQuoteResponse",e.tonQuoteResponse,d),b=[{address:null===(i=e.tonQuoteResponse)||void 0===i?void 0:i.to,amount:null===(a=e.tonQuoteResponse)||void 0===a?void 0:a.totalTransferAmount,payload:null===(s=e.tonQuoteResponse)||void 0===s?void 0:s.payload}],t.next=19,Object(hn["e"])(d);case 19:p=t.sent,p&&b.push(p),Object(hn["h"])(b).then((function(t){var o,n,i,a,s,l,r,b,p,h,f;(console.warn("swap confirm time end",e.$f.formatDate(Date.now())),console.log("---confirm transaction---",t),e.swapInfo.transaction=t.hash,m)&&(d.transaction=t.hash,u={time:parseInt(Date.now()/1e3),id:d.transaction,chain:"ton",transaction:t.hash,from_address:d.from_address,from_price_eth:0,from_price_usd:"",from_symbol:c.fromToken.symbol,from_amount:c.fromAmount,to_address:d.to_address,to_price_eth:0,to_price_usd:"",to_symbol:c.toToken.symbol,to_amount:c.toAmount,is_merged:0,wallet_address:e.$store.state.currentAccount||"",from_address_logo_url:(null===c||void 0===c||null===(a=c.fromToken)||void 0===a?void 0:a.logo_url)||(null===(s=e.fromToken)||void 0===s?void 0:s.logo_url)||(null===(l=e.fromToken)||void 0===l?void 0:l.logoURI),to_address_logo_url:(null===c||void 0===c||null===(r=c.toToken)||void 0===r?void 0:r.logo_url)||(null===(b=e.toToken)||void 0===b?void 0:b.logo_url)||(null===(p=e.toToken)||void 0===p?void 0:p.logoURI)},e.tonTxs.unshift(u),e.tonTxs=null===(h=e.tonTxs)||void 0===h||null===(f=h.slice)||void 0===f?void 0:f.call(h,0,500));return e.loadingSwap=!1,e.loadingConfirmSwap=!1,e.fromTokenAmount="",e.toAmount="",null===(o=e.$refs)||void 0===o||null===(n=o.percentStep)||void 0===n||null===(i=n.handleClick)||void 0===i||i.call(n,0),e.dialogVisibleSwap=!1,t.wait()})).then(function(){var t=Object(Qe["a"])(regeneratorRuntime.mark((function t(o){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.warn("swap transaction end",e.$f.formatDate(Date.now())),console.log("----transaction---",o),!o){t.next=11;break}return e.$notify({type:"success",message:e.$t("tradeSuccess")}),e.getUserTokenList(),t.next=7,Object(hn["f"])(o);case 7:n=t.sent,m&&(e.tonTxs=e.tonTxs.slice().map((function(e){var t=Object(Ke["a"])({},e);return e.transaction===(null===o||void 0===o?void 0:o.hash)&&(t.is_merged=1,t.time=null===o||void 0===o?void 0:o.timestamp,t.event_id=null===o||void 0===o?void 0:o.event_id,t=Object(Ke["a"])(Object(Ke["a"])({},t),n)),t}))),t.next=13;break;case 11:e.$notify({type:"danger",message:e.$t("tradeFail")}),m&&(e.tonTxs=e.tonTxs.filter((function(e){return e.transaction!==o.hash})));case 13:return e.$f.setSwapSendType(""),t.abrupt("return",o);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){if(console.warn("ton error",t),"Timeout"===(t||(null===t||void 0===t?void 0:t.message)))e.tonTxs=e.tonTxs.map((function(e){return e.transaction===d.transaction?Object(Ke["a"])(Object(Ke["a"])({},e),{},{status:"timeout"}):Object(Ke["a"])({},e)}));else if("Swap fail"===(t||(null===t||void 0===t?void 0:t.message)))e.tonTxs=e.tonTxs.map((function(e){return e.transaction===d.transaction?Object(Ke["a"])(Object(Ke["a"])({},e),{},{status:"fail"}):Object(Ke["a"])({},e)}));else{var o,n;e.tonTxs=(null===(o=e.tonTxs)||void 0===o||null===(n=o.filter)||void 0===n?void 0:n.call(o,(function(e){return e.transaction!==d.transaction})))||[]}e.tonSwapBaseTokenPrice=0,e.$refs.countDown.reset(),e.loadingSwap=!1,e.loadingConfirmSwap=!1,e.$f.handleError(t,"solana"),e.$f.setSwapSendType("")})),t.next=31;break;case 24:t.prev=24,t.t0=t["catch"](0),e.tonSwapBaseTokenPrice=0,e.loadingSwap=!1,e.loadingConfirmSwap=!1,e.$f.handleError(t.t0,"solana"),e.$f.setSwapSendType("");case 31:case"end":return t.stop()}}),t,null,[[0,24]])})))()},getUserAllTxs:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=this.$store.state.currentAccount;o&&"solana"!==this.chain&&(this.txsLoading=!0,Object(Nt["lb"])(this.$store.getters.netId,1,100).then((function(o){var n,i,a,s=Array.isArray(o)?o:[],l=t&&!(null!==s&&void 0!==s&&null!==(n=s.some)&&void 0!==n&&n.call(s,(function(e){return e.transaction===t.transaction})))&&Date.now()-1e3*t.time<6e5;l&&setTimeout((function(){e.getUserAllTxs(t)}),1e4),s.length>0&&(e.swapTxs=(null===s||void 0===s?void 0:s.map((function(e){return e.id?Object(Ke["a"])({},e):Object(Ke["a"])(Object(Ke["a"])({},e),{},{id:e.transaction})})))||[]),!l||null!==(i=(a=e.swapTxs).some)&&void 0!==i&&i.call(a,(function(e){return e.transaction===t.transaction}))||e.swapTxs.unshift(t)})).finally((function(){e.txsLoading=!1})))},getFromToken:function(){var e=this,t=this.fromToken.address,o=this.fromToken.chain;if(t&&o){var n,i,a=t+"-"+o,s=null===(n=this.$store.state)||void 0===n||null===(i=n.chainConfig)||void 0===i?void 0:i[o],l=null===s||void 0===s?void 0:s.wmainWrapper,r=null===s||void 0===s?void 0:s.mainName;t===yt["k"]&&o&&l&&(a=l+"-"+o),Object(Nt["M"])(a).then(function(){var o=Object(Qe["a"])(regeneratorRuntime.mark((function o(n){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return e.fromTokenInfo=Object(Ke["a"])(Object(Ke["a"])({},n),t===yt["k"]?{token:Object(Ke["a"])(Object(Ke["a"])({},n.token),{},{token:t,symbol:r,logoURI:e.$f.formatIcon(a)})}:{}),o.abrupt("return",n);case 2:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}())}},getSwapTokenList:function(e){var t,o,n=this,i=this.fromToken.chain||this.$store.getters.netId;if(i){var a=Object(Nt["s"])(i,2)||i;a&&(null===(t=this.tokens)||void 0===t||null===(o=t[a])||void 0===o?void 0:o.length)>1||Object(Nt["eb"])(i).then((function(t){var o,s,l,r,c,d,u=(null===t||void 0===t?void 0:t.map((function(e){return Object(Ke["a"])(Object(Ke["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token})})))||[];"solana"===i&&(u=null===(c=n.tokens)||void 0===c||null===(d=c.filter)||void 0===d?void 0:d.call(c,(function(e){return e.token!==yt["k"]})).sort((function(e,t){return"So11111111111111111111111111111111111111112"===e.token?-1:1})));var m=(null===(o=n.tokens)||void 0===o||null===(s=o[a])||void 0===s||null===(l=s.slice)||void 0===l?void 0:l.call(s))||[],b=null===(r=u)||void 0===r?void 0:r.filter((function(e){return!(null!==m&&void 0!==m&&m.some((function(t){return t.address===e.address})))}));n.tokens[a]=[].concat(Object(Ge["a"])(m),Object(Ge["a"])(b)),null===e||void 0===e||e()}))}},getUserTokenList:function(){var e=this,t=this.fromToken.chain||this.$store.getters.netId;t&&Object(Nt["nb"])(t).then((function(o){if("solana"===t||"ton"===t)e.userBalanceTokens=o;else{var n,i,a=(null===o||void 0===o||null===(n=o.map((function(e){return Object(Ke["a"])(Object(Ke["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token,balance:e.value})})))||void 0===n||null===(i=n.filter)||void 0===i?void 0:i.call(n,(function(e){return(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag})))||[];e.userBalanceTokens=null===a||void 0===a?void 0:a.filter((function(e){return!!Number(e.value)}))}console.log(e.userBalanceTokens),e.userBalanceTokens.length>0&&"tron"!==t&&"ton"!==t&&"brc20"!==t&&"solana"!==t&&/^0x[0-9a-zA-Z]{40}$/.test(e.$store.state.currentAccount)&&Object(Nt["r"])(e.userBalanceTokens.map((function(e){return e.token||""})),t).then((function(t){var o,n,i;e.userBalanceTokens=null===(o=e.userBalanceTokens)||void 0===o||null===(n=o.map)||void 0===n||null===(i=n.call(o,(function(e,o){return Object(Ke["a"])(Object(Ke["a"])({},e),{},{balance:xt["utils"].formatUnits(t[o],e.decimals||0)})})))||void 0===i?void 0:i.filter((function(e){return!!Number(e.balance)}))}))}))},onSubmitSolanaSlippage:function(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.solanaSlippage=(null===e||void 0===e?void 0:e.slippage)||"2",this.solanaSlippage=localStorage.solanaSlippage,this.isSwap()&&!this.isAmount?this.watchToAmount(this.toAmount):this.watchFromAmount(this.fromTokenAmount))},onSubmitTonSlippage:function(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.tonSlippage=(null===e||void 0===e?void 0:e.slippage)||"2",this.tonSlippage=localStorage.tonSlippage,this.watchFromAmount())}}};o("debd"),o("633aa");const kn=$t()(gn,[["render",qe],["__scopeId","data-v-65b8aeea"]]);var On=kn,jn=o("965b"),wn=o.n(jn),Tn=function(e){return Object(n["pushScopeId"])("data-v-2ff24eca"),e=e(),Object(n["popScopeId"])(),e},yn={class:"swap-content"},Sn={key:0,class:"card-container"},Nn={class:"card-container_top flex justify-between items-center"},xn={class:"tag-box"},Vn=Tn((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),En={class:"s-text"},_n={class:"flex justify-between items-center mt-40"},Bn={key:1,class:"card-container"},$n={class:"card-container_top flex justify-between items-center"},An=Tn((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),Cn={class:"s-text"},Dn={class:"flex justify-between items-center mt-40"},In={class:"switch-container"},Ln=Tn((function(){return Object(n["createElementVNode"])("i",{class:"iconfont icon-switch"},null,-1)})),Fn=[Ln],Pn={key:2,class:"card-container"},Rn={class:"card-container_top flex justify-between items-center"},Un=Tn((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),Mn={class:"s-text"},zn={class:"flex justify-between items-center mt-40"},qn={key:3,class:"card-container"},Wn={class:"card-container_top flex justify-between items-center"},Hn={class:"tag-box"},Qn=Tn((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),Gn={class:"s-text"},Kn={class:"flex justify-between items-center mt-40"},Jn={class:"card-container mt-6"},Zn={class:"limit-price-label flex justify-between items-center"},Yn=Tn((function(){return Object(n["createElementVNode"])("i",{class:"iconfont icon-shuaxin",style:{"font-size":"0.28rem","margin-right":"0.05rem"}},null,-1)})),Xn={style:{"margin-right":"0.05rem"}},ei={class:"flex justify-between items-center mt-10"},ti=["disabled"],oi=Tn((function(){return Object(n["createElementVNode"])("svg",{class:"icon-svg","aria-hidden":"true"},[Object(n["createElementVNode"])("use",{"xlink:href":"#icon-jian"})],-1)})),ni=[oi],ii=["disabled"],ai=Tn((function(){return Object(n["createElementVNode"])("svg",{class:"icon-svg","aria-hidden":"true"},[Object(n["createElementVNode"])("use",{"xlink:href":"#icon-jia"})],-1)})),si=[ai],li={class:"swap-label"},ri={class:"swap-label_item-left"},ci={style:{display:"flex","align-items":"center"}},di={style:{"margin-right":"0.1rem"}},ui={class:"swap-label_item-left"},mi={style:{display:"flex","align-items":"center"}},bi={class:"section-bottom"},pi={class:"title",style:{padding:"0.24rem 0.32rem"}},hi={style:{"font-size":"0.28rem","font-weight":"normal",color:"#333",margin:"0"}},fi=Tn((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),vi={style:{"background-color":"#fff"}},gi={class:"footer-container"},ki=Tn((function(){return Object(n["createElementVNode"])("img",{src:wn.a,alt:"",srcset:""},null,-1)}));function Oi(e,t,o,i,a,s){var l,r,c=Object(n["resolveComponent"])("van-count-down"),d=Object(n["resolveComponent"])("van-button"),u=Object(n["resolveComponent"])("SwapSelectToken"),m=Object(n["resolveComponent"])("van-field"),b=Object(n["resolveComponent"])("van-form"),p=Object(n["resolveComponent"])("SlippageButton"),h=Object(n["resolveComponent"])("van-checkbox"),f=Object(n["resolveComponent"])("van-loading"),v=Object(n["resolveComponent"])("LimitTxItem"),g=Object(n["resolveComponent"])("DynamicScrollerItem"),k=Object(n["resolveComponent"])("DynamicScroller"),O=Object(n["resolveComponent"])("van-empty"),j=Object(n["resolveComponent"])("confirm-limit");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("section",{class:"swap-container",style:Object(n["normalizeStyle"])({"--upColor":e.$store.getters.upColor[3],"--downColor":e.$store.getters.downColor[3]})},[Object(n["createVNode"])(c,{style:{position:"absolute",opacity:"0",height:"0"},ref:"countDown",class:"icon-countDown",time:15e3,format:"sss",onFinish:s.onCountDownFinish},{default:Object(n["withCtx"])((function(e){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.seconds)+"s ",1)]})),_:1},8,["onFinish"]),Object(n["createElementVNode"])("div",yn,[Object(n["createVNode"])(b,{class:"swap-form",onSubmit:s.onLimitSubmit,style:{"--van-cell-horizontal-padding":"0","--van-cell-vertical-padding":"0"}},{default:Object(n["withCtx"])((function(){var o,l,r,c,b,p,h,f;return[1===a.activeTab?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Sn,[Object(n["createElementVNode"])("div",Nn,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("sell")),1),Object(n["createElementVNode"])("div",xn,Object(n["toDisplayString"])(e.$t("targetToken")),1),Vn,Object(n["createElementVNode"])("div",En,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(o=a.limitToken1)||void 0===o?void 0:o.balance)||0)),1),Object(n["createVNode"])(d,{plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return s.handlePercentChange1(100)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("max")),1)]})),_:1})]),Object(n["createElementVNode"])("div",_n,[Object(n["createVNode"])(u,{tokens:s.swapTokens,token:a.limitToken1,"onUpdate:token":[t[1]||(t[1]=function(e){return a.limitToken1=e}),s.handleSelectLimitToken1],chain:e.$store.getters.netId||(null===(l=e.$f.getAddressAndChainFromId(i.swapId))||void 0===l?void 0:l.chain)||a.limitToken1.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),Object(n["createVNode"])(m,{modelValue:a.limitAmount1,"onUpdate:modelValue":[t[2]||(t[2]=function(e){return a.limitAmount1=e}),s.watchLimitAmount1],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[3]||(t[3]=function(e){return s.handlePercentChange1(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])])])):Object(n["createCommentVNode"])("",!0),0===a.activeTab?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Bn,[Object(n["createElementVNode"])("div",$n,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("sell")),1),An,Object(n["createElementVNode"])("div",Cn,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(r=a.limitToken2)||void 0===r?void 0:r.balance)||0)),1),Object(n["createVNode"])(d,{plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[4]||(t[4]=Object(n["withModifiers"])((function(e){return s.handlePercentChange1(100)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("max")),1)]})),_:1})]),Object(n["createElementVNode"])("div",Dn,[Object(n["createVNode"])(u,{tokens:s.swapTokens,token:a.limitToken2,"onUpdate:token":[t[5]||(t[5]=function(e){return a.limitToken2=e}),s.handleSelectLimitToken2],chain:e.$store.getters.netId||(null===(c=e.$f.getAddressAndChainFromId(i.swapId))||void 0===c?void 0:c.chain)||a.limitToken2.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),Object(n["createVNode"])(m,{modelValue:a.limitAmount2,"onUpdate:modelValue":[t[6]||(t[6]=function(e){return a.limitAmount2=e}),s.watchLimitAmount2],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[7]||(t[7]=function(e){return s.handlePercentChange1(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])])])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",In,[Object(n["createElementVNode"])("div",{class:"switch-box",onClick:t[8]||(t[8]=Object(n["withModifiers"])((function(){return s.switchToken&&s.switchToken.apply(s,arguments)}),["stop"]))},Fn)]),1===a.activeTab?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Pn,[Object(n["createElementVNode"])("div",Rn,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("buy")),1),Un,Object(n["createElementVNode"])("div",Mn,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(b=a.limitToken2)||void 0===b?void 0:b.balance)||0)),1)]),Object(n["createElementVNode"])("div",zn,[Object(n["createVNode"])(u,{tokens:s.swapTokens,token:a.limitToken2,"onUpdate:token":[t[9]||(t[9]=function(e){return a.limitToken2=e}),s.handleSelectLimitToken2],chain:e.$store.getters.netId||(null===(p=e.$f.getAddressAndChainFromId(i.swapId))||void 0===p?void 0:p.chain)||a.limitToken2.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),Object(n["createVNode"])(m,{modelValue:a.limitAmount2,"onUpdate:modelValue":[t[10]||(t[10]=function(e){return a.limitAmount2=e}),s.watchLimitAmount2],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[11]||(t[11]=function(e){return s.handlePercentChange1(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])])])):Object(n["createCommentVNode"])("",!0),0===a.activeTab?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",qn,[Object(n["createElementVNode"])("div",Wn,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("buy")),1),Object(n["createElementVNode"])("div",Hn,Object(n["toDisplayString"])(e.$t("targetToken")),1),Qn,Object(n["createElementVNode"])("div",Gn,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(h=a.limitToken1)||void 0===h?void 0:h.balance)||0)),1)]),Object(n["createElementVNode"])("div",Kn,[Object(n["createVNode"])(u,{tokens:s.swapTokens,token:a.limitToken1,"onUpdate:token":[t[12]||(t[12]=function(e){return a.limitToken1=e}),s.handleSelectLimitToken1],chain:e.$store.getters.netId||(null===(f=e.$f.getAddressAndChainFromId(i.swapId))||void 0===f?void 0:f.chain)||a.limitToken1.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),Object(n["createVNode"])(m,{modelValue:a.limitAmount1,"onUpdate:modelValue":[t[13]||(t[13]=function(e){return a.limitAmount1=e}),s.watchLimitAmount1],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[14]||(t[14]=function(e){return s.handlePercentChange1(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])])])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",Jn,[Object(n["createElementVNode"])("div",Zn,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("delegatePrice"))+"("+Object(n["toDisplayString"])(a.limitToken1.symbol||"")+")",1),Object(n["createElementVNode"])("div",{class:"clickable flex items-center",onClick:t[15]||(t[15]=Object(n["withModifiers"])((function(){return s.setLimitPrice&&s.setLimitPrice.apply(s,arguments)}),["stop"]))},[Yn,Object(n["createElementVNode"])("span",Xn,Object(n["toDisplayString"])(e.$t("marketPrice")),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber(a.baseToken.token.current_price_usd||0)),1)])]),Object(n["createElementVNode"])("div",ei,[Object(n["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[16]||(t[16]=Object(n["withModifiers"])((function(){return s.minusLimitPrice&&s.minusLimitPrice.apply(s,arguments)}),["stop"])),disabled:!a.limitPrice},ni,8,ti),Object(n["createVNode"])(m,{modelValue:a.limitPrice,"onUpdate:modelValue":[t[17]||(t[17]=function(e){return a.limitPrice=e}),s.watchLimitPrice],placeholder:"0.0",label:"$",type:"number","input-align":"left","label-align":"right","label-width":"0.2rem",clearable:"",class:"input-number",border:!1,style:{"--van-field-label-margin-right":"0.1rem"}},null,8,["modelValue","onUpdate:modelValue"]),Object(n["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[18]||(t[18]=Object(n["withModifiers"])((function(){return s.addLimitPrice&&s.addLimitPrice.apply(s,arguments)}),["stop"])),disabled:!a.limitPrice},si,8,ii)])]),!s.isLimitApprove||a.loadingLimitAllowance?(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:4,class:"submit-btn",block:"",color:s.limitButtonColor,"native-type":"submit","loading-text":a.loadingLimitAllowance?e.$t("checkingAllowance"):a.quoteLimitLoading?e.$t("quoting"):a.loadingLimitApprove?e.$t("approve"):"",loading:a.loadingLimitApprove||a.loadingLimit||a.loadingLimitAllowance,disabled:!s.checkLimitAmount()},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(s.checkLimitAmountMessage()||e.$t("approve")),1)]})),_:1},8,["color","loading-text","loading","disabled"])):(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:5,class:"submit-btn",block:"",loading:a.loadingLimit||a.limitQuoteLoading,"loading-text":a.limitQuoteLoading?e.$t("quoting"):a.loadingLimit?0===a.activeTab?e.$t("buying"):e.$t("selling"):e.$t("quoting"),color:s.limitButtonColor,disabled:!s.checkLimitAmount()||!a.limitAmount1||!a.limitAmount2||a.loadingLimitAllowance,"native-type":"submit"},{default:Object(n["withCtx"])((function(){var t;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(s.checkLimitAmountMessage()||(0===a.activeTab?e.$t("buy"):e.$t("sell"))+" "+((null===(t=a.limitToken1)||void 0===t?void 0:t.symbol)||"")),1)]})),_:1},8,["loading","loading-text","color","disabled"]))]})),_:1},8,["onSubmit"])]),Object(n["createElementVNode"])("ul",li,[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",ri,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[19]||(t[19]=Object(n["withModifiers"])((function(t){return s.alertTips(e.$t("slippage"),e.$t("minimumReceivedTips"))}),["stop"]))})]),Object(n["createElementVNode"])("div",ci,[Object(n["createElementVNode"])("span",di,Object(n["toDisplayString"])(a.limitSlippage)+"%",1),Object(n["createVNode"])(p,{slippage:a.limitSlippage,"onUpdate:slippage":t[20]||(t[20]=function(e){return a.limitSlippage=e}),icon:1,onOnSubmit:s.onSubmitLimitSlippage},null,8,["slippage","onOnSubmit"])])]),Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",ui,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("limitExpiredTime")),1)]),Object(n["createElementVNode"])("div",mi,Object(n["toDisplayString"])(a.LimitExpiredDays)+" "+Object(n["toDisplayString"])(e.$t("days")),1)])]),Object(n["createElementVNode"])("div",bi,[Object(n["createElementVNode"])("div",pi,[Object(n["createElementVNode"])("h3",hi,Object(n["toDisplayString"])(e.$t("historyLimitOrder")),1),fi,Object(n["createVNode"])(h,{modelValue:a.isCurrentToken,"onUpdate:modelValue":t[21]||(t[21]=function(e){return a.isCurrentToken=e}),"icon-size":"0.32rem",style:{"--van-checkbox-size":"1.1"}},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("currentToken")),1)]})),_:1},8,["modelValue"]),a.loadingGetLimitOrder?(Object(n["openBlock"])(),Object(n["createBlock"])(f,{key:0,size:"0.4rem",style:{"margin-left":"0.36rem"}})):(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",{key:1,class:"iconfont icon-shuaxin",onClick:t[22]||(t[22]=Object(n["withModifiers"])((function(){return s.getLimitOrder&&s.getLimitOrder.apply(s,arguments)}),["stop"]))}))]),Object(n["createElementVNode"])("ul",vi,[(null===(l=s.filterLimitOrders)||void 0===l?void 0:l.length)>0?(Object(n["openBlock"])(),Object(n["createBlock"])(k,{key:0,items:s.filterLimitOrders,"min-item-size":200,"key-field":"id","page-mode":"",buffer:1e3,class:"scroller"},{default:Object(n["withCtx"])((function(e){var t=e.item,o=e.index,i=e.active;return[Object(n["createVNode"])(g,{item:t,active:i,"data-index":o},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(v,{item:t,onRefresh:s.refreshLimit},null,8,["item","onRefresh"])]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])):Object(n["createCommentVNode"])("",!0),Object(n["withDirectives"])(Object(n["createVNode"])(O,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[n["vShow"],s.filterLimitOrders&&0===s.filterLimitOrders.length]])])]),Object(n["createElementVNode"])("div",gi,[Object(n["createElementVNode"])("div",{class:"section-audit",onClick:t[23]||(t[23]=Object(n["withModifiers"])((function(){return s.goAudit&&s.goAudit.apply(s,arguments)}),["stop"]))},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("securityAudit"))+": ",1),ki])])],4),Object(n["createVNode"])(j,{visible:a.dialogVisibleLimit,"onUpdate:visible":t[24]||(t[24]=function(e){return a.dialogVisibleLimit=e}),limitInfo:a.limitInfo,onSubmit:s.submitLimitOrder,loading:a.loadingConfirmLimit,chain:e.$store.getters.netId||(null===(r=e.$f.getAddressAndChainFromId(i.swapId))||void 0===r?void 0:r.chain)||""},null,8,["visible","limitInfo","onSubmit","loading","chain"])],64)}o("3ca3"),o("ddb0"),o("e9c4"),o("a15b");var ji=o("85b6"),wi=o("57c9"),Ti=o("9587"),yi=function(e){return Object(n["pushScopeId"])("data-v-15aacb52"),e=e(),Object(n["popScopeId"])(),e},Si={class:"select-box"},Ni={key:0,class:"token-container"},xi={class:"text-s"},Vi={class:"text-l"},Ei={key:1},_i=yi((function(){return Object(n["createElementVNode"])("i",{class:"iconfont icon-collapse-down"},null,-1)})),Bi={class:"rules-content"},$i={class:"search-bar",action:"/"},Ai={key:0,class:"pop-title"},Ci={style:{background:"#fff"}},Di=["onClick"],Ii={class:"main"},Li={key:0,class:"risk-status high"},Fi={key:0,class:"minor"},Pi=yi((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),Ri={class:"right-label"},Ui=yi((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),Mi={key:0,class:"minor"};function zi(e,t,i,a,s,l){var r,c,d=Object(n["resolveComponent"])("van-image"),u=Object(n["resolveComponent"])("van-search"),m=Object(n["resolveComponent"])("van-empty"),b=Object(n["resolveComponent"])("van-icon"),p=Object(n["resolveComponent"])("DynamicScrollerItem"),h=Object(n["resolveComponent"])("DynamicScroller"),f=Object(n["resolveComponent"])("van-action-sheet");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Si,[Object(n["createElementVNode"])("button",{class:"select-container",type:"button",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return s.show=!0}),["stop"]))},[i.token.address||i.token.token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ni,[(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:i.token.logo_url||0,round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem",style:{"margin-right":"0.1rem"},"lazy-load":"","show-loading":"",src:i.token.logo_url?e.$f.formatIcon({logo_url:i.token.logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"])),Object(n["createElementVNode"])("div",xi,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])((null===(r=i.token)||void 0===r?void 0:r.symbol)||""),1),Object(n["createElementVNode"])("span",Vi,Object(n["toDisplayString"])(l.getChainName(null===(c=i.token)||void 0===c?void 0:c.chain)||i.chain),1)])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ei,Object(n["toDisplayString"])(e.$t("pleaseSelectToken")),1)),_i]),Object(n["createVNode"])(f,{show:s.show,"onUpdate:show":t[2]||(t[2]=function(e){return s.show=e}),title:e.$t("selectToken"),style:{height:"80vh","--van-popup-background-color":"#fff"},"lazy-render":!1},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",Bi,[Object(n["createElementVNode"])("form",$i,[Object(n["createVNode"])(u,{modelValue:s.keyword,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.keyword=e}),modelModifiers:{trim:!0},background:"#fff",shape:"round",placeholder:e.$t("searchContractORName"),onSearch:l.onSearch,onCancel:l.onCancel},null,8,["modelValue","placeholder","onSearch","onCancel"])]),""!==s.keyword||i.isBalance?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ai,Object(n["toDisplayString"])(e.$t("popularTokens")),1)),Object(n["createElementVNode"])("ul",Ci,[Object(n["withDirectives"])(Object(n["createVNode"])(m,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[n["vShow"],s.searchTokens&&0===s.searchTokens.length&&!s.loading]]),Object(n["createVNode"])(h,{items:s.searchTokens,"min-item-size":30,"key-field":"address",class:"tokens"},{default:Object(n["withCtx"])((function(t){var a=t.item,r=t.index,c=t.active;return[Object(n["createVNode"])(p,{item:a,active:c,"data-index":r},{default:Object(n["withCtx"])((function(){var t;return[Object(n["createElementVNode"])("li",{class:"token-item",onClick:Object(n["withModifiers"])((function(e){return l.handleSelectToken(a)}),["stop"])},[Object(n["createVNode"])(d,{class:"icon-token",round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:a.logo_url?e.$f.formatIcon({logo_url:a.logo_url}):s.errorIcon,"error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div",Ii,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(a.symbol),1),(a.risk_score>55||a.risk_level<0)&&1!==a.risk_level?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Li,Object(n["toDisplayString"])(e.$t("highRisk")),1)):Object(n["createCommentVNode"])("",!0)]),(null!==a&&void 0!==a&&null!==(t=a.tags)&&void 0!==t&&t.includes("tokens")||null===a||void 0===a||!a.tags)&&a.address!==s.nativeToken?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Fi,Object(n["toDisplayString"])(a.address.slice(0,6)+"..."+a.address.slice(-6)),1)):Object(n["createCommentVNode"])("",!0)]),Pi,Object(n["createElementVNode"])("div",Ri,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(a.value?e.$f.formatNumber2(a.value):""),1),Ui,void 0!==a.price?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Mi,"$"+Object(n["toDisplayString"])(a.value?e.$f.formatNumber2(a.value*a.price):""),1)):Object(n["createCommentVNode"])("",!0)]),a.address===(i.token.address||i.token.token)?(Object(n["openBlock"])(),Object(n["createBlock"])(b,{key:0,size:"0.32rem",color:"#558BED",name:"success"})):(Object(n["openBlock"])(),Object(n["createBlock"])(b,{key:1,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,Di)]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])])])]})),_:1},8,["show","title"])])}var qi=o("aeccf"),Wi=null,Hi={name:"SwapSelectToken",props:{tokens:Array,token:{type:Object,default:function(){return{address:"",chain:"",symbol:"",isbaseToken:!1}}},chain:String,hasNative:{type:Boolean,default:!0},isBalance:{type:Boolean,default:!1}},emits:["update:token"],data:function(){return{errorIcon:qi,show:!1,keyword:"",searchTokens:this.tokens||[],loading:!1,nativeToken:yt["k"]}},computed:{searchResultTokens:function(){var e,t=this;return(null===(e=this.searchTokens)||void 0===e?void 0:e.length)>0?this.searchTokens:this.tokens.filter((function(e){return t.hasNative||e.address!==yt["k"]}))}},watch:{keyword:function(e){""!==e?this.tokenSearch():this.searchTokens=this.tokens},show:function(e){var t,o,n;e&&(this.searchTokens=this.tokens,this.keyword=""),console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(o=t._tw_)||void 0===o||null===(n=o.isRefreshEnable)||void 0===n||n.call(o,"bridge",!e)}},methods:{getChainName:function(e){var t,o=Vt["a"].get("chainConfig",yt["l"])||{};return(null===(t=o[e])||void 0===t?void 0:t.name)||e},onSearch:function(e){console.log(e),Wi&&(clearTimeout(Wi),Wi=null),this.search()},onCancel:function(){this.keyword="",this.show=!1},handleSelectToken:function(e){var t=this;if(null!==e&&void 0!==e&&e.address||null!==e&&void 0!==e&&e.token){var o=Object(Ke["a"])(Object(Ke["a"])({},e),{},{address:e.address||e.token,isbaseToken:this.token.isbaseToken});this.$emit("update:token",o),Object.keys(o).forEach((function(e){t.token[e]=o[e]})),this.show=!1}},tokenSearch:function(){var e=this;Wi&&(clearTimeout(Wi),Wi=null),Wi=setTimeout((function(){e.search()}),500)},search:function(){var e=this;if(""!==this.keyword){var t=new RegExp(this.keyword,"i"),o=this.tokens.filter((function(o){return(t.test(o.address)||t.test(o.symbol)||t.test(o.name))&&(e.hasNative||o.address!==yt["k"])}));this.loading=!0,Object(Nt["wb"])(this.keyword,this.chain).then((function(t){var n,i,a,s=null===(n=t.filter)||void 0===n||null===(i=n.call(t,(function(t){return t.chain===e.chain&&!o.some((function(e){return e.token===t.token}))})))||void 0===i||null===(a=i.map)||void 0===a?void 0:a.call(i,(function(e){return Object(Ke["a"])(Object(Ke["a"])({},e),{},{address:e.token})}));e.searchTokens=[].concat(Object(Ge["a"])(o),Object(Ge["a"])(s))})).catch((function(t){console.log(t),e.searchTokens=[]})).finally((function(){e.loading=!1}))}else this.searchTokens=this.tokens.filter((function(t){return e.hasNative||t.address!==yt["k"]}))}}};o("2bd0");const Qi=$t()(Hi,[["render",zi],["__scopeId","data-v-15aacb52"]]);var Gi=Qi,Ki=o("ce94"),Ji=o("cf1a"),Zi=o("3edc"),Yi=o("7f08"),Xi=o("f465"),ea=o("ddc3"),ta=null,oa=null,na=null,ia=null;Zi["a"].props.components.default=function(){return{OpenIndicator:{render:function(){return Object(n["h"])("span",{innerHTML:'<svg height="8" viewBox="0 0 14 8" width="14" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" transform="matrix(0 1 -1 0 16 -5)"><path d="m0 0h18v18h-18z"/><path d="m12.8008158 9.14463395c-.0305856.13208319-.0973435.25748808-.2002738.36041835l-6.0104076 6.0104076c-.29289322.2928933-.76776696.2928933-1.06066017 0-.29289322-.2928932-.29289322-.7677669 0-1.0606601l5.48233267-5.48233272-5.48147681-5.48147682c-.29289322-.29289322-.29289322-.76776696 0-1.06066017.29289321-.29289322.76776695-.29289322 1.06066017 0l6.01040764 6.01040764c.1909127.19091266.2573853.45914247.1994179.70389622z" fill="#999"/></g></svg>'})}}}};var aa="2",sa={name:"BridgeLimit",components:{PercentStep:ji["a"],TxItem:wi["a"],SwapSelectToken:Gi,ConfirmSwap:Ko["a"],PriceChart:Ji["a"],SlippageButton:Je["a"],ConfirmLimit:Ki["a"],LimitTxItem:Ti["a"],vSelect:Zi["a"]},setup:function(){var e,t,o,n,i=Vt["a"].get("chainConfig",yt["l"])||{},a=Object.values(i),s=(null===(e=window)||void 0===e||null===(t=e.ethereum)||void 0===t?void 0:t.chainId)&&(null===(o=a.find((function(e){return Number(e.chainId)===Number(window.ethereum.chainId)})))||void 0===o?void 0:o.netName)||on["a"].getters.netId,l=yt["k"],r=l+"-"+s,c=Object(en["useStorage"])("bridge_limitId",r,localStorage),d=null===(n=Object(Yi["getAddressAndChainFromId"])(c.value))||void 0===n?void 0:n.chain;return d!==s&&(c.value=r),{swapId:c,swapToken:l,swapChain:s}},data:function(){var e,t,o,n;return{LimitExpiredDays:yt["f"],nativeToken:yt["k"],height:100,tokens:[],token1:{address:this.swapToken||"",chain:this.swapChain||"",balance:0,symbol:""},token2:{address:"",chain:"",balance:0,symbol:""},fromAmount:"",toAmount:"",baseToken:{token:{symbol:""},pairs:[]},baseTokenExtra:{},selected:0,dataX:[],dataY:[],swapQuoteInfo:{},isPairShowMore:!1,quoteLoading:!1,allowance:0,loadingApprove:!1,swapRouterPath:[],nativePrice:0,initTxs:[],txsLoading:!1,isCurrentToken:!0,userBalanceTokens:[],isAndroid:!(null===(e=window)||void 0===e||null===(t=e._tw_)||void 0===t||!t.appGetPlatform),gasPrice:"0",spender:"",isCannotSellAll:!1,baseTokenPrice:0,isTax:!1,txsTokens:sessionStorage.txsTokens?JSON.parse(sessionStorage.txsTokens||[]):[],isAmount:!0,swapPathList:[],listRouter:[],dialogListRouterVisible:!1,selectedRouterIndex:0,openLp:null===(o=window)||void 0===o||null===(n=o._tw_)||void 0===n?void 0:n.openLp,tx:{},userTokenList:[],activeTab:Number(this.$route.query.dir)||0,limitFromToken:{address:"",chain:"",balance:0,symbol:"",price:0},limitFromAmount:"",limitToToken:{address:this.swapToken||"",chain:this.swapChain||"",balance:0,symbol:"",price:0},limitToAmount:"",limitPrice:"",loadingLimit:!1,dialogVisibleLimit:!1,loadingConfirmLimit:!1,limitInfo:{fromToken:{address:"",chain:"",balance:0,symbol:"",price:0},toToken:{address:this.swapToken||"",chain:this.swapChain||"",balance:0,symbol:"",price:0},fromAmount:"",toAmount:"",targetToken:"",targetLimitPrice:""},limitAllowance:0,loadingLimitApprove:!1,quoteLimitLoading:!1,limitOrders:[],limitMinReturn:0,loadingGetLimitOrder:!1,limitToken1:{address:this.swapToken||"",chain:this.swapChain||"",balance:0,symbol:"",price:0},limitAmount1:"",limitToken2:{address:"",chain:"",balance:0,symbol:"",price:0},limitAmount2:"",rateType:!0,limitQuoteLoading:!1,limitSlippage:localStorage.limitSlippage||"20",loadingAllowance:!1,loadingLimitAllowance:!1,triggerPrice:""}},computed:{typeTabs:function(){return[{name:this.$t("buy"),type:0},{name:this.$t("sell"),type:1}]},netId:function(){return this.$store.getters.netId||""},tokenInfo:function(){if("Bridge"!==this.$route.name)return{id:"",token:"",chain:""};var e=this.$f.getAddressAndChainFromId(this.swapId,1),t=Object(We["a"])(e,2),o=t[0],n=t[1];return{id:this.swapId,token:o,chain:n}},tabs:function(){return[{name:this.$t("buy"),value:"buy"},{name:this.$t("sell"),value:"sell"}]},isLimitApprove:function(){if(!this.limitAllowance)return!1;var e=0===this.activeTab?this.limitToken2:this.limitToken1,t=e.decimals||0,o=0===this.activeTab?this.limitAmount2:this.limitAmount1;return xt["utils"].parseUnits(new Xo.a(o||0).toFixed(t),t).lte(this.limitAllowance)},minReceived:function(){var e,t=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.routerPath)||{},o=t[t.length-1];return new Xo.a(null===o||void 0===o?void 0:o.amount).times(100-Number(this.slippage)).div(Math.pow(10,((null===o||void 0===o?void 0:o.decimals)||0)+2)).toFixed((null===o||void 0===o?void 0:o.decimals)||0)},maxSold:function(){var e,t=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.routerPath)||{},o=t[0];return new Xo.a(null===o||void 0===o?void 0:o.amount).times(1+Number(this.slippage)/100).div(Math.pow(10,(null===o||void 0===o?void 0:o.decimals)||0)).toFixed((null===o||void 0===o?void 0:o.decimals)||0)},txs:function(){if(this.isCurrentToken){var e,t,o,n=this.$f.getAddressAndChainFromId(this.swapId,1),i=Object(We["a"])(n,2),a=i[0],s=i[1],l=null===(e=this.$store.state)||void 0===e||null===(t=e.chainConfig)||void 0===t?void 0:t[s],r=null===l||void 0===l?void 0:l.wmainWrapper;return a=a===yt["k"]?r:a,null===(o=this.initTxs)||void 0===o?void 0:o.filter((function(e){return e.from_address===a||e.to_address===a||(a===yt["k"]||a===r)&&(e.from_address===yt["k"]||e.from_address===r||e.to_address===yt["k"]||e.to_address===r)}))}return this.initTxs},filterLimitOrders:function(){if(this.isCurrentToken){var e,t=this.limitToken1.address;return null===(e=this.limitOrders)||void 0===e?void 0:e.filter((function(e){return e.target_token===t}))}return this.limitOrders},taxStr:function(){var e,t,o,n,i,a,s,l=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.totalTax)||((null===(t=this.swapQuoteInfo)||void 0===t?void 0:t.total_sell_tax)||0)+((null===(o=this.swapQuoteInfo)||void 0===o?void 0:o.total_buy_tax)||0);return l>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(l,1),"%)"):0===this.activeTab&&(null===(n=this.baseTokenExtra)||void 0===n?void 0:n.buy_tax)>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(null===(a=this.baseTokenExtra)||void 0===a?void 0:a.buy_tax,1),"%)"):1===this.activeTab&&(null===(i=this.baseTokenExtra)||void 0===i?void 0:i.sell_tax)>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(null===(s=this.baseTokenExtra)||void 0===s?void 0:s.sell_tax,1),"%)"):""},priceImpactV:function(){if(!Number(this.fromAmount)&&!Number(this.toAmount))return"";var e=this.swapQuoteInfo.routerPath,t=(null===e||void 0===e?void 0:e.length)>0?null===e||void 0===e?void 0:e[0]:null,o=(null===e||void 0===e?void 0:e.length)>0?null===e||void 0===e?void 0:e[e.length-1]:null;if(t&&o){var n=this.swapQuoteInfo.from_price,i=this.swapQuoteInfo.to_price,a=xt["utils"].formatUnits(t.amount,t.decimals),s=xt["utils"].formatUnits(o.amount,o.decimals);return new Xo.a(a).times(n).div(new Xo.a(s).times(i)).minus(1).abs()}return""},priceImpact:function(){return this.priceImpactV?this.$f.formatNumber2(this.priceImpactV.times(100).toFixed(),2)+"%":""},swapButtonColor:function(){var e,t,o,n;return this.$store.state.currentAccount?null!==(e=this.priceImpactV)&&void 0!==e&&null!==(t=e.gt)&&void 0!==t&&t.call(e,.4)?"#999":null!==(o=this.priceImpactV)&&void 0!==o&&null!==(n=o.gt)&&void 0!==n&&n.call(o,.1)?"#F7933F":0===this.activeTab?this.$store.getters.upColor[3]:1===this.activeTab?this.$store.getters.downColor[3]:"#558BED":"#999"},limitButtonColor:function(){return this.$store.state.currentAccount?0===this.activeTab?this.$store.getters.upColor[3]:1===this.activeTab?this.$store.getters.downColor[3]:"#558BED":"#999"},priceImpactColor:function(){var e,t,o,n,i,a;return null!==(e=this.priceImpactV)&&void 0!==e&&null!==(t=e.gt)&&void 0!==t&&t.call(e,.4)?"#F81111":null!==(o=this.priceImpactV)&&void 0!==o&&null!==(n=o.gt)&&void 0!==n&&n.call(o,.1)?"#F7933F":null!==(i=this.priceImpactV)&&void 0!==i&&null!==(a=i.gt)&&void 0!==a&&a.call(i,.05)?"#f8be46":""},swapTokens:function(){var e,t,o=Object(Ge["a"])(null===(e=this.userBalanceTokens.slice())||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,(function(e){return!e.isWrapped})));return this.tokens.slice().forEach((function(e){var t=o.find((function(t){return t.id===e.id}));t?t.logo_url=e.logo_url:o.push(e)})),o.length>0?o:this.tokens.slice()},isShow:function(){var e,t,o,n,i,a=this.$store.state.chainConfig||Vt["a"].get("chainConfig"),s=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(this.swapId))||void 0===e?void 0:e.chain)||"";return!(!a||!s)&&(null!==(t=null===(o=a[s])||void 0===o||null===(n=o.swaps)||void 0===n||null===(i=n.some)||void 0===i?void 0:i.call(n,(function(e){return e.router_address})))&&void 0!==t&&t)},fromToken:function(){return 1===this.activeTab?this.token1:this.token2},toToken:function(){return 1===this.activeTab?this.token2:this.token1},disabled1:function(){var e,t;if(!Number(this.limitPrice))return!0;var o=null===(e=this.baseToken)||void 0===e||null===(t=e.token)||void 0===t?void 0:t.current_price_usd;return 1===this.activeTab&&this.limitPrice<o},disabled2:function(){var e,t;if(!Number(this.limitPrice))return!0;var o=null===(e=this.baseToken)||void 0===e||null===(t=e.token)||void 0===t?void 0:t.current_price_usd;return 0===this.activeTab&&this.limitPrice>o}},watch:{swapId:function(e){e&&"Bridge"===this.$route.name&&(this.slippage=aa,this.isCannotSellAll=!1,this.baseTokenExtra={},this.baseTokenPrice=0,this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.selectedRouterIndex=0,this.getBaseToken(),this.getUserAllTxs(),this.getUserTokenList(),this.getAllowance(),this.getTokenDetails(),this.supportChainLimit(),this.getLimitAllowance())},"$store.state.currentAccount":function(e){e&&"Bridge"===this.$route.name&&(this.slippage=aa,this.isCannotSellAll=!1,this.selectedRouterIndex=0,this.getUserAllTxs(),this.getUserTokenList(),this.getSwapTokenList(),this.getAllowance(),this.getTokenDetails(),this.getLimitAllowance())},isPairShowMore:function(){this.getLeftHeight()},"$store.state.ws.tx":function(e){var t=this;this.tx=e,ta||(ta=setTimeout((function(){var e,o=t.tx,n=t.$store.state.chainConfig||Vt["a"].get("chainConfig"),i=t.baseToken.token.chain||"",a=null===n||void 0===n?void 0:n[i],s=null===a||void 0===a?void 0:a.wmainWrapper,l=null===(e=t.baseToken)||void 0===e?void 0:e.token.token;l===yt["k"]&&i&&s&&(l=s);var r=t.baseToken.token.price_change,c=100*Number(t.baseToken.token.current_price_usd)/(100+Number(r));o.from_address===l?(t.baseToken.token.current_price_usd=o.from_price_usd,t.baseToken.token.price_change=100*(o.from_price_usd-c)/c):o.to_address===l&&(t.baseToken.token.current_price_usd=o.to_price_usd,t.baseToken.token.price_change=100*(o.to_price_usd-c)/c),o.from_address===t.limitToken1.address?t.limitToken1.price=o.from_price_usd:o.to_address===t.limitToken1.address&&(t.limitToken1.price=o.to_price_usd),o.to_address===t.limitToken2.address?t.limitToken2.price=o.to_price_usd:o.from_address===t.limitToken2.address&&(t.limitToken2.price=o.from_price_usd),t.dataY=t.dataY.map((function(e,o,n){return o===n.length-1?t.baseToken.token.current_price_usd:e}));var d=t.baseToken.pairs.findIndex((function(e){return e.pair===o.pair_address}));if(d>-1){var u=t.baseToken.pairs[d];o.from_address===u.token0_address?(o.from_reserve&&(t.baseToken.pairs[d].reserve0=o.from_reserve,t.baseToken.pairs[d].token0_price_usd=o.from_price_usd),o.to_reserve&&(t.baseToken.pairs[d].reserve1=o.to_reserve,t.baseToken.pairs[d].token1_price_usd=o.to_price_usd)):(o.to_reserve&&(t.baseToken.pairs[d].reserve0=o.to_reserve,t.baseToken.pairs[d].token0_price_usd=o.to_price_usd),o.from_reserve&&(t.baseToken.pairs[d].reserve1=o.from_reserve,t.baseToken.pairs[d].token1_price_usd=o.from_price_usd))}ta=null}),1e3))}},methods:{init:function(){var e,t;this.getFeeInfo(),this.handleWalletAddress(!1);var o=sessionStorage.swap_token1?JSON.parse(sessionStorage.swap_token1):"",n=(null===(e=this.$f.getAddressAndChainFromId(this.swapId))||void 0===e?void 0:e.address)||"",i=this.$store.getters.netId||(null===(t=this.$f.getAddressAndChainFromId(this.swapId))||void 0===t?void 0:t.chain)||"";n&&(n!==this.token1.address||o&&o.address!==n)?(this.token1={address:n||"",chain:i||"",balance:0,symbol:""},this.limitToken1=Object(Ke["a"])({},this.token1)):n||!o||i!==o.chain||this.token1.address||(this.limitToken1=Object(Ke["a"])({},this.swap_token1));var a=sessionStorage.swap_token2?JSON.parse(sessionStorage.swap_token2):"";a&&i===a.chain&&!this.token2.address&&(this.token2=Object(Ke["a"])({},a),this.limitToken2=Object(Ke["a"])({},a)),this.getBaseToken(),this.getUserTokenList(),this.getAllowance(),this.getSwapTokenList(),this.supportChainLimit(),this.getLimitOrder(),this.getLimitAllowance()},formatUnits:xt["utils"].formatUnits,getFeeInfo:function(){var e=this;Object(Nt["C"])().then((function(t){var o=e.$store.getters.netId;e.$store.state.feeInfo=e.$f.formatFee(t,o)}))},watchFromAmount:function(){if(!this.quoteLoading||this.isAmount){var e=this.fromAmount,t=Number(e);""===e||"."===e?(this.fromAmount="",this.toAmount="",this.quoteLoading=!1):0===t&&0!==Number(this.toAmount)?(this.toAmount=0,this.quoteLoading=!1):t&&(this.isAmount=!0,this.toAmount="",this.getQuoteInfo())}},watchToAmount:function(){if(!this.quoteLoading||!this.isAmount){var e=this.toAmount,t=Number(e);""===e||"."===e?(this.fromAmount="",this.toAmount="",this.quoteLoading=!1):0===t&&0!==Number(this.fromAmount)?(this.fromAmount=0,this.quoteLoading=!1):t&&(this.fromAmount="",this.isAmount=!1,this.getQuoteInfo(!1))}},switchTab:function(e){this.activeTab=e,this.$refs.percentStep1.handleClick(0),this.limitAmount1="",this.limitAmount2="",this.getLimitAllowance()},switchToken:function(){1===this.activeTab?this.activeTab=0:this.activeTab=1,this.handlePercentChange1(0),this.limitAmount1="",this.limitAmount2="",this.getLimitAllowance()},handlePercentChange1:function(e,t){if(!t){var o=e/100,n=0===this.activeTab?this.limitToken2:this.limitToken1,i=n.balance||0;if(o){var a=n.decimals||18;if((null===n||void 0===n?void 0:n.address)===yt["k"]){var s=n.chain,l=yt["j"][s]||.01;i=new Xo.a(i).minus(l).times(o).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0]}else i=new Xo.a(i).times(o).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0];0===Number(i)&&(i="")}else i="";0===this.activeTab?this.limitAmount2!==i&&(this.limitAmount2=i<0?0:i,this.watchLimitAmount2()):this.limitAmount1!==i&&(this.limitAmount1=i<0?0:i,this.watchLimitAmount1())}},watchLimitAmount1:function(){var e=this;this.limitQuoteLoading||(oa&&(clearTimeout(oa),oa=null),oa=setTimeout((function(){var t=e.limitAmount1,o=Number(t);""===t||"."===t?(e.limitAmount1="",e.limitAmount2=""):0===o&&0!==Number(e.limitAmount2)?e.limitAmount2=0:o&&(e.limitAmount2="",e.watchLimitPrice())}),500))},watchLimitAmount2:function(){var e=this;this.limitQuoteLoading||(na&&(clearTimeout(na),na=null),na=setTimeout((function(){var t=e.limitAmount2,o=Number(t);""===t||"."===t?(e.limitAmount1="",e.limitAmount2=""):0===o&&0!==Number(e.limitAmount1)?e.limitAmount1=0:o&&(e.limitAmount1="",e.watchLimitPrice())}),500))},watchLimitPrice:function(){var e=this;this.supportChainLimit()&&(Number(this.limitPrice)&&(Number(this.limitAmount1)||Number(this.limitAmount2))&&this.limitToken1.address!==this.limitToken2.address&&""!==this.$store.state.wallet?(ia&&(clearTimeout(ia),ia=null),ia=setTimeout((function(){var t=0===e.activeTab?e.limitToken2:e.limitToken1,o=1===e.activeTab?e.limitToken2:e.limitToken1,n=xt["utils"].parseUnits((0===e.activeTab?e.limitAmount2:e.limitAmount1)||"0",t.decimals).toString(),i=xt["utils"].parseUnits((1===e.activeTab?e.limitAmount2:e.limitAmount1)||"0",o.decimals).toString(),a=t.address,s=o.address,l={from_token:a,to_token:s,amountIn:n,amountOut:i};e.limitQuoteLoading=!0,Object(Nt["tb"])(l).then((function(t){var n,i,a,s;if(1!==t.toWrapper&&2!==t.toWrapper){var l=null===t||void 0===t||null===(n=t.routerPath)||void 0===n||null===(i=n.find)||void 0===i?void 0:i.call(n,(function(t){return t.address===e.limitToken1.address})),r=null===t||void 0===t||null===(a=t.routerPath)||void 0===a||null===(s=a.find)||void 0===s?void 0:s.call(a,(function(t){return t.address===e.limitToken2.address}));if(e.limitToken1.price=l.price,e.limitToken2.price=r.price,new Xo.a((null===l||void 0===l?void 0:l.amount)||0).lte(0)||new Xo.a((null===r||void 0===r?void 0:r.amount)||0).lte(0))e.$dialog.alert({title:e.$t("tips"),message:e.$t("limitOrderAmount"),confirmButtonText:e.$t("okay"),confirmButtonColor:"#558BED"});else{e.limitPrice&&e.limitAmount1&&e.limitAmount2?0===e.activeTab?e.limitAmount1=new Xo.a(xt["utils"].formatUnits(l.amount,l.decimals)).times(l.price||0).div(e.limitPrice||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken1.decimals,"})?")))[0]:e.limitAmount2=new Xo.a(xt["utils"].formatUnits(r.amount,r.decimals)).times(e.limitPrice||0).div(l.price||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken2.decimals,"})?")))[0]:e.limitPrice&&e.limitAmount1?e.limitAmount2=new Xo.a(xt["utils"].formatUnits(r.amount,r.decimals)).times(e.limitPrice||0).div(l.price||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken2.decimals,"})?")))[0]:e.limitPrice&&e.limitAmount2&&(e.limitAmount1=new Xo.a(xt["utils"].formatUnits(l.amount,l.decimals)).times(l.price||0).div(e.limitPrice||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken1.decimals,"})?")))[0]);var c=new Xo.a(e.limitSlippage||0);c=new Xo.a(1).minus(c.div(100));var d=0===e.activeTab?e.limitAmount1:e.limitAmount2;e.limitMinReturn=new Xo.a(d||0).times(c).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(o.decimals,"})?")))[0]}}else e.limitQuoteLoading=!1})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.limitQuoteLoading=!1}))}),500)):this.limitToken1.address===this.limitToken2.address&&this.$toast({position:"top",message:this.$t("twoIdenticalTokens")}))},minusLimitPrice:function(){this.limitPrice&&new Xo.a(this.limitPrice).gt("0")&&(this.limitPrice=this.$f.formatNumber(new Xo.a(this.limitPrice).times(.99).toFixed()),this.watchLimitPrice())},addLimitPrice:function(){this.limitPrice&&new Xo.a(this.limitPrice).gt("0")&&(this.limitPrice=this.$f.formatNumber(new Xo.a(this.limitPrice).times(1.01).toFixed()),this.watchLimitPrice())},getLeftHeight:function(){var e=this;this.$nextTick((function(){var t=Object(Xi["o"])(e.$refs.swapLeft),o=t.height;e.height=o}))},handleWalletAddress:function(){var e,t,o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet?!window.ethereum||null!==(e=window)&&void 0!==e&&e.tronLink?this.$toast({message:this.$t("browserWalletNotDetected"),position:"top"}):(this.$store.state.importAddressVisible=!1,null!==(t=window)&&void 0!==t&&t.tronLink||this.$store.commit("changeConnectVisible",!0)):o&&this.$store.commit("changeDisconnectVisible",!0)},handleTaxSlippage:function(){if(1===this.activeTab){var e,t;if(Number(this.slippage)>Number(null===(e=this.baseTokenExtra)||void 0===e?void 0:e.sell_tax)+1)return;var o=Math.max(Math.min(Number(null===(t=this.baseTokenExtra)||void 0===t?void 0:t.sell_tax)+1,49.99),.5);this.slippage=String(Number(o.toFixed(2)))}else{var n,i;if(Number(this.slippage)>Number(null===(n=this.baseTokenExtra)||void 0===n?void 0:n.buy_tax)+1)return;var a=Math.max(Math.min(Number(null===(i=this.baseTokenExtra)||void 0===i?void 0:i.buy_tax)+1,49.99),.5);this.slippage=String(Number(a.toFixed(2)))}},getSwapTokenList:function(){var e,t=this,o=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(this.swapId))||void 0===e?void 0:e.chain)||"bsc";Object(Nt["eb"])(o).then((function(e){if(t.tokens=(null===e||void 0===e?void 0:e.map((function(e){return Object(Ke["a"])(Object(Ke["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token})})))||[],(!t.token2.address||t.token1.address===t.token2.address)&&t.tokens.length>0){var o=t.tokens.findIndex((function(e){return/USDT/.test(e.symbol)}));o=o<0?0:o;var n,i=t.tokens[o];if(t.token1.address===i.address)i=0===o&&null!==(n=t.tokens[1])&&void 0!==n?n:t.tokens[0];t.token2=Object(Ke["a"])({},i)}if((!t.limitToken2.address||t.limitToken1.address===t.limitToken2.address)&&t.tokens.length>0){var a=t.tokens.findIndex((function(e){return/USDT/.test(e.symbol)}));a=a<0?0:a;var s,l=t.tokens[a];if(t.limitToken1.address===l.address)l=0===a&&null!==(s=t.tokens[1])&&void 0!==s?s:t.tokens[0];t.limitToken2=Object(Ke["a"])({},l)}t.getTokenDetails()}))},getUserTokenList:function(){var e,t=this,o=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(this.swapId))||void 0===e?void 0:e.chain)||"bsc";Object(Nt["nb"])(o).then((function(e){var n,i,a;t.userBalanceTokens=null===(n=(null===e||void 0===e||null===(i=e.map((function(e){return Object(Ke["a"])(Object(Ke["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token})})))||void 0===i||null===(a=i.filter)||void 0===a?void 0:a.call(i,(function(e){return(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag})))||[])||void 0===n?void 0:n.filter((function(e){return!!Number(e.value)})),t.userBalanceTokens.length>0&&"tron"!==o&&"brc20"!==o&&"solana"!==o&&/^0x[0-9a-zA-Z]{40}$/.test(t.$store.state.currentAccount)&&Object(Nt["r"])(t.userBalanceTokens.map((function(e){return e.token||""})),o).then((function(e){var o,n,i;t.userBalanceTokens=null===(o=t.userBalanceTokens)||void 0===o||null===(n=o.map)||void 0===n||null===(i=n.call(o,(function(t,o){return Object(Ke["a"])(Object(Ke["a"])({},t),{},{value:xt["utils"].formatUnits(e[o],t.decimals||0)})})))||void 0===i?void 0:i.filter((function(e){return!!Number(e.value)}))}))}))},getTokenDetails:function(){var e=this;Promise.all([this.getToken2Info(),this.getToken1Info()]).then((function(){0===e.activeTab?e.allowance=e.token2.allowance||"0":e.allowance=e.token1.allowance||"0"}))},getToken2Info:function(){var e,t,o=this;return Object(Nt["fb"])(null===(e=this.token2)||void 0===e?void 0:e.address,null===(t=this.token2)||void 0===t?void 0:t.chain,this.$f.getSwapContract(this.$store.getters.netId)).then(function(){var e=Object(Qe["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.token2=Object(Ke["a"])(Object(Ke["a"])({},o.token2),t),sessionStorage.swap_token2=JSON.stringify(o.token2),o.limitToken2=Object(Ke["a"])(Object(Ke["a"])({},o.limitToken2),t),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getToken1Info:function(){var e,t,o=this;return Object(Nt["fb"])(null===(e=this.token1)||void 0===e?void 0:e.address,null===(t=this.token1)||void 0===t?void 0:t.chain,this.$f.getSwapContract(this.$store.getters.netId)).then(function(){var e=Object(Qe["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.token1=Object(Ke["a"])(Object(Ke["a"])({},o.token1),t),sessionStorage.swap_token1=JSON.stringify(o.token1),o.limitToken1=Object(Ke["a"])(Object(Ke["a"])({},o.limitToken1),t),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getBaseToken:function(){var e=this,t=this.swapId||"",o=this.$f.getAddressAndChainFromId(t,1),n=Object(We["a"])(o,2),i=n[0],a=n[1];if(this.token1.address&&(i=this.token1.address),this.token1.chain&&(a=this.token1.chain),i&&a){var s,l,r=i+"-"+a,c=null===(s=this.$store.state)||void 0===s||null===(l=s.chainConfig)||void 0===l?void 0:l[a],d=null===c||void 0===c?void 0:c.wmainWrapper,u=null===c||void 0===c?void 0:c.mainName;i===yt["k"]&&a&&d&&(r=d+"-"+a);var m=Object(Nt["M"])(r).then(function(){var t=Object(Qe["a"])(regeneratorRuntime.mark((function t(o){var n,a,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.baseToken=Object(Ke["a"])(Object(Ke["a"])({},o),i===yt["k"]?{token:Object(Ke["a"])(Object(Ke["a"])({},o.token),{},{token:i,symbol:u,logoURI:e.$f.formatIcon(r)})}:{}),a=null===o||void 0===o||null===(n=o.pairs)||void 0===n?void 0:n[0],s=null===a||void 0===a?void 0:a.pair,l=null===a||void 0===a?void 0:a.chain,s&&e.getKlineHistory(s+"-"+l),e.token1=Object(Ke["a"])(Object(Ke["a"])({},e.token1),{},{address:e.baseToken.token.token},e.baseToken.token),sessionStorage.swap_token1=JSON.stringify(e.token1),e.limitToken1=Object(Ke["a"])(Object(Ke["a"])({},e.limitToken1),{},{address:e.baseToken.token.token},e.baseToken.token),e.getLeftHeight(),e.limitPrice=e.baseToken.token.current_price_usd?e.$f.formatNumber(e.baseToken.token.current_price_usd):"",e.triggerPrice=e.baseToken.token.current_price_usd?e.$f.formatNumber(e.baseToken.token.current_price_usd):"",t.abrupt("return",o);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),b=Object(Nt["gb"])(t).then(function(){var t=Object(Qe["a"])(regeneratorRuntime.mark((function t(o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.baseTokenExtra=Object(Ke["a"])(Object(Ke["a"])({},o),{},{buy_tax:Number(Number(o.buy_tax).toFixed(2)),sell_tax:Number(Number(o.sell_tax).toFixed(2))}),e.handleTaxSlippage(),t.abrupt("return",o);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());Promise.all([m,b]).finally((function(){e.$store.dispatch("initWs",r)}))}},handleSelectToken2:function(e){sessionStorage.swap_token2=JSON.stringify(e),this.swapRouterPath=[],this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.slippage=aa,this.baseTokenPrice=0,this.selectedRouterIndex=0,this.fromAmount="",this.toAmount="",this.getAllowance(),this.getToken2Info()},handleSelectToken1:function(e){sessionStorage.swap_token1=JSON.stringify(e),this.swapRouterPath=[],this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.slippage=aa,this.baseTokenPrice=0,this.selectedRouterIndex=0,this.fromAmount="",this.toAmount="",this.getToken1Info(),this.swapId=((null===e||void 0===e?void 0:e.address)||(null===e||void 0===e?void 0:e.token))+"-"+e.chain},handleSelectLimitToken1:function(e){this.slippage=aa,this.limitAmount1="",this.limitAmount2="",this.handlePercentChange1(0),1===this.activeTab&&this.getLimitAllowance(),sessionStorage.swap_token1=JSON.stringify(e),this.token1=Object(Ke["a"])({},e),this.swapId=((null===e||void 0===e?void 0:e.address)||(null===e||void 0===e?void 0:e.token))+"-"+e.chain,this.getToken1Info()},handleSelectLimitToken2:function(e){this.slippage=aa,this.limitAmount1="",this.limitAmount2="",this.handlePercentChange1(0),sessionStorage.swap_token2=JSON.stringify(e),this.token2=Object(Ke["a"])({},e),this.getToken2Info(),0===this.activeTab&&this.getLimitAllowance()},getAllowance:function(){var e=this;if(this.$store.getters.netId&&this.$store.getters.netId===this.fromToken.chain&&this.fromToken.address){var t=this.$f.getSwapContract(this.$store.getters.netId);this.loadingAllowance=!0,Object(Nt["f"])(this.fromToken.address,t).then((function(t){e.allowance=t.toString()})).finally((function(){e.loadingAllowance=!1}))}},approve:function(){var e=this;return Object(Qe["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loadingApprove=!0,"bsc"!==e.$store.getters.netId&&"eth"!==e.$store.getters.netId||e.$f.setSwapSendType("fast"),Object(Nt["i"])(e.fromToken.address).then((function(e){return e.wait()})).then((function(t){console.log(t),e.getAllowance()})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loadingApprove=!1,e.$f.setSwapSendType("")}));case 3:case"end":return t.stop()}}),t)})))()},checkAmountMessage:function(){var e,t,o,n=this.fromToken.balance||0;return this.$store.state.currentAccount?!this.$store.state.currentAccount||window.ethereum||null!==(e=window)&&void 0!==e&&e.solana||null!==(t=window.trustwallet)&&void 0!==t&&t.solana||null!==(o=window)&&void 0!==o&&o.tronWeb?0===Number(n)||Number(n)<Number(this.fromAmount)||!this.$store.state.currentAccount?this.$t("insufficientBalance"):"0"===String(this.fromAmount)?this.$t("AmountCannotBeZero"):void 0:this.$t("observeAddressNotSwap"):this.$t("pConnectWallet")},getKlineHistory:function(e){var t,o=this;Object(Nt["I"])(e,"1",(null===(t=this.$f.getAddressAndChainFromId(this.swapId))||void 0===t?void 0:t.chain)||"").then((function(e){var t,n=(null===e||void 0===e||null===(t=e.slice)||void 0===t?void 0:t.call(e,-10))||[];o.dataX=n.map((function(e){return e.time})),o.dataY=n.map((function(e){return e.close}))}))},getUserAllTxs:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=this.$store.state.currentAccount;o&&(this.txsLoading=!0,Object(Nt["lb"])().then((function(o){var n,i,a,s,l=Array.isArray(o)?o:[],r=t&&!(null!==l&&void 0!==l&&null!==(n=l.some)&&void 0!==n&&n.call(l,(function(e){return e.transaction===t.transaction})))&&Date.now()-1e3*t.time<6e5;r&&setTimeout((function(){e.getUserAllTxs(t)}),1e4),l.length>0&&(e.initTxs=(null===l||void 0===l?void 0:l.map((function(e){return e.id?Object(Ke["a"])({},e):Object(Ke["a"])(Object(Ke["a"])({},e),{},{id:e.transaction})})))||[]),!r||null!==(i=(a=e.initTxs).some)&&void 0!==i&&i.call(a,(function(e){return e.transaction===t.transaction}))||e.initTxs.unshift(t);var c=[],d={};null===l||void 0===l||null===(s=l.forEach)||void 0===s||s.call(l,(function(e){d[e.from_address]||(c.push({address:e.from_address,symbol:e.from_symbol,chain:e.chain}),d[e.from_address]=!0),d[e.to_address]||(c.push({address:e.to_address,symbol:e.to_symbol,chain:e.chain}),d[e.to_address]=!0)})),e.txsTokens=c,sessionStorage.txsTokens=JSON.stringify(c||[])})).finally((function(){e.txsLoading=!1})))},alertTips:function(e,t){this.$dialog.alert({title:e,message:t,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"}).then((function(){}))},alertSupportChainTips:function(e){var t,o,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n?this.$dialog.confirm({title:"",message:e,confirmButtonText:null!==(t=window)&&void 0!==t&&null!==(o=t._tw_)&&void 0!==o&&o.appSwitchChain?this.$t("switchChain"):this.$t("getIt"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then((function(){var e,t,o,n;null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appSwitchChain&&(null===(o=window)||void 0===o||null===(n=o._tw_)||void 0===n||n.appSwitchChain())})):this.$dialog.alert({title:"",message:e,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"})},supportChain:function(){if("Bridge"===this.$route.name){var e,t,o,n,i,a,s,l,r,c=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(this.swapId))||void 0===e?void 0:e.chain)||"",d=Object.keys(yt["y"]),u=this.$store.state.chainConfig||Vt["a"].get("chainConfig"),m=null===d||void 0===d||null===(t=d.map)||void 0===t||null===(o=t.call(d,(function(e){return u[e].name})))||void 0===o||null===(n=o.join)||void 0===n?void 0:n.call(o,", "),b=null===u||void 0===u||null===(i=u[c])||void 0===i?void 0:i.name;if(!this.$store.getters.netId&&this.$store.state.chainId)return this.alertSupportChainTips(this.$t("notYetSupportedChainTips",{chains:m}),!0),!1;if(null!==(a=this.$store.state.currentAccount)&&void 0!==a&&null!==(s=a.startsWith)&&void 0!==s&&s.call(a,"T"))return this.alertSupportChainTips(this.$t("notYetSupportedChainTips1",{chain:"TRON",chains:m})),!1;if(c&&(null===d||void 0===d||null===(l=d.includes)||void 0===l||!l.call(d,c)))return this.alertSupportChainTips(this.$t("notYetSupportedChainTips1",{chain:b,chains:m}),!0),!1;if((null===(r=this.$f.getAddressAndChainFromId(this.swapId))||void 0===r?void 0:r.chain)!==this.$store.getters.netId&&this.$store.getters.netId)return this.alertSupportChainTips(this.$t("chainNotSame"),!0),!1}return!0},goAudit:function(){this.$f.openBrowser("https://beosin.com/audits/SwapFinder_202209021725.pdf")},onCountDownFinish:function(){this.token1.address!==this.token2.address&&(this.loadingApprove||"hidden"===document.visibilityState?this.$refs.countDown.reset():this.isAmount?this.watchFromAmount():this.watchToAmount())},countDownFinishReset:function(){this.$refs.countDown.reset()},appSwitchChain:function(e){var t,o,n,i;null!==(t=window)&&void 0!==t&&null!==(o=t._tw_)&&void 0!==o&&o.appSwitchChain&&(null===(n=window)||void 0===n||null===(i=n._tw_)||void 0===i||i.appSwitchChain(),e.stopPropagation())},formatPriceImpactColor:function(e){return e>40?"#F81111":e>10?"#F7933F":e>5?"#f8be46":""},goLiquidity:function(){var e,t;if(null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.openLp){var o,n,i,a=this.$store.state.chainConfig||Vt["a"].get("chainConfig"),s=this.$store.getters.netId||(null===(o=this.$f.getAddressAndChainFromId(this.swapId))||void 0===o?void 0:o.chain)||"",l=null===a||void 0===a?void 0:a[s],r=null===l||void 0===l?void 0:l.wmainWrapper,c=null===(n=a[s])||void 0===n?void 0:n.swaps,d=null===(i=this.baseToken)||void 0===i?void 0:i.pairs,u=d.find((function(e){return c.some((function(t){return t.name===e.amm&&t.router_address}))}));if(u){var m,b,p=u.token0_address===r?yt["k"]:u.token0_address,h=u.token1_address===r?yt["k"]:u.token1_address,f=u.amm;null===(m=window)||void 0===m||null===(b=m._tw_)||void 0===b||b.openLp(p,h,f)}else{var v,g,k,O,j=this.tokenInfo.address||(null===(v=this.baseToken)||void 0===v||null===(g=v.token)||void 0===g?void 0:g.token)||"";j=j===r?yt["k"]:j,null===(k=window)||void 0===k||null===(O=k._tw_)||void 0===O||O.openLp(j,"","")}}},checkLimitAmount:function(){if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return!0;var e=0===this.activeTab?this.limitToken2:this.limitToken1,t=e.balance||0,o=0===this.activeTab?this.limitAmount2:this.limitAmount1;return!(0===Number(t)||Number(t)<Number(o)||""===this.$store.state.wallet||"0"===String(o)||this.limitToken1.address===this.limitToken2.address)},checkLimitAmountMessage:function(){var e,t,o,n=0===this.activeTab?this.limitToken2:this.limitToken1,i=n.balance||0,a=0===this.activeTab?this.limitAmount2:this.limitAmount1;return this.$store.state.currentAccount?!this.$store.state.currentAccount||window.ethereum||null!==(e=window)&&void 0!==e&&e.solana||null!==(t=window.trustwallet)&&void 0!==t&&t.solana||null!==(o=window)&&void 0!==o&&o.tronWeb?Number(0===i||Number(i)<Number(a)||""===this.$store.state.wallet)?this.$t("insufficientBalance"):"0"===String(a)?this.$t("AmountCannotBeZero"):"":this.$t("observeAddressNotSwap"):this.$t("pConnectWallet")},getLimitAllowance:function(){var e=this,t=0===this.activeTab?this.limitToken2:this.limitToken1;if(this.$store.getters.netId&&this.$store.getters.netId===t.chain&&t.address){var o=t.chain||this.$store.getters.netId||"bsc";if("solana"===o||"ton"===o)return;var n=yt["v"][o];this.loadingLimitAllowance=!0,Object(Nt["f"])(t.address,n).then((function(t){e.limitAllowance=t.toString(),console.log("limitAllowance",e.limitAllowance)})).finally((function(){e.loadingLimitAllowance=!1}))}},getLimitOrder:function(){var e=this;if(this.$store.getters.netId){var t=this.limitToken1.chain||this.$store.getters.netId||"bsc";this.loadingGetLimitOrder=!0,Object(Nt["K"])({chain:t}).then((function(t){e.limitOrders=t})).finally((function(){setTimeout((function(){e.loadingGetLimitOrder=!1}),800)}))}},refreshLimit:function(e){this.getLimitOrder(),e.from_token===yt["k"]&&(e.from_token===this.limitToken1.address?this.getToken1Info():e.from_token===this.limitToken2.address&&this.getToken2Info())},approveLimit:function(){var e=this;return Object(Qe["a"])(regeneratorRuntime.mark((function t(){var o,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.supportChainLimit()){t.next=2;break}return t.abrupt("return");case 2:e.loadingLimitApprove=!0,o=e.limitToken1.chain||e.$store.getters.netId||"bsc",n=yt["v"][o],i=0===e.activeTab?e.limitToken2:e.limitToken1,"bsc"!==e.$store.getters.netId&&"eth"!==e.$store.getters.netId||e.$f.setSwapSendType("fast"),Object(Nt["i"])(i.address,n).then((function(e){return e.wait()})).then((function(t){console.log(t),e.getLimitAllowance()})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loadingLimitApprove=!1,e.$f.setSwapSendType("")}));case 8:case"end":return t.stop()}}),t)})))()},supportChainLimit:function(){if("Bridge"===this.$route.name){var e,t,o,n,i,a,s,l=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(this.swapId))||void 0===e?void 0:e.chain)||"",r=Object.keys(yt["v"]),c=this.$store.state.chainConfig||Vt["a"].get("chainConfig"),d=r.map((function(e){return c[e].name})).join(", ");if(null!==(t=this.$store.state.currentAccount)&&void 0!==t&&null!==(o=t.startsWith)&&void 0!==o&&o.call(t,"T")||l&&(null===r||void 0===r||null===(n=r.includes)||void 0===n||!n.call(r,l)))return this.$toast({message:this.$t("notYetSupportedChainLimitTips",{chains:d}),position:"top"}),!1;if(console.log(this.$store.getters.netId,this.swapId),(null===(i=this.$f.getAddressAndChainFromId(this.swapId))||void 0===i?void 0:i.chain)!==this.$store.getters.netId&&this.$store.getters.netId)return this.$dialog.confirm({title:"",message:this.$t("chainNotSame"),confirmButtonText:null!==(a=window)&&void 0!==a&&null!==(s=a._tw_)&&void 0!==s&&s.appSwitchChain?this.$t("switchChain"):this.$t("getIt"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then((function(){var e,t,o,n;null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appSwitchChain&&(null===(o=window)||void 0===o||null===(n=o._tw_)||void 0===n||n.appSwitchChain())})),!1}return!0},onLimitSubmit:function(){try{var e;if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return void this.handleWalletAddress();if(!this.supportChainLimit())return;var t=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(this.swapId))||void 0===e?void 0:e.chain)||"";if(t!==this.netId)return void this.$toast({message:this.$t("plsSwitchChain",{chain:t}),position:"top"});this.isLimitApprove?this.openConfirmLimit():this.approveLimit()}catch(o){console.log(o)}},openConfirmLimit:function(){var e=0===this.activeTab?this.limitToken2:this.limitToken1,t=0===this.activeTab?this.limitToken1:this.limitToken2,o=0===this.activeTab?this.limitAmount2:this.limitAmount1,n=0===this.activeTab?this.limitAmount1:this.limitAmount2,i=0===this.activeTab?this.limitToken1.decimals:this.limitToken2.decimals,a=new Xo.a(this.limitSlippage||0);if(a=new Xo.a(1).minus(a.div(100)),e.address===yt["k"]){var s=window.navigator.userAgent;if(s.includes("OSType/2")){var l=s.replace(/^.*Ave.ai\/(.*) OSType\/2;$/,"$1"),r=ea.lte(l,"2.4.0")&&"1.0.6"!==l;if(r)return void this.$dialog.alert({title:this.$t("tips"),message:this.$t("limitOrderTips1"),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})}}var c=new Xo.a(yt["w"][e.chain||this.$store.getters.netId]||0).times(5);c=c.gte(3)?c.gte(50)?new Xo.a(50):c:new Xo.a(3);var d=new Xo.a(o).times(e.price).gte(c.times(.999));d?(this.limitInfo={orderType:this.selected,fromToken:e,toToken:t,fromAmount:o,toAmount:n,targetToken:this.limitToken1.address,targetTokenInfo:this.limitToken1,targetLimitPrice:this.limitPrice,triggerPrice:this.triggerPrice,activeTab:this.activeTab,minReturn:new Xo.a(n||0).times(a).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(i,"})?")))[0]},console.log("limitInfo",this.limitInfo),this.dialogVisibleLimit=!0):this.$dialog.alert({title:this.$t("tips"),message:this.$t("minimumTransactionAmount",{n:c.toFixed()}),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})},submitLimitOrder:function(){var e=this;if(this.supportChainLimit()){var t=new Xo.a(this.limitSlippage||0);t=new Xo.a(1).minus(t.div(100));var o=this.$store.state.currentAccount;console.log("maker",o);var n=0===this.activeTab?this.limitToken2:this.limitToken1,i=0===this.activeTab?this.limitToken1:this.limitToken2,a=0===this.activeTab?this.limitAmount2:this.limitAmount1,s=0===this.activeTab?this.limitAmount1:this.limitAmount2,l=n.address,r=xt["utils"].parseUnits(new Xo.a(a||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(n.decimals,"})?")))[0],n.decimals).toString(),c=i.address,d=xt["utils"].parseUnits(new Xo.a(s||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(i.decimals,"})?")))[0],i.decimals).toString(),u=xt["utils"].parseUnits(new Xo.a(s||0).times(t).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(i.decimals,"})?")))[0],i.decimals).toString(),m=this.limitToken1.address,b=this.limitPrice;this.loadingConfirmLimit=!0;var p=this.selected,h=this.triggerPrice,f=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"";Object(Nt["Ab"])(o,l,r,c,u,d,m,b,p,h,f).then((function(t){console.log(t),e.$notify({type:"success",message:e.$t("submitOrdersSuccess")}),e.getLimitOrder(),e.limitAmount1="",e.limitAmount2="",l===yt["k"]&&(l===e.limitToken1.address?e.getToken1Info():l===e.limitToken2.address&&e.getToken2Info())})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loadingConfirmLimit=!1,e.dialogVisibleLimit=!1}))}},onSubmitLimitSlippage:function(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.limitSlippage=(null===e||void 0===e?void 0:e.slippage)||"20")},minusTriggerPrice:function(){this.triggerPrice&&new Xo.a(this.triggerPrice).gt("0")&&(this.triggerPrice=this.$f.formatNumber(new Xo.a(this.triggerPrice).times(.99).toFixed()))},addTriggerPrice:function(){this.limitPrice&&new Xo.a(this.triggerPrice).gt("0")&&(this.triggerPrice=this.$f.formatNumber(new Xo.a(this.triggerPrice).times(1.01).toFixed()))},setLimitPrice:function(){this.baseToken.token.current_price_usd&&(this.limitPrice=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"")}}};o("74ca");const la=$t()(sa,[["render",Oi],["__scopeId","data-v-2ff24eca"]]);var ra=la,ca=function(e){return Object(n["pushScopeId"])("data-v-44624085"),e=e(),Object(n["popScopeId"])(),e},da={class:"section-container color-999 text-size-12"},ua={class:"form-container"},ma={class:"flex items-center justify-between card mb-8 text-size-12"},ba={class:"card"},pa={class:"flex items-center justify-between text-size-12"},ha={class:"flex items-center"},fa={class:"mr-5"},va={class:"flex items-center justify-between mt-26"},ga=ca((function(){return Object(n["createElementVNode"])("span",{class:"flex-1"},null,-1)})),ka={class:"icon-plus-container"},Oa={class:"card mb-10"},ja={class:"flex items-center justify-between text-size-12"},wa={class:"flex items-center"},Ta={class:"mr-5"},ya={class:"flex items-center justify-between mt-26"},Sa=ca((function(){return Object(n["createElementVNode"])("span",{class:"flex-1"},null,-1)})),Na={class:"text-size-12 font-400 mb-20"},xa={class:"flex items-center justify-between text-size-12"},Va={class:"color-999"},Ea={class:"flex items-center"},_a={class:"ml-5 color-333"},Ba={class:"flex items-center justify-between mt-5"},$a={class:"color-999"},Aa={class:"color-333"},Ca={class:"flex items-center justify-between mt-5"},Da=ca((function(){return Object(n["createElementVNode"])("span",{class:"color-999"},null,-1)})),Ia={class:"color-333"},La={class:"flex items-center justify-between mt-5"},Fa={class:"color-999"},Pa={class:"color-333"},Ra={class:"flex items-center justify-between mt-5"},Ua=ca((function(){return Object(n["createElementVNode"])("span",{class:"color-999"},null,-1)})),Ma={class:"color-333"},za={class:"flex items-center justify-between mt-5"},qa={class:"color-999"},Wa={class:"color-333"},Ha={class:"flex items-center justify-between mt-5"},Qa={class:"color-999"},Ga={class:"color-333"},Ka={class:"flex items-center justify-between mt-5"},Ja={class:"color-999"},Za={class:"color-333"},Ya={class:"flex items-center justify-between mt-5"},Xa=ca((function(){return Object(n["createElementVNode"])("span",{class:"color-999"},null,-1)})),es={class:"color-333"},ts={class:"flex items-center justify-between mt-5"},os={class:"color-999"},ns={class:"color-333"},is={class:"flex items-center justify-between mt-5"},as={class:"color-999"},ss={class:"color-333 flex items-center"},ls={class:"flex justify-center mt-20 text-size-14"},rs={class:"card-container txs-container"},cs={class:"van-hairline--bottom"},ds={class:"color-333 text-size-14"},us={class:"card flex items-center color-333 text-size-14 mt-10"},ms=ca((function(){return Object(n["createElementVNode"])("span",null,"/",-1)})),bs=ca((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),ps={key:0},hs={key:1},fs={class:"flex items-center justify-between color-333 text-size-14 mt-14"},vs={class:"flex items-center justify-between"},gs={class:"ml-5 color-333 text-size-14"},ks={class:"flex items-center justify-between color-333 text-size-14 mt-10"},Os={class:"flex items-center justify-between"},js={class:"ml-5 color-333 text-size-14"},ws={class:"flex items-center justify-between mt-5 text-size-12 mt-14"},Ts={class:"color-999"},ys={class:"flex items-center"},Ss={class:"ml-5 color-333"},Ns={class:"flex items-center justify-between mt-5 text-size-12"},xs={class:"color-999"},Vs={class:"color-333"},Es={class:"flex items-center justify-between mt-5 text-size-12"},_s=ca((function(){return Object(n["createElementVNode"])("span",{class:"color-999"},null,-1)})),Bs={class:"color-333"},$s={class:"flex items-center justify-between mt-5 text-size-12"},As={class:"color-999"},Cs={class:"color-333"},Ds={class:"flex items-center justify-between mt-5 text-size-12"},Is=ca((function(){return Object(n["createElementVNode"])("span",{class:"color-999"},null,-1)})),Ls={class:"color-333"},Fs={class:"flex items-center justify-between mt-5 text-size-12"},Ps={class:"color-999"},Rs={class:"color-333"},Us={class:"flex items-center justify-between mt-5 text-size-12"},Ms=ca((function(){return Object(n["createElementVNode"])("span",{class:"color-999"},null,-1)})),zs={class:"color-333"},qs={class:"flex items-center justify-between mt-5 text-size-12 mb-30"},Ws={class:"color-999"},Hs={class:"color-333 flex items-center"},Qs={class:"pop-content text-center pt-50 pb-100"},Gs={class:"icon-container"},Ks={class:"text-size-14 font-400 color-333 text-center mt-15 mb-6"};function Js(e,t,i,a,s,l){var r,c,d,u,m,b,p,h,f=Object(n["resolveComponent"])("SelectSwap"),v=Object(n["resolveComponent"])("van-button"),g=Object(n["resolveComponent"])("van-field"),k=Object(n["resolveComponent"])("SelectToken"),O=Object(n["resolveComponent"])("van-icon"),j=Object(n["resolveComponent"])("van-image"),w=Object(n["resolveComponent"])("Slippage"),T=Object(n["resolveComponent"])("LPHistory"),y=Object(n["resolveComponent"])("van-form"),S=Object(n["resolveComponent"])("van-action-sheet");return Object(n["openBlock"])(),Object(n["createElementBlock"])("section",da,[Object(n["createElementVNode"])("div",ua,[Object(n["createElementVNode"])("div",ma,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$t("selectPool")),1),Object(n["createVNode"])(f,{swaps:s.swaps,swap:s.swap,"onUpdate:swap":[t[0]||(t[0]=function(e){return s.swap=e}),l.handleSelectSwap],chain:l.chain},null,8,["swaps","swap","chain","onUpdate:swap"])]),Object(n["createElementVNode"])("div",ba,[Object(n["createElementVNode"])("div",pa,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("amount")),1),Object(n["createElementVNode"])("div",ha,[Object(n["createElementVNode"])("span",fa,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2(s.token0.balance||s.token0.value||0)),1),Object(n["createVNode"])(v,{plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:Object(n["withModifiers"])(l.handleMax0,["stop"])},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("max")),1)]})),_:1},8,["onClick"])])]),Object(n["createElementVNode"])("div",va,[Object(n["createVNode"])(g,{modelValue:s.amount0,"onUpdate:modelValue":[t[1]||(t[1]=function(e){return s.amount0=e}),l.watchAmount0],placeholder:"0.0",type:"number",clearable:"",class:"input-number",border:!1},null,8,["modelValue","onUpdate:modelValue"]),ga,Object(n["createVNode"])(k,{isBalance:!0,tokens:l.userTokens,disabledToken:s.token1.address||"",token:s.token0,"onUpdate:token":[t[2]||(t[2]=function(e){return s.token0=e}),l.handleSelectToken0],chain:l.chain},null,8,["tokens","disabledToken","token","chain","onUpdate:token"])])]),Object(n["createElementVNode"])("div",ka,[Object(n["createVNode"])(O,{class:"icon-plus color-primary p-8 rd-50 bg-F6F6F6",name:"plus"})]),Object(n["createElementVNode"])("div",Oa,[Object(n["createElementVNode"])("div",ja,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("amount")),1),Object(n["createElementVNode"])("div",wa,[Object(n["createElementVNode"])("span",Ta,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2(s.token1.balance||s.token1.value||0)),1),Object(n["createVNode"])(v,{plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:Object(n["withModifiers"])(l.handleMax1,["stop"])},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("max")),1)]})),_:1},8,["onClick"])])]),Object(n["createElementVNode"])("div",ya,[Object(n["createVNode"])(g,{modelValue:s.amount1,"onUpdate:modelValue":[t[3]||(t[3]=function(e){return s.amount1=e}),l.watchAmount1],placeholder:"0.0",type:"number",border:!1,clearable:"",class:"input-number"},null,8,["modelValue","onUpdate:modelValue"]),Sa,Object(n["createVNode"])(k,{isBalance:!0,tokens:l.userTokens,disabledToken:s.token0.address||"",token:s.token1,"onUpdate:token":[t[4]||(t[4]=function(e){return s.token1=e}),l.handleSelectToken1],chain:l.chain},null,8,["tokens","disabledToken","token","chain","onUpdate:token"])])]),Object(n["createElementVNode"])("ul",Na,[Object(n["createElementVNode"])("li",xa,[Object(n["createElementVNode"])("span",Va,Object(n["toDisplayString"])(e.$t("currentPool")),1),Object(n["createElementVNode"])("div",Ea,[s.swap.name?(Object(n["openBlock"])(),Object(n["createBlock"])(j,{key:0,class:"w-16 h-16",round:"","lazy-load":"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(s.swap.name,".jpeg"),"error-icon":o("aeccf")},null,8,["src","error-icon"])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",_a,Object(n["toDisplayString"])(s.swap.show_name||""),1)])]),s.reserves.pair===s.ZERO_ADDRESS?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createElementVNode"])("li",Ba,[Object(n["createElementVNode"])("span",$a,Object(n["toDisplayString"])(e.$t("rate")),1),Object(n["createElementVNode"])("span",Aa,"1 "+Object(n["toDisplayString"])(s.token1.symbol||"")+" = "+Object(n["toDisplayString"])(s.amount0&&s.amount1?e.$f.formatNumber2(Number(s.amount0||0)/Number(s.amount1)):0)+" "+Object(n["toDisplayString"])(s.token0.symbol||""),1)]),Object(n["createElementVNode"])("li",Ca,[Da,Object(n["createElementVNode"])("span",Ia,"1 "+Object(n["toDisplayString"])(s.token0.symbol||"")+" = "+Object(n["toDisplayString"])(s.amount0&&s.amount1?e.$f.formatNumber2(Number(s.amount1||0)/Number(s.amount0)):0)+" "+Object(n["toDisplayString"])(s.token1.symbol||""),1)]),null!==(r=s.token0)&&void 0!==r&&r.current_price_usd&&null!==(c=s.token1)&&void 0!==c&&c.current_price_usd?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createElementVNode"])("li",La,[Object(n["createElementVNode"])("span",Fa,Object(n["toDisplayString"])(e.$t("referenceRate1")),1),Object(n["createElementVNode"])("span",Pa,"1 "+Object(n["toDisplayString"])(s.token1.symbol||"")+" = "+Object(n["toDisplayString"])(e.$f.formatNumber2(Number(null===(d=s.token1)||void 0===d?void 0:d.current_price_usd)/Number(null===(u=s.token0)||void 0===u?void 0:u.current_price_usd)))+" "+Object(n["toDisplayString"])(s.token0.symbol||""),1)]),Object(n["createElementVNode"])("li",Ra,[Ua,Object(n["createElementVNode"])("span",Ma,"1 "+Object(n["toDisplayString"])(s.token0.symbol||"")+" = "+Object(n["toDisplayString"])(e.$f.formatNumber2(Number(null===(m=s.token0)||void 0===m?void 0:m.current_price_usd)/Number(null===(b=s.token1)||void 0===b?void 0:b.current_price_usd)))+" "+Object(n["toDisplayString"])(s.token1.symbol||""),1)]),Object(n["createElementVNode"])("li",za,[Object(n["createElementVNode"])("span",qa,Object(n["toDisplayString"])(s.token0.symbol||"")+" "+Object(n["toDisplayString"])(e.$t("referencePrice")),1),Object(n["createElementVNode"])("span",Wa,"$"+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(p=s.token0)||void 0===p?void 0:p.current_price_usd)||0)),1)]),Object(n["createElementVNode"])("li",Ha,[Object(n["createElementVNode"])("span",Qa,Object(n["toDisplayString"])(s.token1.symbol||"")+" "+Object(n["toDisplayString"])(e.$t("referencePrice")),1),Object(n["createElementVNode"])("span",Ga,"$"+Object(n["toDisplayString"])(e.$f.formatNumber2(null===(h=s.token1)||void 0===h?void 0:h.current_price_usd)),1)])],64)):Object(n["createCommentVNode"])("",!0)],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createElementVNode"])("li",Ka,[Object(n["createElementVNode"])("span",Ja,Object(n["toDisplayString"])(e.$t("rate")),1),Object(n["createElementVNode"])("span",Za,"1 "+Object(n["toDisplayString"])(s.token1.symbol||"")+" = "+Object(n["toDisplayString"])(s.reserves.reserve0&&s.reserves.reserve1?e.$f.formatNumber2(Number(s.reserves.reserve0)*Math.pow(10,s.token1.decimals)/Math.pow(10,s.token0.decimals)/Number(s.reserves.reserve1)):"")+" "+Object(n["toDisplayString"])(s.token0.symbol||""),1)]),Object(n["createElementVNode"])("li",Ya,[Xa,Object(n["createElementVNode"])("span",es,"1 "+Object(n["toDisplayString"])(s.token0.symbol||"")+" = "+Object(n["toDisplayString"])(s.reserves.reserve0&&s.reserves.reserve1?e.$f.formatNumber2(Number(s.reserves.reserve1)*Math.pow(10,s.token0.decimals)/Math.pow(10,s.token1.decimals)/Number(s.reserves.reserve0)):"")+" "+Object(n["toDisplayString"])(s.token1.symbol||""),1)])],64)),Object(n["createElementVNode"])("li",ts,[Object(n["createElementVNode"])("span",os,Object(n["toDisplayString"])(e.$t("shareRatio")),1),Object(n["createElementVNode"])("span",ns,Object(n["toDisplayString"])(s.reserves.reserve0&&s.amount0?e.$f.formatNumber2(Math.min(100*Number(s.amount0)/Number(s.utils.formatUnits(s.reserves.reserve0,s.token0.decimals)),100)):0)+"%",1)]),Object(n["createElementVNode"])("li",is,[Object(n["createElementVNode"])("span",as,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("div",ss,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(s.slippage)+"%",1),Object(n["createVNode"])(w,{slippage:s.slippage,"onUpdate:slippage":t[5]||(t[5]=function(e){return s.slippage=e})},null,8,["slippage"])])])]),Object(n["createElementVNode"])("div",null,[!l.isApprove0&&l.error<=0?(Object(n["openBlock"])(),Object(n["createBlock"])(v,{key:0,type:"primary",color:"#743FF7",block:"",loading:s.loading0,"loading-text":e.$t("approve"),disabled:""===l.walletAddress||""===s.token0.address||void 0===s.token0.address,class:"mb-10 br-6",onClick:Object(n["withModifiers"])(l._approve0,["stop"])},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("approve"))+" "+Object(n["toDisplayString"])(s.token0.symbol||""),1)]})),_:1},8,["loading","loading-text","disabled","onClick"])):Object(n["createCommentVNode"])("",!0),!l.isApprove1&&l.error<=0?(Object(n["openBlock"])(),Object(n["createBlock"])(v,{key:1,type:"primary",color:"#743FF7",block:"",loading:s.loading1,"loading-text":e.$t("approve"),disabled:""===l.walletAddress||""===s.token1.address||void 0===s.token1.address,class:"mb-10 br-6",onClick:Object(n["withModifiers"])(l._approve1,["stop"])},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("approve"))+" "+Object(n["toDisplayString"])(s.token1.symbol||""),1)]})),_:1},8,["loading","loading-text","disabled","onClick"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(v,{color:l.error>2?"#999":"#3F80F7",block:"",class:"br-6",loading:s.loadingSubmit,"loading-text":e.$t("add"),disabled:l.disabled,onClick:t[6]||(t[6]=Object(n["withModifiers"])((function(e){return s.confirmSubmitVisible=!0}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(l.errorMessage),1)]})),_:1},8,["color","loading","loading-text","disabled"]),Object(n["createElementVNode"])("div",ls,[Object(n["createElementVNode"])("button",{class:"border-none clickable color-3f80f7",onClick:t[7]||(t[7]=Object(n["withModifiers"])((function(){return l.goMyLiquidity&&l.goMyLiquidity.apply(l,arguments)}),["stop"]))},Object(n["toDisplayString"])(e.$t("myLiquidity")),1)])])]),Object(n["createElementVNode"])("div",rs,[Object(n["createElementVNode"])("h3",cs,Object(n["toDisplayString"])(e.$t("lpHistory")),1),Object(n["createVNode"])(T,{tableList:s.historyList,loading:s.loadingHistory},null,8,["tableList","loading"])]),Object(n["createVNode"])(S,{show:s.confirmSubmitVisible,"onUpdate:show":t[8]||(t[8]=function(e){return s.confirmSubmitVisible=e}),title:s.reserves.pair===s.ZERO_ADDRESS?e.$t("createLiquidityConfirm"):e.$t("addLiquidityConfirm")},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{onSubmit:l._addLiquidity,class:"pop-content"},{default:Object(n["withCtx"])((function(){var t,i,a,r,c,d,u,m,b,p;return[Object(n["createElementVNode"])("div",ds,Object(n["toDisplayString"])(e.$t("youWillReceive")),1),Object(n["createElementVNode"])("div",us,[Object(n["createVNode"])(j,{class:"w-20 h-20",round:"","lazy-load":"",src:null!==(t=s.token0)&&void 0!==t&&t.logo_url?e.$f.formatIcon(s.token0):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createVNode"])(j,{class:"w-20 h-20 ml-4 mr-6",round:"","lazy-load":"",src:null!==(i=s.token1)&&void 0!==i&&i.logo_url?e.$f.formatIcon(s.token1):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(s.token0.symbol),1),ms,Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(s.token1.symbol),1),bs,"-"!==l.lpAmount?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",ps,"+ "+Object(n["toDisplayString"])(e.$f.formatNumber2(l.lpAmount)),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",hs))]),Object(n["createElementVNode"])("div",fs,[Object(n["createElementVNode"])("div",vs,[Object(n["createVNode"])(j,{class:"w-20 h-20",round:"","lazy-load":"",src:null!==(a=s.token0)&&void 0!==a&&a.logo_url?e.$f.formatIcon(s.token0):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("span",gs,Object(n["toDisplayString"])(s.token0.symbol||""),1)]),Object(n["createElementVNode"])("div",null,"- "+Object(n["toDisplayString"])(e.$f.formatNumber2(s.amount0)),1)]),Object(n["createElementVNode"])("div",ks,[Object(n["createElementVNode"])("div",Os,[Object(n["createVNode"])(j,{class:"w-20 h-20",round:"","lazy-load":"",src:null!==(r=s.token1)&&void 0!==r&&r.logo_url?e.$f.formatIcon(s.token1):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("span",js,Object(n["toDisplayString"])(s.token1.symbol||""),1)]),Object(n["createElementVNode"])("div",null,"- "+Object(n["toDisplayString"])(e.$f.formatNumber2(s.amount1)),1)]),Object(n["createElementVNode"])("div",ws,[Object(n["createElementVNode"])("span",Ts,Object(n["toDisplayString"])(e.$t("currentPool")),1),Object(n["createElementVNode"])("div",ys,[s.swap.name?(Object(n["openBlock"])(),Object(n["createBlock"])(j,{key:0,class:"w-16 h-16",round:"","lazy-load":"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(s.swap.name,".jpeg"),"error-icon":o("aeccf")},null,8,["src","error-icon"])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",Ss,Object(n["toDisplayString"])(s.swap.show_name||""),1)])]),s.reserves.pair===s.ZERO_ADDRESS&&null!==(c=s.token0)&&void 0!==c&&c.current_price_usd&&null!==(d=s.token1)&&void 0!==d&&d.current_price_usd?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createElementVNode"])("li",Ns,[Object(n["createElementVNode"])("span",xs,Object(n["toDisplayString"])(e.$t("rate")),1),Object(n["createElementVNode"])("span",Vs,"1 "+Object(n["toDisplayString"])(s.token1.symbol||"")+" = "+Object(n["toDisplayString"])(s.amount0&&s.amount1?e.$f.formatNumber2(Number(s.amount0||0)/Number(s.amount1)):0)+" "+Object(n["toDisplayString"])(s.token0.symbol||""),1)]),Object(n["createElementVNode"])("li",Es,[_s,Object(n["createElementVNode"])("span",Bs,"1 "+Object(n["toDisplayString"])(s.token0.symbol||"")+" = "+Object(n["toDisplayString"])(s.amount0&&s.amount1?e.$f.formatNumber2(Number(s.amount1||0)/Number(s.amount0)):0)+" "+Object(n["toDisplayString"])(s.token1.symbol||""),1)]),Object(n["createElementVNode"])("li",$s,[Object(n["createElementVNode"])("span",As,Object(n["toDisplayString"])(e.$t("referenceRate1")),1),Object(n["createElementVNode"])("span",Cs,"1 "+Object(n["toDisplayString"])(s.token1.symbol||"")+" = "+Object(n["toDisplayString"])(e.$f.formatNumber2(Number(null===(u=s.token1)||void 0===u?void 0:u.current_price_usd)/Number(null===(m=s.token0)||void 0===m?void 0:m.current_price_usd)))+" "+Object(n["toDisplayString"])(s.token0.symbol||""),1)]),Object(n["createElementVNode"])("li",Ds,[Is,Object(n["createElementVNode"])("span",Ls,"1 "+Object(n["toDisplayString"])(s.token0.symbol||"")+" = "+Object(n["toDisplayString"])(e.$f.formatNumber2(Number(null===(b=s.token0)||void 0===b?void 0:b.current_price_usd)/Number(null===(p=s.token1)||void 0===p?void 0:p.current_price_usd)))+" "+Object(n["toDisplayString"])(s.token1.symbol||""),1)])],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createElementVNode"])("li",Fs,[Object(n["createElementVNode"])("span",Ps,Object(n["toDisplayString"])(e.$t("rate")),1),Object(n["createElementVNode"])("span",Rs,"1 "+Object(n["toDisplayString"])(s.token1.symbol||"")+" = "+Object(n["toDisplayString"])(s.reserves.reserve0&&s.reserves.reserve1?e.$f.formatNumber2(Number(s.reserves.reserve0)/Number(s.reserves.reserve1)):"")+" "+Object(n["toDisplayString"])(s.token0.symbol||""),1)]),Object(n["createElementVNode"])("li",Us,[Ms,Object(n["createElementVNode"])("span",zs,"1 "+Object(n["toDisplayString"])(s.token0.symbol||"")+" = "+Object(n["toDisplayString"])(s.reserves.reserve0&&s.reserves.reserve1?e.$f.formatNumber2(Number(s.reserves.reserve1)/Number(s.reserves.reserve0)):"")+" "+Object(n["toDisplayString"])(s.token1.symbol||""),1)])],64)),Object(n["createElementVNode"])("div",qs,[Object(n["createElementVNode"])("span",Ws,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("div",Hs,Object(n["toDisplayString"])(s.slippage)+"%",1)]),Object(n["createVNode"])(v,{color:"#3F80F7",block:"",class:"br-6",loading:s.loadingSubmit,"loading-text":s.reserves.pair===s.ZERO_ADDRESS?e.$t("confirmCreate"):e.$t("confirmAdd"),disabled:l.disabled,"native-type":"submit"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(s.reserves.pair===s.ZERO_ADDRESS?e.$t("confirmCreate"):e.$t("confirmAdd")),1)]})),_:1},8,["loading","loading-text","disabled"])]})),_:1},8,["onSubmit"])]})),_:1},8,["show","title"]),Object(n["createVNode"])(S,{show:s.confirmTxVisible,"onUpdate:show":t[10]||(t[10]=function(e){return s.confirmTxVisible=e}),title:e.$t("createLiquidityConfirm")},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",Qs,[Object(n["createElementVNode"])("div",Gs,[Object(n["createVNode"])(O,{class:"icon-s",name:"success",size:"0.64rem",color:"#3F80F7"})]),Object(n["createElementVNode"])("div",Ks,Object(n["toDisplayString"])(e.$t("transactionSubmitted")),1),Object(n["createElementVNode"])("a",{class:"text-size-12 font-400 color-3f80f7 clickable",href:"javascript:;",onClick:t[9]||(t[9]=function(e){var t,o;return l.openBrowser(s.transaction,"tx",(null===(t=s.token0)||void 0===t?void 0:t.chain)||(null===(o=s.token1)||void 0===o?void 0:o.chain)||l.chain)}),rel:"noopener noreferrer"},Object(n["toDisplayString"])(e.$t("viewBlockExplorerTransactionHistory")),1)])]})),_:1},8,["show","title"])])}var Zs=o("47e2"),Ys=function(e){return Object(n["pushScopeId"])("data-v-557a6e45"),e=e(),Object(n["popScopeId"])(),e},Xs={class:"ml-5 color-333 text-size-14"},el={key:1,class:"ml-5 color-333 text-size-14"},tl=Ys((function(){return Object(n["createElementVNode"])("i",{class:"iconfont icon-collapse-down ml-5 color-999"},null,-1)})),ol={class:"rules-content"},nl={class:"search-bar",action:"/"},il={key:0,class:"pop-title"},al={style:{background:"#fff"},class:"pb-50"},sl=["onClick"],ll={class:"main"},rl={key:0,class:"risk-status high"},cl={key:0,class:"minor"},dl=Ys((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),ul={class:"right-label"},ml=Ys((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),bl={key:0,class:"minor"},pl={props:{tokens:Array,token:Object,chain:String,isBalance:Boolean,disabledToken:String},emits:["update:token"],setup:function(e,t){var i=t.emit,a=e,s=Object(Zs["b"])(),l=s.t,r=Object(n["ref"])(!1),c=Object(n["ref"])(""),d=Object(n["ref"])(a.tokens||[]),u=Object(n["ref"])(!1);Object(n["watch"])(c,(function(e){""!==e?b():d.value=a.tokens})),Object(n["watch"])(r,(function(e){var t,o,n;e&&(d.value=a.tokens||[]),console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(o=t._tw_)||void 0===o||null===(n=o.isRefreshEnable)||void 0===n||n.call(o,"bridge",!e)}));var m=null;function b(){m&&(clearTimeout(m),m=null),m=setTimeout((function(){p()}),500)}function p(){if(""!==c.value){var e,t=new RegExp(c.value,"i"),o=(null===(e=a.tokens)||void 0===e?void 0:e.filter((function(e){return t.test((null===e||void 0===e?void 0:e.address)||"")||t.test((null===e||void 0===e?void 0:e.symbol)||"")||t.test((null===e||void 0===e?void 0:e.name)||"")})))||[];(null===o||void 0===o?void 0:o.length)>0?d.value=o:(u.value=!0,Object(Nt["wb"])(c.value,a.chain).then((function(e){var t,o,n;d.value=null===(t=e.filter)||void 0===t||null===(o=t.call(e,(function(e){return e.chain===a.chain})))||void 0===o||null===(n=o.map)||void 0===n?void 0:n.call(o,(function(e){return Object(Ke["a"])(Object(Ke["a"])({},e),{},{address:e.token})}))})).catch((function(e){console.log(e),d.value=[]})).finally((function(){u.value=!1})))}else d.value=a.tokens}function h(e){console.log(e),m&&(clearTimeout(m),m=null),p()}function f(){c.value="",r.value=!1}function v(e){e.address!==a.disabledToken&&(null!==e&&void 0!==e&&e.address||null!==e&&void 0!==e&&e.token)&&(i("update:token",e),r.value=!1)}return function(t,i){var s,m,b,p=Object(n["resolveComponent"])("van-image"),g=Object(n["resolveComponent"])("van-search"),k=Object(n["resolveComponent"])("van-empty"),O=Object(n["resolveComponent"])("van-icon"),j=Object(n["resolveComponent"])("van-action-sheet");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("button",{class:"flex items-center active-opacity-50",onClick:i[0]||(i[0]=Object(n["withModifiers"])((function(e){return Object(n["isRef"])(r)?r.value=!0:r=!0}),["stop"]))},[null!==a&&void 0!==a&&null!==(s=a.token)&&void 0!==s&&s.address?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createVNode"])(p,{class:"w-16 h-16",round:"","lazy-load":"",src:null!==(m=a.token)&&void 0!==m&&m.logo_url?Object(n["unref"])(Yi["formatIcon"])(a.token):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("span",Xs,Object(n["toDisplayString"])((null===(b=a.token)||void 0===b?void 0:b.symbol)||""),1)],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",el,Object(n["toDisplayString"])(Object(n["unref"])(l)("plsSelectToken")),1)),tl]),Object(n["createVNode"])(j,{show:Object(n["unref"])(r),"onUpdate:show":i[2]||(i[2]=function(e){return Object(n["isRef"])(r)?r.value=e:r=e}),title:Object(n["unref"])(l)("selectToken"),style:{height:"80%"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",ol,[Object(n["createElementVNode"])("form",nl,[Object(n["createVNode"])(g,{modelValue:Object(n["unref"])(c),"onUpdate:modelValue":i[1]||(i[1]=function(e){return Object(n["isRef"])(c)?c.value=e:c=e}),modelModifiers:{trim:!0},clearable:"",background:"#fff",shape:"round",placeholder:Object(n["unref"])(l)("searchTokenContractName"),onSearch:h,onCancel:f},null,8,["modelValue","placeholder"])]),""!==Object(n["unref"])(c)||e.isBalance?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",il,Object(n["toDisplayString"])(Object(n["unref"])(l)("popularTokens")),1)),Object(n["createElementVNode"])("ul",al,[Object(n["withDirectives"])(Object(n["createVNode"])(k,{description:Object(n["unref"])(l)("noData"),class:"empty"},null,8,["description"]),[[n["vShow"],Object(n["unref"])(d)&&0===Object(n["unref"])(d).length&&!Object(n["unref"])(u)]]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(Object(n["unref"])(d),(function(i,s){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:Object(n["normalizeClass"])(["token-item",{disabled:i.address===e.disabledToken}]),key:s,onClick:Object(n["withModifiers"])((function(e){return v(i)}),["stop"])},[Object(n["createVNode"])(p,{class:"icon-token",round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:null!==i&&void 0!==i&&i.logo_url?Object(n["unref"])(Yi["formatIcon"])(i):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div",ll,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.symbol),1),Number(null===i||void 0===i?void 0:i.risk_score)>60?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",rl,Object(n["toDisplayString"])(Object(n["unref"])(l)("highRisk")),1)):Object(n["createCommentVNode"])("",!0)]),i.address&&i.address!==Object(n["unref"])(yt["k"])?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",cl,Object(n["toDisplayString"])(i.address.slice(0,6)+"..."+i.address.slice(-6)),1)):Object(n["createCommentVNode"])("",!0)]),dl,Object(n["createElementVNode"])("div",ul,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.value?Object(n["unref"])(Yi["formatNumber2"])(i.value):""),1),ml,Number(null===i||void 0===i?void 0:i.value)>0&&i.current_price_usd?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",bl,Object(n["toDisplayString"])(i.value?t.$f.formatNumberCurrencyUnit(Number(i.value)*Number(i.current_price_usd)):""),1)):Object(n["createCommentVNode"])("",!0)]),i.address===(a.token.address||a.token.token)?(Object(n["openBlock"])(),Object(n["createBlock"])(O,{key:0,size:"0.48rem",color:"#3F80F7",name:"success"})):(Object(n["openBlock"])(),Object(n["createBlock"])(O,{key:1,style:{opacity:"0"},size:"0.48rem",color:"#3F80F7",name:"success"}))],10,sl)})),128))])])]})),_:1},8,["show","title"])],64)}}};o("1e3d");const hl=$t()(pl,[["__scopeId","data-v-557a6e45"]]);var fl=hl,vl=function(e){return Object(n["pushScopeId"])("data-v-779f66de"),e=e(),Object(n["popScopeId"])(),e},gl={class:"ml-5 color-333 text-size-14"},kl={key:1,class:"ml-5 color-333 text-size-14"},Ol=vl((function(){return Object(n["createElementVNode"])("i",{class:"iconfont icon-collapse-down ml-5 color-999"},null,-1)})),jl={key:1,type:"button",class:"flex items-center opacity-50",disabled:""},wl=vl((function(){return Object(n["createElementVNode"])("span",{class:"ml-5 color-333 text-size-14"},"Raydium",-1)})),Tl={class:"rules-content"},yl={class:"search-bar",action:"/"},Sl={style:{background:"#fff"},class:"pb-50"},Nl=["onClick"],xl={class:"right-label"},Vl=vl((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),El={props:{swaps:Array,chain:String,swap:Object},emits:["update:swap"],setup:function(e,t){var i=t.emit,a=e,s=Object(Zs["b"])(),l=s.t,r=Object(n["ref"])(!1),c=Object(n["ref"])(""),d=Object(n["ref"])(a.swaps||[]),u=Object(n["ref"])(!1);Object(n["watch"])(c,(function(e){""!==e?b():d.value=a.swaps})),Object(n["watch"])(r,(function(e){var t,o,n;e&&(d.value=a.swaps||[]),console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(o=t._tw_)||void 0===o||null===(n=o.isRefreshEnable)||void 0===n||n.call(o,"bridge",!e)}));var m=null;function b(){m&&(clearTimeout(m),m=null),m=setTimeout((function(){p()}),500)}function p(){if(""!==c.value){var e,t=new RegExp(c.value,"i"),o=(null===(e=a.swaps)||void 0===e?void 0:e.filter((function(e){return t.test((null===e||void 0===e?void 0:e.name)||"")||t.test((null===e||void 0===e?void 0:e.show_name)||"")||t.test((null===e||void 0===e?void 0:e.factory_address)||"")||t.test((null===e||void 0===e?void 0:e.router_address)||"")})))||[];(null===o||void 0===o?void 0:o.length)>0&&(d.value=o)}else d.value=a.swaps}function h(e){console.log(e),m&&(clearTimeout(m),m=null),p()}function f(){c.value="",r.value=!1}function v(e){(null!==e&&void 0!==e&&e.name||null!==e&&void 0!==e&&e.router_address)&&(i("update:swap",e),r.value=!1)}return function(e,t){var i,s,m,b=Object(n["resolveComponent"])("van-image"),p=Object(n["resolveComponent"])("van-search"),g=Object(n["resolveComponent"])("van-empty"),k=Object(n["resolveComponent"])("van-icon"),O=Object(n["resolveComponent"])("van-action-sheet");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,["solana"!==(null===a||void 0===a?void 0:a.chain)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:0,type:"button",class:"flex items-center active-opacity-50",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return Object(n["isRef"])(r)?r.value=!0:r=!0}),["stop"]))},[null!==a&&void 0!==a&&null!==(i=a.swap)&&void 0!==i&&i.name?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createVNode"])(b,{class:"w-16 h-16",round:"","lazy-load":"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(null===a||void 0===a||null===(s=a.swap)||void 0===s?void 0:s.name,".jpeg"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("span",gl,Object(n["toDisplayString"])((null===a||void 0===a||null===(m=a.swap)||void 0===m?void 0:m.show_name)||""),1)],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",kl,Object(n["toDisplayString"])(Object(n["unref"])(l)("plsSelectSwap")),1)),Ol])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",jl,[Object(n["createVNode"])(b,{class:"w-16 h-16",round:"","lazy-load":"",src:"".concat(e.$store.state.s3BaseUrl,"swap/raydium.jpeg"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),wl])),Object(n["createVNode"])(O,{show:Object(n["unref"])(r),"onUpdate:show":t[2]||(t[2]=function(e){return Object(n["isRef"])(r)?r.value=e:r=e}),title:Object(n["unref"])(l)("selectSwap"),style:{height:"80%"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",Tl,[Object(n["createElementVNode"])("form",yl,[Object(n["createVNode"])(p,{modelValue:Object(n["unref"])(c),"onUpdate:modelValue":t[1]||(t[1]=function(e){return Object(n["isRef"])(c)?c.value=e:c=e}),modelModifiers:{trim:!0},clearable:"",background:"#fff",shape:"round",placeholder:Object(n["unref"])(l)("searchPool"),onSearch:h,onCancel:f},null,8,["modelValue","placeholder"])]),Object(n["createElementVNode"])("ul",Sl,[Object(n["withDirectives"])(Object(n["createVNode"])(g,{description:Object(n["unref"])(l)("emptyData"),class:"empty"},null,8,["description"]),[[n["vShow"],Object(n["unref"])(d)&&0===Object(n["unref"])(d).length&&!Object(n["unref"])(u)]]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(Object(n["unref"])(d),(function(t,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:"token-item",key:i,onClick:Object(n["withModifiers"])((function(e){return v(t)}),["stop"])},[Object(n["createVNode"])(b,{class:"icon-token",round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(t.name,".jpeg"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("div",xl,Object(n["toDisplayString"])(t.show_name),1),Vl,t.name===a.swap.name?(Object(n["openBlock"])(),Object(n["createBlock"])(k,{key:0,size:"0.48rem",color:"#3F80F7",name:"success"})):(Object(n["openBlock"])(),Object(n["createBlock"])(k,{key:1,style:{opacity:"0"},size:"0.48rem",color:"#3F80F7",name:"success"}))],8,Nl)})),128))])])]})),_:1},8,["show","title"])],64)}}};o("9eb5");const _l=$t()(El,[["__scopeId","data-v-779f66de"]]);var Bl=_l,$l=o("75e6"),Al=function(e){return Object(n["pushScopeId"])("data-v-0ce3f71c"),e=e(),Object(n["popScopeId"])(),e},Cl={class:"popup-title"},Dl={class:"slippage-label"},Il=["onClick"],Ll={style:{width:"100%"}},Fl={class:"radio-group"},Pl={key:0,style:{flex:"1"}},Rl=["id","value"],Ul=["for"],Ml={class:"slippage-input"},zl=Al((function(){return Object(n["createElementVNode"])("span",null,"%",-1)})),ql={class:"form-submit"},Wl={props:{slippage:[String,Number]},emits:["update:slippage"],setup:function(e,t){var o=t.emit,i=e,a=Object(Zs["b"])(),s=a.t,l=Object(n["ref"])(!1),r=Object(n["ref"])(["0.1","0.5","1"]),c=Object(n["ref"])(i.slippage||"1");function d(){o("update:slippage",c.value),l.value=!1}function u(){$l["a"].alert({title:s("slippage"),message:s("slippageTips"),confirmButtonText:s("iKnown"),confirmButtonColor:"#3F80F7",messageAlign:"left"}).then((function(){}))}function m(){l.value&&Number(c.value)<0&&(c.value="0")}function b(e){return Number(e)<=49.99}return Object(n["watch"])(l,(function(e){e&&(c.value=i.slippage||"1")})),function(e,t){var o=Object(n["resolveComponent"])("van-field"),i=Object(n["resolveComponent"])("van-button"),a=Object(n["resolveComponent"])("van-form"),p=Object(n["resolveComponent"])("van-popup");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("i",{class:"iconfont icon-edit clickable",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return Object(n["isRef"])(l)?l.value=!0:l=!0}),["stop"]))}),Object(n["createVNode"])(p,{show:Object(n["unref"])(l),"onUpdate:show":t[4]||(t[4]=function(e){return Object(n["isRef"])(l)?l.value=e:l=e}),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"20vh"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("h3",Cl,Object(n["toDisplayString"])(Object(n["unref"])(s)("setSlippage")),1),Object(n["createVNode"])(a,{class:"popup-content",onSubmit:d},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",Dl,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(Object(n["unref"])(s)("slippage")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:Object(n["withModifiers"])(u,["stop"]),style:{"font-size":"0.38rem","margin-left":"0.05rem",color:"#3F80F7"}},null,8,Il)]),Object(n["createVNode"])(o,{name:"slippage",modelValue:Object(n["unref"])(c),"onUpdate:modelValue":t[3]||(t[3]=function(e){return Object(n["isRef"])(c)?c.value=e:c=e}),label:"",style:{"--van-cell-horizontal-padding":"0"},rules:[{required:!0,message:Object(n["unref"])(s)("enterSlippage")},{validator:b,message:Object(n["unref"])(s)("slippageMaxTip")}],border:!1},{input:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",Ll,[Object(n["createElementVNode"])("div",Fl,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(Object(n["unref"])(r),(function(e,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:o},[0!==o?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Pl)):Object(n["createCommentVNode"])("",!0),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"radio",id:"radio-".concat(e),"onUpdate:modelValue":t[1]||(t[1]=function(e){return Object(n["isRef"])(c)?c.value=e:c=e}),value:e,class:"radio-input"},null,8,Rl),[[n["vModelRadio"],Object(n["unref"])(c)]]),Object(n["createElementVNode"])("label",{for:"radio-".concat(e),class:"radio-item"},Object(n["toDisplayString"])(e)+"%",9,Ul)],64)})),128))]),Object(n["createElementVNode"])("div",Ml,[Object(n["createVNode"])(o,{class:"input",name:"slippage",type:"number",min:"0",max:"49.99",modelValue:Object(n["unref"])(c),"onUpdate:modelValue":t[2]||(t[2]=function(e){return Object(n["isRef"])(c)?c.value=e:c=e}),onBlur:m,clearable:""},null,8,["modelValue"]),zl])])]})),_:1},8,["modelValue","rules"]),Object(n["createElementVNode"])("div",ql,[Object(n["createVNode"])(i,{class:"btn",block:"",round:"","native-type":"submit",size:"normal",type:"primary"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(Object(n["unref"])(s)("confirm1")),1)]})),_:1})])]})),_:1})]})),_:1},8,["show"])],64)}}};o("67e3");const Hl=$t()(Wl,[["__scopeId","data-v-0ce3f71c"]]);var Ql=Hl,Gl={class:"pb-50"},Kl={class:"text-size-14 w-100p table-history color-333"},Jl={class:"text-size-12 color-999 t-header"},Zl={class:"text-left font-400"},Yl={class:"text-left font-400"},Xl={class:"text-right font-400"},er=["onClick"],tr={class:"text-left font-400"},or={class:"text-center font-400"},nr={class:"flex items-center mb-5"},ir={class:"mr-5"},ar={class:"flex items-center"},sr={class:"mr-5"},lr={class:"text-right font-400"},rr={class:"flex items-center justify-end mb-5"},cr={class:"flex items-center justify-end"},dr={class:"color-999 text-size-12"};function ur(e,t,i,a,s,l){var r=this,c=Object(n["resolveComponent"])("van-image"),d=Object(n["resolveComponent"])("van-empty");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Gl,[Object(n["createElementVNode"])("table",Kl,[Object(n["createElementVNode"])("tr",Jl,[Object(n["createElementVNode"])("th",Zl,Object(n["toDisplayString"])(e.$t("type")),1),Object(n["createElementVNode"])("th",Yl,Object(n["toDisplayString"])(e.$t("token"))+"/"+Object(n["toDisplayString"])(e.$t("amount")),1),Object(n["createElementVNode"])("th",Xl,"DEX/"+Object(n["toDisplayString"])(e.$t("volume")),1)]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(i.tableList,(function(t,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:i,class:"t-row clickable",onClick:Object(n["withModifiers"])((function(o){return e.$f.openBrowser(t.transaction,"tx",t.chain)}),["stop"])},[Object(n["createElementVNode"])("td",tr,[Object(n["createElementVNode"])("div",{style:Object(n["normalizeStyle"])({color:"addLiquidity"===t.type?"#12B886":"#F6465D"})},Object(n["toDisplayString"])("addLiquidity"===t.type?e.$t("add"):e.$t("remove")),5)]),Object(n["createElementVNode"])("td",or,[Object(n["createElementVNode"])("div",nr,[Object(n["createVNode"])(c,{class:"w-16 h-16 mr-5",round:"","lazy-load":"",src:null!==t&&void 0!==t&&t.token0_logo_url?e.$f.formatIcon({logo_url:t.token0_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("span",ir,Object(n["toDisplayString"])(e.$f.formatNumber2(t.amount0)),1),Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(l.formatTokenSymbol(t.token0_address,t.chain,t.token0_symbol)),1)]),Object(n["createElementVNode"])("div",ar,[Object(n["createVNode"])(c,{class:"w-16 h-16 mr-5",round:"","lazy-load":"",src:null!==t&&void 0!==t&&t.token1_logo_url?e.$f.formatIcon({logo_url:t.token1_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("span",sr,Object(n["toDisplayString"])(e.$f.formatNumber2(t.amount1)),1),Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(l.formatTokenSymbol(t.token1_address,t.chain,t.token1_symbol)),1)])]),Object(n["createElementVNode"])("td",lr,[Object(n["createElementVNode"])("div",rr,[Object(n["createVNode"])(c,{class:"w-16 h-16 mr-5",round:"","lazy-load":"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(t.amm,".jpeg"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumberCurrencyUnit(Number(t.amount_usd)<0?-1*Number(t.amount_usd):t.amount_usd)),1)]),Object(n["createElementVNode"])("div",cr,[Object(n["createElementVNode"])("div",dr,Object(n["toDisplayString"])(r.$f.formatDate(t.time,"MM-DD HH:mm:ss")),1)])])],8,er)})),128))]),Object(n["withDirectives"])(Object(n["createVNode"])(d,{description:e.$t("empty"),image:e.emptyNoDataLight,class:"empty"},null,8,["description","image"]),[[n["vShow"],(i.tableList&&0===i.tableList.length||!i.tableList)&&!i.loading]])])}var mr={name:"LiquidityHistory",props:{tableList:Array,loading:Boolean},methods:{formatTokenSymbol:function(e,t,o){var n=this.$f.formatChainInfo(t);return e===(null===n||void 0===n?void 0:n.wmainWrapper)?null===n||void 0===n?void 0:n.mainName:o}}};o("c638");const br=$t()(mr,[["render",ur],["__scopeId","data-v-58206826"]]);var pr=br,hr=o("f325"),fr=o("4128"),vr=o.n(fr),gr=o("8b19"),kr=o("64b9");function Or(e){return jr.apply(this,arguments)}function jr(){return jr=Object(Qe["a"])(regeneratorRuntime.mark((function e(t){var o,n,i,a,s,l,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,un["e"].getAccountInfo(new kr["e"](t));case 2:if(o=e.sent,null!==o){e.next=5;break}throw Error(" get id info error ");case 5:return n=hr["f"].decode(o.data),i=n.marketId,e.next=9,un["e"].getAccountInfo(i);case 9:if(a=e.sent,null!==a){e.next=12;break}throw Error(" get market info error");case 12:return s=hr["j"].decode(a.data),l=n.lpMint,e.next=16,un["e"].getAccountInfo(l);case 16:if(r=e.sent,null!==r){e.next=19;break}throw Error(" get lp mint info error");case 19:return c=hr["p"].decode(r.data),e.abrupt("return",{id:t,baseMint:n.baseMint.toString(),quoteMint:n.quoteMint.toString(),lpMint:n.lpMint.toString(),baseDecimals:n.baseDecimal.toNumber(),quoteDecimals:n.quoteDecimal.toNumber(),lpDecimals:c.decimals,version:4,programId:o.owner.toString(),authority:hr["h"].getAssociatedAuthority({programId:o.owner}).publicKey.toString(),openOrders:n.openOrders.toString(),targetOrders:n.targetOrders.toString(),baseVault:n.baseVault.toString(),quoteVault:n.quoteVault.toString(),withdrawQueue:n.withdrawQueue.toString(),lpVault:n.lpVault.toString(),marketVersion:3,marketProgramId:n.marketProgramId.toString(),marketId:n.marketId.toString(),marketAuthority:hr["k"].getAssociatedAuthority({programId:n.marketProgramId,marketId:n.marketId}).publicKey.toString(),marketBaseVault:s.baseVault.toString(),marketQuoteVault:s.quoteVault.toString(),marketBids:s.bids.toString(),marketAsks:s.asks.toString(),marketEventQueue:s.eventQueue.toString(),lookupTableAccount:kr["e"].default.toString()});case 21:case"end":return e.stop()}}),e)}))),jr.apply(this,arguments)}var wr=o("3bd4");function Tr(e){return yr.apply(this,arguments)}function yr(){return yr=Object(Qe["a"])(regeneratorRuntime.mark((function e(t){var o,n,i,a,s,l,r,c,d,u,m,b,p,h,f,v,g,k,O;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return m=t.token0,b=t.token1,e.next=3,Object(Nt["J"])(m,b,"solana");case 3:if(p=e.sent,console.log("poolInfos",p),null!==p&&void 0!==p&&p[0]){e.next=7;break}throw new Error("cannot find pool");case 7:return h=p[0],console.log("poolInfo",h),f=h.pair,e.next=12,Or(f);case 12:if(v=e.sent,v){e.next=15;break}throw new Error("cannot find the target pool");case 15:return g=Object(hr["z"])(v),console.log("will add liquidity poolKeys",g),e.next=19,hr["h"].fetchInfo({connection:un["e"],poolKeys:g});case 19:return k=e.sent,console.log("will add liquidity extraPoolInfo",k),O={pair:v.lpMint,factory_address:"",router_address:"",token0:m,token1:b,reserve0:m===v.baseMint?null===k||void 0===k||null===(o=k.baseReserve)||void 0===o||null===(n=o.toString)||void 0===n?void 0:n.call(o):null===k||void 0===k||null===(i=k.quoteReserve)||void 0===i||null===(a=i.toString)||void 0===a?void 0:a.call(i),reserve1:b===v.baseMint?null===k||void 0===k||null===(s=k.baseReserve)||void 0===s||null===(l=s.toString)||void 0===l?void 0:l.call(s):null===k||void 0===k||null===(r=k.quoteReserve)||void 0===r||null===(c=r.toString)||void 0===c?void 0:c.call(r),totalSupply:null===k||void 0===k||null===(d=k.lpSupply)||void 0===d||null===(u=d.toString)||void 0===u?void 0:u.call(d),decimals:v.lpDecimals},e.abrupt("return",{poolKeys:g,targetPoolInfo:v,extraPoolInfo:k,poolInfo:h,reserves:O});case 23:case"end":return e.stop()}}),e)}))),yr.apply(this,arguments)}function Sr(e){return Nr.apply(this,arguments)}function Nr(){return Nr=Object(Qe["a"])(regeneratorRuntime.mark((function e(t){var o,n,i,a,s,l,r,c,d,u,m,b,p,h,f,v,g,k,O,j,w,T,y,S,N,x,V,E,_,B,$,A,C,D,I,L,F,P,R,U,M,z,q,W;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(w=t.token0,T=t.token1,y=t.amount0,S=t.amount1,N=t.slippage,x=t.targetPoolInfo,V=t.extraPoolInfo,E=t.poolInfo,_=[w,T].includes(null===(o=E)||void 0===o?void 0:o.token0_address)&&[w,T].includes(null===(n=E)||void 0===n?void 0:n.token1_address),null!==(i=E)&&void 0!==i&&i.pair&&_){e.next=9;break}return e.next=5,Object(Nt["J"])(w,T,"solana");case 5:if(B=e.sent,null!==B&&void 0!==B&&B[0]){e.next=8;break}throw new Error("cannot find pool");case 8:E=B[0];case 9:if($=E.pair,A=new hr["r"](hr["q"],new kr["e"](w),w===E.token0_address?E.token0_decimal:E.token1_decimal,w===E.token0_address?E.token0_symbol:E.token1_symbol,w===E.token0_address?E.token0_symbol:E.token1_symbol),C=new hr["r"](hr["q"],new kr["e"](T),T===E.token0_address?E.token0_decimal:E.token1_decimal,T===E.token0_address?E.token0_symbol:E.token1_symbol,T===E.token0_address?E.token0_symbol:E.token1_symbol),D=new Xo.a(y||S||0),I={},L={},S&&!y?(I=C,L=A):(I=A,L=C),N=new hr["l"](100*Number(N||1),1e4),F=new hr["s"](I,D.times(Math.pow(10,I.decimals)).toFixed(0)),P={baseToken:I,quoteToken:L,targetPool:$,inputTokenAmount:F,slippage:N},x&&(null===(a=x)||void 0===a?void 0:a.id)===P.targetPool){e.next=23;break}return e.next=22,Or(P.targetPool);case 22:x=e.sent;case 23:if(x){e.next=25;break}throw new Error("cannot find the target pool");case 25:if(console.log("will add liquidity params",P),R=Object(hr["z"])(x),V&&(null===(s=x)||void 0===s?void 0:s.id)===P.targetPool){e.next=31;break}return e.next=30,hr["h"].fetchInfo({connection:un["e"],poolKeys:R});case 30:V=e.sent;case 31:return U=hr["h"].computeAnotherAmount({poolKeys:R,poolInfo:Object(Ke["a"])(Object(Ke["a"])({},x),V),amount:P.inputTokenAmount,anotherCurrency:P.quoteToken,slippage:P.slippage}),M=U.maxAnotherAmount,z=U.anotherAmount,q=U.liquidity,W={pair:x.lpMint,factory_address:"",router_address:"",token0:w,token1:T,reserve0:w===x.baseMint?null===(l=V)||void 0===l||null===(r=l.baseReserve)||void 0===r||null===(c=r.toFixed)||void 0===c?void 0:c.call(r):null===(d=V)||void 0===d||null===(u=d.quoteReserve)||void 0===u||null===(m=u.toFixed)||void 0===m?void 0:m.call(u),reserve1:T===x.baseMint?null===(b=V)||void 0===b||null===(p=b.baseReserve)||void 0===p||null===(h=p.toFixed)||void 0===h?void 0:h.call(p):null===(f=V)||void 0===f||null===(v=f.quoteReserve)||void 0===v||null===(g=v.toFixed)||void 0===g?void 0:g.call(v),totalSupply:null===(k=V)||void 0===k||null===(O=k.lpSupply)||void 0===O||null===(j=O.toFixed)||void 0===j?void 0:j.call(O),decimals:x.lpDecimals},console.log("will add liquidity info",{poolKeys:R,liquidity:q.toString(),liquidityD:new vr.a(q.toString()).div(Math.pow(10,V.lpDecimals)).toString(),maxAnotherAmount:M,anotherAmount:z,inputTokenAmount:P.inputTokenAmount,targetPoolInfo:x,extraPoolInfo:V,poolInfo:E,reserves:W}),e.abrupt("return",{poolKeys:R,liquidity:q.toString(),liquidityD:new vr.a(q.toString()).div(Math.pow(10,V.lpDecimals)).toString(),maxAnotherAmount:M,anotherAmount:z,inputTokenAmount:P.inputTokenAmount,targetPoolInfo:x,extraPoolInfo:V,poolInfo:E,reserves:W});case 35:case"end":return e.stop()}}),e)}))),Nr.apply(this,arguments)}function xr(e){return Vr.apply(this,arguments)}function Vr(){return Vr=Object(Qe["a"])(regeneratorRuntime.mark((function e(t){var o,n,i,a,s,l,r,c,d,u,m=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=m.length>1&&void 0!==m[1]?m[1]:on["a"].state.currentAccount,console.log("will add liquidity",t),n=t.poolKeys,i=t.maxAnotherAmount,a=t.inputTokenAmount,s=new kr["e"](o),e.next=6,Object(wr["b"])(un["e"],s);case 6:return l=e.sent,e.next=9,hr["h"].makeAddLiquidityInstructionSimple({connection:un["e"],poolKeys:n,userKeys:{owner:s,payer:s,tokenAccounts:l},amountInA:a,amountInB:i,fixedSide:"a",makeTxVersion:gr["e"]});case 9:return r=e.sent,c=r.innerTransactions,console.log("innerTransactions",c),e.next=14,Object(wr["a"])(c);case 14:return d=e.sent,console.log("transaction",d),u=null===d||void 0===d?void 0:d[0],e.abrupt("return",Object(un["b"])(u).then(function(){var e=Object(Qe["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",{hash:t,wait:function(){return Object(un["c"])(t)}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 18:case"end":return e.stop()}}),e)}))),Vr.apply(this,arguments)}function Er(e){return new Promise((function(t){setTimeout(t,e)}))}var _r={name:"BridgeLiquidity",components:{SelectToken:fl,SelectSwap:Bl,Slippage:Ql,LPHistory:pr},data:function(){return{utils:xt["utils"],ZERO_ADDRESS:yt["m"],swaps:[],swap:{chain:"",name:"",show_name:"",factory_address:"",router_address:""},amount0:"",amount1:"",token0:{address:"",chain:"",logo_url:""},token1:{address:"",chain:"",logo_url:""},reserves:{},userBalanceTokens:[],tokenList:[],loading0:!1,loading1:!1,confirmSubmitVisible:!1,confirmTxVisible:!1,transaction:"",slippage:.5,loadingSubmit:!1,historyList:[],loadingHistory:!1,solanaLiquidityInfo:{},lastLp:["",""]}},computed:{chain:function(){return this.$store.getters.netId},walletAddress:function(){return this.$store.state.currentAccount},isApprove0:function(){var e;if("solana"===this.chain)return!0;var t=xt["utils"].parseUnits(this.amount0||"0",this.token0.decimals||0);return Zo["a"].from((null===(e=this.token0)||void 0===e?void 0:e.allowance)||"0").gte(t)},isApprove1:function(){var e;if("solana"===this.chain)return!0;var t=xt["utils"].parseUnits(this.amount1||"0",this.token1.decimals||0);return Zo["a"].from((null===(e=this.token1)||void 0===e?void 0:e.allowance)||"0").gte(t)},userTokens:function(){var e,t,o=Object(Ge["a"])(null===(e=this.userBalanceTokens.slice())||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,(function(e){return!e.isWrapped}))),n=this.tokenList,i=n.slice().filter((function(e){return o.every((function(t){return t.id!==e.id}))&&!("solana"===e.chain&&"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"===e.token)}));return n.slice().forEach((function(e){var t=o.find((function(t){return t.id===e.id}));t&&(t.logo_url=e.logo_url)})),o=o.concat(i),o.length>0?o:n.slice()},routerAddress:function(){return this.swap.router_address},tips:function(){return this.reserves.pair===yt["m"]?this.$t("createLpTip"):this.$t("addLpTip")},error:function(){var e,t,o=this.token0,n=this.token1,i=this.reserves;if(null!==o&&void 0!==o&&o.address&&(null===o||void 0===o||null===(e=o.address)||void 0===e?void 0:e.toLowerCase())===(null===n||void 0===n||null===(t=n.address)||void 0===t?void 0:t.toLowerCase()))return 4;if(""===this.amount0||""===this.amount1)return i.pair===yt["m"]?1:2;var a=new Xo.a(this.amount0||0),s=new Xo.a(o.balance||0),l=new Xo.a(this.amount1||0),r=new Xo.a(n.balance||0);return a.gt(s)||l.gt(r)?3:i.pair===yt["m"]?-1:0},errorMessage:function(){var e={0:this.$t("add"),"-1":this.$t("create"),1:this.$t("create"),2:this.$t("add"),3:this.$t("insufficientBalance1"),4:this.$t("twoTokenCannotBeSame")};return e[this.error]||""},lpAmount:function(){var e;return""===this.amount0||""===this.amount1?"0":"0"===this.reserves.reserve0||"1"===this.reserves.reserve0?"-":xt["utils"].formatUnits(new Xo.a(this.amount0||0).times(new Xo.a(10).exponentiatedBy((null===(e=this.token0)||void 0===e?void 0:e.decimals)||0)).times(this.reserves.totalSupply||0).div(this.reserves.reserve0||1).toFixed(0),this.reserves.decimals||0)},disabled:function(){var e,t,o,n;return!this.isApprove0||!this.isApprove1||""===this.walletAddress||""===this.token0.address||void 0===this.token0.address||""===this.token1.address||void 0===this.token1.address||this.error>0||(null===(e=this.token0)||void 0===e||null===(t=e.address)||void 0===t?void 0:t.toLowerCase())===(null===(o=this.token1)||void 0===o||null===(n=o.address)||void 0===n?void 0:n.toLowerCase())}},methods:{openBrowser:Yi["openBrowser"],init:function(){var e,t,o,n,i,a=this;"evm"!==localStorage.okxwallet_chain&&(window.solana||null!==(e=window)&&void 0!==e&&null!==(t=e.trustwallet)&&void 0!==t&&t.solana&&(null===(o=window.ethereum)||void 0===o||null===(n=o.address)||void 0===n||null===(i=n.startsWith)||void 0===i||!i.call(n,"0x"))&&window.ethereum.address)?Object(un["d"])().then((function(e){console.log("currentAccount",a.$store.state.currentAccount),a.initLP(),a._getUserTokenList(),a._getTokenList(),a.getToken0Balance(),a.getToken1Balance(),a._getReserves(),a._getChainSwaps(),a._getUserLpHistory(),a.$f.setSwapSendType("")})):(this.initLP(),this._getUserTokenList(),this._getTokenList(),this.getToken0Balance(),this.getToken1Balance(),this._getReserves(),this._getChainSwaps(),this._getUserLpHistory(),this.$f.setSwapSendType(""))},handleSelectSwap:function(e){this.swap=e,this.amount0="",this.amount1="",this.getToken0Balance(),this.getToken1Balance(),this._getReserves(),sessionStorage.LP_swap=JSON.stringify(e)},initLP:function(){var e=this.$route.query,t=this.$route.query.chain,o=this.chain||this.$store.getters.netId;if(!o||!t||o===t){if(o&&o===t){var n=e.swap?Object(Yi["formatSwapInfo"])(o,e.swap):null;this.token0={address:e.token0||"",chain:o||""},this.token1={address:e.token1||"",chain:o||""},this.swap={chain:o||"",name:e.swap||"",show_name:(null===n||void 0===n?void 0:n.show_name)||"",factory_address:(null===n||void 0===n?void 0:n.factory_address)||"",router_address:(null===n||void 0===n?void 0:n.router_address)||""}}if(!e.swap||o!==t){var i=sessionStorage.LP_swap?JSON.parse(sessionStorage.LP_swap):null;!this.swap.name&&i&&o===i.chain&&(this.swap=i)}if(!e.token0||o!==t){var a=sessionStorage.LP_token0?JSON.parse(sessionStorage.LP_token0):null;!this.token0.address&&a&&o===a.chain&&(this.token0=a)}if(!e.token1||o!==t){var s=sessionStorage.LP_token1?JSON.parse(sessionStorage.LP_token1):null;!this.token1.address&&s&&o===s.chain&&(this.token1=s)}}},handleSelectToken0:function(e){this.token0=e,this.amount0="",this.getToken0Balance(),this._getReserves()},handleSelectToken1:function(e){this.token1=e,this.amount1="",this.getToken1Balance(),this._getReserves()},_getChainSwaps:function(){var e,t,o=this;Object(Nt["B"])((null===(e=this.token0)||void 0===e?void 0:e.chain)||(null===(t=this.token1)||void 0===t?void 0:t.chain)||this.chain||"bsc").then((function(e){o.swaps=e||[]}))},watchAmount0:function(){var e=this;if("solana"!==this.chain){var t=this.reserves;if("0"!==t.reserve0&&"0"!==t.reserve1)if(t.reserve0&&t.reserve1&&this.amount0&&!Number.isNaN(this.amount0)&&0!==Number(this.amount0)){var o,n,i,a,s=new Xo.a(t.reserve0),l=new Xo.a(t.reserve1),r=Number(null===(o=this.token0)||void 0===o?void 0:o.decimals)||0,c=Number(null===(n=this.token1)||void 0===n?void 0:n.decimals)||0,d=new Xo.a(this.amount0);this.amount1=null===(i=xt["utils"].formatUnits(l.times(d).times(Math.pow(10,r)).div(s).toFixed(0),c))||void 0===i||null===(a=i.replace)||void 0===a?void 0:a.call(i,/\.0$/,"")}else this.amount1=""}else{var u,m,b;this.token0.address&&this.token1.address&&this.amount0&&!Number.isNaN(this.amount0)&&0!==Number(this.amount0)?Sr({token0:this.token0.address,token1:this.token1.address,amount0:this.amount0,slippage:this.slippage,targetPoolInfo:null===(u=this.solanaLiquidityInfo)||void 0===u?void 0:u.targetPoolInfo,extraPoolInfo:null===(m=this.solanaLiquidityInfo)||void 0===m?void 0:m.extraPoolInfo,poolInfo:null===(b=this.solanaLiquidityInfo)||void 0===b?void 0:b.poolInfo}).then((function(t){var o,n,i;e.amount1=null===t||void 0===t||null===(o=t.anotherAmount)||void 0===o||null===(n=o.toFixed())||void 0===n||null===(i=n.replace)||void 0===i?void 0:i.call(n,/\.0$/,""),e.solanaLiquidityInfo=t})).catch((function(t){console.log(t),e.solanaLiquidityInfo={},Object(Yi["handleError"])(t)})):this.amount1=""}},watchAmount1:function(){var e=this;if("solana"!==this.chain){var t=this.reserves;if("0"!==t.reserve0&&"0"!==t.reserve1)if(t.reserve0&&t.reserve1&&this.amount1&&!Number.isNaN(this.amount1)&&0!==Number(this.amount1)){var o,n,i,a=new Xo.a(t.reserve0),s=new Xo.a(t.reserve1),l=Number(null===(o=this.token0)||void 0===o?void 0:o.decimals)||0,r=Number(null===(n=this.token1)||void 0===n?void 0:n.decimals)||0,c=new Xo.a(this.amount1);this.amount0=null===xt["utils"]||void 0===xt["utils"]||null===(i=xt["utils"].formatUnits)||void 0===i?void 0:i.call(xt["utils"],a.times(c).times(Math.pow(10,r)).div(s).toFixed(0),l)}else this.amount0=""}else{var d,u,m;this.token0.address&&this.token1.address&&this.amount1&&!Number.isNaN(this.amount1)&&0!==Number(this.amount1)?Sr({token0:this.token0.address,token1:this.token1.address,amount1:this.amount1,slippage:this.slippage,targetPoolInfo:null===(d=this.solanaLiquidityInfo)||void 0===d?void 0:d.targetPoolInfo,extraPoolInfo:null===(u=this.solanaLiquidityInfo)||void 0===u?void 0:u.extraPoolInfo,poolInfo:null===(m=this.solanaLiquidityInfo)||void 0===m?void 0:m.poolInfo}).then((function(t){var o,n,i;e.amount1&&!Number.isNaN(e.amount1)&&0!==Number(e.amount1)?e.amount0=null===t||void 0===t||null===(o=t.anotherAmount)||void 0===o||null===(n=o.toFixed())||void 0===n||null===(i=n.replace)||void 0===i?void 0:i.call(n,/\.0$/,""):e.amount0="";e.solanaLiquidityInfo=t})).catch((function(t){console.log(t),e.solanaLiquidityInfo={},Object(Yi["handleError"])(t)})):this.amount0=""}},handleMax0:function(){if(this.token0.address===yt["k"]||"So11111111111111111111111111111111111111112"===this.token0.address){var e=new Xo.a(this.token0.balance||this.token0.value||0).minus(.01);this.amount0=e.lte(0)?"0":e.toFixed()}else this.amount0=this.token0.balance||this.token0.value?new Xo.a(this.token0.balance||this.token0.value||0).toFixed():"";this.watchAmount0()},handleMax1:function(){if(this.token1.address===yt["k"]||"So11111111111111111111111111111111111111112"===this.token1.address){var e=new Xo.a(this.token1.balance||this.token1.value||0).minus(.01);this.amount1=e.lte(0)?"0":e.toFixed()}else this.amount1=this.token1.balance||this.token1.value?new Xo.a(this.token1.balance||this.token1.value||0).toFixed():"";this.watchAmount1()},_getUserTokenList:function(){var e=this,t=this.chain;Object(Nt["nb"])().then((function(o){var n,i,a;"solana"===t?e.userBalanceTokens=null===o||void 0===o?void 0:o.map((function(e){return Object(Ke["a"])(Object(Ke["a"])({},e),{},{value:e.balance})})):e.userBalanceTokens=null===(n=(null===o||void 0===o||null===(i=o.map((function(e){return Object(Ke["a"])(Object(Ke["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token})})))||void 0===i||null===(a=i.filter)||void 0===a?void 0:a.call(i,(function(e){return(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag})))||[])||void 0===n?void 0:n.filter((function(e){return!!Number(e.value)}));e.userBalanceTokens.length>0&&"tron"!==t&&"brc20"!==t&&"solana"!==t&&/^0x[0-9a-zA-Z]{40}$/.test(e.$store.state.currentAccount)&&Object(Nt["r"])(e.userBalanceTokens.map((function(e){return e.token||""})),t).then((function(t){var o,n,i;e.userBalanceTokens=null===(o=e.userBalanceTokens)||void 0===o||null===(n=o.map)||void 0===n||null===(i=n.call(o,(function(e,o){return Object(Ke["a"])(Object(Ke["a"])({},e),{},{value:xt["utils"].formatUnits(t[o],e.decimals||0)})})))||void 0===i?void 0:i.filter((function(e){return!!Number(e.value)}))}))}))},_getTokenList:function(){var e=this;Object(Nt["hb"])(this.chain||"bsc").then((function(t){e.tokenList=(null===t||void 0===t?void 0:t.map((function(e){return Object(Ke["a"])(Object(Ke["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token})})))||[]}))},getToken0Balance:function(){var e,t,o=this;Object(Nt["L"])((null===(e=this.token0)||void 0===e?void 0:e.address)||"",this.routerAddress,(null===(t=this.token0)||void 0===t?void 0:t.chain)||this.chain,this.walletAddress).then((function(e){o.token0=Object(Ke["a"])(Object(Ke["a"])({},o.token0),e),sessionStorage.LP_token0=JSON.stringify(o.token0)}))},getToken1Balance:function(){var e,t,o=this;Object(Nt["L"])((null===(e=this.token1)||void 0===e?void 0:e.address)||"",this.routerAddress,(null===(t=this.token1)||void 0===t?void 0:t.chain)||this.chain,this.walletAddress).then((function(e){o.token1=Object(Ke["a"])(Object(Ke["a"])({},o.token1),e),sessionStorage.LP_token1=JSON.stringify(o.token1)}))},_getReserves:function(e){var t=this;return Object(Qe["a"])(regeneratorRuntime.mark((function o(){var n,i,a,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(n=t.token0,i=t.token1,a=t.routerAddress,s=t.chain,"solana"!==s||null===n||void 0===n||!n.address||null===i||void 0===i||!i.address){o.next=14;break}if(console.log(null===n||void 0===n?void 0:n.address,null===i||void 0===i?void 0:i.address),t.lastLp[0]!==(null===n||void 0===n?void 0:n.address)||t.lastLp[1]!==(null===i||void 0===i?void 0:i.address)){o.next=11;break}return o.next=9,Er(1e3);case 9:return t._getReserves(),o.abrupt("return");case 11:return t.lastLp=[null===n||void 0===n?void 0:n.address,null===i||void 0===i?void 0:i.address],Tr({token0:null===n||void 0===n?void 0:n.address,token1:null===i||void 0===i?void 0:i.address}).then((function(e){t.solanaLiquidityInfo=e,t.reserves=e.reserves,console.log(e)})).catch((function(e){console.log(e),t.solanaLiquidityInfo={},t.reserves={}})).finally((function(){t.lastLp=["",""]})),o.abrupt("return");case 14:n.address&&i.address&&a&&n.address!==i.address&&Object(Nt["T"])(n.address,i.address,a,(null===n||void 0===n?void 0:n.chain)||(null===i||void 0===i?void 0:i.chain)||s||"bsc").then((function(o){if(t.reserves=o,"0"!==t.reserves.reserve0&&"0"!==t.reserves.reserve0&&(t.amount0?t.watchAmount0():t.amount1&&t.watchAmount1()),t.reserves.pair===yt["m"]){var a="".concat(n.address,"-").concat(n.chain),s="".concat(i.address,"-").concat(i.chain);Object(Nt["jb"])([a,s]).then((function(e){var o=e[a],n=e[s];t.token0=Object(Ke["a"])(Object(Ke["a"])({},t.token0),{},{current_price_usd:o.current_price_usd}),t.token1=Object(Ke["a"])(Object(Ke["a"])({},t.token1),{},{current_price_usd:n.current_price_usd})}))}e&&e()}));case 15:case"end":return o.stop()}}),o)})))()},_approve0:function(){var e,t=this;this.loading0=!0,Object(Nt["i"])((null===(e=this.token0)||void 0===e?void 0:e.address)||"",this.routerAddress).then((function(e){return e.wait()})).then((function(e){console.log(e),t.$notify({type:"success",message:t.$t("approveSuccess")}),t.getToken0Balance()})).catch((function(e){t.$f.handleError(e)})).finally((function(){t.loading0=!1}))},_approve1:function(){var e,t=this;this.loading1=!0,Object(Nt["i"])((null===(e=this.token1)||void 0===e?void 0:e.address)||"",this.routerAddress).then((function(e){return e.wait()})).then((function(e){console.log(e),t.$notify({type:"success",message:t.$t("approveSuccess")}),t.getToken1Balance()})).catch((function(e){t.$f.handleError(e)})).finally((function(){t.loading1=!1}))},_addLiquidity:function(){var e,t,o,n,i=this,a=xt["utils"].parseUnits(this.amount0||"0",this.token0.decimals||0).toString(),s=xt["utils"].parseUnits(this.amount1||"0",this.token1.decimals||0).toString();this.loadingSubmit=!0,"solana"!==this.chain?(this.$f.setSwapSendType("protect"),Object(Nt["e"])({token0:(null===(e=this.token0)||void 0===e?void 0:e.address)||"",token1:(null===(t=this.token1)||void 0===t?void 0:t.address)||"",amount0:a,amount1:s,slippage:this.slippage,router:this.routerAddress},(null===(o=this.token0)||void 0===o?void 0:o.chain)||(null===(n=this.token1)||void 0===n?void 0:n.chain)||this.chain).then((function(e){return i.transaction=e.hash,""!==i.transaction&&(i.confirmSubmitVisible=!1,i.confirmTxVisible=!0),e.wait()})).then((function(e){console.log(e),i.amount0="",i.amount1="",i.getToken0Balance(),i.getToken1Balance(),i._getReserves(i._updateUserLp),i._getUserTokenList(),i._getUserLpHistory(),i.$notify({type:"success",message:i.$t("addLqSuccess")})})).catch((function(e){i.$f.handleError(e)})).finally((function(){i.loadingSubmit=!1,i.$f.setSwapSendType("")}))):xr(this.solanaLiquidityInfo).then((function(e){return i.transaction=e.hash,""!==i.transaction&&(i.confirmSubmitVisible=!1,i.confirmTxVisible=!0),e.wait()})).then((function(e){var t,o,n,a;console.log(e),Object(un["g"])({hash:i.transaction,token0:null===(t=i.token0)||void 0===t?void 0:t.address,token1:null===(o=i.token1)||void 0===o?void 0:o.address,lpToken:null===(n=i.solanaLiquidityInfo)||void 0===n||null===(a=n.targetPoolInfo)||void 0===a?void 0:a.lpMint,parsedTransaction:e}),i.amount0="",i.amount1="",i.getToken0Balance(),i.getToken1Balance(),i._getReserves(),i._getUserTokenList(),i.$notify({type:"success",message:i.$t("addLqSuccess")})})).catch((function(e){i.$f.handleError(e)})).finally((function(){i.loadingSubmit=!1,i.$f.setSwapSendType("")}))},_updateUserLp:function(){var e,t;this.reserves.pair&&this.reserves.pair!==yt["m"]&&Object(Nt["Db"])(this.reserves.pair,(null===(e=this.token0)||void 0===e?void 0:e.chain)||(null===(t=this.token1)||void 0===t?void 0:t.chain)||this.chain)},_getUserLpHistory:function(){var e=this,t=this.$store.getters.netId,o=this.$store.state.currentAccount;this.loadingHistory=!0,Object(Nt["mb"])(t,o).then((function(t){e.historyList=t||[]})).catch((function(t){console.log(t),e.$f.handleError(t)})).finally((function(){e.loadingHistory=!1}))},goMyLiquidity:function(){var e,t,o,n,i,a=((null===(e=this.globalConfig)||void 0===e?void 0:e.lp_url)||"https://m.jfliquidity.xyz/add").replace("/add","");if(null!==(t=window)&&void 0!==t&&null!==(o=t.WKWebViewJavascriptBridge)&&void 0!==o&&o.callHandler)location.href=a;else if(null!==(n=window)&&void 0!==n&&null!==(i=n._tw_)&&void 0!==i&&i.openLp){var s,l;null===(s=window)||void 0===s||null===(l=s._tw_)||void 0===l||l.openLp("","","my_lp")}else location.href=a}}};o("b56d");const Br=$t()(_r,[["render",Js],["__scopeId","data-v-44624085"]]);var $r=Br,Ar={name:"Bridge",components:{RebateImg:r["a"],SwapBridge:On,Limit:ra,Liquidity:$r},setup:function(){var e=Object(en["useStorage"])("bridge_tabActive","swap",sessionStorage),t=Object(en["useStorage"])("ave_globalConfig",{},localStorage);return{tabActive:e,globalConfig:t}},data:function(){return{caches:{swap:!1,limit:!1,liquidity:!1}}},computed:{tabs:function(){return[{name:this.$t("swapOrBridge"),value:"swap"},{name:this.$t("limit"),value:"limit"},{name:this.$t("pool"),value:"liquidity"}]}},watch:{tabActive:function(){this.init()},"$route.name":function(e,t){"Bridge"!==e&&e!==t&&(this.caches={swap:!1,limit:!1,liquidity:!1})}},activated:function(){this.init()},methods:{init:function(){"swap"===this.tabActive?this.caches.swap||(this.$refs.swapBridge.init(),this.caches.swap=!0):"limit"===this.tabActive?this.caches.limit||(this.$refs.limitBridge.init(),this.caches.limit=!0):"liquidity"===this.tabActive&&(this.caches.liquidity||(this.$refs.liquidityBridge.init(),this.caches.liquidity=!0))},handleTab:function(e){this.tabActive=e.value},goLiquidity:function(){var e,t;if(null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.openLp){var o,n;null===(o=window)||void 0===o||null===(n=o._tw_)||void 0===n||n.openLp("","","")}else{var i,a=(null===(i=this.globalConfig)||void 0===i?void 0:i.lp_url)||"https://m.jfliquidity.xyz/add";this.$f.appOpenWebPage(a)}}}};o("6676");const Cr=$t()(Ar,[["render",l],["__scopeId","data-v-3642a5cf"]]);t["default"]=Cr},"0e64":function(e,t,o){},"0e93":function(e,t,o){},"1c9a":function(e,t,o){},"1e3d":function(e,t,o){"use strict";o("a113")},24500:function(e,t,o){},"26d9":function(e,t,o){"use strict";o("cffb")},"2b92":function(e,t,o){"use strict";o("ca58")},"2bd0":function(e,t,o){"use strict";o("7f8b")},3731:function(e,t,o){"use strict";o("f898")},3963:function(e,t,o){},"3d41":function(e,t,o){},"3dfd":function(e,t,o){},"3ee7":function(e,t,o){"use strict";o("3d41")},"404a":function(e,t,o){"use strict";o("c240")},"431d":function(e,t,o){},"449c":function(e,t,o){"use strict";var n=o("7a23"),i=function(e){return Object(n["pushScopeId"])("data-v-0301828e"),e=e(),Object(n["popScopeId"])(),e},a=i((function(){return Object(n["createElementVNode"])("use",{"xlink:href":"#icon-slippage"},null,-1)})),s=[a],l={class:"popup-title"},r={class:"slippage-label"},c=i((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),d={style:{width:"100%"}},u={class:"radio-group"},m={key:0,style:{flex:"1"}},b=["id","value","disabled"],p=["for"],h={class:"slippage-input"},f=i((function(){return Object(n["createElementVNode"])("span",null,"%",-1)})),v={key:0,class:"flex justify-between items-center mt-15 color-333"},g={class:"flex flex-col justify-center text-14px flex-1"},k={class:"text-12px mt-3px color-#FF9E19"},O={class:"form-submit"};function j(e,t,o,i,a,j){var w=this,T=Object(n["resolveComponent"])("van-checkbox"),y=Object(n["resolveComponent"])("van-field"),S=Object(n["resolveComponent"])("van-switch"),N=Object(n["resolveComponent"])("van-button"),x=Object(n["resolveComponent"])("van-form"),V=Object(n["resolveComponent"])("van-popup");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[0===o.icon?(Object(n["openBlock"])(),Object(n["createElementBlock"])("svg",{key:0,class:"icon-svg icon-slippage","aria-hidden":"true",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return a.slippageVisible=!0}),["stop"]))},s)):1===o.icon?(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",{key:1,class:"iconfont icon-settings",style:{color:"#999999"},onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(e){return a.slippageVisible=!0}),["stop"]))})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(V,{show:a.slippageVisible,"onUpdate:show":t[8]||(t[8]=function(e){return a.slippageVisible=e}),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"20vh"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("h3",l,Object(n["toDisplayString"])(e.$t("setSlippage")),1),Object(n["createVNode"])(x,{class:"popup-content",onSubmit:j.confirmSubmit},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[2]||(t[2]=Object(n["withModifiers"])((function(){return j.openSlippageTips&&j.openSlippageTips.apply(j,arguments)}),["stop"])),style:{"font-size":"0.38rem","margin-left":"0.05rem",color:"#558BED"}}),c,o.isAutoSlippage?(Object(n["openBlock"])(),Object(n["createBlock"])(T,{key:0,modelValue:a.autoSlippage,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.autoSlippage=e})},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("autoSlippage")),1)]})),_:1},8,["modelValue"])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])(y,{name:"slippage",modelValue:a.slippageValue,"onUpdate:modelValue":t[6]||(t[6]=function(e){return a.slippageValue=e}),disabled:a.autoSlippage,label:"",style:{"--van-cell-horizontal-padding":"0"},rules:[{required:!0,message:w.$t("enterSlippage")},{validator:j.validator,message:w.$t("slippageMaxTip")}],border:!1},{input:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",d,[Object(n["createElementVNode"])("div",u,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(o.slippageList,(function(e,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:o},[0!==o?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",m)):Object(n["createCommentVNode"])("",!0),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"radio",id:"radio-".concat(e),"onUpdate:modelValue":t[4]||(t[4]=function(e){return a.slippageValue=e}),value:e,class:"radio-input",disabled:a.autoSlippage},null,8,b),[[n["vModelRadio"],a.slippageValue]]),Object(n["createElementVNode"])("label",{for:"radio-".concat(e),class:"radio-item"},Object(n["toDisplayString"])(e)+"%",9,p)],64)})),128))]),Object(n["createElementVNode"])("div",h,[Object(n["createVNode"])(y,{class:"input",name:"slippage",type:"number",min:"0",max:"49.99",modelValue:a.slippageValue,"onUpdate:modelValue":t[5]||(t[5]=function(e){return a.slippageValue=e}),disabled:a.autoSlippage,onBlur:j.handleBlur,clearable:""},null,8,["modelValue","disabled","onBlur"]),f])])]})),_:1},8,["modelValue","disabled","rules"]),o.isProtection?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",v,[Object(n["createElementVNode"])("div",g,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("protection")),1),Object(n["createElementVNode"])("span",k,Object(n["toDisplayString"])(e.$t("protectionTip")),1)]),Object(n["createVNode"])(S,{modelValue:a.protection,"onUpdate:modelValue":t[7]||(t[7]=function(e){return a.protection=e}),size:"0.4rem","inactive-color":"#BFBFBF","active-color":"#558BED"},null,8,["modelValue"])])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",O,[Object(n["createVNode"])(N,{class:"btn",block:"",round:"","native-type":"submit",size:"normal",type:"primary"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm1")),1)]})),_:1})])]})),_:1},8,["onSubmit"])]})),_:1},8,["show"])],64)}o("a9e3");var w={name:"slippageButton",props:{slippage:{type:String,default:"2"},slippageList:{type:Array,default:function(){return["0.5","1","2"]}},min:{type:Number,default:0},icon:{type:Number,default:0},isAutoSlippage:{type:Boolean,default:!1},initAutoSlippage:{type:Boolean,default:!0},isProtection:{type:Boolean,default:!1},initProtection:{type:Boolean,default:!1}},emits:["update:slippage","onSubmit"],data:function(){return{slippageVisible:!1,slippageValue:this.slippage||"1",autoSlippage:this.initAutoSlippage,protection:this.initProtection||!1}},watch:{slippageVisible:function(e){var t,o,n;e&&(this.slippageValue=this.slippage||"1",this.isAutoSlippage?this.autoSlippage=this.initAutoSlippage:this.autoSlippage=!1),console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(o=t._tw_)||void 0===o||null===(n=o.isRefreshEnable)||void 0===n||n.call(o,"bridge",!e)}},methods:{confirmSubmit:function(){this.slippageVisible&&Number(this.slippageValue)<this.min&&(this.slippageValue=this.min),this.$emit("update:slippage",this.slippageValue),this.$emit("onSubmit",{slippage:this.slippageValue,autoSlippage:this.autoSlippage,protection:this.protection}),this.slippageVisible=!1},openSlippageTips:function(){this.$dialog.alert({title:this.$t("slippage"),message:this.$t("slippageTips"),confirmButtonText:this.$t("iKnown"),confirmButtonColor:"#558BED",messageAlign:"left"}).then((function(){}))},handleBlur:function(){this.slippageVisible&&Number(this.slippageValue)<0&&(this.slippageValue=0),this.slippageVisible&&Number(this.slippageValue)<this.min&&(this.slippageValue=this.min)},validator:function(e){return Number(e)<=49.99}}},T=(o("6d9f"),o("6b0d")),y=o.n(T);const S=y()(w,[["render",j],["__scopeId","data-v-0301828e"]]);t["a"]=S},"497e":function(e,t,o){"use strict";o("caad"),o("2532"),o("ac1f"),o("5319");var n=o("7a23"),i=o("335a"),a=o("7f08"),s=o("4360"),l=["onClick"],r={class:"rebate-bg"},c={class:"rebate-bg fastTrade"},d={setup:function(e){var t,d,u,m,b,p,h,f,v=o("ddc3"),g=null===(t=(null===(u=window)||void 0===u?void 0:u.main)||(null===(m=window)||void 0===m?void 0:m._tw_)||{})||void 0===t||null===(d=t.appGetPlatform)||void 0===d?void 0:d.call(t),k=null===(b=(null===(h=window)||void 0===h?void 0:h.main)||(null===(f=window)||void 0===f?void 0:f._tw_)||{})||void 0===b||null===(p=b.getAppVersionCode)||void 0===p?void 0:p.call(b),O=Object(n["computed"])((function(){var e=window.navigator.userAgent;return!!e.includes("OSType/2")||"android"===g&&k>104})),j=Object(n["computed"])((function(){var e,t,o=window.navigator.userAgent,n=s["a"].getters.netId;if(o.includes("OSType/2")){var i,a,l=o.replace(/^.*Ave.ai\/(.*) OSType\/2;$/,"$1"),r=v.gte(l,"2.3.0");return(null===(i=(a=["eth","bsc"]).includes)||void 0===i?void 0:i.call(a,n))&&r}var c="android"===g&&k>112;return(null===(e=(t=["eth","bsc"]).includes)||void 0===e?void 0:e.call(t,n))&&c}));function w(){var e,t=(null===(e=i["a"].get("ave_globalConfig",{}))||void 0===e?void 0:e.Inviter_Url)||"https://m.avepromotion.xyz";Object(a["appOpenWebPage"])(t)}return function(e,t){var o=Object(n["resolveComponent"])("van-swipe-item"),i=Object(n["resolveComponent"])("van-swipe");return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(i,{class:"rebate-swipe",autoplay:3e3,"lazy-render":"","show-indicators":!1},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(o,null,{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",{class:"rebate-container clickable",onClick:Object(n["withModifiers"])(w,["stop"])},[Object(n["createElementVNode"])("div",r,Object(n["toDisplayString"])(e.$t("rebateTips")),1)],8,l)]})),_:1}),Object(n["unref"])(j)?(Object(n["openBlock"])(),Object(n["createBlock"])(o,{key:0},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",{class:"rebate-container",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(){}),["stop"]))},[Object(n["createElementVNode"])("div",c,Object(n["toDisplayString"])(e.$t("fastTradeTips")),1)])]})),_:1})):Object(n["createCommentVNode"])("",!0)]})),_:1},512)),[[n["vShow"],Object(n["unref"])(O)]])}}},u=(o("404a"),o("6b0d")),m=o.n(u);const b=m()(d,[["__scopeId","data-v-9bc1a90a"]]);t["a"]=b},"57c9":function(e,t,o){"use strict";o("a9e3");var n=o("7a23"),i=o("afd7"),a=o.n(i),s={class:"tx-li-item_1"},l={style:{display:"flex","align-items":"center","justify-content":"left","min-width":"42%"}},r={style:{display:"flex","align-items":"center",flex:"1","justify-content":"center","overflow-x":"hidden","min-width":"0.4rem"}},c={key:0,src:a.a,style:{width:"100%"},alt:"",srcset:""},d={key:1,class:"iconfont icon-jiantou2"},u={style:{display:"flex","align-items":"center","min-width":"42%","justify-content":"right","flex-wrap":"wrap"}},m={style:{"text-align":"right","word-break":"break-word","margin-left":"0.1rem"}},b={class:"tx-li-item_3"},p={key:0},h={key:1,style:{color:"#999999"}},f={key:2};function v(e,t,i,a,v,g){var k,O,j,w,T,y,S,N,x,V,E,_,B=Object(n["resolveComponent"])("van-image");return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:"tx-li-item",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(){return g.goLink&&g.goLink.apply(g,arguments)}),["stop"]))},[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",l,[Object(n["createVNode"])(B,{round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem",style:{"margin-right":"0.1rem"},"lazy-load":"","show-loading":"",src:null!==(k=i.item)&&void 0!==k&&k.from_address_logo_url?e.$f.formatIcon({logo_url:i.item.from_address_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber2(i.item.from_amount))+" "+Object(n["toDisplayString"])(i.item.from_symbol||""),1)]),Object(n["createElementVNode"])("div",r,[0===(null===(O=i.item)||void 0===O?void 0:O.is_merged)&&1e3*(null===(j=i.item)||void 0===j?void 0:j.time)>=Date.now()-6e4&&"timeout"!==(null===(w=i.item)||void 0===w?void 0:w.status)&&"fail"!==(null===(T=i.item)||void 0===T?void 0:T.status)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",c)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",d))]),Object(n["createElementVNode"])("div",u,[Object(n["createVNode"])(B,{round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem",style:{"margin-right":"0.1rem","min-width":"0.32rem"},"lazy-load":"","show-loading":"",src:null!==(y=i.item)&&void 0!==y&&y.to_address_logo_url?e.$f.formatIcon({logo_url:i.item.to_address_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber2(i.item.to_amount)),1),Object(n["createElementVNode"])("span",m,Object(n["toDisplayString"])(i.item.to_symbol||""),1)])]),Object(n["createElementVNode"])("ul",b,[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.item.time?e.$f.formatDate(i.item.time):"--"),1),1===i.item.is_merged&&""!==i.item.from_price_usd?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",p,Object(n["toDisplayString"])(e.$f.formatNumberCurrencyUnit((Number(i.item.from_amount)||0)*(Number(i.item.from_price_usd)||0))),1)):!("timeout"===(null===(S=i.item)||void 0===S?void 0:S.status)||"fail"===(null===(N=i.item)||void 0===N?void 0:N.status)||1e3*(null===(x=i.item)||void 0===x?void 0:x.time)<Date.now()-6e4)||0!==i.item.is_merged||"solana"!==(null===(V=i.item)||void 0===V?void 0:V.chain)&&"ton"!==(null===(E=i.item)||void 0===E?void 0:E.chain)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",f,"--")):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",h,Object(n["toDisplayString"])("fail"===(null===(_=i.item)||void 0===_?void 0:_.status)?e.$t("failed"):e.$t("timeout")),1))])])])}var g={name:"TxItem",props:{item:Object},data:function(){return{}},methods:{goLink:function(){this.$f.openBrowser(this.$f.formatExplorerUrl(this.item.chain,this.item.transaction,"tx"))}}},k=(o("26d9"),o("6b0d")),O=o.n(k);const j=O()(g,[["render",v],["__scopeId","data-v-11f60edf"]]);t["a"]=j},"5c10":function(e,t,o){},"633aa":function(e,t,o){"use strict";o("049a")},6676:function(e,t,o){"use strict";o("431d")},"67e3":function(e,t,o){"use strict";o("df7a")},"68d9":function(e,t,o){},"6d9f":function(e,t,o){"use strict";o("0e93")},"74ca":function(e,t,o){"use strict";o("e886")},"7a28":function(e,t,o){},"7b28":function(e,t,o){},"7f8b":function(e,t,o){},"817e":function(e,t,o){"use strict";o("68d9")},"85b6":function(e,t,o){"use strict";var n=o("7a23"),i=function(e){return Object(n["pushScopeId"])("data-v-b557f64c"),e=e(),Object(n["popScopeId"])(),e},a={key:0,class:"gap"},s=["onClick"],l=i((function(){return Object(n["createElementVNode"])("div",{class:"bar"},null,-1)})),r={class:"text"};function c(e,t,o,i,c,d){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"percent-container",style:Object(n["normalizeStyle"])({"--percent-active-color":o.activeColor})},[Object(n["createElementVNode"])("div",{for:"percent-radio-0",class:Object(n["normalizeClass"])({active:0===c.activePercent})},null,2),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(c.percentList,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:t},[0!==t?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",a)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["label",{active:e===c.activePercent}]),onClick:Object(n["withModifiers"])((function(t){return d.handleClick(e)}),["stop"])},[l,Object(n["createElementVNode"])("div",r,Object(n["toDisplayString"])(e)+"%",1)],10,s)],64)})),128))],4)}var d={name:"PercentStep",props:{activeColor:String},emits:["change"],data:function(){return{activePercent:0,percentList:[25,50,75,100]}},methods:{handleClick:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e===this.activePercent?(this.activePercent=0,this.$emit("change",0,t)):(this.activePercent=e,this.$emit("change",e,t))}}},u=(o("3731"),o("6b0d")),m=o.n(u);const b=m()(d,[["render",c],["__scopeId","data-v-b557f64c"]]);t["a"]=b},"8da3e":function(e,t,o){},"8dc0":function(e,t,o){"use strict";o("c752")},"8e2e":function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var n=o("f3f3"),i=o("0122"),a=(o("e9c4"),o("a002")),s=o.n(a),l=o("7a23");function r(e,t){var o=Object(l["ref"])(t);function a(){s.a.getItem(e).then((function(n){console.log("read",e,null!==n&&void 0!==n?n:t),null===n?(o.value=t,s.a.setItem(e,t)):o.value=n})).catch((function(e){o.value=v}))}function r(t){var a=t||o.value;return a?Array.isArray(a)?s.a.setItem(e,JSON.parse(JSON.stringify(o.value))):void("object"===Object(i["a"])(o.value)?s.a.setItem(e,Object(n["a"])({},a)):s.a.setItem(e,a)):s.a.removeItem(e)}return a(),Object(l["watch"])(o,(function(e){r()})),o}},"940b":function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));o("f3f3"),o("c964"),o("96cf"),o("d3b7"),o("2ca0");var n=o("4360");o("a18c");function i(){window.addEventListener("message",(function(e){e.data.message&&"accountsChanged"===e.data.message.action&&(console.log("got accountsChanged event",e.data),n["a"].commit("setCurrentAccount",window.tronWeb.defaultAddress.base58)),e.data.message&&"setNode"==e.data.message.action&&console.log("got setNode event",e.data),e.data.message&&"connect"==e.data.message.action&&console.log("got connect event",e.data),e.data.message&&"disconnect"==e.data.message.action&&(console.log("got connect event",e.data),n["a"].commit("setWallet",""),n["a"].commit("setProvider",""))}))}function a(){return new Promise((function(e,t){window.tronLink?e(!0):(window.addEventListener("tronLink#initialized",(function(){window.tronLink?(console.log("tronLink successfully detected!"),e(!0)):(console.log("Please install TronLink-Extension!"),t("Please install TronLink-Extension!"))}),{once:!0}),setTimeout((function(){window.tronLink?(console.log("tronLink successfully detected!"),e(!0)):(console.log("Please install TronLink-Extension!"),t("Please install TronLink-Extension!"))}),3e3))}))}function s(){return i(),new Promise((function(e,t){var o,i,s;window.tronLink?(console.log("---tron_requestAccounts start----",null===(o=window)||void 0===o?void 0:o.tronWeb),null===(i=window)||void 0===i||null===(s=i.tronLink)||void 0===s||s.request({method:"tron_requestAccounts"}).then((function(o){var i,a,s;console.log("tron_requestAccounts",o),200===o.code&&null!==(i=window)&&void 0!==i&&null!==(a=i.tronWeb)&&void 0!==a&&null!==(s=a.defaultAddress)&&void 0!==s&&s.base58?(n["a"].commit("setCurrentAccount",window.tronWeb.defaultAddress.base58),n["a"].commit("setProvider",window.tronWeb),n["a"].commit("setChainId","tron"),n["a"].commit("setWallet","TronLink"),e(window.tronWeb.defaultAddress.base58)):4001===o.code&&t(o)})).catch((function(e){console.log("connect tronLink error",e),4001===e.code?t("please connect tronLink"):console.error(e)}))):a().then((function(){var o,i;null===(o=window)||void 0===o||null===(i=o.tronLink)||void 0===i||i.request({method:"tron_requestAccounts"}).then((function(o){var i,a,s;console.log("tron_requestAccounts",o),200===o.code&&null!==(i=window)&&void 0!==i&&null!==(a=i.tronWeb)&&void 0!==a&&null!==(s=a.defaultAddress)&&void 0!==s&&s.base58?(n["a"].commit("setProvider",window.tronWeb),n["a"].commit("setChainId","tron"),n["a"].commit("setWallet","TronLink"),n["a"].commit("setCurrentAccount",window.tronWeb.defaultAddress.base58),e(window.tronWeb.defaultAddress.base58)):4001===o.code&&t(o)})).catch((function(e){console.log("connect tronLink error",e),4001===e.code?t("è¯·è¿žæŽ¥"):console.error(e)}))}))}))}},9587:function(e,t,o){"use strict";o("99af");var n=o("7a23"),i=function(e){return Object(n["pushScopeId"])("data-v-9640257c"),e=e(),Object(n["popScopeId"])(),e},a={class:"flex items-center"},s={class:"label mr-20"},l={key:0,class:"token-container"},r={class:"icon-token-container mr-5"},c=["src"],d={class:"mr-5"},u=i((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),m={class:"flex items-center mt-10"},b={class:"label mr-20"},p={key:0,class:"token-container"},h={class:"icon-token-container mr-5"},f=["src"],v={class:"mr-5"},g={class:"flex items-center mt-10"},k={class:"label mr-20"},O={key:0,class:"token-container"},j={class:"flex items-center justify-between mt-10"},w={class:"label mr-20 flex items-center"},T={key:0},y=i((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),S={class:"flex items-center"},N={class:"label mr-20"},x={key:0,class:"token-container"},V={class:"icon-token-container mr-5"},E=["src"],_={class:"mr-5"},B=i((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),$={class:"flex items-center mt-10"},A={class:"label mr-20"},C={key:0,class:"token-container"},D={class:"icon-token-container mr-5"},I=["src"],L={class:"mr-5"},F={class:"flex justify-between mt-10"},P={class:"label mr-20"},R={class:"token-container flex items-end flex-col",style:{"align-items":"end"}},U={class:"text-size-12"},M={class:"color-999 text-size-12"},z={class:"flex items-center justify-between mt-10"},q={class:"mr-20 label"},W={key:0,class:"color-333 text-size-12"},H={class:"label"},Q={key:1,class:"color-333 text-size-12"},G={class:"label"},K={key:0,class:"flex items-center justify-between mt-10"},J={class:"mr-20 label"},Z={class:"color-333 text-size-12"};function Y(e,t,i,Y,X,ee){var te,oe,ne,ie,ae,se,le,re,ce=Object(n["resolveComponent"])("van-image"),de=Object(n["resolveComponent"])("van-loading"),ue=Object(n["resolveComponent"])("van-button");return"solana"!==i.item.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:0,class:"tx-li-item van-hairline--bottom clickable",onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(e){return ee.goLink(i.item)}),["stop"]))},[Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("span",s,Object(n["toDisplayString"])(e.$t("from")),1),i.item.from_token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",l,[Object(n["createElementVNode"])("div",r,[Object(n["createVNode"])(ce,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(te=i.item)&&void 0!==te&&te.from_token_logo_url?e.$f.formatIcon({logo_url:i.item.from_token_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("img",{class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(i.item.chain,".png"),alt:"",srcset:""},null,8,c)]),Object(n["createElementVNode"])("span",d,Object(n["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(i.item.from_amount,i.item.from_token_decimals))),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.item.from_token_symbol||""),1)])):Object(n["createCommentVNode"])("",!0),u,0===i.item.is_merged?(Object(n["openBlock"])(),Object(n["createBlock"])(de,{key:1,size:"0.32rem",color:"#3F80F7","text-size":"0.24rem"})):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",m,[Object(n["createElementVNode"])("span",b,Object(n["toDisplayString"])(e.$t("to")),1),i.item.to_token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",p,[Object(n["createElementVNode"])("div",h,[Object(n["createVNode"])(ce,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(oe=i.item)&&void 0!==oe&&oe.to_token_logo_url?e.$f.formatIcon({logo_url:i.item.to_token_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("img",{class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(i.item.chain,".png"),alt:"",srcset:""},null,8,f)]),Object(n["createElementVNode"])("span",v,Object(n["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(i.item.to_amount,i.item.to_token_decimals))),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])((null===(ne=i.item)||void 0===ne?void 0:ne.to_token_symbol)||""),1)])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",g,[Object(n["createElementVNode"])("span",k,Object(n["toDisplayString"])(e.$t("delegatePrice"))+"("+Object(n["toDisplayString"])(i.item.target_token===i.item.from_token?(null===(ie=i.item)||void 0===ie?void 0:ie.from_token_symbol)||"":(null===(ae=i.item)||void 0===ae?void 0:ae.to_token_symbol)||"")+")",1),i.item.target_token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",O,[Object(n["createElementVNode"])("span",null,"$"+Object(n["toDisplayString"])(i.item.target_limit_price?e.$f.formatNumber2(i.item.target_limit_price):"--"),1)])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",j,[Object(n["createElementVNode"])("div",w,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatDate(i.item.created_at)),1),(0===i.item.status||-1===i.item.status)&&Date.now()<1e3*i.item.created_at+X.LimitExpiredTime?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",T,"("+Object(n["toDisplayString"])(e.$t("expiresInTime",{t:e.$dayjs(1e3*i.item.created_at+X.LimitExpiredTime).fromNow()}))+")",1)):Object(n["createCommentVNode"])("",!0)]),1===i.item.status||2===i.item.status?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"status-txt",style:Object(n["normalizeStyle"])({color:ee.formatStatusColor(i.item)})},Object(n["toDisplayString"])(ee.formatStatus(i.item)),5)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[y,0!==i.item.status||(0===i.item.status||-1===i.item.status)&&1e3*i.item.created_at+X.LimitExpiredTime<Date.now()&&"solana"!==i.item.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"status-txt",style:Object(n["normalizeStyle"])({color:ee.formatStatusColor(i.item)})},Object(n["toDisplayString"])(ee.formatStatus(i.item)),5)):Object(n["createCommentVNode"])("",!0),"solana"===i.item.chain&&0===i.item.status||i.item.from_token===X.NATIVE_TOKEN||(0===i.item.status||-1===i.item.status)&&1e3*i.item.created_at+X.LimitExpiredTime>Date.now()?(Object(n["openBlock"])(),Object(n["createBlock"])(ue,{key:1,class:"btn-s",plain:"",hairline:"",type:"primary",size:"small",loading:X.loading,"loading-text":e.$t("revoke"),"loading-size":"0.28rem",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return ee.confirmCancel(i.item)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("revoke")),1)]})),_:1},8,["loading","loading-text"])):Object(n["createCommentVNode"])("",!0)],64))])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:1,class:"tx-li-item van-hairline--bottom clickable",onClick:t[3]||(t[3]=Object(n["withModifiers"])((function(e){return ee.goLink(i.item)}),["stop"]))},[Object(n["createElementVNode"])("div",S,[Object(n["createElementVNode"])("span",N,Object(n["toDisplayString"])(e.$t("from")),1),i.item.from_token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",x,[Object(n["createElementVNode"])("div",V,[Object(n["createVNode"])(ce,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(se=i.item)&&void 0!==se&&se.from_token_logo_url?e.$f.formatIcon({logo_url:i.item.from_token_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("img",{class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(i.item.chain,".png"),alt:"",srcset:""},null,8,E)]),Object(n["createElementVNode"])("span",_,Object(n["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(i.item.from_amount,i.item.from_token_decimals))),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.item.from_token_symbol||""),1)])):Object(n["createCommentVNode"])("",!0),B,"Sending"===i.item.state?(Object(n["openBlock"])(),Object(n["createBlock"])(de,{key:1,size:"0.32rem",color:"#3F80F7","text-size":"0.24rem"})):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:2},[Object(n["createElementVNode"])("span",{class:"label",style:Object(n["normalizeStyle"])({color:ee.formatSolanaStatusColor(i.item)})},Object(n["toDisplayString"])(ee.formatSolanaStatus(i.item)),5),"solana"===i.item.chain&&"Pending"===i.item.state?(Object(n["openBlock"])(),Object(n["createBlock"])(ue,{key:0,class:"btn-s",plain:"",hairline:"",type:"primary",size:"small",loading:X.loadingSolana[i.item.publicKey],"loading-text":e.$t("revoke"),"loading-size":"0.28rem",onClick:t[2]||(t[2]=Object(n["withModifiers"])((function(e){return ee.confirmCancel(i.item)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("revoke")),1)]})),_:1},8,["loading","loading-text"])):Object(n["createCommentVNode"])("",!0)],64))]),Object(n["createElementVNode"])("div",$,[Object(n["createElementVNode"])("span",A,Object(n["toDisplayString"])(e.$t("to")),1),i.item.to_token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",C,[Object(n["createElementVNode"])("div",D,[Object(n["createVNode"])(ce,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(le=i.item)&&void 0!==le&&le.to_token_logo_url?e.$f.formatIcon({logo_url:i.item.to_token_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("img",{class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(i.item.chain,".png"),alt:"",srcset:""},null,8,I)]),Object(n["createElementVNode"])("span",L,Object(n["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(i.item.to_amount,i.item.to_token_decimals))),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])((null===(re=i.item)||void 0===re?void 0:re.to_token_symbol)||""),1)])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",F,[Object(n["createElementVNode"])("span",P,Object(n["toDisplayString"])(e.$t("delegatePrice"))+"("+Object(n["toDisplayString"])(ee.solanaPriceSymbol(i.item))+")",1),Object(n["createElementVNode"])("div",R,[Object(n["createElementVNode"])("span",U,"$"+Object(n["toDisplayString"])(ee.solanaPriceU(i.item)),1),Object(n["createElementVNode"])("span",M,"("+Object(n["toDisplayString"])(ee.solanaPrice(i.item))+")",1)])]),Object(n["createElementVNode"])("div",z,[Object(n["createElementVNode"])("span",q,Object(n["toDisplayString"])(e.$t("amount1")),1),ee.solanaTarget(i.item)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",W,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(i.item.from_amount_used||0,i.item.from_token_decimals)))+"/"+Object(n["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(i.item.from_amount||0,i.item.from_token_decimals)))+" "+Object(n["toDisplayString"])(i.item.from_token_symbol),1),Object(n["createElementVNode"])("span",H,"("+Object(n["toDisplayString"])(e.$f.formatNumber2(i.item.percent||0))+"%)",1)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Q,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(i.item.to_amount_used||0,i.item.to_token_decimals)))+"/"+Object(n["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(i.item.to_amount||0,i.item.to_token_decimals)))+" "+Object(n["toDisplayString"])(i.item.to_token_symbol),1),Object(n["createElementVNode"])("span",G,"("+Object(n["toDisplayString"])(e.$f.formatNumber2(i.item.percent||0))+"%)",1)]))]),void 0!==i.item.expiredAt?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",K,[Object(n["createElementVNode"])("span",J,Object(n["toDisplayString"])(e.$t("expiredTime")),1),Object(n["createElementVNode"])("span",Z,Object(n["toDisplayString"])(i.item.expiredAt?e.$f.formatDate(i.item.expiredAt):e.$t("never")),1)])):Object(n["createCommentVNode"])("",!0)]))}o("d3b7"),o("b680"),o("a9e3");var X=o("365c"),ee=o("c9d9"),te=o("6779"),oe=o("901e"),ne=o.n(oe),ie={name:"TxItem",props:{item:Object},emits:["refresh"],data:function(){return{loading:!1,LimitExpiredTime:ee["g"],NATIVE_TOKEN:ee["k"],loadingSolana:{}}},methods:{formatUnits:te["utils"].formatUnits,goLink:function(e){if("solana"===e.chain){if("Sending"===(null===e||void 0===e?void 0:e.state))return;this.$router.push({name:"LimitOrder",params:{id:e.orderKey},query:{chain:"solana",inputMint:e.from_token,outputMint:e.to_token,wallet:e.maker}})}else this.$router.push({name:"LimitOrder",params:{id:e.id}})},confirmCancel:function(e){var t=this,o="solana"===(null===e||void 0===e?void 0:e.chain)?this.$t("cancelOrderConfirmingSolana"):this.$t("confirmCancelMessage");this.$dialog.confirm({title:this.$t("cancelOrderConfirming"),message:o,confirmButtonText:this.$t("confirm1"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then((function(){t.cancelLimitOrder(e)}))},cancelLimitOrder:function(e){var t=this;if("solana"!==e.chain){var o={fromToken:e.from_token,fromAmount:e.from_amount,toToken:e.to_token,minReturn:e.to_min_amount,salt:e.salt,id:e.id,order_id:e.order_id};console.log(o),this.loading=!0,Object(X["k"])(o).then((function(o){console.log(o),t.$notify({type:"success",message:t.$t("cancelledOrderSuccessfully")}),t.$emit("refresh",e)})).catch((function(e){t.$f.handleError(e)})).finally((function(){t.loading=!1}))}else this.cancelSolanaLimitOrder(e)},cancelSolanaLimitOrder:function(e){var t=this;this.loadingSolana[e.publicKey]=!0,Object(X["l"])(e.publicKey).then((function(e){return console.log(e),e.wait()})).then((function(o){console.log(o),setTimeout((function(){t.$emit("refresh",e,t.loadingSolana)}),3e3)})).catch((function(o){t.$f.handleError(o),t.loadingSolana[e.publicKey]=!1})).finally((function(){}))},formatStatus:function(e){var t;if((0===e.status||-1===e.status)&&1e3*e.created_at+ee["g"]<Date.now()&&"solana"!==e.chain)return this.$t("expired1");var o=e.status,n={0:"",1:this.$t("cancelled"),2:this.$t("completed"),3:this.$t("unknownError1"),7:this.$t("unknownError1"),5:this.$t("insufficientSlippage1"),8:this.$t("insufficientSlippage1"),6:this.$t("transferFailed"),4:this.$t("fail1")+"(".concat(this.$t("notEnoughBalance"),")"),10:this.$t("fail1")+"(".concat(this.$t("nonceError"),")"),11:this.$t("fail1")+"(".concat(this.$t("chainError"),")"),12:this.$t("fail1")+"(".concat(this.$t("signatureError"),")"),13:this.$t("fail1")+"(".concat(this.$t("approveGasPriceLow"),")"),"-1":""};return null!==(t=n[o])&&void 0!==t?t:o},formatStatusColor:function(e){if((0===e.status||-1===e.status)&&1e3*e.created_at+ee["g"]<Date.now())return"#999999";var t=e.status;return 1===t||10===t||11===t||12===t||4===t?"#999999":2===t?"#12B886":0===t?"#3F80F7":"#FF0000"},solanaTarget:function(e){var t=["So11111111111111111111111111111111111111112","EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v","Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"],o=t.indexOf(e.from_token),n=t.indexOf(e.to_token);return o<=n},solanaPriceSymbol:function(e){return this.solanaTarget(e)?(null===e||void 0===e?void 0:e.from_token_symbol)||"":(null===e||void 0===e?void 0:e.to_token_symbol)||""},solanaPriceU:function(e){return this.solanaTarget(e)?this.$f.formatNumber2(new ne.a(e.to_amount).times(Math.pow(10,(null===e||void 0===e?void 0:e.from_token_decimals)-(null===e||void 0===e?void 0:e.to_token_decimals))).times((null===e||void 0===e?void 0:e.to_token_price)||0).div(e.from_amount).toFixed()):this.$f.formatNumber2(new ne.a(e.from_amount).times(Math.pow(10,(null===e||void 0===e?void 0:e.to_token_decimals)-(null===e||void 0===e?void 0:e.from_token_decimals))).times((null===e||void 0===e?void 0:e.from_token_price)||0).div(e.to_amount).toFixed())},solanaPrice:function(e){return this.solanaTarget(e)?this.$f.formatNumber2(e.to_amount*Math.pow(10,(null===e||void 0===e?void 0:e.from_token_decimals)-(null===e||void 0===e?void 0:e.to_token_decimals))/e.from_amount)+" "+((null===e||void 0===e?void 0:e.to_token_symbol)||"")+" per "+((null===e||void 0===e?void 0:e.from_token_symbol)||""):this.$f.formatNumber2(e.from_amount*Math.pow(10,(null===e||void 0===e?void 0:e.to_token_decimals)-(null===e||void 0===e?void 0:e.from_token_decimals))/e.to_amount)+" "+((null===e||void 0===e?void 0:e.from_token_symbol)||"")+" per "+((null===e||void 0===e?void 0:e.to_token_symbol)||"")},formatSolanaStatus:function(e){var t;if("Pending"===(null===e||void 0===e?void 0:e.state)&&null!==(null===e||void 0===e?void 0:e.expiredAt)&&Date.now()>1e3*Number((null===e||void 0===e?void 0:e.expiredAt)||0))return this.$t("expired1");var o=e.state,n={Pending:"",Completed:this.$t("completed"),Cancelled:this.$t("cancelled")};return null!==(t=n[o])&&void 0!==t?t:o},formatSolanaStatusColor:function(e){var t;if("Pending"===(null===e||void 0===e?void 0:e.state)&&null!==(null===e||void 0===e?void 0:e.expiredAt)&&Date.now()>1e3*Number((null===e||void 0===e?void 0:e.expiredAt)||0))return"#999999";var o=e.state,n={Pending:"",Completed:"#12B886",Cancelled:"#999999"};return null!==(t=n[o])&&void 0!==t?t:"#3F80F7"}}},ae=(o("8dc0"),o("6b0d")),se=o.n(ae);const le=se()(ie,[["render",Y],["__scopeId","data-v-9640257c"]]);t["a"]=le},"965b":function(e,t,o){e.exports=o.p+"static/img/audit-logo.01052351.png"},"9eb5":function(e,t,o){"use strict";o("7b28")},a113:function(e,t,o){},a277:function(e,t,o){"use strict";o("5c10")},a28f:function(e,t,o){"use strict";o("3963")},a2ef:function(e,t,o){"use strict";o("b0c0"),o("fb6a"),o("99af");var n=o("7a23"),i=o("e524"),a=o.n(i),s={class:"swap-title"},l={class:"swap-info"},r={class:"swap-info_item header"},c={class:"header-li"},d={class:"header-li_left"},u=["src"],m={class:"header-li_right"},b={class:"switch-box"},p={class:"header-li"},h={class:"header-li_left"},f=["src"],v={class:"header-li_right"},g={key:0,class:"b-s-c"},k={class:"color-3f80f7"},O=Object(n["createTextVNode"])(") "),j={class:"text-size-12 color-999",style:{"max-height":"2rem","overflow-y":"auto"}},w={class:"flex justify-between items-center mt-5"},T={key:0,style:{color:"var(--van-danger-color)"}},y={key:1},S={key:1,class:"bg-change"},N={class:"swap-info_item"},x={class:"swap-info_item-label"},V={class:"swap-info_item-value"},E={class:"p-item"},_={class:"p-item"},B={key:2,class:"swap-info_item"},$={class:"swap-info_item-label"},A={class:"swap-info_item-value"},C={key:3,class:"swap-info_item"},D={class:"swap-info_item-label"},I={class:"swap-info_item-value"},L={key:0,class:"swap-info_item"},F={class:"swap-info_item-label"},P={class:"swap-info_item-value"},R={key:1,class:"swap-info_item"},U={class:"swap-info_item-label"},M={class:"swap-info_item-value"},z={class:"swap-info_item"},q={class:"swap-info_item-label"},W={key:0,class:"swap-info_item-value path-list"},H={key:0},Q={class:"path-amm"},G={key:1,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},K={key:1},J={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},Z={key:1},Y={key:5,class:"swap-info_item"},X={class:"swap-info_item-label"},ee={class:"swap-info_item-value"},te=["href"],oe={class:"iconfont icon-copy",style:{"margin-left":"0.1rem"}},ne={class:"footer"};function ie(e,t,i,a,ie,ae){var se=Object(n["resolveComponent"])("van-icon"),le=Object(n["resolveComponent"])("van-button"),re=Object(n["resolveComponent"])("van-image"),ce=Object(n["resolveComponent"])("van-popup"),de=Object(n["resolveDirective"])("copy");return Object(n["openBlock"])(),Object(n["createBlock"])(ce,{show:ae.dialogVisible,"onUpdate:show":t[1]||(t[1]=function(e){return ae.dialogVisible=e}),style:Object(n["normalizeStyle"])({width:"90%",padding:"0.4rem"}),closeable:"",round:"",teleport:"#app"},{default:Object(n["withCtx"])((function(){var a,ce,ue,me,be,pe,he,fe,ve,ge,ke,Oe,je,we,Te,ye,Se;return[Object(n["createElementVNode"])("header",s,Object(n["toDisplayString"])(e.$t("tradeConfirm")),1),Object(n["createElementVNode"])("ul",l,[Object(n["createElementVNode"])("li",r,[Object(n["createElementVNode"])("div",c,[Object(n["createElementVNode"])("div",d,[Object(n["createElementVNode"])("img",{class:"icon-token",src:ae.formatLogo(i.swapInfo.fromToken),alt:"",height:"20"},null,8,u),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.swapInfo.fromToken.symbol),1)]),Object(n["createElementVNode"])("div",m,Object(n["toDisplayString"])(e.$f.formatNumber2((null===(a=i.swapInfo)||void 0===a?void 0:a.fromAmount)||ae.formatUnits(i.swapInfo.fromTokenAmount||0,i.swapInfo.fromToken.decimals))||"0"),1)]),Object(n["createElementVNode"])("div",b,[Object(n["createVNode"])(se,{class:"switch-icon",name:"down"})]),Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("div",h,[Object(n["createElementVNode"])("img",{class:"icon-token",src:ae.formatLogo(i.swapInfo.toToken),alt:"",height:"20"},null,8,f),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.swapInfo.toToken.symbol),1)]),Object(n["createElementVNode"])("div",v,Object(n["toDisplayString"])(e.$f.formatNumber2((null===(ce=i.swapInfo)||void 0===ce?void 0:ce.toAmount)||ae.formatUnits(i.swapInfo.toTokenAmount||0,i.swapInfo.toToken.decimals))||"0"),1)])]),e.$store.state.isBatchSwap&&ie.isCanBatchSwap?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",g,[Object(n["createElementVNode"])("button",{class:"clickable",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return ie.isShowBatchAddress=!ie.isShowBatchAddress}),["stop"]))},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("batchSwapDetails"))+"(",1),Object(n["createElementVNode"])("span",k,Object(n["toDisplayString"])((null===(ue=ae.selectSubWallets)||void 0===ue?void 0:ue.length)||0),1),O,Object(n["withDirectives"])(Object(n["createVNode"])(se,{name:"arrow-down"},null,512),[[n["vShow"],!ie.isShowBatchAddress]]),Object(n["withDirectives"])(Object(n["createVNode"])(se,{name:"arrow-up"},null,512),[[n["vShow"],ie.isShowBatchAddress]])]),Object(n["withDirectives"])(Object(n["createElementVNode"])("ul",j,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(ae.selectSubWallets||[],(function(t,o){var a;return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",w,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(null===t||void 0===t?void 0:t.name)+"("+Object(n["toDisplayString"])(null===t||void 0===t?void 0:t.address.slice(0,6))+"..."+Object(n["toDisplayString"])(null===t||void 0===t?void 0:t.address.slice(-4))+")",1),null!==(a=ae.swapTxs)&&void 0!==a&&a[o]?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",y,"-"+Object(n["toDisplayString"])(e.$f.formatNumber2(ae.formatUnits(i.swapInfo.fromTokenAmount||0,i.swapInfo.fromToken.decimals))||"0")+" "+Object(n["toDisplayString"])(i.swapInfo.fromToken.symbol),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",T,Object(n["toDisplayString"])(e.$t("insufficientBalance")),1))])})),256))],512),[[n["vShow"],ie.isShowBatchAddress]])])):Object(n["createCommentVNode"])("",!0),ie.priceUpdated?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",S,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$t("priceUpdated")),1),Object(n["createVNode"])(le,{class:"btn",type:"primary",color:"#3F80F7",size:"small",round:"",onClick:ae.accept},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("accept")),1)]})),_:1},8,["onClick"])])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("li",N,[Object(n["createElementVNode"])("div",x,Object(n["toDisplayString"])(e.$t("price")),1),Object(n["createElementVNode"])("div",V,[Object(n["createElementVNode"])("div",E,"1 "+Object(n["toDisplayString"])(i.swapInfo.fromToken.symbol)+" = "+Object(n["toDisplayString"])(ae.getPrice((null===(me=i.swapInfo)||void 0===me?void 0:me.fromAmount)||ae.formatUnits(i.swapInfo.fromTokenAmount||0,i.swapInfo.fromToken.decimals),(null===(be=i.swapInfo)||void 0===be?void 0:be.toAmount)||ae.formatUnits(i.swapInfo.toTokenAmount||0,i.swapInfo.toToken.decimals)))+" "+Object(n["toDisplayString"])(i.swapInfo.toToken.symbol),1),Object(n["createElementVNode"])("div",_,"1 "+Object(n["toDisplayString"])(i.swapInfo.toToken.symbol)+" = "+Object(n["toDisplayString"])(ae.getPrice((null===(pe=i.swapInfo)||void 0===pe?void 0:pe.toAmount)||ae.formatUnits(i.swapInfo.toTokenAmount||0,i.swapInfo.toToken.decimals),(null===(he=i.swapInfo)||void 0===he?void 0:he.fromAmount)||ae.formatUnits(i.swapInfo.fromTokenAmount||0,i.swapInfo.fromToken.decimals)))+" "+Object(n["toDisplayString"])(i.swapInfo.fromToken.symbol),1)])]),i.swapInfo.fromToken.isWrapper&&i.swapInfo.toToken.isETH||i.swapInfo.toToken.isWrapper&&i.swapInfo.fromToken.isETH?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",B,[Object(n["createElementVNode"])("div",$,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("div",A,Object(n["toDisplayString"])(i.slippage)+"%",1)])),i.swapInfo.gasValue&&i.swapInfo.gasValue>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",C,[Object(n["createElementVNode"])("div",D,Object(n["toDisplayString"])(e.$t("estimatedGas")),1),Object(n["createElementVNode"])("div",I,"â‰ˆ "+Object(n["toDisplayString"])(ae.getEstimatedFee(i.swapInfo.gasValue)),1)])):Object(n["createCommentVNode"])("",!0),i.swapInfo.fromToken.isWrapper&&i.swapInfo.toToken.isETH||i.swapInfo.toToken.isWrapper&&i.swapInfo.fromToken.isETH?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:4},[i.swapInfo.isAmountOut?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",R,[Object(n["createElementVNode"])("div",U,Object(n["toDisplayString"])(e.$t("maximumReceived")),1),Object(n["createElementVNode"])("div",M,Object(n["toDisplayString"])(ae.maxSold)+" "+Object(n["toDisplayString"])(null===(ge=i.swapInfo)||void 0===ge||null===(ke=ge.fromToken)||void 0===ke?void 0:ke.symbol),1)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",L,[Object(n["createElementVNode"])("div",F,Object(n["toDisplayString"])(e.$t("minimumReceived")),1),Object(n["createElementVNode"])("div",P,Object(n["toDisplayString"])(ae.minReceived)+" "+Object(n["toDisplayString"])(null===(fe=i.swapInfo)||void 0===fe||null===(ve=fe.toToken)||void 0===ve?void 0:ve.symbol),1)]))],64)),Object(n["createElementVNode"])("li",z,[Object(n["createElementVNode"])("div",q,Object(n["toDisplayString"])(e.$t("tokenRoute")),1),i.swapInfo.fromToken.isWrapper&&i.swapInfo.toToken.isETH||i.swapInfo.toToken.isWrapper&&i.swapInfo.fromToken.isETH?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",K,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(ae.swapRouterPath,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:t},[0!==t?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",J)):Object(n["createCommentVNode"])("",!0),e.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Z,Object(n["toDisplayString"])(e.symbol),1)):Object(n["createCommentVNode"])("",!0)],64)})),128))])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",W,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(ae.swapRouterPath,(function(t,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:i},[t.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",H,Object(n["toDisplayString"])(t.symbol),1)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",Q,[t.nextAmm&&"unknown"!==t.nextAmm?(Object(n["openBlock"])(),Object(n["createBlock"])(re,{key:0,class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(t.nextAmm,".jpeg"),"error-icon":o("aeccf")},null,8,["src","error-icon"])):Object(n["createCommentVNode"])("",!0),i!==ae.swapRouterPath.length-1?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",G)):Object(n["createCommentVNode"])("",!0)])],64)})),128))]))]),null!==(Oe=i.swapInfo)&&void 0!==Oe&&Oe.transaction?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",Y,[Object(n["createElementVNode"])("div",X,Object(n["toDisplayString"])(e.$t("txHash")),1),Object(n["createElementVNode"])("div",ee,[Object(n["createElementVNode"])("a",{href:e.$f.formatExplorerUrl(i.chain,i.swapInfo.transaction,"tx"),target:"_blank"},Object(n["toDisplayString"])((null===(je=i.swapInfo)||void 0===je||null===(we=je.transaction)||void 0===we?void 0:we.slice(0,6))+"..."+(null===(Te=i.swapInfo)||void 0===Te||null===(ye=Te.transaction)||void 0===ye?void 0:ye.slice(-6))),9,te),Object(n["withDirectives"])(Object(n["createElementVNode"])("i",oe,null,512),[[de,null===(Se=i.swapInfo)||void 0===Se?void 0:Se.transaction]])])])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",ne,[Object(n["createVNode"])(le,{class:"submit-button",type:"primary",loading:ae.isLoading,"loading-text":e.$t("confirming"),block:"",onClick:Object(n["withModifiers"])(ae.submitSwap,["stop"]),disabled:ie.priceUpdated},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm")),1)]})),_:1},8,["loading","loading-text","onClick","disabled"])])]})),_:1},8,["show","style"])}o("a9e3"),o("b680"),o("d3b7"),o("25f0"),o("caad"),o("2532");var ae=o("901e"),se=o.n(ae),le=o("6779"),re=o("c9d9"),ce={name:"ConfirmSwap",props:{visible:Boolean,swapInfo:Object,slippage:String,loading:Boolean,chain:String,nativePrice:Number,gasPrice:String},emits:["update:visible","submit"],data:function(){var e,t;return{priceUpdated:!1,isShowBatchAddress:!0,isCanBatchSwap:!(null===(e=window)||void 0===e||null===(t=e._tw_)||void 0===t||!t.appSelectSubWallet)||!1}},computed:{dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},isLoading:function(){return this.loading},minReceived:function(){var e,t,o,n,i=(null===(e=this.swapInfo)||void 0===e||null===(t=e.toToken)||void 0===t?void 0:t.decimals)||0,a=null===(o=this.swapInfo)||void 0===o?void 0:o.toAmount;return a?this.$f.formatNumber(new se.a(a||0).times(100-Number(this.slippage)).div(100).toFixed()):this.$f.formatNumber(le["utils"].formatUnits(new se.a((null===(n=this.swapInfo)||void 0===n?void 0:n.toTokenAmount)||0).times(100-Number(this.slippage)).div(100).toFixed(0),i))},maxSold:function(){var e,t,o,n,i=(null===(e=this.swapInfo)||void 0===e||null===(t=e.fromToken)||void 0===t?void 0:t.decimals)||0,a=null===(o=this.swapInfo)||void 0===o?void 0:o.fromAmount;return a?this.$f.formatNumber(new se.a(a||0).times(100+Number(this.slippage)).div(100).toFixed()):this.$f.formatNumber(le["utils"].formatUnits(new se.a((null===(n=this.swapInfo)||void 0===n?void 0:n.fromTokenAmount)||0).times(100+Number(this.slippage)).div(100).toFixed(0),i))},swapRouterPath:function(){var e;return(null===(e=this.swapInfo)||void 0===e?void 0:e.swapRouterPath)||[]},subTxs:function(){var e;return(null===(e=this.swapInfo)||void 0===e?void 0:e.subTxs)||{}},selectSubWallets:function(){return this.$store.getters.selectSubWallets||[]},swapTxs:function(){var e,t;return(null===(e=this.$store.state)||void 0===e||null===(t=e.subTxs)||void 0===t?void 0:t.swapTxs)||[]}},watch:{swapInfo:function(e,t){},visible:function(e){var t,o,n;e&&(this.priceUpdated=!1),null===(t=window)||void 0===t||null===(o=t._tw_)||void 0===o||null===(n=o.isRefreshEnable)||void 0===n||n.call(o,"bridge",!e)}},methods:{formatUnits:le["utils"].formatUnits,formatPrice:function(e){return this.$f.formatNumber(e&&""!==e?le["utils"].formatEther(this.nativePrice):0)},getPrice:function(e,t){return!e||!t||isNaN(Number(e))||isNaN(Number(t))?"0":this.$f.formatNumber2(new se.a(t).div(e).toFixed())||"0"},getEstimatedFee:function(e){return e?this.$f.formatNumberCurrencyUnit(new se.a(e.toString()).times(this.nativePrice).times(this.gasPrice).div(String(Math.pow(10,18))).toFixed()||"0",2):"0"},submitSwap:function(){this.$emit("submit")},formatLogo:function(e){var t;return!e.logoURI||null!==e&&void 0!==e&&null!==(t=e.logoURI)&&void 0!==t&&t.includes("empty-token")?e.logo_url?this.$f.formatIcon(e):e.isETH?this.$f.formatIcon(re["k"]+"-"+this.chain):"/icon-default.png":e.logoURI},goLink:function(){this.$f.openBrowser(this.$f.formatExplorerUrl(this.chain,this.swapInfo.transaction,"tx"))},accept:function(){this.priceUpdated=!1}}},de=(o("a28f"),o("6b0d")),ue=o.n(de);const me=ue()(ce,[["render",ie],["__scopeId","data-v-3eabeb3e"]]);t["a"]=me},a6ec:function(e,t,o){"use strict";o("24500")},aeccf:function(e,t,o){e.exports=o.p+"static/img/icon-default.75f6e9a0.png"},afd7:function(e,t,o){e.exports=o.p+"static/img/loading.fdd45987.svg"},b56d:function(e,t,o){"use strict";o("8da3e")},c240:function(e,t,o){},c638:function(e,t,o){"use strict";o("7a28")},c752:function(e,t,o){},ca58:function(e,t,o){},ce94:function(e,t,o){"use strict";var n=o("7a23"),i={key:0,class:"swap-title"},a={key:1,class:"swap-title"},s={key:2,class:"swap-title"},l={key:3,class:"swap-info"},r={key:0,class:"swap-info_item"},c={class:"swap-info_item-label"},d={class:"swap-info_item-value"},u={class:"swap-info_item"},m={class:"swap-info_item-label"},b={class:"swap-info_item-value"},p=["src"],h={class:"ml-5"},f={key:0,class:"swap-info_item"},v={class:"swap-info_item-label"},g={class:"swap-info_item-value",style:{"font-size":"0.24rem"}},k={style:{color:"#3F80F7"}},O={key:1,class:"swap-info_item"},j={class:"swap-info_item-label"},w={class:"swap-info_item-value",style:{"font-size":"0.24rem"}},T={style:{color:"#3F80F7"}},y={class:"swap-info_item"},S={class:"swap-info_item-label"},N={class:"swap-info_item-value"},x=["src"],V={class:"ml-5"},E={class:"swap-info_item"},_={class:"swap-info_item-label"},B={class:"swap-info_item-value"},$=["src"],A={class:"ml-5"},C={key:0,class:"swap-info_item"},D={class:"swap-info_item-label"},I={class:"swap-info_item-value",style:{"font-size":"0.24rem"}},L={style:{color:"#3F80F7"}},F={key:1,class:"swap-info_item"},P={class:"swap-info_item-label"},R={class:"swap-info_item-value",style:{"font-size":"0.24rem"}},U={style:{color:"#3F80F7"}},M={class:"swap-info_item"},z={class:"swap-info_item-label"},q={class:"swap-info_item-value"},W=["src"],H={class:"ml-5"},Q={key:3,class:"swap-info_item"},G={class:"swap-info_item-label"},K={class:"swap-info_item-value",style:{"text-align":"right"}},J={class:"swap-info_item tips warning"},Z={class:"swap-info_item tips warning"},Y={key:0,class:"swap-info_item tips warning"},X={key:1,class:"swap-info_item tips warning"},ee={key:4,class:"swap-info"},te={class:"swap-info_item header"},oe={class:"header-li"},ne={class:"header-li_left"},ie=["src"],ae={class:"header-li_right"},se={class:"switch-box"},le={class:"header-li"},re={class:"header-li_left"},ce=["src"],de={class:"header-li_right"},ue={class:"swap-info_item"},me={class:"swap-info_item-label"},be={class:"swap-info_item-value"},pe={class:"swap-info_item"},he={class:"swap-info_item-label"},fe={class:"swap-info_item-value"},ve={class:"swap-info_item"},ge={class:"swap-info_item-label"},ke={class:"swap-info_item-value"},Oe={class:"footer"};function je(e,t,o,je,we,Te){var ye=Object(n["resolveComponent"])("van-icon"),Se=Object(n["resolveComponent"])("van-button"),Ne=Object(n["resolveComponent"])("van-popup");return Object(n["openBlock"])(),Object(n["createBlock"])(Ne,{show:Te.dialogVisible,"onUpdate:show":t[1]||(t[1]=function(e){return Te.dialogVisible=e}),style:Object(n["normalizeStyle"])({width:"90%",padding:"0.4rem"}),closeable:"",round:"",teleport:"#app"},{default:Object(n["withCtx"])((function(){var je,Ne,xe,Ve,Ee,_e,Be,$e,Ae,Ce,De,Ie,Le,Fe,Pe,Re,Ue,Me,ze,qe,We,He,Qe,Ge,Ke,Je,Ze,Ye,Xe,et,tt,ot,nt,it,at,st;return[0===o.limitInfo.orderType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("header",i,Object(n["toDisplayString"])(0===o.limitInfo.activeTab?e.$t("limitBuy"):e.$t("limitSell")),1)):Object(n["createCommentVNode"])("",!0),1===o.limitInfo.orderType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("header",a,Object(n["toDisplayString"])(0===o.limitInfo.activeTab?e.$t("stopLimitBuy"):e.$t("stopLimitSell")),1)):Object(n["createCommentVNode"])("",!0),2===o.limitInfo.orderType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("header",s,Object(n["toDisplayString"])(e.$t("tradeConfirm")),1)):Object(n["createCommentVNode"])("",!0),0===o.limitInfo.orderType||1===o.limitInfo.orderType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",l,[1===o.limitInfo.orderType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",r,[Object(n["createElementVNode"])("div",c,Object(n["toDisplayString"])(e.$t("limitEffective")),1),Object(n["createElementVNode"])("div",d,Object(n["toDisplayString"])(e.$t("triggerPriceEffective",{symbol:1===o.limitInfo.activeTab?(null===(je=o.limitInfo)||void 0===je||null===(Ne=je.fromToken)||void 0===Ne?void 0:Ne.symbol)||"":(null===(xe=o.limitInfo)||void 0===xe||null===(Ve=xe.toToken)||void 0===Ve?void 0:Ve.symbol)||"",price:e.$f.formatNumber2((null===(Ee=o.limitInfo)||void 0===Ee?void 0:Ee.triggerPrice)||0)})),1)])):Object(n["createCommentVNode"])("",!0),0===o.limitInfo.activeTab?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createElementVNode"])("li",u,[Object(n["createElementVNode"])("div",m,Object(n["toDisplayString"])(e.$t("limitBuy")),1),Object(n["createElementVNode"])("div",b,[Object(n["createElementVNode"])("img",{class:"icon-token",src:Te.formatLogo(o.limitInfo.toToken),alt:"",height:"20"},null,8,p),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.toAmount||0)),1),Object(n["createElementVNode"])("span",h,Object(n["toDisplayString"])((null===(_e=o.limitInfo)||void 0===_e||null===(Be=_e.toToken)||void 0===Be?void 0:Be.symbol)||""),1)])]),"solana"!==o.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",f,[Object(n["createElementVNode"])("div",v,Object(n["toDisplayString"])(e.$t("limitPrice"))+"("+Object(n["toDisplayString"])(1===o.limitInfo.activeTab?(null===($e=o.limitInfo)||void 0===$e||null===(Ae=$e.fromToken)||void 0===Ae?void 0:Ae.symbol)||"":(null===(Ce=o.limitInfo)||void 0===Ce||null===(De=Ce.toToken)||void 0===De?void 0:De.symbol)||"")+")",1),Object(n["createElementVNode"])("div",g,[Object(n["createElementVNode"])("span",null,"$"+Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.targetLimitPrice||0)),1),Object(n["createElementVNode"])("span",k,"("+Object(n["toDisplayString"])(e.$t("auto-submitWhenPriceBuy"))+")",1)])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",O,[Object(n["createElementVNode"])("div",j,Object(n["toDisplayString"])(e.$t("limitPrice"))+"("+Object(n["toDisplayString"])(1===o.limitInfo.activeTab?(null===(Ie=o.limitInfo)||void 0===Ie||null===(Le=Ie.fromToken)||void 0===Le?void 0:Le.symbol)||"":(null===(Fe=o.limitInfo)||void 0===Fe||null===(Pe=Fe.toToken)||void 0===Pe?void 0:Pe.symbol)||"")+")",1),Object(n["createElementVNode"])("div",w,[Object(n["createElementVNode"])("span",null,"$"+Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.targetLimitPrice||0)),1),Object(n["createElementVNode"])("span",T,"("+Object(n["toDisplayString"])(e.$t("auto-submitWhenPriceBuy"))+")",1)])])),Object(n["createElementVNode"])("li",y,[Object(n["createElementVNode"])("div",S,Object(n["toDisplayString"])(e.$t("expectedPayment")),1),Object(n["createElementVNode"])("div",N,[Object(n["createElementVNode"])("img",{class:"icon-token",src:Te.formatLogo(o.limitInfo.fromToken),alt:"",height:"20"},null,8,x),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.fromAmount||0)),1),Object(n["createElementVNode"])("span",V,Object(n["toDisplayString"])((null===(Re=o.limitInfo)||void 0===Re||null===(Ue=Re.fromToken)||void 0===Ue?void 0:Ue.symbol)||""),1)])])],64)):Object(n["createCommentVNode"])("",!0),1===o.limitInfo.activeTab?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:2},[Object(n["createElementVNode"])("li",E,[Object(n["createElementVNode"])("div",_,Object(n["toDisplayString"])(e.$t("limitSell")),1),Object(n["createElementVNode"])("div",B,[Object(n["createElementVNode"])("img",{class:"icon-token",src:Te.formatLogo(o.limitInfo.fromToken),alt:"",height:"20"},null,8,$),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.fromAmount||0)),1),Object(n["createElementVNode"])("span",A,Object(n["toDisplayString"])((null===(Me=o.limitInfo)||void 0===Me||null===(ze=Me.fromToken)||void 0===ze?void 0:ze.symbol)||""),1)])]),"solana"!==o.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",C,[Object(n["createElementVNode"])("div",D,Object(n["toDisplayString"])(e.$t("limitPrice"))+"("+Object(n["toDisplayString"])(1===o.limitInfo.activeTab?(null===(qe=o.limitInfo)||void 0===qe||null===(We=qe.fromToken)||void 0===We?void 0:We.symbol)||"":(null===(He=o.limitInfo)||void 0===He||null===(Qe=He.toToken)||void 0===Qe?void 0:Qe.symbol)||"")+")",1),Object(n["createElementVNode"])("div",I,[Object(n["createElementVNode"])("span",null,"$"+Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.targetLimitPrice||0)),1),Object(n["createElementVNode"])("span",L,"("+Object(n["toDisplayString"])(e.$t("auto-submitWhenPriceSell"))+")",1)])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",F,[Object(n["createElementVNode"])("div",P,Object(n["toDisplayString"])(e.$t("limitPrice"))+"("+Object(n["toDisplayString"])(1===o.limitInfo.activeTab?(null===(Ge=o.limitInfo)||void 0===Ge||null===(Ke=Ge.fromToken)||void 0===Ke?void 0:Ke.symbol)||"":(null===(Je=o.limitInfo)||void 0===Je||null===(Ze=Je.toToken)||void 0===Ze?void 0:Ze.symbol)||"")+")",1),Object(n["createElementVNode"])("div",R,[Object(n["createElementVNode"])("span",null,"$"+Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.targetLimitPrice||0)),1),Object(n["createElementVNode"])("span",U,"("+Object(n["toDisplayString"])(e.$t("auto-submitWhenPriceSell"))+")",1)])])),Object(n["createElementVNode"])("li",M,[Object(n["createElementVNode"])("div",z,Object(n["toDisplayString"])(e.$t("expectedReceivable")),1),Object(n["createElementVNode"])("div",q,[Object(n["createElementVNode"])("img",{class:"icon-token",src:Te.formatLogo(o.limitInfo.toToken),alt:"",height:"20"},null,8,W),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.toAmount||0)),1),Object(n["createElementVNode"])("span",H,Object(n["toDisplayString"])((null===(Ye=o.limitInfo)||void 0===Ye||null===(Xe=Ye.toToken)||void 0===Xe?void 0:Xe.symbol)||""),1)])])],64)):Object(n["createCommentVNode"])("",!0),"solana"!==o.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",Q,[Object(n["createElementVNode"])("div",G,Object(n["toDisplayString"])(e.$t("estimateGas")),1),Object(n["createElementVNode"])("div",K,Object(n["toDisplayString"])(e.$t("estimateGasTips",{n:e.$f.formatNumber2("solana"===o.chain?"0.1":null!==(et=o.limitGasU)&&void 0!==et?et:1,1)})),1)])):Object(n["createCommentVNode"])("",!0),"solana"!==o.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:4},[Object(n["createElementVNode"])("li",J,"* "+Object(n["toDisplayString"])(e.$t("limitFeeTip")),1),Object(n["createElementVNode"])("li",Z,"* "+Object(n["toDisplayString"])(e.$t("limitTokenTips")),1),(null===(tt=o.limitInfo)||void 0===tt||null===(ot=tt.fromToken)||void 0===ot?void 0:ot.address)===we.NATIVE_TOKEN?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",Y,Object(n["toDisplayString"])(e.$t("limitTips1")),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",X,Object(n["toDisplayString"])(e.$t("limitTips2")),1))],64)):Object(n["createCommentVNode"])("",!0)])):2===o.limitInfo.orderType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",ee,[Object(n["createElementVNode"])("li",te,[Object(n["createElementVNode"])("div",oe,[Object(n["createElementVNode"])("div",ne,[Object(n["createElementVNode"])("img",{class:"icon-token",src:Te.formatLogo(o.limitInfo.fromToken),alt:"",height:"20"},null,8,ie),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(o.limitInfo.fromToken.symbol),1)]),Object(n["createElementVNode"])("div",ae,Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.fromAmount||0)||"0"),1)]),Object(n["createElementVNode"])("div",se,[Object(n["createVNode"])(ye,{class:"switch-icon",name:"down"})]),Object(n["createElementVNode"])("div",le,[Object(n["createElementVNode"])("div",re,[Object(n["createElementVNode"])("img",{class:"icon-token",src:Te.formatLogo(o.limitInfo.toToken),alt:"",height:"20"},null,8,ce),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(o.limitInfo.toToken.symbol),1)]),Object(n["createElementVNode"])("div",de,Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.toAmount||0)||"0"),1)])]),Object(n["createElementVNode"])("li",ue,[Object(n["createElementVNode"])("div",me,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("div",be,Object(n["toDisplayString"])(null===(nt=o.limitInfo)||void 0===nt?void 0:nt.slippage)+"%",1)]),Object(n["createElementVNode"])("li",pe,[Object(n["createElementVNode"])("div",he,Object(n["toDisplayString"])(e.$t("estimatedGas")),1),Object(n["createElementVNode"])("div",fe,[Object(n["createElementVNode"])("span",null,"â‰ˆ $"+Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitGasU||"0")),1),Object(n["createElementVNode"])("button",{type:"button",class:"clickable flex items-center tag-question",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(t){var n,i;return e.$dialog.alert({title:e.$t("tips"),message:e.$t("noGasTips",{s:(null===(n=o.limitInfo)||void 0===n||null===(i=n.fromToken)||void 0===i?void 0:i.symbol)||""}),confirmButtonText:e.$t("iKnown"),confirmButtonColor:"#3F80F7",messageAlign:"center"})}),["stop"]))},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("noGas")),1),Object(n["createVNode"])(ye,{name:"question-o"})])])]),Object(n["createElementVNode"])("li",ve,[Object(n["createElementVNode"])("div",ge,Object(n["toDisplayString"])(e.$t("minimumReceived")),1),Object(n["createElementVNode"])("div",ke,Object(n["toDisplayString"])(e.$f.formatNumber2((null===(it=o.limitInfo)||void 0===it?void 0:it.minReturn)||0))+" "+Object(n["toDisplayString"])(null===(at=o.limitInfo)||void 0===at||null===(st=at.toToken)||void 0===st?void 0:st.symbol),1)])])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",Oe,[Object(n["createVNode"])(Se,{class:"submit-button",type:"primary",loading:Te.isLoading,"loading-text":e.$t("confirming"),block:"",round:"",onClick:Object(n["withModifiers"])(Te.submitSwap,["stop"])},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm")),1)]})),_:1},8,["loading","loading-text","onClick"])])]})),_:1},8,["show","style"])}o("a9e3"),o("b680"),o("caad"),o("2532");var we=o("901e"),Te=o.n(we),ye=o("6779"),Se=o("c9d9"),Ne={name:"ConfirmLimit",props:{visible:Boolean,limitInfo:Object,loading:Boolean,chain:String,limitGasU:String},emits:["update:visible","submit"],data:function(){return{NATIVE_TOKEN:Se["k"],limitContractsFee:Se["w"]}},computed:{dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},isLoading:function(){return this.loading}},watch:{visible:function(e){var t,o,n;console.log("isRefreshEnable",e),null===(t=window)||void 0===t||null===(o=t._tw_)||void 0===o||null===(n=o.isRefreshEnable)||void 0===n||n.call(o,"bridge",!e)}},methods:{formatUnits:ye["utils"].formatUnits,getPrice:function(e,t){return!e||!t||isNaN(Number(e))||isNaN(Number(t))?"0":this.$f.formatNumber2(new Te.a(t).div(e).toFixed())||"0"},submitSwap:function(){this.$emit("submit")},formatLogo:function(e){var t;return!e.logoURI||null!==e&&void 0!==e&&null!==(t=e.logoURI)&&void 0!==t&&t.includes("empty-token")?e.logo_url?this.$f.formatIcon(e):"/icon-default.png":e.logoURI},goLink:function(){this.$f.openBrowser(this.$f.formatExplorerUrl(this.chain,this.limitInfo.transaction,"tx"))}}},xe=(o("a277"),o("6b0d")),Ve=o.n(xe);const Ee=Ve()(Ne,[["render",je],["__scopeId","data-v-37f08fbf"]]);t["a"]=Ee},cf1a:function(e,t,o){"use strict";var n=o("7a23"),i={class:"chart-container"},a=["id"];function s(e,t,o,s,l,r){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",i,[Object(n["createElementVNode"])("div",{id:l.chartId,style:Object(n["normalizeStyle"])({height:"1.45rem",width:"100%"})},null,12,a)])}o("d81d");var l=o("22b4"),r=o("1be7"),c=o("3620"),d=o("2da7"),u=o("4b2a"),m=o("5e81"),b=o("e600"),p=o("ee29"),h=o("c55a"),f=o("f95e"),v=o("ec26");l["a"]([d["a"],u["a"],m["a"],b["a"],c["a"],p["a"],h["a"],f["a"]]);var g={name:"PriceChart",props:{dataX:Array,dataY:Array},data:function(){return{chartId:"chart-".concat(Object(v["a"])()),myChart:null,loading:!1}},watch:{dataY:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dataX,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.dataY,n=t.map((function(t){return e.$f.formatDate(t,"MM-DD HH:mm")}));if(document.getElementById(this.chartId)){var i=r["b"](document.getElementById(this.chartId));i||(i=r["c"](document.getElementById(this.chartId)));var a={tooltip:{trigger:"axis",appendToBody:!0},grid:{left:"0",right:"0",top:"5%",bottom:"3%",containLabel:!0},xAxis:{data:n,axisLine:{show:!1,lineStyle:{color:"#23293C"}},axisLabel:{show:!1,color:"#777"},axisTick:{show:!1},nameTextStyle:{fontSize:12}},yAxis:{type:"value",name:"",nameTextStyle:{fontSize:14},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{show:!1,lineStyle:{type:"solid",color:["#FF646D"]}}},series:[{name:"",type:"line",data:o,smooth:!0,symbolSize:3,areaStyle:{color:"#558BED",opacity:.2},itemStyle:{color:"#558BED",lineStyle:{color:"#558BED"}},tooltip:{valueFormatter:function(t){return e.$f.formatNumberCurrencyUnit(t||0,3,4)}}}]};i.setOption(a)}}}},k=(o("fcef"),o("6b0d")),O=o.n(k);const j=O()(g,[["render",s],["__scopeId","data-v-08c733db"]]);t["a"]=j},cffb:function(e,t,o){},debd:function(e,t,o){"use strict";o("1c9a")},df7a:function(e,t,o){},e524:function(e,t,o){e.exports=o.p+"static/img/arrow-right.484eb652.svg"},e886:function(e,t,o){},f6ba:function(e,t,o){"use strict";o("3dfd")},f898:function(e,t,o){},fadf:function(e,t,o){"use strict";o("b0c0"),o("99af"),o("fb6a");var n=o("7a23"),i=function(e){return Object(n["pushScopeId"])("data-v-a962d930"),e=e(),Object(n["popScopeId"])(),e},a={class:"select-box"},s={class:"flex items-center"},l={key:0,class:"color-999"},r=Object(n["createTextVNode"])("("),c=Object(n["createTextVNode"])(")"),d=i((function(){return Object(n["createElementVNode"])("span",{class:"mr-5 ml-5"},"|",-1)})),u={style:{"margin-right":"0.1rem"}},m=i((function(){return Object(n["createElementVNode"])("span",{class:"mr-5 ml-5"},"|",-1)})),b={class:"mr-5"},p={style:{background:"#fff",padding:"0 0.3rem 1rem 0.3rem","--van-cell-background-color":"transparent"}},h={class:"setting-title"},f={class:"slippage-setting"},v=Object(n["createTextVNode"])("%"),g={key:0,class:"class-b-s"},k={class:"setting-title flex items-center justify-between"},O={class:"mr-5"},j=Object(n["createTextVNode"])("NEW"),w=i((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),T={class:"flex items-center justify-between text-size-14 mt-15"},y={style:{"max-width":"65%"}},S={key:0,class:"flex items-center justify-between clickable",style:{padding:"0",color:"#BFBFBF"}},N={class:"setting-title mb-0"},x={class:"inline-flex items-center"},V={class:"mr-5"},E={key:0,class:"icon-svg",style:{"font-size":"0.46rem"},"aria-hidden":"true"},_=i((function(){return Object(n["createElementVNode"])("use",{"xlink:href":"#icon-HOT"},null,-1)})),B=[_],$={class:"popup-title"},A={class:"form-submit mt-10"};function C(e,t,o,i,_,C){var D,I,L=Object(n["resolveComponent"])("van-field"),F=Object(n["resolveComponent"])("van-tag"),P=Object(n["resolveComponent"])("van-switch"),R=Object(n["resolveComponent"])("van-icon"),U=Object(n["resolveComponent"])("van-divider"),M=Object(n["resolveComponent"])("van-radio"),z=Object(n["resolveComponent"])("van-cell"),q=Object(n["resolveComponent"])("van-radio-group"),W=Object(n["resolveComponent"])("van-button"),H=Object(n["resolveComponent"])("van-action-sheet"),Q=Object(n["resolveComponent"])("van-checkbox"),G=Object(n["resolveComponent"])("van-checkbox-group"),K=Object(n["resolveComponent"])("van-empty"),J=Object(n["resolveComponent"])("van-form"),Z=Object(n["resolveComponent"])("van-popup");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",a,[Object(n["createElementVNode"])("div",s,[C.isSwapMode?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createElementVNode"])("span",{style:Object(n["normalizeStyle"])([{"text-align":"right"},{color:"protect"===o.swapMode?"#F81111":"",fontWeight:"protect"===o.swapMode?"500":"normal"}])},Object(n["toDisplayString"])(C.swapModeName),5),C.autoName?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",l,[r,Object(n["createElementVNode"])("span",{style:Object(n["normalizeStyle"])({color:"protect"===o.autoSwapMode?"#F81111":"",fontWeight:"protect"===o.autoSwapMode?"500":"normal"})},Object(n["toDisplayString"])(C.autoName),5),c])):Object(n["createCommentVNode"])("",!0),d],64)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",u,Object(n["toDisplayString"])("auto"===o.slippage?e.$t("autoSlippage"):e.$t("manualSlippage"))+"("+Object(n["toDisplayString"])("auto"===o.slippage?o.autoSlippage:o.slippage)+"%)",1),_.isCanBatchSwap&&(null===(D=C.selectSubWallets)||void 0===D?void 0:D.length)>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[m,Object(n["createElementVNode"])("span",b,Object(n["toDisplayString"])((null===(I=C.selectSubWallets)||void 0===I?void 0:I.length)||0)+" "+Object(n["toDisplayString"])(e.$t("subWallets")),1)],64)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("i",{class:"iconfont icon-settings",style:{color:"#999999"},onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return _.show=!0}),["stop"]))})]),Object(n["createVNode"])(H,{show:_.show,"onUpdate:show":t[9]||(t[9]=function(e){return _.show=e}),title:e.$t("swapSet"),style:{"--van-popup-background-color":"#fff","min-height":"40%"}},{default:Object(n["withCtx"])((function(){var o,i;return[Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("div",h,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("button",{type:"button",class:Object(n["normalizeClass"])({active:"0.5"===_.slippageValue}),onClick:t[1]||(t[1]=function(e){return _.slippageValue="0.5"})},"0.5%",2),Object(n["createElementVNode"])("button",{type:"button",class:Object(n["normalizeClass"])({active:"1"===_.slippageValue}),onClick:t[2]||(t[2]=function(e){return _.slippageValue="1"})},"1%",2),Object(n["createElementVNode"])("button",{type:"button",class:Object(n["normalizeClass"])({active:void 0===_.slippageValue}),onClick:t[3]||(t[3]=function(e){return _.slippageValue=void 0})},Object(n["toDisplayString"])(e.$t("smartSetting")),3),Object(n["createVNode"])(L,{class:"input",name:"slippage",type:"number",min:"0",max:"49.99",placeholder:e.$t("custom"),modelValue:_.slippageValue,"onUpdate:modelValue":t[4]||(t[4]=function(e){return _.slippageValue=e}),onBlur:C.handleBlur,clearable:""},{"right-icon":Object(n["withCtx"])((function(){return[v]})),_:1},8,["placeholder","modelValue","onBlur"])]),_.isCanBatchSwap?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",g,[Object(n["createElementVNode"])("div",k,[Object(n["createElementVNode"])("span",O,Object(n["toDisplayString"])(e.$t("batchSwap")),1),Object(n["createVNode"])(F,{type:"danger",color:"#eb5139"},{default:Object(n["withCtx"])((function(){return[j]})),_:1}),w,Object(n["createVNode"])(P,{modelValue:_.isBatchSwap,"onUpdate:modelValue":t[5]||(t[5]=function(e){return _.isBatchSwap=e}),size:"0.32rem","inactive-color":"#BFBFBF"},null,8,["modelValue"])]),Object(n["createElementVNode"])("div",T,[Object(n["createElementVNode"])("span",y,Object(n["toDisplayString"])(e.$t("selectAddressCanSwapSameTime")),1),_.isBatchSwap?0===(null===(o=C.selectSubWallets)||void 0===o?void 0:o.length)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:1,onClick:t[6]||(t[6]=Object(n["withModifiers"])((function(e){return _.selectSubWalletVisible=!0}),["stop"])),class:"flex items-center justify-between clickable",style:{padding:"0",color:"#F6465D"}},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("plsSelectAddress")),1),Object(n["createVNode"])(R,{name:"arrow"})])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:2,class:"flex items-center justify-between clickable text-right",style:{padding:"0",color:"#3F80F7"},onClick:t[7]||(t[7]=Object(n["withModifiers"])((function(e){return _.selectSubWalletVisible=!0}),["stop"]))},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("selectedAddress",{n:null===(i=C.selectSubWallets)||void 0===i?void 0:i.length})),1),Object(n["createVNode"])(R,{name:"arrow"})])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",S,[Object(n["createVNode"])(R,{name:"arrow"})]))])])):Object(n["createCommentVNode"])("",!0),C.isSwapMode?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[_.isCanBatchSwap?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(U,{key:0,style:{margin:"0.4rem 0"}})),Object(n["createElementVNode"])("div",N,Object(n["toDisplayString"])(e.$t("swapMode")),1),Object(n["createVNode"])(q,{modelValue:_.swapModeValue,"onUpdate:modelValue":t[8]||(t[8]=function(e){return _.swapModeValue=e}),style:{"--van-cell-label-margin-top":"0"}},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(C.typeSwapMode,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(z,{key:e.value,border:!1,clickable:"",onClick:function(t){return _.swapModeValue=e.value},style:{padding:"0.16rem 0"}},{title:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",x,[Object(n["createElementVNode"])("i",{class:Object(n["normalizeClass"])("iconfont icon-".concat(e.icon))},null,2),Object(n["createElementVNode"])("span",V,Object(n["toDisplayString"])(e.name),1),"auto"===e.value?(Object(n["openBlock"])(),Object(n["createElementBlock"])("svg",E,B)):Object(n["createCommentVNode"])("",!0)])]})),label:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.label),1)]})),"right-icon":Object(n["withCtx"])((function(){return[Object(n["createVNode"])(M,{"icon-size":"0.3rem",name:e.value},null,8,["name"])]})),_:2},1032,["onClick"])})),128))]})),_:1},8,["modelValue"])],64)):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(W,{block:"",type:"primary","native-type":"button",color:"#3F80F7",class:"submit-btn",style:Object(n["normalizeStyle"])({marginTop:C.isSwapMode?"0.5rem":"1.5rem"}),onClick:Object(n["withModifiers"])(C.submitSwapSet,["stop"])},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm")),1)]})),_:1},8,["style","onClick"])])]})),_:1},8,["show","title"]),Object(n["createVNode"])(Z,{show:_.selectSubWalletVisible,"onUpdate:show":t[12]||(t[12]=function(e){return _.selectSubWalletVisible=e}),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"20vh"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("h3",$,Object(n["toDisplayString"])(e.$t("selectSubWallet")),1),Object(n["createVNode"])(J,{class:"popup-content",onSubmit:C.confirmSubmitSelectSubWallet},{default:Object(n["withCtx"])((function(){var o;return[C.subWallets&&(null===(o=C.subWallets)||void 0===o?void 0:o.length)>0?(Object(n["openBlock"])(),Object(n["createBlock"])(G,{key:0,modelValue:_.subWalletChecked,"onUpdate:modelValue":t[11]||(t[11]=function(e){return _.subWalletChecked=e}),style:{"max-height":"50vh","min-height":"30vh","--van-cell-horizontal-padding":"0.1rem","--van-cell-background-color":"transparent","overflow-y":"auto"}},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(C.subWallets,(function(e,o){var i,a,s,l;return Object(n["openBlock"])(),Object(n["createBlock"])(z,{clickable:"",key:e,border:!1,title:"".concat(e.name,"(").concat(null===e||void 0===e||null===(i=e.address)||void 0===i||null===(a=i.slice)||void 0===a?void 0:a.call(i,0,4),"...").concat(null===e||void 0===e||null===(s=e.address)||void 0===s||null===(l=s.slice)||void 0===l?void 0:l.call(s,-4),")"),onClick:function(e){return C.toggle(o)}},{"right-icon":Object(n["withCtx"])((function(){return[Object(n["createVNode"])(Q,{name:e.address,ref_for:!0,ref:"checkbox-".concat(o),onClick:t[10]||(t[10]=Object(n["withModifiers"])((function(){}),["stop"]))},null,8,["name"])]})),_:2},1032,["title","onClick"])})),128))]})),_:1},8,["modelValue"])):(Object(n["openBlock"])(),Object(n["createBlock"])(K,{key:1,style:{"--van-empty-padding":"0.1rem 0 0.5rem 0","--van-empty-description-color":"#888"},description:e.$t("noWallets")},null,8,["description"])),Object(n["createElementVNode"])("div",A,[Object(n["createVNode"])(W,{class:"btn",style:{"border-radius":"0.08rem"},block:"","native-type":"submit",size:"normal",type:"primary"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm1")),1)]})),_:1})])]})),_:1},8,["onSubmit"])]})),_:1},8,["show"])])}o("7db0"),o("d3b7"),o("caad"),o("2532"),o("ac1f"),o("5319"),o("d81d"),o("a9e3"),o("4de4");var D=o("2c28"),I=o("ddc3"),L={name:"SwapSelectMode",props:{autoSwapMode:String,swapMode:String,slippage:{type:String,default:"2"},autoSlippage:String},emits:["update:swapMode","update:slippage"],setup:function(){var e=Object(D["useStorage"])("batchSwapClicked",!1,localStorage);return{batchSwapClicked:e}},data:function(){var e,t,o;return{show:!1,slippageValue:"auto"===this.slippage?void 0:this.slippage,swapModeValue:this.swapMode,isBatchSwap:(null===(e=this.$store.state)||void 0===e?void 0:e.isBatchSwap)||!1,addressList:[],selectSubWalletVisible:!1,subWalletChecked:[],isCanBatchSwap:!(null===(t=window)||void 0===t||null===(o=t._tw_)||void 0===o||!o.appSelectSubWallet)||!1}},computed:{typeSwapMode:function(){return[{name:this.$t("fastMode"),value:"fast",label:this.$t("fastLabel"),icon:"jisu",symbol:this.$t("fast")},{name:this.$t("semi-privateMode"),value:"private",label:this.$t("semi-privateLabel"),icon:"banyinsi",symbol:this.$t("semi-Private")},{name:this.$t("privacy"),value:"protect",label:this.$t("protectLabel"),icon:"yinsi",symbol:this.$t("protect")},{name:this.$t("smartMode"),value:"auto",label:this.$t("smartLabel"),icon:"zhineng"}]},swapModeName:function(){var e,t=this;return null===(e=this.typeSwapMode.find((function(e){return e.value===t.swapMode})))||void 0===e?void 0:e.name},autoName:function(){var e=this;if("auto"===this.swapMode){var t,o=null===(t=this.typeSwapMode.find((function(t){return t.value===e.autoSwapMode})))||void 0===t?void 0:t.symbol;return"".concat(o)}return""},isSwapMode:function(){var e,t,o,n,i,a,s,l,r,c,d=window.navigator.userAgent;if(d.includes("OSType/2")){var u,m,b=d.replace(/^.*Ave.ai\/(.*) OSType\/2;$/,"$1"),p=I.gte(b,"2.3.0");return(null===(u=(m=["eth","bsc"]).includes)||void 0===u?void 0:u.call(m,this.$store.getters.netId))&&p}var h=null===(e=(null===(o=window)||void 0===o?void 0:o.main)||(null===(n=window)||void 0===n?void 0:n._tw_)||{})||void 0===e||null===(t=e.appGetPlatform)||void 0===t?void 0:t.call(e),f=null===(i=(null===(s=window)||void 0===s?void 0:s.main)||(null===(l=window)||void 0===l?void 0:l._tw_)||{})||void 0===i||null===(a=i.getAppVersionCode)||void 0===a?void 0:a.call(i),v="android"===h&&f>112;return(null===(r=(c=["eth","bsc"]).includes)||void 0===r?void 0:r.call(c,this.$store.getters.netId))&&v},subWallets:function(){return this.$store.state.subWallets||[]},selectSubWallets:function(){return this.$store.getters.selectSubWallets||[]}},watch:{show:function(e){var t,o,n,i;e&&(this.slippageValue="auto"===this.slippage?void 0:this.slippage,this.isBatchSwap=(null===(i=this.$store.state)||void 0===i?void 0:i.isBatchSwap)||!1,console.log("subWallets",this.subWallets));console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(o=t._tw_)||void 0===o||null===(n=o.isRefreshEnable)||void 0===n||n.call(o,"bridge",!e)},selectSubWalletVisible:function(e){e&&(this.subWalletChecked=this.selectSubWallets.map((function(e){return e.address})))}},methods:{handleBlur:function(){"auto"!==this.slippageValue&&(this.show&&Number(this.slippageValue)<0&&(this.slippageValue="0"),this.show&&Number(this.slippageValue)>49.99&&(this.slippageValue="49.99"))},submitSwapSet:function(){this.$emit("update:swapMode",this.swapModeValue),localStorage.swapMode=this.swapModeValue,void 0===this.slippageValue?(this.$emit("update:slippage","auto"),localStorage.swapSlippage="auto"):(this.$emit("update:slippage",this.slippageValue),localStorage.swapSlippage=this.slippageValue),this.$store.state.isBatchSwap=this.isBatchSwap,this.isBatchSwap||this.$store.commit("setSelectSubWallets",[]),this.show=!1},confirmSubmitSelectSubWallet:function(){var e,t,o=this;console.log("confirmSubmitSelectSubWallet----");var n=null===(e=this.subWallets)||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,(function(e){return o.subWalletChecked.includes(e.address)}));console.log(n),this.$store.commit("setSelectSubWallets",n),this.selectSubWalletVisible=!1},toggle:function(e){var t,o,n;null===(t=this.$refs["checkbox-".concat(e)])||void 0===t||null===(o=t[0])||void 0===o||null===(n=o.toggle)||void 0===n||n.call(o)}}},F=(o("a6ec"),o("6b0d")),P=o.n(F);const R=P()(L,[["render",C],["__scopeId","data-v-a962d930"]]);t["a"]=R},fcef:function(e,t,o){"use strict";o("0e64")}}]);