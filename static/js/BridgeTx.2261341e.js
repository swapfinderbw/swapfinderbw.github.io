(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["BridgeTx"],{"071e":function(e,t,o){"use strict";o.r(t);o("caad"),o("99af"),o("fb6a");var n=o("7a23"),i=function(e){return Object(n["pushScopeId"])("data-v-12922336"),e=e(),Object(n["popScopeId"])(),e},c={class:"bridge-tx-container"},r={class:"status-container"},a={class:"icon-container"},s={key:0,class:"tx-info"},l={class:"tx-info_li"},d={class:"token-container"},u={class:"icon-token-container mr-5"},f=["src"],m={class:"mr-5"},b={class:"tx-info_li"},v={class:"token-container"},h={class:"icon-token-container mr-5"},O=["src"],x={class:"mr-5"},j={class:"tx-info_li"},g={class:"flex items-center"},p={class:"tx-info_li"},k={class:"flex items-center"},I={key:0},T={key:1},y={class:"tx-info_li"},N={class:"flex items-center"},S={class:"iconfont icon-copy ml-5 clickable",style:{color:"#999"}},_={class:"tx-info_li"},B={class:"flex items-center"},E={class:"tx-info_li"},w=i((function(){return Object(n["createElementVNode"])("span",null,"Hash",-1)})),V=i((function(){return Object(n["createElementVNode"])("span",null,null,-1)})),A={class:"flex items-center"},C={class:"ml-5"},D={class:"flex items-center"},$=["onClick"],U={class:"iconfont icon-copy ml-5 clickable",style:{color:"#999"}},H={class:"flex items-center justify-center btn-container"};function F(e,t,i,F,R,z){var L,M,J,P,G,q,W,K,Q,X,Y,Z,ee,te,oe,ne,ie,ce,re,ae,se,le=Object(n["resolveComponent"])("van-loading"),de=Object(n["resolveComponent"])("van-icon"),ue=Object(n["resolveComponent"])("van-image"),fe=Object(n["resolveComponent"])("van-divider"),me=Object(n["resolveComponent"])("van-button"),be=Object(n["resolveDirective"])("copy");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,[Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("div",a,[["pending","wait_kyc","wait_refund"].includes((null===(L=R.txInfo)||void 0===L?void 0:L.finalStatus)||(null===(M=R.txInfo)||void 0===M||null===(J=M.status)||void 0===J||null===(P=J.toLowerCase)||void 0===P?void 0:P.call(J)))?(Object(n["openBlock"])(),Object(n["createBlock"])(le,{key:0,size:"0.48rem",type:"spinner",color:"#3F80F7"})):"success"===((null===(G=R.txInfo)||void 0===G?void 0:G.finalStatus)||(null===(q=R.txInfo)||void 0===q||null===(W=q.status)||void 0===W||null===(K=W.toLowerCase)||void 0===K?void 0:K.call(W)))?(Object(n["openBlock"])(),Object(n["createBlock"])(de,{key:1,name:"success",color:"#12B886",size:"0.48rem"})):(Object(n["openBlock"])(),Object(n["createBlock"])(de,{key:2,name:"fail",color:"#999999",size:"0.48rem"}))]),Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(z.formatStatus((null===(Q=R.txInfo)||void 0===Q?void 0:Q.finalStatus)||(null===(X=R.txInfo)||void 0===X?void 0:X.status))),1)]),R.txInfo.txHash?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",s,[Object(n["createElementVNode"])("li",l,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$t("from")),1),Object(n["createElementVNode"])("div",d,[Object(n["createElementVNode"])("div",u,[Object(n["createVNode"])(ue,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:R.txInfo.fromTokenUrl||(R.txInfo.from_address_logo_url?e.$f.formatIcon({logo_url:R.txInfo.from_address_logo_url}):"/icon-default.png"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),null!==(Y=R.txInfo)&&void 0!==Y&&Y.fromTokenChain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(null!==(Z=R.txInfo)&&void 0!==Z&&Z.isOkx?null===(ee=R.txInfo)||void 0===ee?void 0:ee.fromTokenChain:R.getBridgeChain(null===(te=R.txInfo)||void 0===te?void 0:te.fromTokenChain),".png"),alt:"",srcset:""},null,8,f)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("span",m,Object(n["toDisplayString"])(e.$f.formatNumber2(R.txInfo.fromAmount,5)),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])((null===(oe=R.txInfo)||void 0===oe?void 0:oe.fromTokenSymbol)||""),1)])]),Object(n["createElementVNode"])("li",b,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$t("to")),1),Object(n["createElementVNode"])("div",v,[Object(n["createElementVNode"])("div",h,[Object(n["createVNode"])(ue,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:R.txInfo.toTokenUrl||(R.txInfo.to_address_logo_url?e.$f.formatIcon({logo_url:R.txInfo.to_address_logo_url}):"/icon-default.png"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),null!==(ne=R.txInfo)&&void 0!==ne&&ne.toTokenChain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(null!==(ie=R.txInfo)&&void 0!==ie&&ie.isOkx?null===(ce=R.txInfo)||void 0===ce?void 0:ce.toTokenChain:R.getBridgeChain(null===(re=R.txInfo)||void 0===re?void 0:re.toTokenChain),".png"),alt:"",srcset:""},null,8,O)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("span",x,Object(n["toDisplayString"])(e.$f.formatNumber2(R.txInfo.toTokenAmount,5)),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])((null===(ae=R.txInfo)||void 0===ae?void 0:ae.toTokenSymbol)||""),1)])]),Object(n["createElementVNode"])("li",j,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$t("exchangePlatform")),1),Object(n["createElementVNode"])("div",g,[R.txInfo.logoUrl?(Object(n["openBlock"])(),Object(n["createBlock"])(ue,{key:0,class:"icon-token mr-5",round:"",width:"0.36rem",height:"0.36rem","lazy-load":"","show-loading":"",src:R.txInfo.logoUrl,"error-icon":o("aeccf")},null,8,["src","error-icon"])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(R.txInfo.dexName),1)])]),Object(n["createElementVNode"])("li",p,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$t("referenceRate")),1),Object(n["createElementVNode"])("div",k,[R.rateType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",I,"1 "+Object(n["toDisplayString"])(R.txInfo.fromTokenSymbol)+" = "+Object(n["toDisplayString"])(z.getRate(1))+" "+Object(n["toDisplayString"])(R.txInfo.toTokenSymbol),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",T,"1 "+Object(n["toDisplayString"])(R.txInfo.toTokenSymbol)+" = "+Object(n["toDisplayString"])(z.getRate(0))+" "+Object(n["toDisplayString"])(R.txInfo.fromTokenSymbol),1)),Object(n["createElementVNode"])("i",{class:"iconfont icon-switch-h ml-5 clickable",style:{color:"#999"},onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return R.rateType=!R.rateType}),["stop"]))})])]),Object(n["createElementVNode"])("li",y,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$t("receiveAddress1")),1),Object(n["createElementVNode"])("div",N,[Object(n["createElementVNode"])("a",{onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(e){var t,o,n,i;return z.goAddress(null!==(t=R.txInfo)&&void 0!==t&&t.isOkx?null===(o=R.txInfo)||void 0===o?void 0:o.toTokenChain:(null===(n=R.txInfo)||void 0===n?void 0:n.chain)||R.getBridgeChain(null===(i=R.txInfo)||void 0===i?void 0:i.toTokenChain),R.txInfo.receiveAddress)}),["stop"])),target:"_blank",class:"flex items-center"},Object(n["toDisplayString"])(R.txInfo.receiveAddress?R.txInfo.receiveAddress.slice(0,6)+"..."+R.txInfo.receiveAddress.slice(-6):""),1),Object(n["withDirectives"])(Object(n["createElementVNode"])("i",S,null,512),[[be,R.txInfo.receiveAddress]])])]),Object(n["createElementVNode"])("li",_,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$t("createTime")),1),Object(n["createElementVNode"])("div",B,Object(n["toDisplayString"])(e.$f.formatDate(R.txInfo.createTimeT)),1)]),Object(n["createVNode"])(fe),Object(n["createElementVNode"])("li",E,[w,V,R.txInfo.transaction?(Object(n["openBlock"])(),Object(n["createElementBlock"])("a",{key:0,onClick:t[2]||(t[2]=Object(n["withModifiers"])((function(t){return e.$f.openBrowser(e.$f.formatExplorerUrl(R.txInfo.chain,R.txInfo.transaction,"tx"))}),["stop"])),target:"_blank",style:{color:"#878fbc"}},Object(n["toDisplayString"])(R.txInfo.transaction?R.txInfo.transaction.slice(0,6)+"..."+R.txInfo.transaction.slice(-6):""),1)):Object(n["createCommentVNode"])("",!0)]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])((null===(se=R.txInfo)||void 0===se?void 0:se.statusList)||R.txInfo.status||[],(function(t,o){var i,c;return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:"tx-info_li",key:o},[Object(n["createElementVNode"])("div",A,["pending"===t.status||"wait_kyc"===t.status||"wait_refund"===t.status?(Object(n["openBlock"])(),Object(n["createBlock"])(le,{key:0,size:"0.4rem",color:"#3F80F7"})):"success"===(null===t||void 0===t||null===(i=t.status)||void 0===i||null===(c=i.toLowerCase)||void 0===c?void 0:c.call(i))?(Object(n["openBlock"])(),Object(n["createBlock"])(de,{key:1,name:"success",color:"#12B886",size:"0.4rem"})):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",C,Object(n["toDisplayString"])(t.chain),1)]),Object(n["createElementVNode"])("div",D,[Object(n["createElementVNode"])("a",{onClick:Object(n["withModifiers"])((function(o){return e.$f.openBrowser(t.url)}),["stop"]),target:"_blank",class:"flex items-center"},Object(n["toDisplayString"])(t.txHash?t.txHash.slice(0,6)+"..."+t.txHash.slice(-6):""),9,$),Object(n["withDirectives"])(Object(n["createElementVNode"])("i",U,null,512),[[be,t.txHash]])])])})),128))])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",H,[Object(n["createVNode"])(me,{class:"btn-s",plain:"",round:"",onClick:Object(n["withModifiers"])(z.goBridge,["stop"])},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("swapAgain")),1)]})),_:1},8,["onClick"])])])}var R=o("c964"),z=o("f3f3"),L=o("d0af"),M=(o("96cf"),o("b0c0"),o("ac1f"),o("00b4"),o("1276"),o("7db0"),o("d3b7"),o("d81d"),o("b680"),o("901e")),J=o.n(M),P=o("365c"),G=o("2c28"),q=o("8e2e"),W=o("a002"),K=o.n(W),Q=o("6779"),X={name:"BridgeTx",setup:function(){var e=Object(G["useStorage"])("bridge_FromToken",{address:"",chain:"",symbol:""},sessionStorage),t=Object(G["useStorage"])("bridge_toToken",{address:"",chain:"",symbol:""},sessionStorage),o=Object(q["a"])("okxBridgeTxs",[]);return{fromToken:e,toToken:t,okxBridgeTxs:o}},data:function(){return{getBridgeChain:P["s"],rateType:!0,txInfo:{}}},watch:{"$route.params.hash":{handler:function(e){e&&this.init()},immediate:!0}},mounted:function(){},methods:{init:function(){if("BridgeTx"===this.$route.name){var e=this.$route.params.hash,t="1"===this.$route.query.isOkx;/0x.+-.+-v[1|2]/.test(e)?this.getUserTxDetail():t?this.getOkxBridgeTxStatus():this.getBridgeTransDetail()}},getBridgeTransDetail:function(){var e=this,t=this.$route.params.hash;t&&Object(P["x"])(t).then((function(o){console.log(o),e.txInfo=o,["success","refund_complete","fail"].includes(null===o||void 0===o?void 0:o.finalStatus)||setTimeout((function(){e.getBridgeTransDetail(t)}),8e3)})).catch((function(t){console.log(t),e.$toast({position:"top",message:t})}))},getUserTxDetail:function(){var e=this,t=this.$route.params.hash,n=t.split("-"),i=Object(L["a"])(n,3),c=i[0],r=i[1],a=i[2],s={transaction:c,chain:r,source_type:a};Object(P["pb"])(s).then((function(t){var n=o("9d64");e.txInfo=Object(z["a"])(Object(z["a"])({},t),{},{createTimeT:1e3*t.time,txHash:t.transaction,fromTokenAddress:t.from_address,fromAmount:t.from_amount,fromTokenSymbol:t.from_symbol,toTokenAddress:t.to_address,toTokenAmount:t.to_amount,toTokenSymbol:t.to_symbol,finalStatus:0===t.is_merged?"pending":"success",receiveAddress:t.wallet_address,logoUrl:n,dexName:"AveSwap"}),Object(P["ib"])([t.from_address+"-"+t.chain,t.to_address+"-"+t.chain]).then((function(t){var o,n;e.txInfo.from_address_logo_url=null===t||void 0===t||null===(o=t[0])||void 0===o?void 0:o.logo_url,e.txInfo.to_address_logo_url=null===t||void 0===t||null===(n=t[1])||void 0===n?void 0:n.logo_url}))}))},getOkxBridgeTxStatus:function(){var e=this;return Object(R["a"])(regeneratorRuntime.mark((function t(){var o,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=e.$route.params.hash,t.next=3,K.a.getItem("okxBridgeTxs").catch(Object(R["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))));case 3:if(n=t.sent,i=(n||[]).find((function(e){return((null===e||void 0===e?void 0:e.txHash)||(null===e||void 0===e?void 0:e.fromTxHash))===o})),i&&(e.txInfo=Object(z["a"])(Object(z["a"])({},i),{},{finalStatus:i.status,statusList:[]})),o){t.next=8;break}return t.abrupt("return");case 8:Object(P["S"])({hash:o}).then((function(t){var o=null===t||void 0===t?void 0:t[0];if(o){var c,r,a=[];if(o.fromTxHash){var s=null===i||void 0===i?void 0:i.fromTokenChain;a.push({status:"WAITING"===(null===o||void 0===o?void 0:o.detailStatus)?"pending":"success",txHash:o.fromTxHash,chain:s,url:e.$f.formatExplorerUrl(s,o.fromTxHash,"tx")})}if(o.toTxHash){var l=null===i||void 0===i?void 0:i.toTokenChain;a.push({status:null===o||void 0===o?void 0:o.status,txHash:o.toTxHash,chain:l,url:e.$f.formatExplorerUrl(l,o.toTxHash,"tx")})}e.txInfo=Object(z["a"])(Object(z["a"])(Object(z["a"])({},i||{}),o),{},{fromAmount:null!==o&&void 0!==o&&o.fromAmount&&"0"!==(null===o||void 0===o?void 0:o.fromAmount)?Q["utils"].formatUnits(null===o||void 0===o?void 0:o.fromAmount,i.fromDecimals):null===i||void 0===i?void 0:i.fromAmount,toTokenAmount:o.toAmount&&"0"!==o.toAmount?Q["utils"].formatUnits(o.toAmount,i.toDecimals):null===i||void 0===i?void 0:i.toTokenAmount,statusList:a,status:"NOT_FOUND"===o.status&&Date.now()-(null===(c=e.txInfo)||void 0===c?void 0:c.createTimeT)<6e4?"pending":o.status}),console.log("txInfo",e.txInfo);var d=n.map((function(t){var n;return t.txHash===o.fromTxHash?Object(z["a"])(Object(z["a"])(Object(z["a"])({},t),o),{},{fromAmount:null!==o&&void 0!==o&&o.fromAmount&&"0"!==(null===o||void 0===o?void 0:o.fromAmount)?Q["utils"].formatUnits(null===o||void 0===o?void 0:o.fromAmount,t.fromDecimals):null===t||void 0===t?void 0:t.fromAmount,toTokenAmount:o.toAmount&&"0"!==o.toAmount?Q["utils"].formatUnits(o.toAmount,t.toDecimals):null===t||void 0===t?void 0:t.toTokenAmount,statusList:a,status:"NOT_FOUND"===o.status&&Date.now()-(null===(n=e.txInfo)||void 0===n?void 0:n.createTimeT)<6e4?"pending":o.status}):t}));K.a.setItem("okxBridgeTxs",d),"SUCCESS"===(null===(r=e.txInfo)||void 0===r?void 0:r.status)||"NOT_FOUND"===o.status&&Date.now()-i.createTimeT<6e4||setTimeout((function(){e.getOkxBridgeTxStatus()}),1e4)}})).catch((function(t){console.log(t),e.$toast({position:"top",message:t})}));case 9:case"end":return t.stop()}}),t)})))()},getRate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.txInfo.fromAmount&&this.txInfo.toTokenAmount?0===e?this.$f.formatNumber2(new J.a(this.txInfo.fromAmount).div(this.txInfo.toTokenAmount).toFixed()):this.$f.formatNumber2(new J.a(this.txInfo.toTokenAmount).div(this.txInfo.fromAmount).toFixed()):"--"},goAddress:function(e,t){this.$f.openBrowser(this.$f.formatExplorerUrl(e,t,"address"))},formatStatus:function(e){var t,o={pending:this.$t("swapPending"),success:this.$t("swapSucceed"),fail:this.$t("swapFailed"),wait_kyc:this.$t("wait_kyc"),wait_refund:this.$t("wait_refund"),refund_complete:this.$t("refund_complete"),timeout:this.$t("timeout"),PENDING:this.$t("pending"),SUCCESS:this.$t("succeed"),FAILURE:this.$t("failed"),REFUND:this.$t("refund")};return null!==(t=o[e])&&void 0!==t?t:e},goBridge:function(){var e,t;this.fromToken={address:this.txInfo.fromTokenAddress,chain:this.getBridgeChain(null===(e=this.txInfo)||void 0===e?void 0:e.fromTokenChain),bridgeChain:this.txInfo.fromTokenChain,symbol:this.txInfo.fromTokenSymbol,logoURI:this.txInfo.fromTokenUrl},this.toToken={address:this.txInfo.toTokenAddress,chain:this.getBridgeChain(null===(t=this.txInfo)||void 0===t?void 0:t.toTokenChain),bridgeChain:this.txInfo.toTokenChain,symbol:this.txInfo.toTokenSymbol,logoURI:this.txInfo.toTokenUrl},this.$router.push({name:"Bridge"})}}},Y=(o("3ff0"),o("6b0d")),Z=o.n(Y);const ee=Z()(X,[["render",F],["__scopeId","data-v-12922336"]]);t["default"]=ee},"3ff0":function(e,t,o){"use strict";o("e82f")},"8e2e":function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));var n=o("f3f3"),i=o("0122"),c=(o("e9c4"),o("a002")),r=o.n(c),a=o("7a23");function s(e,t){var o=Object(a["ref"])(t);function c(){r.a.getItem(e).then((function(n){console.log("read",e,null!==n&&void 0!==n?n:t),null===n?(o.value=t,r.a.setItem(e,t)):o.value=n})).catch((function(e){o.value=v}))}function s(t){var c=t||o.value;return c?Array.isArray(c)?r.a.setItem(e,JSON.parse(JSON.stringify(o.value))):void("object"===Object(i["a"])(o.value)?r.a.setItem(e,Object(n["a"])({},c)):r.a.setItem(e,c)):r.a.removeItem(e)}return c(),Object(a["watch"])(o,(function(e){s()})),o}},"9d64":function(e,t,o){e.exports=o.p+"static/img/logo.ae1a22fb.png"},aeccf:function(e,t,o){e.exports=o.p+"static/img/icon-default.75f6e9a0.png"},e82f:function(e,t,o){}}]);