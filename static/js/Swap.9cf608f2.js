(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Swap"],{"0e64":function(e,t,o){},"0e93":function(e,t,o){},1675:function(e,t,o){"use strict";o("e60c")},24500:function(e,t,o){},"26d9":function(e,t,o){"use strict";o("cffb")},"35e3":function(e,t,o){"use strict";o.r(t);o("b0c0"),o("a9e3"),o("fb6a"),o("99af");var n=o("7a23"),i=o("e524"),a=o.n(i),l=o("965b"),s=o.n(l),r=function(e){return Object(n["pushScopeId"])("data-v-041b0fe1"),e=e(),Object(n["popScopeId"])(),e},c={class:"swap-content"},u={class:"swap-content_left",ref:"swapLeft"},d=["onClick"],m={class:"select-c"},p={key:0,class:"notice-container"},b={class:"card-container"},f={class:"card-container_top flex justify-between items-center"},h=r((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),v={class:"s-text"},g={class:"flex justify-between items-center mt-20"},k=r((function(){return Object(n["createElementVNode"])("div",{style:{height:"0.12rem"}},null,-1)})),O={class:"card-container"},j={class:"card-container_top flex justify-between items-center"},w=r((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),S={class:"s-text"},y={class:"flex justify-between items-center mt-20"},T={key:0},_={key:1},N={key:0,style:{"font-size":"0.24rem"}},V={key:0,style:{"font-size":"0.24rem",color:"#f8be46",margin:"0.1rem 0"}},$={key:1,style:{"font-size":"0.24rem",color:"#F81111",margin:"0.1rem 0"}},x={key:2,style:{"font-size":"0.24rem",color:"#f8be46",margin:"0.1rem 0"}},E={class:"card-container"},B={class:"card-container_top flex justify-between items-center"},A=r((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),C={class:"s-text"},I={class:"flex justify-between items-center mt-20"},P=r((function(){return Object(n["createElementVNode"])("div",{style:{height:"0.12rem"}},null,-1)})),D={class:"card-container"},L={class:"card-container_top flex justify-between items-center"},F=r((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),R={class:"s-text"},M={class:"flex justify-between items-center mt-20"},U={key:0,class:"limit-price-label"},G={key:1,class:"card-container flex justify-between items-center"},z=["disabled"],Q=["disabled"],W={class:"limit-price-label mt-10"},q={class:"card-container flex justify-between items-center"},H=["disabled"],K=["disabled"],Y={class:"limit-price-label mt-10"},J={class:"card-container flex justify-between items-center"},X=["disabled"],Z=["disabled"],ee=r((function(){return Object(n["createElementVNode"])("div",{class:"swap-content_center"},null,-1)})),te={class:"right-section-1"},oe=Object(n["createTextVNode"])("+"),ne={class:"right-section-2"},ie=Object(n["createTextVNode"])("LP"),ae={key:0,class:"swap-label"},le={class:"swap-label_item-left"},se={key:1,style:{display:"flex","align-items":"center"}},re={key:0},ce={key:1,class:"mr-5 ml-5 color-999"},ue={style:{"margin-right":"0.1rem"}},de={key:2,style:{display:"flex","align-items":"center"}},me={style:{"margin-right":"0.1rem"}},pe={class:"swap-label_item-left"},be={style:{display:"flex","align-items":"center"}},fe={class:"swap-label_item-left"},he={style:{display:"flex","align-items":"center"}},ve={class:"swap-label_item-left"},ge={class:"swap-label_item-left"},ke={key:0},Oe={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},je={key:1},we={key:1,class:"path-list"},Se={key:0},ye={key:1,class:"path-amm"},Te=r((function(){return Object(n["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},null,-1)})),_e={key:0,class:"select-token iconfont icon-collapse-down"},Ne={key:2},Ve={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},$e={key:1},xe={key:0},Ee={key:1,class:"path-amm"},Be=r((function(){return Object(n["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},null,-1)})),Ae={key:0,class:"select-token iconfont icon-collapse-down"},Ce={key:0},Ie={class:"swap-label_item-left"},Pe={class:"flex items-center"},De={key:1,class:"swap-label"},Le={key:0},Fe={class:"swap-label_item-left"},Re={key:0,style:{display:"flex","align-items":"center"}},Me={style:{"margin-right":"0.1rem"}},Ue={key:1,style:{display:"flex","align-items":"center"}},Ge={style:{"margin-right":"0.1rem"}},ze={key:1},Qe={class:"swap-label_item-left"},We={key:1,style:{display:"flex","align-items":"center"}},qe={class:"section-bottom"},He={class:"title"},Ke=r((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),Ye={key:0,style:{"background-color":"#fff"}},Je={key:1,style:{"background-color":"#fff"}},Xe={key:2,style:{"background-color":"#fff"}},Ze={class:"footer-container"},et=r((function(){return Object(n["createElementVNode"])("img",{src:s.a,alt:"",srcset:""},null,-1)})),tt={style:{background:"#fff","padding-bottom":"1rem"}},ot={class:"token-item header"},nt={class:"flex-2"},it={class:"flex-1"},at={class:"flex-1 right-label"},lt=r((function(){return Object(n["createElementVNode"])("span",{style:{width:"0.32rem"}},null,-1)})),st=["onClick"],rt={class:"path-list flex-start flex-2"},ct={key:0},ut={key:1,class:"path-amm"},dt=r((function(){return Object(n["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},null,-1)})),mt={key:0,class:"tag"},pt={class:"flex-1"},bt=Object(n["createTextVNode"])(" <0.01% "),ft=Object(n["createTextVNode"])(" >40% ");function ht(e,t,i,a,l,s){var r,ht,vt,gt,kt,Ot,jt,wt,St,yt,Tt,_t,Nt,Vt,$t,xt,Et,Bt,At,Ct,It,Pt,Dt,Lt,Ft,Rt,Mt,Ut,Gt,zt,Qt,Wt=this,qt=Object(n["resolveComponent"])("RebateImg"),Ht=Object(n["resolveComponent"])("van-count-down"),Kt=Object(n["resolveComponent"])("v-select"),Yt=Object(n["resolveComponent"])("van-button"),Jt=Object(n["resolveComponent"])("SwapSelectToken"),Xt=Object(n["resolveComponent"])("van-field"),Zt=Object(n["resolveComponent"])("PercentStep"),eo=Object(n["resolveComponent"])("van-form"),to=Object(n["resolveComponent"])("van-icon"),oo=Object(n["resolveComponent"])("PriceChart"),no=Object(n["resolveComponent"])("SwapModeSet"),io=Object(n["resolveComponent"])("SlippageButton"),ao=Object(n["resolveComponent"])("van-image"),lo=Object(n["resolveComponent"])("SwapGasSet"),so=Object(n["resolveComponent"])("SolanaLimitExpired"),ro=Object(n["resolveComponent"])("van-tab"),co=Object(n["resolveComponent"])("van-tabs"),uo=Object(n["resolveComponent"])("van-checkbox"),mo=Object(n["resolveComponent"])("van-loading"),po=Object(n["resolveComponent"])("TxItem"),bo=Object(n["resolveComponent"])("DynamicScrollerItem"),fo=Object(n["resolveComponent"])("DynamicScroller"),ho=Object(n["resolveComponent"])("van-empty"),vo=Object(n["resolveComponent"])("LimitTxItem"),go=Object(n["resolveComponent"])("NoGasTxItem"),ko=Object(n["resolveComponent"])("confirm-swap"),Oo=Object(n["resolveComponent"])("confirm-limit"),jo=Object(n["resolveComponent"])("van-action-sheet"),wo=Object(n["resolveDirective"])("animation-trigger");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("section",{class:"swap-container",style:Object(n["normalizeStyle"])({"--upColor":e.$store.getters.upColor[3],"--downColor":e.$store.getters.downColor[3]})},[Object(n["createVNode"])(qt,{style:{"padding-left":"0.28rem","padding-right":"0.28rem"}}),Object(n["createVNode"])(Ht,{style:{position:"absolute",opacity:"0",height:"0"},ref:"countDown",class:"icon-countDown",time:15e4,format:"sss",onFinish:s.onCountDownFinish},{default:Object(n["withCtx"])((function(e){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.seconds)+"s ",1)]})),_:1},8,["onFinish"]),Object(n["createElementVNode"])("div",c,[Object(n["createElementVNode"])("div",u,[Object(n["createElementVNode"])("div",{class:"tabs-triangle",style:Object(n["normalizeStyle"])({"--upColor":e.$store.getters.upColor[3],"--downColor":e.$store.getters.downColor[3]})},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(s.typeTabs,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:t,class:Object(n["normalizeClass"])(["tab-item",{active:l.activeTab===e.type,up:0===l.activeTab,down:1===l.activeTab}]),onClick:Object(n["withModifiers"])((function(t){return s.switchTab(e.type)}),["stop"])},Object(n["toDisplayString"])(e.name),11,d)})),128))],4),Object(n["createElementVNode"])("div",m,[Object(n["createVNode"])(Kt,{modelValue:l.selected,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.selected=e}),options:s.types,reduce:function(e){return e.value},label:"name",clearable:!1,searchable:!1},null,8,["modelValue","options","reduce"])]),"solana"===s.chain&&Number(s.wSOLBalance)>0&&s.wSOLAccount.pubkey?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",p,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("youHave"))+" "+Object(n["toDisplayString"])(e.$f.formatNumber2(s.wSOLBalance))+" wSOL,",1),Object(n["createVNode"])(Yt,{loading:l.loadingUnwrap,loadingText:e.$t("unwrap"),type:"primary",style:{"--van-button-mini-padding":"0","--van-button-default-line-height":"1","--van-button-border-width":"0"},plain:"",size:"mini",onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(e){return s.unwrapSol(s.wSOLAccount.pubkey)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("unwrap")),1)]})),_:1},8,["loading","loadingText"])])):Object(n["createCommentVNode"])("",!0),2===l.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createVNode"])(eo,{class:"swap-form",onSubmit:s.onSubmit,style:{"--van-cell-horizontal-padding":"0","--van-cell-vertical-padding":"0"}},{default:Object(n["withCtx"])((function(){var o,i,a,r,c,u,d,m;return[Object(n["createElementVNode"])("div",b,[Object(n["createElementVNode"])("div",f,[Object(n["createVNode"])(Jt,{tokens:s.swapTokens,token:l.token1,"onUpdate:token":[t[2]||(t[2]=function(e){return l.token1=e}),s.handleSelectToken1],chain:e.$store.getters.netId||(null===(o=e.$f.getAddressAndChainFromId(null===(i=e.$route.params)||void 0===i?void 0:i.id))||void 0===o?void 0:o.chain)||l.token1.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),h,Object(n["createElementVNode"])("div",v,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(a=l.token1)||void 0===a?void 0:a.balance)||0)),1),1===l.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Yt,{key:0,plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[3]||(t[3]=Object(n["withModifiers"])((function(e){return s.handlePercentChange(100)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("max")),1)]})),_:1})):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",g,[0===l.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Xt,{key:0,modelValue:l.toAmount,"onUpdate:modelValue":[t[4]||(t[4]=function(e){return l.toAmount=e}),s.watchToAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",readonly:s.isOnlyGetAmountsOut,onFocus:t[5]||(t[5]=function(t){return e.$refs.percentStep.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue","readonly"])):Object(n["createCommentVNode"])("",!0),1===l.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Xt,{key:1,modelValue:l.fromAmount,"onUpdate:modelValue":[t[6]||(t[6]=function(e){return l.fromAmount=e}),s.watchFromAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[7]||(t[7]=function(t){return e.$refs.percentStep.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])):Object(n["createCommentVNode"])("",!0)])]),k,Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("div",j,[Object(n["createVNode"])(Jt,{tokens:s.swapTokens,token:l.token2,"onUpdate:token":[t[8]||(t[8]=function(e){return l.token2=e}),s.handleSelectToken2],chain:e.$store.getters.netId||(null===(r=e.$f.getAddressAndChainFromId(null===(c=e.$route.params)||void 0===c?void 0:c.id))||void 0===r?void 0:r.chain)||l.token2.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),w,Object(n["createElementVNode"])("div",S,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(u=l.token2)||void 0===u?void 0:u.balance)||0)),1),0===l.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Yt,{key:0,plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[9]||(t[9]=Object(n["withModifiers"])((function(e){return s.handlePercentChange(100)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("max")),1)]})),_:1})):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",y,[1===l.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Xt,{key:0,modelValue:l.toAmount,"onUpdate:modelValue":[t[10]||(t[10]=function(e){return l.toAmount=e}),s.watchToAmount],readonly:l.isPump||s.isOnlyGetAmountsOut||l.isMoonshot,placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[11]||(t[11]=function(t){return e.$refs.percentStep.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue","readonly"])):Object(n["createCommentVNode"])("",!0),0===l.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Xt,{key:1,modelValue:l.fromAmount,"onUpdate:modelValue":[t[12]||(t[12]=function(e){return l.fromAmount=e}),s.watchFromAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[13]||(t[13]=function(t){return e.$refs.percentStep.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createVNode"])(Zt,{ref:"percentStep",onChange:s.handlePercentChange,activeColor:0===l.activeTab?e.$store.getters.upColor[3]:e.$store.getters.downColor[3]},null,8,["onChange","activeColor"]),!s.isApprove||l.loadingAllowance?(Object(n["openBlock"])(),Object(n["createBlock"])(Yt,{key:0,class:"submit-btn",block:"",color:s.swapButtonColor,"native-type":"submit","loading-text":l.loadingAllowance?e.$t("checkingAllowance"):l.quoteLoading?e.$t("quoting"):l.loadingApprove?e.$t("approve"):"",loading:l.loadingApprove||l.loadingSwap||l.loadingAllowance,disabled:Number(s.fromToken.balance)<Number(Wt.fromAmount)},{default:Object(n["withCtx"])((function(){var t,o;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(0===Number(s.fromToken.balance)||Number(s.fromToken.balance)<Number(Wt.fromAmount)||""===e.$store.state.currentAccount?null!==(t=s.priceImpactV)&&void 0!==t&&null!==(o=t.gt)&&void 0!==o&&o.call(t,.4)?e.$t("priceImpactTooHigh"):s.checkAmountMessage()||e.$t("approve"):e.$t("approve")),1)]})),_:1},8,["color","loading-text","loading","disabled"])):(Object(n["openBlock"])(),Object(n["createBlock"])(Yt,{key:1,class:"submit-btn",block:"",loading:l.loadingSwap||l.quoteLoading||l.loadingAllowance,"loading-text":l.loadingSwap?0===l.activeTab?e.$t("buying"):e.$t("selling"):e.$t("quoting"),color:s.swapButtonColor,disabled:(null===(d=s.priceImpactV)||void 0===d||null===(m=d.gt)||void 0===m?void 0:m.call(d,.4))||!s.checkAmount()||!l.fromAmount||!l.toAmount,"native-type":"submit"},{default:Object(n["withCtx"])((function(){var t,o,i,a,r;return[0===Number(s.fromToken.balance)||Number(s.fromToken.balance)<Number(Wt.fromAmount)||""===e.$store.state.currentAccount||(l.isERC314||l.isFourMeme||l.isFlap||l.isSunPump>0)&&l.token2.address!==l.nativeToken||(l.isPump||l.isMoonshot)&&"So11111111111111111111111111111111111111112"!==l.token2.address||s.isInsufficientTon?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",T,Object(n["toDisplayString"])(s.checkAmountMessage()),1)):null!==(t=s.priceImpactV)&&void 0!==t&&null!==(o=t.gt)&&void 0!==o&&o.call(t,.4)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",_,Object(n["toDisplayString"])(e.$t("priceImpactTooHigh")),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:2},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(null!==(i=s.priceImpactV)&&void 0!==i&&null!==(a=i.gt)&&void 0!==a&&a.call(i,.1)?0===l.activeTab?e.$t("buyAnyway"):e.$t("sellAnyway"):0===l.activeTab?e.$t("buy"):e.$t("sell"))+" "+Object(n["toDisplayString"])((null===(r=l.token1)||void 0===r?void 0:r.symbol)||""),1),s.taxStr?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",N,Object(n["toDisplayString"])(s.taxStr),1)):Object(n["createCommentVNode"])("",!0)],64))]})),_:1},8,["loading","loading-text","color","disabled"]))]})),_:1},8,["onSubmit"]),l.isTaxHigh?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",V,Object(n["toDisplayString"])(e.$t("taxTooHigh")),1)):Object(n["createCommentVNode"])("",!0),l.isCannotSellAll?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",$,Object(n["toDisplayString"])(e.$t("cannotSellAll")),1)):Object(n["createCommentVNode"])("",!0),l.isHotToken?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",x,Object(n["toDisplayString"])(e.$t("hotTokenTips")),1)):Object(n["createCommentVNode"])("",!0)],64)):Object(n["createCommentVNode"])("",!0),0===l.selected||1===this.selected||3===this.selected?(Object(n["openBlock"])(),Object(n["createBlock"])(eo,{key:2,class:"swap-form",onSubmit:s.onLimitSubmit,style:{"--van-cell-horizontal-padding":"0","--van-cell-vertical-padding":"0"}},{default:Object(n["withCtx"])((function(){var o,i,a,r,c,u;return[Object(n["createElementVNode"])("div",E,[Object(n["createElementVNode"])("div",B,[Object(n["createVNode"])(Jt,{tokens:s.swapTokens,token:l.limitToken1,"onUpdate:token":[t[14]||(t[14]=function(e){return l.limitToken1=e}),s.handleSelectLimitToken1],chain:e.$store.getters.netId||(null===(o=e.$f.getAddressAndChainFromId(null===(i=e.$route.params)||void 0===i?void 0:i.id))||void 0===o?void 0:o.chain)||l.limitToken1.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),A,Object(n["createElementVNode"])("div",C,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(a=l.limitToken1)||void 0===a?void 0:a.balance)||0)),1),1===l.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Yt,{key:0,plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[15]||(t[15]=Object(n["withModifiers"])((function(e){return s.handlePercentChange1(100)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("max")),1)]})),_:1})):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",I,[Object(n["createVNode"])(Xt,{modelValue:l.limitAmount1,"onUpdate:modelValue":[t[16]||(t[16]=function(e){return l.limitAmount1=e}),s.watchLimitAmount1],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[17]||(t[17]=function(t){return e.$refs.percentStep1.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])])]),P,Object(n["createElementVNode"])("div",D,[Object(n["createElementVNode"])("div",L,[Object(n["createVNode"])(Jt,{tokens:s.swapTokens,token:l.limitToken2,"onUpdate:token":[t[18]||(t[18]=function(e){return l.limitToken2=e}),s.handleSelectLimitToken2],chain:e.$store.getters.netId||(null===(r=e.$f.getAddressAndChainFromId(null===(c=e.$route.params)||void 0===c?void 0:c.id))||void 0===r?void 0:r.chain)||l.limitToken2.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),F,Object(n["createElementVNode"])("div",R,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(u=l.limitToken2)||void 0===u?void 0:u.balance)||0)),1),0===l.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Yt,{key:0,plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[19]||(t[19]=Object(n["withModifiers"])((function(e){return s.handlePercentChange1(100)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("max")),1)]})),_:1})):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",M,[Object(n["createVNode"])(Xt,{modelValue:l.limitAmount2,"onUpdate:modelValue":[t[20]||(t[20]=function(e){return l.limitAmount2=e}),s.watchLimitAmount2],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[21]||(t[21]=function(t){return e.$refs.percentStep1.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])])]),Object(n["createVNode"])(Zt,{ref:"percentStep1",onChange:s.handlePercentChange1,activeColor:s.limitButtonColor},null,8,["onChange","activeColor"]),1===l.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",U,Object(n["toDisplayString"])(e.$t("triggerPrice"))+"("+Object(n["toDisplayString"])(l.limitToken1.symbol||"")+")",1)):Object(n["createCommentVNode"])("",!0),1===l.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",G,[Object(n["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[22]||(t[22]=Object(n["withModifiers"])((function(){return s.minusTriggerPrice&&s.minusTriggerPrice.apply(s,arguments)}),["stop"])),disabled:!l.triggerPrice},[Object(n["createVNode"])(to,{name:"minus"})],8,z),Object(n["createVNode"])(Xt,{modelValue:l.triggerPrice,"onUpdate:modelValue":t[23]||(t[23]=function(e){return l.triggerPrice=e}),placeholder:"0.0",label:"$",type:"number","input-align":"left","label-align":"right","label-width":"0.2rem",clearable:"",class:"input-number",border:!1,style:{"--van-field-label-margin-right":"0.1rem"}},null,8,["modelValue"]),Object(n["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[24]||(t[24]=Object(n["withModifiers"])((function(){return s.addTriggerPrice&&s.addTriggerPrice.apply(s,arguments)}),["stop"])),disabled:!l.triggerPrice},[Object(n["createVNode"])(to,{name:"plus"})],8,Q)])):Object(n["createCommentVNode"])("",!0),1===l.selected||0===l.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:2},["solana"===s.chain&&0===l.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createElementVNode"])("div",W,Object(n["toDisplayString"])(e.$t("delegatePrice"))+"("+Object(n["toDisplayString"])(l.limitToken1.symbol||"")+")",1),Object(n["createElementVNode"])("div",q,[Object(n["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[25]||(t[25]=Object(n["withModifiers"])((function(){return s.minusLimitSolanaPrice&&s.minusLimitSolanaPrice.apply(s,arguments)}),["stop"])),disabled:!l.limitSolanaPriceU},[Object(n["createVNode"])(to,{name:"minus"})],8,H),Object(n["createVNode"])(Xt,{modelValue:l.limitSolanaPriceU,"onUpdate:modelValue":[t[26]||(t[26]=function(e){return l.limitSolanaPriceU=e}),s.watchLimitSolanaPrice],placeholder:"0.0",label:"$",type:"number","input-align":"left","label-align":"right","label-width":"0.2rem",clearable:"",class:"input-number",border:!1,style:{"--van-field-label-margin-right":"0.1rem"}},null,8,["modelValue","onUpdate:modelValue"]),Object(n["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[27]||(t[27]=Object(n["withModifiers"])((function(){return s.addLimitSolanaPrice&&s.addLimitSolanaPrice.apply(s,arguments)}),["stop"])),disabled:!l.limitSolanaPriceU},[Object(n["createVNode"])(to,{name:"plus"})],8,K)])],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createElementVNode"])("div",Y,Object(n["toDisplayString"])(e.$t("delegatePrice"))+"("+Object(n["toDisplayString"])(l.limitToken1.symbol||"")+")",1),Object(n["createElementVNode"])("div",J,[Object(n["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[28]||(t[28]=Object(n["withModifiers"])((function(){return s.minusLimitPrice&&s.minusLimitPrice.apply(s,arguments)}),["stop"])),disabled:!l.limitPrice},[Object(n["createVNode"])(to,{name:"minus"})],8,X),Object(n["createVNode"])(Xt,{modelValue:l.limitPrice,"onUpdate:modelValue":[t[29]||(t[29]=function(e){return l.limitPrice=e}),s.watchLimitPrice],placeholder:"0.0",label:"$",type:"number","input-align":"left","label-align":"right","label-width":"0.2rem",clearable:"",class:"input-number",border:!1,style:{"--van-field-label-margin-right":"0.1rem"}},null,8,["modelValue","onUpdate:modelValue"]),Object(n["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[30]||(t[30]=Object(n["withModifiers"])((function(){return s.addLimitPrice&&s.addLimitPrice.apply(s,arguments)}),["stop"])),disabled:!l.limitPrice},[Object(n["createVNode"])(to,{name:"plus"})],8,Z)])],64))],64)):Object(n["createCommentVNode"])("",!0),s.isLimitApprove&&!l.loadingLimitAllowance||3===l.selected?(Object(n["openBlock"])(),Object(n["createBlock"])(Yt,{key:4,class:"submit-btn",block:"",loading:l.loadingLimit||l.limitQuoteLoading,"loading-text":l.limitQuoteLoading?e.$t("quoting"):l.loadingLimit?0===l.activeTab?e.$t("buying"):e.$t("selling"):e.$t("quoting"),color:s.limitButtonColor,disabled:!s.checkLimitAmount()||!l.limitAmount1||!l.limitAmount2||l.loadingLimitAllowance,"native-type":"submit"},{default:Object(n["withCtx"])((function(){var t;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(s.checkLimitAmountMessage()||(0===l.activeTab?e.$t("buy"):e.$t("sell"))+" "+((null===(t=l.limitToken1)||void 0===t?void 0:t.symbol)||"")),1)]})),_:1},8,["loading","loading-text","color","disabled"])):(Object(n["openBlock"])(),Object(n["createBlock"])(Yt,{key:3,class:"submit-btn",block:"",color:s.limitButtonColor,"native-type":"submit","loading-text":l.loadingLimitAllowance?e.$t("checkingAllowance"):l.quoteLimitLoading?e.$t("quoting"):l.loadingLimitApprove?e.$t("approve"):"",disabled:!s.checkLimitAmount(),loading:l.loadingLimitApprove||l.loadingLimit||l.loadingLimitAllowance},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(s.checkLimitAmountMessage()||e.$t("approve")),1)]})),_:1},8,["color","loading-text","disabled","loading"]))]})),_:1},8,["onSubmit"])):Object(n["createCommentVNode"])("",!0)],512),ee,Object(n["createElementVNode"])("div",{class:"swap-content_right",style:Object(n["normalizeStyle"])({"max-height":l.height/50+"rem"})},[Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("div",te,[Object(n["createElementVNode"])("div",null," $"+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(r=l.baseToken)||void 0===r||null===(ht=r.token)||void 0===ht?void 0:ht.current_price_usd)||0)),1),Object(n["createElementVNode"])("div",{style:Object(n["normalizeStyle"])({color:(null===(vt=l.baseToken)||void 0===vt||null===(gt=vt.token)||void 0===gt?void 0:gt.price_change)<0?"var(--downColor)":"var(--upColor)"})},[(null===(kt=l.baseToken)||void 0===kt||null===(Ot=kt.token)||void 0===Ot?void 0:Ot.price_change)>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[oe],64)):Object(n["createCommentVNode"])("",!0),Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.formatNumber2((null===(jt=l.baseToken)||void 0===jt||null===(wt=jt.token)||void 0===wt?void 0:wt.price_change)||0,2))+"% ",1)],4)])),[[wo,null===(St=l.baseToken)||void 0===St||null===(yt=St.token)||void 0===yt?void 0:yt.current_price_usd,"animation-bg"]]),Object(n["createVNode"])(oo,{dataX:l.dataX,dataY:l.dataY},null,8,["dataX","dataY"]),Object(n["createElementVNode"])("table",ne,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",null,Object(n["toDisplayString"])(e.$t("pool1")),1),Object(n["createElementVNode"])("th",null,[s.tokenInfo.token&&s.tokenInfo.chain&&l.openLp&&s.isShow&&!l.isERC314?(Object(n["openBlock"])(),Object(n["createBlock"])(Yt,{key:0,icon:"plus",type:"primary",plain:"",size:"small",style:{"--van-padding-base":"0","min-width":"0.8rem",height:"0.4rem"},onClick:Object(n["withModifiers"])(s.goLiquidity,["stop"])},{default:Object(n["withCtx"])((function(){return[ie]})),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0)])]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(null===(Tt=l.baseToken)||void 0===Tt||null===(_t=Tt.pairs)||void 0===_t?void 0:_t.slice(0,2),(function(t,o){return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:o},[Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(t.target_token===t.token0_address?t.token0_symbol:t.token1_symbol),1),Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(t.target_token===t.token0_address?t.token1_symbol:t.token0_symbol),1)]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$f.formatNumber2(t.target_token===t.token0_address?t.reserve0:t.reserve1)),1),Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$f.formatNumber2(t.target_token===t.token0_address?t.reserve1:t.reserve0)),1)])])),[[wo,t.target_token===t.token0_address?t.token0_price_usd:t.token1_price_usd,"animation-bg"]])})),128)),(null===(Nt=l.baseToken)||void 0===Nt||null===(Vt=Nt.pairs)||void 0===Vt?void 0:Vt.length)>2&&l.isPairShowMore?(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],{key:0},Object(n["renderList"])(null===($t=l.baseToken)||void 0===$t||null===(xt=$t.pairs)||void 0===xt?void 0:xt.slice(2),(function(t,o){return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:o},[Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(t.target_token===t.token0_address?t.token0_symbol:t.token1_symbol),1),Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(t.target_token===t.token0_address?t.token1_symbol:t.token0_symbol),1)]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$f.formatNumber2(t.target_token===t.token0_address?t.reserve0:t.reserve1)),1),Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$f.formatNumber2(t.target_token===t.token0_address?t.reserve1:t.reserve0)),1)])])),[[wo,t.target_token===t.token0_address?t.token0_price_usd:t.token1_price_usd,"animation-bg"]])})),128)):Object(n["createCommentVNode"])("",!0)]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",{class:"btn-more",onClick:t[31]||(t[31]=Object(n["withModifiers"])((function(e){return l.isPairShowMore=!0}),["stop"]))},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("viewMore")),1),Object(n["createVNode"])(to,{name:"arrow-down"})],512),[[n["vShow"],!l.isPairShowMore&&(null===(Et=l.baseToken)||void 0===Et||null===(Bt=Et.pairs)||void 0===Bt?void 0:Bt.length)>2]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",{class:"btn-more",onClick:t[32]||(t[32]=Object(n["withModifiers"])((function(e){return l.isPairShowMore=!1}),["stop"]))},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("putAway")),1),Object(n["createVNode"])(to,{name:"arrow-up"})],512),[[n["vShow"],l.isPairShowMore&&(null===(At=l.baseToken)||void 0===At||null===(Ct=At.pairs)||void 0===Ct?void 0:Ct.length)>2]])],4)]),2===l.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",ae,[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",le,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[33]||(t[33]=Object(n["withModifiers"])((function(t){return s.alertTips(e.$t("slippage"),e.$t("minimumReceivedTips"))}),["stop"]))})]),"solana"!==s.chain&&"ton"!==s.chain?(Object(n["openBlock"])(),Object(n["createBlock"])(no,{key:0,swapMode:l.customSwapMode,"onUpdate:swapMode":t[34]||(t[34]=function(e){return l.customSwapMode=e}),autoSwapMode:l.autoSwapMode,slippage:l.customSlippage,"onUpdate:slippage":t[35]||(t[35]=function(e){return l.customSlippage=e}),autoSlippage:l.autoSlippageValue},null,8,["swapMode","autoSwapMode","slippage","autoSlippage"])):"solana"===s.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",se,[l.solanaProtection?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",re,Object(n["toDisplayString"])(e.$t("protection")),1)):Object(n["createCommentVNode"])("",!0),l.solanaProtection?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",ce,"|")):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",ue,Object(n["toDisplayString"])(l.solanaSlippage)+"%",1),Object(n["createVNode"])(io,{slippage:l.solanaSlippage,"onUpdate:slippage":t[36]||(t[36]=function(e){return l.solanaSlippage=e}),icon:1,isProtection:!0,initProtection:l.solanaProtection,onOnSubmit:s.onSubmitSolanaSlippage},null,8,["slippage","initProtection","onOnSubmit"])])):"ton"===s.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",de,[Object(n["createElementVNode"])("span",me,Object(n["toDisplayString"])(l.tonSlippage)+"%",1),Object(n["createVNode"])(io,{slippage:l.tonSlippage,"onUpdate:slippage":t[37]||(t[37]=function(e){return l.tonSlippage=e}),icon:1,onOnSubmit:s.onSubmitTonSlippage},null,8,["slippage","onOnSubmit"])])):Object(n["createCommentVNode"])("",!0)]),Object(n["withDirectives"])(Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",pe,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("energy"))+"/"+Object(n["toDisplayString"])(e.$t("bandwidth")),1)]),Object(n["createElementVNode"])("div",be,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("available"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2(e.$store.getters.EnergyBalance))+"/"+Object(n["toDisplayString"])(e.$f.formatNumber2(e.$store.getters.totalB)),1),Object(n["createElementVNode"])("button",{class:"rent-btn",onClick:t[38]||(t[38]=Object(n["withModifiers"])((function(){return s.goTronRent&&s.goTronRent.apply(s,arguments)}),["stop"]))},Object(n["toDisplayString"])(e.$t("buy1")),1)])],512),[[n["vShow"],"tron"===s.chain&&e.$store.state.currentAccount]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",fe,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("estimatedAveragePrice")),1)]),Object(n["createElementVNode"])("div",he,[Object(n["createElementVNode"])("span",null,"$"+Object(n["toDisplayString"])(s.getAvgPrice()),1)])],512),[[n["vShow"],l.fromAmount&&l.toAmount]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",ve,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("priceImpact")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[39]||(t[39]=Object(n["withModifiers"])((function(t){return s.alertTips(e.$t("priceImpact"),e.$t("priceImpactTips"))}),["stop"]))})]),Object(n["createElementVNode"])("div",{style:Object(n["normalizeStyle"])({color:s.priceImpactColor})},Object(n["toDisplayString"])(s.priceImpact)+Object(n["toDisplayString"])(null!==(It=s.priceImpactV)&&void 0!==It&&null!==(Pt=It.gt)&&void 0!==Pt&&Pt.call(It,.05)?"(".concat(e.$t("excessivePriceImpact"),")"):""),5)],512),[[n["vShow"],l.fromAmount&&l.toAmount&&!l.isERC314]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",ge,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("tokenRoute")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[40]||(t[40]=Object(n["withModifiers"])((function(t){return s.alertTips(e.$t("tokenRoute"),e.$t("tokenRouteTips"))}),["stop"]))})]),"solana"===s.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ke,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])([s.fromToken,s.toToken],(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:t},[0!==t?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",Oe)):Object(n["createCommentVNode"])("",!0),e.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",je,Object(n["toDisplayString"])(e.symbol),1)):Object(n["createCommentVNode"])("",!0)],64)})),128))])):"ton"===s.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",we,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(l.swapRouterPath,(function(t,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:i},[t.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Se,Object(n["toDisplayString"])(t.symbol),1)):Object(n["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ye,[Object(n["createVNode"])(ao,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(t.nextAmm,".jpeg"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),Te])):Object(n["createCommentVNode"])("",!0)],64)})),128)),l.listRouter.length>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",_e)):Object(n["createCommentVNode"])("",!0)])):1===(null===(Dt=l.swapQuoteInfo)||void 0===Dt?void 0:Dt.toWrapper)||2===(null===(Lt=l.swapQuoteInfo)||void 0===Lt?void 0:Lt.toWrapper)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ne,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(l.swapRouterPath,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:t},[0!==t?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",Ve)):Object(n["createCommentVNode"])("",!0),e.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",$e,Object(n["toDisplayString"])(e.symbol),1)):Object(n["createCommentVNode"])("",!0)],64)})),128))])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:3,class:"path-list clickable",onClick:t[41]||(t[41]=Object(n["withModifiers"])((function(e){return!l.isFourMeme&&!l.isSunPump&&(l.dialogListRouterVisible=!0)}),["stop","prevent"]))},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(l.swapRouterPath,(function(t,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:i},[t.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",xe,Object(n["toDisplayString"])(t.symbol),1)):Object(n["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ee,[Object(n["createVNode"])(ao,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(t.nextAmm,".jpeg"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),Be])):Object(n["createCommentVNode"])("",!0)],64)})),128)),l.listRouter.length>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",Ae)):Object(n["createCommentVNode"])("",!0)]))],512),[[n["vShow"],l.fromAmount&&l.toAmount]]),"solana"!==s.chain&&"tron"!==s.chain&&"ton"!==s.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",Ce,[Object(n["createElementVNode"])("div",Ie,Object(n["toDisplayString"])(e.$t("estimatedGas")),1),Object(n["createElementVNode"])("div",Pe,[Object(n["createElementVNode"])("span",null,"≈ "+Object(n["toDisplayString"])(s.estimatedFee),1),"bsc"===e.$store.getters.netId?(Object(n["openBlock"])(),Object(n["createBlock"])(lo,{key:0,class:"ml-5",standardGasPrice:l.gasPrice,gas:this.swapInfo.gasValue,nativePrice:l.nativePrice,onUpdateGasPrice:s.updateGasPrice},null,8,["standardGasPrice","gas","nativePrice","onUpdateGasPrice"])):Object(n["createCommentVNode"])("",!0)])])):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0),0===l.selected||1===l.selected||3===l.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",De,["solana"!==s.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",Le,[Object(n["createElementVNode"])("div",Fe,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[42]||(t[42]=Object(n["withModifiers"])((function(t){return s.alertTips(e.$t("slippage"),e.$t("minimumReceivedTips"))}),["stop"]))})]),0===l.selected||1===l.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Re,[Object(n["createElementVNode"])("span",Me,Object(n["toDisplayString"])(l.limitSlippage)+"%",1),Object(n["createVNode"])(io,{slippage:l.limitSlippage,"onUpdate:slippage":t[43]||(t[43]=function(e){return l.limitSlippage=e}),icon:1,onOnSubmit:s.onSubmitLimitSlippage},null,8,["slippage","onOnSubmit"])])):3===l.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ue,[Object(n["createElementVNode"])("span",Ge,Object(n["toDisplayString"])(l.noGasSlippage)+"%",1),Object(n["createVNode"])(io,{slippage:l.noGasSlippage,"onUpdate:slippage":t[44]||(t[44]=function(e){return l.noGasSlippage=e}),icon:1,min:5,slippageList:["5","6","7"],onOnSubmit:s.onSubmitNoGasSlippage},null,8,["slippage","onOnSubmit"])])):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0),0===l.selected||1===l.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",ze,[Object(n["createElementVNode"])("div",Qe,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("limitExpiredTime")),1)]),0===l.selected&&"solana"===s.chain?(Object(n["openBlock"])(),Object(n["createBlock"])(so,{key:0,expiredTime:l.solanaLimitExpiredTime,"onUpdate:expiredTime":t[45]||(t[45]=function(e){return l.solanaLimitExpiredTime=e})},null,8,["expiredTime"])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",We,Object(n["toDisplayString"])(l.LimitExpiredDays)+" "+Object(n["toDisplayString"])(e.$t("days")),1))])):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",qe,[Object(n["createElementVNode"])("div",He,[Object(n["createVNode"])(co,{active:l.tabActive1,"onUpdate:active":t[46]||(t[46]=function(e){return l.tabActive1=e}),shrink:"",color:"#558BED","title-active-color":"#333333","title-inactive-color":"#999999",style:{"--van-tabs-nav-background-color":"#fff"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(ro,{name:"swap",title:e.$t("historyExchange")},null,8,["title"]),l.isSupportNoGas&&"solana"!==s.chain?(Object(n["openBlock"])(),Object(n["createBlock"])(ro,{key:0,name:"noGas",title:e.$t("historyNoGas")},null,8,["title"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(ro,{name:"limit",title:e.$t("historyLimitOrder")},null,8,["title"])]})),_:1},8,["active"]),Ke,Object(n["createVNode"])(uo,{modelValue:l.isCurrentToken,"onUpdate:modelValue":t[47]||(t[47]=function(e){return l.isCurrentToken=e}),"icon-size":"0.32rem",style:{"--van-checkbox-size":"1.1","--van-checkbox-label-margin":"0.1rem"}},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("currentToken")),1)]})),_:1},8,["modelValue"]),"limit"===l.tabActive1?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[l.loadingGetLimitOrder?(Object(n["openBlock"])(),Object(n["createBlock"])(mo,{key:0,size:"0.4rem",style:{"margin-left":"0.36rem"}})):(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",{key:1,class:"iconfont icon-shuaxin",onClick:t[48]||(t[48]=Object(n["withModifiers"])((function(e){return s.getLimitOrder()}),["stop"]))}))],64)):Object(n["createCommentVNode"])("",!0)]),"swap"===l.tabActive1?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",Ye,[(null===(Ft=s.txs)||void 0===Ft?void 0:Ft.length)>0?(Object(n["openBlock"])(),Object(n["createBlock"])(fo,{key:0,items:s.txs,"min-item-size":200,"key-field":"id","page-mode":"",buffer:1e3,class:"scroller"},{default:Object(n["withCtx"])((function(e){var t=e.item,o=e.index,i=e.active;return[Object(n["createVNode"])(bo,{item:t,active:i,"data-index":o},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(po,{item:t},null,8,["item"])]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])):Object(n["createCommentVNode"])("",!0),Object(n["withDirectives"])(Object(n["createVNode"])(ho,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[n["vShow"],s.txs&&0===s.txs.length]])])):Object(n["createCommentVNode"])("",!0),"limit"===l.tabActive1?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",Je,[(null===(Rt=s.filterLimitOrders)||void 0===Rt?void 0:Rt.length)>0?(Object(n["openBlock"])(),Object(n["createBlock"])(fo,{key:0,items:s.filterLimitOrders,"min-item-size":200,"key-field":"id","page-mode":"",buffer:1e3,class:"scroller"},{default:Object(n["withCtx"])((function(e){var t=e.item,o=e.index,i=e.active;return[Object(n["createVNode"])(bo,{item:t,active:i,"data-index":o},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(vo,{item:t,onRefresh:s.refreshLimit},null,8,["item","onRefresh"])]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])):Object(n["createCommentVNode"])("",!0),Object(n["withDirectives"])(Object(n["createVNode"])(ho,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[n["vShow"],s.filterLimitOrders&&0===s.filterLimitOrders.length]])])):Object(n["createCommentVNode"])("",!0),"noGas"===l.tabActive1?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",Xe,[(null===(Mt=s.filterNoGasTxList)||void 0===Mt?void 0:Mt.length)>0?(Object(n["openBlock"])(),Object(n["createBlock"])(fo,{key:0,items:s.filterNoGasTxList,"min-item-size":200,"key-field":"id","page-mode":"",buffer:1e3,class:"scroller"},{default:Object(n["withCtx"])((function(e){var t=e.item,o=e.index,i=e.active;return[Object(n["createVNode"])(bo,{item:t,active:i,"data-index":o},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(go,{item:t,onRefresh:s.getNoGasList},null,8,["item","onRefresh"])]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])):Object(n["createCommentVNode"])("",!0),Object(n["withDirectives"])(Object(n["createVNode"])(ho,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[n["vShow"],s.filterNoGasTxList&&0===s.filterNoGasTxList.length&&!l.loadingGetNoGasList]])])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",Ze,[Object(n["createElementVNode"])("div",{class:"section-audit",onClick:t[49]||(t[49]=Object(n["withModifiers"])((function(){return s.goAudit&&s.goAudit.apply(s,arguments)}),["stop"]))},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("securityAudit"))+": ",1),et])])],4),Object(n["createVNode"])(ko,{visible:l.dialogVisibleSwap,"onUpdate:visible":t[50]||(t[50]=function(e){return l.dialogVisibleSwap=e}),swapInfo:l.swapInfo,slippage:"solana"===s.chain?l.solanaSlippage:"ton"===s.chain?l.tonSlippage:s.slippage,onSubmit:s.submitSwap,loading:l.loadingConfirmSwap,chain:e.$store.getters.netId||(null===(Ut=e.$f.getAddressAndChainFromId(null===(Gt=e.$route.params)||void 0===Gt?void 0:Gt.id))||void 0===Ut?void 0:Ut.chain)||"",nativePrice:l.nativePrice,gasPrice:s.customGasPrice},null,8,["visible","swapInfo","slippage","onSubmit","loading","chain","nativePrice","gasPrice"]),Object(n["createVNode"])(Oo,{visible:l.dialogVisibleLimit,"onUpdate:visible":t[51]||(t[51]=function(e){return l.dialogVisibleLimit=e}),limitInfo:l.limitInfo,onSubmit:s.submitLimitOrder,loading:l.loadingConfirmLimit,chain:e.$store.getters.netId||(null===(zt=e.$f.getAddressAndChainFromId(null===(Qt=e.$route.params)||void 0===Qt?void 0:Qt.id))||void 0===zt?void 0:zt.chain)||"",limitGasU:l.limitGasU},null,8,["visible","limitInfo","onSubmit","loading","chain","limitGasU"]),Object(n["createVNode"])(jo,{show:l.dialogListRouterVisible,"onUpdate:show":t[52]||(t[52]=function(e){return l.dialogListRouterVisible=e}),title:e.$t("selectRouter"),style:{height:"60%","--van-popup-background-color":"#fff"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("ul",tt,[Object(n["createElementVNode"])("li",ot,[Object(n["createElementVNode"])("span",nt,Object(n["toDisplayString"])(e.$t("router")),1),Object(n["createElementVNode"])("span",it,Object(n["toDisplayString"])(l.isAmount?e.$t("expectedAmount"):e.$t("expectedPay")),1),Object(n["createElementVNode"])("span",at,Object(n["toDisplayString"])(e.$t("priceImpact")),1),lt]),Object(n["withDirectives"])(Object(n["createVNode"])(ho,{description:e.$t("emptyData"),class:"empty"},null,8,["description"]),[[n["vShow"],l.listRouter&&0===l.listRouter.length]]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(l.listRouter,(function(t,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:i,class:"token-item",onClick:Object(n["withModifiers"])((function(e){return s.getSelectedRouter(i)}),["stop"])},[Object(n["createElementVNode"])("div",rt,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.path,(function(t,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:i},[t.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",ct,Object(n["toDisplayString"])(t.symbol),1)):Object(n["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ut,[Object(n["createVNode"])(ao,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(t.nextAmm,".jpeg"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),dt])):Object(n["createCommentVNode"])("",!0)],64)})),128)),0===i?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",mt,Object(n["toDisplayString"])(e.$t("best")),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("span",pt,Object(n["toDisplayString"])(e.$f.formatNumber2(t.amount)),1),t.priceImpact<10?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"right-label flex-1",style:Object(n["normalizeStyle"])({color:s.formatPriceImpactColor(t.priceImpact)})},[Number(t.priceImpact)<.01?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[bt],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.formatNumber2(t.priceImpact,2))+"% ",1)],64))],4)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:1,class:"right-label flex-1",style:Object(n["normalizeStyle"])({color:s.formatPriceImpactColor(t.priceImpact)})},[Number(t.priceImpact)>40?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[ft],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.formatNumber2(t.priceImpact,2))+"% ",1)],64))],4)),l.selectedRouterIndex===i?(Object(n["openBlock"])(),Object(n["createBlock"])(to,{key:2,size:"0.32rem",color:"#558BED",name:"success"})):(Object(n["openBlock"])(),Object(n["createBlock"])(to,{key:3,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,st)})),128))])]})),_:1},8,["show","title"])],64)}var vt=o("fc11"),gt=o("c964"),kt=o("f3f3"),Ot=o("d0ff"),jt=o("d0af"),wt=(o("96cf"),o("4de4"),o("d3b7"),o("7db0"),o("2ca0"),o("caad"),o("b680"),o("4e82"),o("159b"),o("25f0"),o("2532"),o("c740"),o("ac1f"),o("5319"),o("466d"),o("4d63"),o("c607"),o("2c3e"),o("d81d"),o("00b4"),o("3ca3"),o("ddb0"),o("e9c4"),o("b64b"),o("a15b"),o("a630"),o("6062"),o("0481"),o("4069"),o("85b6")),St=o("57c9"),yt=o("9587"),Tt=function(e){return Object(n["pushScopeId"])("data-v-b98c9484"),e=e(),Object(n["popScopeId"])(),e},_t={class:"flex items-center"},Nt={class:"label mr-20"},Vt={key:0,class:"token-container"},$t={class:"icon-token-container mr-5"},xt=["src"],Et={class:"mr-5"},Bt=Tt((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),At={class:"flex items-center mt-10"},Ct={class:"label mr-20"},It={key:0,class:"token-container"},Pt={class:"icon-token-container mr-5"},Dt=["src"],Lt={class:"mr-5"},Ft={class:"flex items-center justify-between mt-10"},Rt={class:"label mr-20"},Mt=Tt((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)}));function Ut(e,t,o,i,a,l){var s,r,c,u,d,m=Object(n["resolveComponent"])("van-image"),p=Object(n["resolveComponent"])("van-loading");return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:"tx-li-item van-hairline--bottom clickable",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(){return l.goLink&&l.goLink.apply(l,arguments)}),["stop"]))},[Object(n["createElementVNode"])("div",_t,[Object(n["createElementVNode"])("span",Nt,Object(n["toDisplayString"])(e.$t("from")),1),o.item.from_token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Vt,[Object(n["createElementVNode"])("div",$t,[Object(n["createVNode"])(m,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(s=o.item)&&void 0!==s&&s.from_token_logo_url?e.$f.formatIcon({logo_url:o.item.from_token_logo_url}):"/icon-default.png","error-icon":a.defaultIcon},null,8,["src","error-icon"]),Object(n["createElementVNode"])("img",{class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(o.item.chain,".png"),alt:"",srcset:""},null,8,xt)]),Object(n["createElementVNode"])("span",Et,Object(n["toDisplayString"])(e.$f.formatNumber2(l.formatUnits(o.item.from_amount,o.item.from_token_decimals))),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(o.item.from_token_symbol||""),1)])):Object(n["createCommentVNode"])("",!0),Bt]),Object(n["createElementVNode"])("div",At,[Object(n["createElementVNode"])("span",Ct,Object(n["toDisplayString"])(e.$t("to")),1),o.item.to_token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",It,[Object(n["createElementVNode"])("div",Pt,[Object(n["createVNode"])(m,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(r=o.item)&&void 0!==r&&r.to_token_logo_url?e.$f.formatIcon({logo_url:o.item.to_token_logo_url}):"/icon-default.png","error-icon":a.defaultIcon},null,8,["src","error-icon"]),Object(n["createElementVNode"])("img",{class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(o.item.chain,".png"),alt:"",srcset:""},null,8,Dt)]),Object(n["createElementVNode"])("span",Lt,Object(n["toDisplayString"])(e.$f.formatNumber2(l.formatUnits(o.item.to_amount,o.item.to_token_decimals))),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])((null===(c=o.item)||void 0===c?void 0:c.to_token_symbol)||""),1)])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",Ft,[Object(n["createElementVNode"])("span",Rt,Object(n["toDisplayString"])(e.$f.formatDate(o.item.created_at)),1),1===o.item.status||2===o.item.status?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"status-txt",style:Object(n["normalizeStyle"])({color:l.formatStatusColor(o.item.status)})},Object(n["toDisplayString"])(l.formatStatus(o.item.status)),5)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Mt,0===(null===(u=o.item)||void 0===u?void 0:u.status)||-1===(null===(d=o.item)||void 0===d?void 0:d.status)?(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:0,size:"0.32rem",color:"#3F80F7","text-size":"0.24rem"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("pending")),1)]})),_:1})):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:1,class:"status-txt",style:Object(n["normalizeStyle"])({color:l.formatStatusColor(o.item.status)})},Object(n["toDisplayString"])(l.formatStatus(o.item.status)),5))],64))])])}var Gt=o("6779"),zt=o("aeccf"),Qt=o.n(zt),Wt={name:"NoGasTxItem",props:{item:Object},emits:["refresh"],data:function(){return{defaultIcon:Qt.a,loading:!1}},methods:{formatUnits:Gt["utils"].formatUnits,formatStatus:function(e){var t,o={0:"",1:this.$t("cancelled"),2:this.$t("completed"),3:this.$t("unknownError1"),7:this.$t("unknownError1"),4:this.$t("notEnoughBalance"),5:this.$t("insufficientSlippage1"),8:this.$t("insufficientSlippage1"),6:this.$t("transferFailed"),10:this.$t("fail1")+"(".concat(this.$t("nonceError"),")"),11:this.$t("fail1")+"(".concat(this.$t("chainError"),")"),12:this.$t("fail1")+"(".concat(this.$t("signatureError"),")"),13:this.$t("fail1")+"(".concat(this.$t("approveGasPriceLow"),")"),15:this.$t("fail1")+"(".concat(this.$t("gasLimitHigh"),")"),16:this.$t("fail1")+"(".concat(this.$t("swapTokenRiskHigh"),")"),"-1":""};return null!==(t=o[e])&&void 0!==t?t:e},formatStatusColor:function(e){return 1===e||10===e||11===e||12===e?"#999999":2===e?"#12B886":0===e?"#3F80F7":"#FF0000"},goLink:function(){var e=this.$f.formatExplorerUrl(this.item.chain,this.item.executed_tx_hash,"tx");e&&this.item.executed_tx_hash&&this.$f.openBrowser(e)}}},qt=(o("f7ee"),o("6b0d")),Ht=o.n(qt);const Kt=Ht()(Wt,[["render",Ut],["__scopeId","data-v-b98c9484"]]);var Yt=Kt,Jt=function(e){return Object(n["pushScopeId"])("data-v-2eac6f28"),e=e(),Object(n["popScopeId"])(),e},Xt={class:"select-box"},Zt=["disabled"],eo={key:0,class:"token-container"},to={key:1},oo=Jt((function(){return Object(n["createElementVNode"])("i",{class:"iconfont icon-collapse-down"},null,-1)})),no={class:"rules-content"},io={class:"search-bar",action:"/"},ao={key:0,class:"pop-title"},lo={style:{background:"#fff"}},so=["onClick"],ro={class:"main"},co={key:0,class:"risk-status high"},uo={key:0,class:"minor"},mo=Jt((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),po={class:"right-label"},bo=Jt((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),fo={key:0,class:"minor"};function ho(e,t,i,a,l,s){var r=Object(n["resolveComponent"])("van-image"),c=Object(n["resolveComponent"])("van-search"),u=Object(n["resolveComponent"])("van-empty"),d=Object(n["resolveComponent"])("van-icon"),m=Object(n["resolveComponent"])("DynamicScrollerItem"),p=Object(n["resolveComponent"])("DynamicScroller"),b=Object(n["resolveComponent"])("van-action-sheet");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Xt,[Object(n["createElementVNode"])("button",{class:"select-container",disabled:i.disabled,type:"button",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return l.show=!0}),["stop"]))},[i.token.address||i.token.token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",eo,[(Object(n["openBlock"])(),Object(n["createBlock"])(r,{key:i.token.logo_url||0,round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem",style:{"margin-right":"0.1rem"},"lazy-load":"","show-loading":"",src:i.token.logo_url?e.$f.formatIcon({logo_url:i.token.logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"])),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.replaceSymbol?i.replaceSymbol.replace("{s}",i.token.symbol||""):i.token.symbol||""),1)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",to,Object(n["toDisplayString"])(e.$t("pleaseSelectToken")),1)),oo],8,Zt),Object(n["createVNode"])(b,{show:l.show,"onUpdate:show":t[2]||(t[2]=function(e){return l.show=e}),title:e.$t("selectToken"),style:{height:"80vh","--van-popup-background-color":"#fff"},"lazy-render":!1},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",no,[Object(n["createElementVNode"])("form",io,[Object(n["createVNode"])(c,{modelValue:l.keyword,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.keyword=e}),modelModifiers:{trim:!0},background:"#fff",shape:"round",placeholder:e.$t("searchContractORName"),onSearch:s.onSearch,onCancel:s.onCancel},null,8,["modelValue","placeholder","onSearch","onCancel"])]),""!==l.keyword||i.isBalance?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ao,Object(n["toDisplayString"])(e.$t("popularTokens")),1)),Object(n["createElementVNode"])("ul",lo,[Object(n["withDirectives"])(Object(n["createVNode"])(u,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[n["vShow"],l.searchTokens&&0===l.searchTokens.length&&!l.loading]]),Object(n["createVNode"])(p,{items:l.searchTokens,"min-item-size":30,"key-field":"address",class:"tokens"},{default:Object(n["withCtx"])((function(t){var a=t.item,c=t.index,u=t.active;return[Object(n["createVNode"])(m,{item:a,active:u,"data-index":c},{default:Object(n["withCtx"])((function(){var t;return[Object(n["createElementVNode"])("li",{class:"token-item",onClick:Object(n["withModifiers"])((function(e){return s.handleSelectToken(a)}),["stop"])},[Object(n["createVNode"])(r,{class:"icon-token",round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:a.logo_url?e.$f.formatIcon({logo_url:a.logo_url}):l.errorIcon,"error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div",ro,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(a.symbol),1),(a.risk_score>55||a.risk_level<0)&&1!==a.risk_level?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",co,Object(n["toDisplayString"])(e.$t("highRisk")),1)):Object(n["createCommentVNode"])("",!0)]),(null!==a&&void 0!==a&&null!==(t=a.tags)&&void 0!==t&&t.includes("tokens")||null===a||void 0===a||!a.tags)&&a.address!==l.nativeToken?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",uo,Object(n["toDisplayString"])(a.address.slice(0,6)+"..."+a.address.slice(-6)),1)):Object(n["createCommentVNode"])("",!0)]),mo,Object(n["createElementVNode"])("div",po,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(a.value?e.$f.formatNumber2(a.value):""),1),bo,void 0!==a.price?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",fo,"$"+Object(n["toDisplayString"])(a.value?e.$f.formatNumber2(a.value*a.price):""),1)):Object(n["createCommentVNode"])("",!0)]),a.address===(i.token.address||i.token.token)?(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:0,size:"0.32rem",color:"#558BED",name:"success"})):(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:1,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,so)]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])])])]})),_:1},8,["show","title"])])}o("841c");var vo=o("365c"),go=o("c9d9"),ko=o("aeccf"),Oo=null,jo={name:"SwapSelectToken",props:{tokens:Array,token:{type:Object,default:function(){return{address:"",chain:"",symbol:"",isbaseToken:!1}}},chain:String,hasNative:{type:Boolean,default:!0},isBalance:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},replaceSymbol:{type:String,default:""}},emits:["update:token"],data:function(){return{errorIcon:ko,show:!1,keyword:"",searchTokens:this.tokens||[],loading:!1,nativeToken:go["k"]}},computed:{searchResultTokens:function(){var e,t=this;return(null===(e=this.searchTokens)||void 0===e?void 0:e.length)>0?this.searchTokens:this.tokens.filter((function(e){return t.hasNative||e.address!==go["k"]}))}},watch:{keyword:function(e){""!==e?this.tokenSearch():this.searchTokens=this.tokens},show:function(e){var t,o,n;e&&(this.searchTokens=this.tokens,this.keyword=""),console.log("isRefreshEnable",e),null===(t=window)||void 0===t||null===(o=t._tw_)||void 0===o||null===(n=o.isRefreshEnable)||void 0===n||n.call(o,"bridge",!e)}},methods:{onSearch:function(e){console.log(e),Oo&&(clearTimeout(Oo),Oo=null),this.search()},onCancel:function(){this.keyword="",this.show=!1},handleSelectToken:function(e){var t=this;if(null!==e&&void 0!==e&&e.address||null!==e&&void 0!==e&&e.token){var o=Object(kt["a"])(Object(kt["a"])({},e),{},{address:e.address||e.token,isbaseToken:this.token.isbaseToken});this.$emit("update:token",o),Object.keys(o).forEach((function(e){t.token[e]=o[e]})),this.show=!1}},tokenSearch:function(){var e=this;Oo&&(clearTimeout(Oo),Oo=null),Oo=setTimeout((function(){e.search()}),800)},search:function(){var e=this;if(""!==this.keyword){var t=new RegExp(this.keyword,"i"),o=this.tokens.filter((function(o){return(t.test(o.address)||t.test(o.symbol)||t.test(o.name))&&(e.hasNative||o.address!==go["k"])}));this.loading=!0;var n=this.keyword;Object(vo["wb"])(this.keyword,this.chain).then((function(t){var i,a,l;if(n===e.keyword){var s=null===(i=t.filter)||void 0===i||null===(a=i.call(t,(function(t){return t.chain===e.chain&&!o.some((function(e){return e.token===t.token}))})))||void 0===a||null===(l=a.map)||void 0===l?void 0:l.call(a,(function(e){return Object(kt["a"])(Object(kt["a"])({},e),{},{address:e.token,decimals:e.decimals||e.decimal})}));e.searchTokens=[].concat(Object(Ot["a"])(o),Object(Ot["a"])(s))}})).catch((function(t){console.log(t),e.searchTokens=[]})).finally((function(){e.loading=!1}))}else this.searchTokens=this.tokens.filter((function(t){return e.hasNative||t.address!==go["k"]}))}}};o("fae6");const wo=Ht()(jo,[["render",ho],["__scopeId","data-v-2eac6f28"]]);var So=wo,yo=o("a2ef"),To=o("ce94"),_o=o("cf1a"),No=o("449c"),Vo=o("497e"),$o=o("fadf"),xo=function(e){return Object(n["pushScopeId"])("data-v-f897fa40"),e=e(),Object(n["popScopeId"])(),e},Eo={class:"select-box"},Bo={class:"flex items-center"},Ao={style:{background:"#fff",padding:"0.2rem 0.3rem 1rem 0.3rem","--van-cell-background-color":"transparent"}},Co={class:"setting-title"},Io={class:"card-container"},Po={class:"font-500"},Do={class:"color-999 ml-5"},Lo=xo((function(){return Object(n["createElementVNode"])("div",{class:"setting-title"},"Gas Price(GWEI)",-1)})),Fo={class:"slippage-setting"},Ro=["onClick"],Mo={class:"color-999"},Uo={class:"mt-5 font-500"};function Go(e,t,o,i,a,l){var s=Object(n["resolveComponent"])("van-field"),r=Object(n["resolveComponent"])("van-button"),c=Object(n["resolveComponent"])("van-action-sheet");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Eo,[Object(n["createElementVNode"])("div",Bo,[Object(n["createElementVNode"])("i",{class:"iconfont icon-settings",style:{color:"#999999"},onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return a.show=!0}),["stop"]))})]),Object(n["createVNode"])(c,{show:a.show,"onUpdate:show":t[2]||(t[2]=function(e){return a.show=e}),title:e.$t("gasSetting"),style:{"--van-popup-background-color":"#fff","min-height":"40%"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",Ao,[Object(n["createElementVNode"])("div",Co,Object(n["toDisplayString"])(e.$t("gasFee"))+"(BNB)",1),Object(n["createElementVNode"])("div",Io,[Object(n["createElementVNode"])("span",Po,Object(n["toDisplayString"])(l.estimatedB),1),Object(n["createElementVNode"])("span",Do,"≈"+Object(n["toDisplayString"])(l.estimatedU),1)]),Lo,Object(n["createElementVNode"])("div",Fo,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(l.gasPriceList,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:t,type:"button",class:Object(n["normalizeClass"])({active:a.gasPriceValue===e.value}),onClick:function(t){return a.gasPriceValue=e.value}},[Object(n["createElementVNode"])("span",Mo,Object(n["toDisplayString"])(e.name),1),Object(n["createElementVNode"])("span",Uo,Object(n["toDisplayString"])(e.value),1)],10,Ro)})),128)),Object(n["createVNode"])(s,{class:"input",type:"number",min:l.standardGasPriceD,placeholder:e.$t("custom"),modelValue:a.gasPriceValue,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.gasPriceValue=e}),onBlur:l.handleBlur,clearable:""},null,8,["min","placeholder","modelValue","onBlur"])]),Object(n["createVNode"])(r,{block:"",type:"primary","native-type":"button",color:"#3F80F7",class:"submit-btn",style:Object(n["normalizeStyle"])({marginTop:"1.5rem"}),onClick:Object(n["withModifiers"])(l.submitSwapGasSet,["stop"])},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm")),1)]})),_:1},8,["style","onClick"])])]})),_:1},8,["show","title"])])}var zo=o("901e"),Qo=o.n(zo),Wo=o("2c28"),qo={name:"SwapGasSet",props:{standardGasPrice:{type:[Number,String],default:"3000000000"},gas:{type:[Number,String],default:go["d"]},nativePrice:[Number,String]},emits:["updateGasPrice"],setup:function(){var e=Object(Wo["useStorage"])("gasSetting",{},localStorage);return{gasSetting:e}},data:function(){var e=this.$store.getters.netId,t=this.standardGasPrice;if(e){var o,n=null===(o=this.gasSetting)||void 0===o?void 0:o[e];t=(null===n||void 0===n?void 0:n.customGasPrice)||("bsc"===e?go["c"]:this.standardGasPrice)}return{show:!1,gasPriceValue:new Qo.a(t||this.standardGasPrice).div(Math.pow(10,9)).toFixed()}},computed:{standardGasPriceD:function(){return new Qo.a(this.standardGasPrice).div(Math.pow(10,9)).toFixed(0)},gasPriceList:function(){var e=new Qo.a(this.standardGasPrice).div(Math.pow(10,9)),t=new Qo.a(4).div(3),o=new Qo.a(6).div(3);return[{name:this.$t("standard"),value:e.toFixed(0)},{name:this.$t("fast1"),value:t.times(e).toFixed(0)},{name:this.$t("instant"),value:o.times(e).toFixed(0)}]},estimatedB:function(){var e=this.gas;return e?this.$f.formatNumber2(new Qo.a(e.toString()).times(this.gasPriceValue).div(String(Math.pow(10,9))).toFixed()||"0",2):"0"},estimatedU:function(){var e=this.gas;if(!e)return"0";var t=this.nativePrice;return this.$f.formatNumberCurrencyUnit(new Qo.a(e.toString()).times(t).times(this.gasPriceValue).div(String(Math.pow(10,9))).toFixed()||"0",2)}},watch:{show:function(e){if(e){var t=this.$store.getters.netId,o=this.standardGasPrice;if(t){var n,i=null===(n=this.gasSetting)||void 0===n?void 0:n[t];o=(null===i||void 0===i?void 0:i.customGasPrice)||("bsc"===t?go["c"]:this.standardGasPrice)}this.gasPriceValue=new Qo.a(o).div(Math.pow(10,9)).toFixed()||this.standardGasPrice}}},methods:{handleBlur:function(){var e=new Qo.a(this.standardGasPrice).div(Math.pow(10,9));this.show&&e.gt(this.gasPriceValue)&&(this.gasPriceValue=e.toFixed(0))},submitSwapGasSet:function(){var e=new Qo.a(this.gasPriceValue||"0").times(Math.pow(10,9)).toFixed(0),t=this.$store.getters.netId;if(t){var o=this.gasSetting[t];this.gasSetting=Object(kt["a"])(Object(kt["a"])({},this.gasSetting),{},Object(vt["a"])({},t,Object(kt["a"])(Object(kt["a"])({},o),{},{customGasPrice:e}))),this.$emit("updateGasPrice",this.gasSetting)}this.show=!1}}};o("eb18");const Ho=Ht()(qo,[["render",Go],["__scopeId","data-v-f897fa40"]]);var Ko=Ho,Yo=function(e){return Object(n["pushScopeId"])("data-v-225cd86e"),e=e(),Object(n["popScopeId"])(),e},Jo=Yo((function(){return Object(n["createElementVNode"])("i",{class:"select-token iconfont icon-collapse-down"},null,-1)}));function Xo(e,t,o,i,a,l){var s=Object(n["resolveComponent"])("van-action-sheet");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[Object(n["createElementVNode"])("button",{class:"select-container clickable",type:"button",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return a.dialogVisible=!0}),["stop"]))},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(l.expiredTimeName),1),Jo]),Object(n["createVNode"])(s,{show:a.dialogVisible,"onUpdate:show":t[1]||(t[1]=function(e){return a.dialogVisible=e}),title:e.$t("limitExpiredTime"),actions:l.actions,onSelect:l.onSelect,style:{"--van-popup-background-color":"#fff","--van-action-sheet-item-background":"#fff"},"cancel-text":e.$t("cancel")},null,8,["show","title","actions","onSelect","cancel-text"])])}var Zo={name:"SolanaLimitExpired",props:{expiredTime:Number},emits:["update:visible","update:expiredTime"],data:function(){return{dialogVisible:!1}},computed:{actions:function(){var e=this,t=[{name:this.$t("never"),value:null},{name:this.$t("10min"),value:600},{name:this.$t("1h"),value:3600},{name:this.$t("1d"),value:86400},{name:this.$t("3d"),value:259200},{name:this.$t("7d"),value:604800}];return t.map((function(t){return t.value===e.expiredTime?Object(kt["a"])(Object(kt["a"])({},t),{},{color:"#3F80F7 "}):t}))},expiredTimeName:function(){var e,t=this;return null===(e=this.actions.find((function(e){return e.value===t.expiredTime})))||void 0===e?void 0:e.name}},methods:{onSelect:function(e){this.$emit("update:expiredTime",e.value),this.dialogVisible=!1}}};o("1675");const en=Ht()(Zo,[["render",Xo],["__scopeId","data-v-225cd86e"]]);var tn=en,on=o("3edc"),nn=o("940b"),an=o("f465"),ln=o("335a"),sn=o("847c"),rn=o("8e2e"),cn=o("ddd2"),un=o("20c2"),dn=o("ddc3"),mn=null,pn=null,bn=null,fn=null,hn=null,vn=null,gn=null,kn=null;on["a"].props.components.default=function(){return{OpenIndicator:{render:function(){return Object(n["h"])("span",{innerHTML:'<svg height="8" viewBox="0 0 14 8" width="14" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" transform="matrix(0 1 -1 0 16 -5)"><path d="m0 0h18v18h-18z"/><path d="m12.8008158 9.14463395c-.0305856.13208319-.0973435.25748808-.2002738.36041835l-6.0104076 6.0104076c-.29289322.2928933-.76776696.2928933-1.06066017 0-.29289322-.2928932-.29289322-.7677669 0-1.0606601l5.48233267-5.48233272-5.48147681-5.48147682c-.29289322-.29289322-.29289322-.76776696 0-1.06066017.29289321-.29289322.76776695-.29289322 1.06066017 0l6.01040764 6.01040764c.1909127.19091266.2573853.45914247.1994179.70389622z" fill="#999"/></g></svg>'})}}}};var On="2",jn=["limit","limit","swap","noGas"],wn={name:"Swap",components:{PercentStep:wt["a"],TxItem:St["a"],SwapSelectToken:So,ConfirmSwap:yo["a"],PriceChart:_o["a"],SlippageButton:No["a"],ConfirmLimit:To["a"],LimitTxItem:yt["a"],vSelect:on["a"],RebateImg:Vo["a"],SwapModeSet:$o["a"],NoGasTxItem:Yt,SwapGasSet:Ko,SolanaLimitExpired:tn},setup:function(){var e,t,o,n,i=Object(Wo["useStorage"])("solanaTxs",[]),a=Object(rn["a"])("solanaTxs1",i.value.slice()),l=Object(rn["a"])("ERC314SwapTxs",[]);a.value=null===(e=a.value)||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,(function(e){return 1===(null===e||void 0===e?void 0:e.is_merged)||1!==e.is_merged&&1e3*(null===e||void 0===e?void 0:e.time)<=Date.now()-864e5}));var s=Object(rn["a"])("tonTxs",[]);return s.value=null===(o=s.value)||void 0===o||null===(n=o.filter)||void 0===n?void 0:n.call(o,(function(e){return 1===(null===e||void 0===e?void 0:e.is_merged)||1!==e.is_merged&&1e3*(null===e||void 0===e?void 0:e.time)<=Date.now()-864e5})),{solanaTxs:a,ERC314SwapTxs:l,tonTxs:s}},data:function(){var e,t,o,n,i,a,l,s,r,c,u=this.$f.getAddressAndChainFromId(null===(e=this.$route.params)||void 0===e?void 0:e.id,1),d=Object(jt["a"])(u,2),m=d[0],p=d[1],b=!localStorage.autoSlippage||JSON.parse(localStorage.autoSlippage),f=localStorage.swapSlippage||"auto",h=this.$route.params.type?Number(this.$route.params.type):2;return 3!==h||null!==(t=window)&&void 0!==t&&null!==(o=t._tw_)&&void 0!==o&&o.appExchangeNoGas&&"bsc"===p||(h=2),{LimitExpiredDays:go["f"],nativeToken:go["k"],height:100,swapTokenInfo:{},tokens:[],token1:{address:m||"",chain:p||"",balance:0,symbol:""},token2:{address:"",chain:"",balance:0,symbol:""},fromAmount:"",toAmount:"",baseToken:{token:{symbol:""},pairs:[]},baseTokenExtra:{},selected:h,dataX:[],dataY:[],swapQuoteInfo:{},isPairShowMore:!1,quoteLoading:!1,allowance:0,loadingApprove:!1,loadingSwap:!1,dialogVisibleSwap:!1,swapSubmitInfo:{},swapInfo:{fromToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""},toToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""},isAmountOut:!1},loadingConfirmSwap:!1,tokensPrice:{},swapRouterPath:[],nativePrice:0,initTxs:[],txsLoading:!1,isCurrentToken:!0,userBalanceTokens:[],isAndroid:!(null===(n=window)||void 0===n||null===(i=n._tw_)||void 0===i||!i.appGetPlatform),gasPrice:"0",spender:"",isTaxHigh:!1,isCannotSellAll:!1,baseTokenPrice:0,isTax:!1,txsTokens:sessionStorage.txsTokens?JSON.parse(sessionStorage.txsTokens||[]):[],isAmount:!0,swapPathList:[],listRouter:[],dialogListRouterVisible:!1,selectedRouterIndex:0,openLp:null===(a=window)||void 0===a||null===(l=a._tw_)||void 0===l?void 0:l.openLp,tx:{},userTokenList:[],activeTab:Number(this.$route.query.dir)||0,limitFromToken:{address:"",chain:"",balance:0,symbol:"",price:0},limitFromAmount:"",limitToToken:{address:m||"",chain:p||"",balance:0,symbol:"",price:0},limitToAmount:"",limitPrice:"",loadingLimit:!1,dialogVisibleLimit:!1,loadingConfirmLimit:!1,limitInfo:{fromToken:{address:"",chain:"",balance:0,symbol:"",price:0},toToken:{address:m||"",chain:p||"",balance:0,symbol:"",price:0},fromAmount:"",toAmount:"",targetToken:"",targetLimitPrice:""},limitAllowance:0,loadingLimitApprove:!1,quoteLimitLoading:!1,tabActive1:null!==(s=jn[h])&&void 0!==s?s:"limit",limitOrders:[],limitMinReturn:0,loadingGetLimitOrder:!1,limitToken1:{address:m||"",chain:p||"",balance:0,symbol:"",price:0},limitAmount1:"",limitToken2:{address:"",chain:"",balance:0,symbol:"",price:0},limitAmount2:"",rateType:!0,autoSlippage:b,slippageInfo:{slippage:On,autoSlippage:!0},limitQuoteLoading:!1,limitSlippage:localStorage.limitSlippage||"5",loadingAllowance:!1,loadingLimitAllowance:!1,triggerPrice:"",limitGasU:"0",autoSwapMode:"fast",customSwapMode:localStorage.swapMode||"auto",autoSlippageValue:On,customSlippage:f,hasMEVBot:!1,isHotToken:!1,noGasSlippage:localStorage.noGasSlippage||"5",noGasTxList:[],loadingGetNoGasList:!1,isHasUnTx:!1,isSupportNoGas:null===(r=window)||void 0===r||null===(c=r._tw_)||void 0===c?void 0:c.appExchangeNoGas,gasBalance:0,isNoGas:!1,gasPriceKey:0,gasSetting:ln["a"].get("gasSetting",{}),solanaQuoteResponse:{},swapTokenPrice:[0,0],quoteSolanaPreParams:{},solanaSwapBaseTokenPrice:0,solanaSlippage:localStorage.solanaSlippage||"2",loadingUnwrap:!1,solanaPriceChg:{solanaAutoSlippage:new Qo.a(9),k0_price_chg:new Qo.a(0),k1_price_chg:new Qo.a(0)},getKlineTime:0,priceImpactSolana:0,limitSolanaPrice:0,solanaLimitExpiredTime:null,limitSolanaError:"",getSolanaLimitOrderTime:0,limitSolanaPriceU:0,isERC314:!1,isPump:!1,tonSlippage:localStorage.tonSlippage||"2",tonQuoteResponse:{},priceImpactTon:0,tonSwapTokenPrice:[0,0],tonSwapBaseTokenPrice:0,solanaProtection:!!localStorage.solanaProtection&&JSON.parse(localStorage.solanaProtection||"false"),isMoonshot:!1,isFourMeme:!1,isFlap:!1,amm:"",isSunPump:0}},computed:{swapMode:function(){return"auto"===this.customSwapMode?this.autoSwapMode:this.customSwapMode},slippage:function(){return"auto"===this.customSlippage?this.autoSlippageValue:this.customSlippage},typeTabs:function(){return[{name:this.$t("buy"),type:0},{name:this.$t("sell"),type:1}]},types:function(){var e,t,o,n;if(this.isERC314||this.isPump||this.isMoonshot||this.isFourMeme||this.isFlap||this.isSunPump>0)return[{name:this.$t("swapT"),value:2}];var i=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"",a="solana"===i?[]:[{name:this.$t("stopLimit"),value:1}];return[].concat(Object(Ot["a"])(null!==(o=window)&&void 0!==o&&null!==(n=o._tw_)&&void 0!==n&&n.appExchangeNoGas&&"eth"!==this.$store.getters.netId&&this.isNoGas?[{name:this.$t("noGasSwapT"),value:3}]:[{name:this.$t("swapT"),value:2}]),[{name:this.$t("limitT"),value:0}],a)},typeName:function(){var e,t,o,n=this;return null===(e=this.types)||void 0===e||null===(t=e.find)||void 0===t||null===(o=t.call(e,(function(e){return e.value===n.selected})))||void 0===o?void 0:o.name},netId:function(){return this.$store.getters.netId||""},chain:function(){var e,t,o,n,i,a,l,s=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"";return"evm"!==localStorage.okxwallet_chain&&(window.solana||null!==(o=window)&&void 0!==o&&null!==(n=o.trustwallet)&&void 0!==n&&n.solana&&(null===(i=window.ethereum)||void 0===i||null===(a=i.address)||void 0===a||null===(l=a.startsWith)||void 0===l||!l.call(a,"0x"))&&window.ethereum.address)&&(s="solana"),s},tokenInfo:function(){var e,t;if("Swap"!==this.$route.name)return{id:"",token:"",chain:""};var o=this.$f.getAddressAndChainFromId(null===(e=this.$route.params)||void 0===e?void 0:e.id,1),n=Object(jt["a"])(o,2),i=n[0],a=n[1];return{id:null===(t=this.$route.params)||void 0===t?void 0:t.id,token:i,chain:a}},tabs:function(){return[{name:this.$t("buy"),value:"buy"},{name:this.$t("sell"),value:"sell"}]},isApprove:function(){var e,t=["solana","ton"];if(t.includes(this.chain))return!0;if(this.isERC314)return!0;if((null===(e=this.fromToken)||void 0===e?void 0:e.address)===go["k"])return!0;if(!this.allowance)return!1;var o=this.fromToken.decimals||0;return Gt["utils"].parseUnits(new Qo.a(this.fromAmount||0).toFixed(o),o).lte(this.allowance)},isLimitApprove:function(){var e=["solana","ton"];if(e.includes(this.chain))return!0;if(!this.limitAllowance)return!1;var t=0===this.activeTab?this.limitToken2:this.limitToken1,o=t.decimals||0,n=0===this.activeTab?this.limitAmount2:this.limitAmount1;return Gt["utils"].parseUnits(new Qo.a(n||0).toFixed(o),o).lte(this.limitAllowance)},minReceived:function(){var e,t=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.routerPath)||{},o=t[t.length-1];return new Qo.a(null===o||void 0===o?void 0:o.amount).times(100-Number(this.slippage)).div(Math.pow(10,((null===o||void 0===o?void 0:o.decimals)||0)+2)).toFixed((null===o||void 0===o?void 0:o.decimals)||0)},maxSold:function(){var e,t=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.routerPath)||{},o=t[0];return new Qo.a(null===o||void 0===o?void 0:o.amount).times(1+Number(this.slippage)/100).div(Math.pow(10,(null===o||void 0===o?void 0:o.decimals)||0)).toFixed((null===o||void 0===o?void 0:o.decimals)||0)},txs:function(){var e,t,o,n,i=this,a=this.ERC314SwapTxs.filter((function(e){var t;return!(null!==(t=i.initTxs)&&void 0!==t&&t.some((function(t){return t.id===e.id})))&&e.chain===i.$store.getters.netId&&e.wallet_address===i.$store.state.currentAccount})),l=[].concat(Object(Ot["a"])(a),Object(Ot["a"])(this.initTxs)).sort((function(e,t){return Number(t.time)-Number(e.time)})),s="solana"===this.chain?null===(e=this.solanaTxs)||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,(function(e){return e.wallet_address===i.$store.state.currentAccount||!e.wallet_address})):l;"ton"===this.chain&&(s=null===(o=this.tonTxs)||void 0===o||null===(n=o.filter)||void 0===n?void 0:n.call(o,(function(e){return e.wallet_address===i.$store.state.currentAccount||!e.wallet_address})));if(this.isCurrentToken){var r,c,u=this.$f.getAddressAndChainFromId(null===(r=this.$route.params)||void 0===r?void 0:r.id,1),d=Object(jt["a"])(u,2),m=d[0],p=d[1],b=ln["a"].get("chainConfig",go["l"])||{},f=null===b||void 0===b?void 0:b[p],h=null===f||void 0===f?void 0:f.wmainWrapper;return m=m===go["k"]?h:m,null===(c=s)||void 0===c?void 0:c.filter((function(e){return e.from_address===m||e.to_address===m||(m===go["k"]||m===h)&&(e.from_address===go["k"]||e.from_address===h||e.to_address===go["k"]||e.to_address===h)}))}return s},filterLimitOrders:function(){if(this.isCurrentToken){var e,t=this.limitToken1.address;if("solana"===this.chain){var o,n=["So11111111111111111111111111111111111111112","EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v","Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"];return null===(o=this.limitOrders)||void 0===o?void 0:o.filter((function(e){var o=n.indexOf(e.from_token),i=n.indexOf(e.to_token);return o<=i?e.from_token===t:e.to_token===t}))}return null===(e=this.limitOrders)||void 0===e?void 0:e.filter((function(e){return e.target_token===t}))}return this.limitOrders},filterNoGasTxList:function(){if(this.isCurrentToken){var e,t=this.limitToken1.address;return null===(e=this.noGasTxList)||void 0===e?void 0:e.filter((function(e){return e.from_token===t||e.to_token===t}))}return this.noGasTxList},taxStr:function(){var e,t,o,n,i,a,l,s=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.totalTax)||((null===(t=this.swapQuoteInfo)||void 0===t?void 0:t.total_sell_tax)||0)+((null===(o=this.swapQuoteInfo)||void 0===o?void 0:o.total_buy_tax)||0);return s>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(s,1),"%)"):0===this.activeTab&&(null===(n=this.baseTokenExtra)||void 0===n?void 0:n.buy_tax)>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(null===(a=this.baseTokenExtra)||void 0===a?void 0:a.buy_tax,1),"%)"):1===this.activeTab&&(null===(i=this.baseTokenExtra)||void 0===i?void 0:i.sell_tax)>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(null===(l=this.baseTokenExtra)||void 0===l?void 0:l.sell_tax,1),"%)"):""},priceImpactV:function(){var e,t,o,n,i,a,l;if(!Number(this.fromAmount)&&!Number(this.toAmount))return"";if(this.isERC314)return"";var s=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"";if("evm"!==localStorage.okxwallet_chain&&(window.solana||null!==(o=window)&&void 0!==o&&null!==(n=o.trustwallet)&&void 0!==n&&n.solana&&(null===(i=window.ethereum)||void 0===i||null===(a=i.address)||void 0===a||null===(l=a.startsWith)||void 0===l||!l.call(a,"0x"))&&window.ethereum.address)&&(s="solana"),"solana"===s)return new Qo.a(this.priceImpactSolana||0);if("ton"===s)return new Qo.a(this.priceImpactTon||0);var r=this.swapQuoteInfo.routerPath,c=(null===r||void 0===r?void 0:r.length)>0?null===r||void 0===r?void 0:r[0]:this.swapQuoteInfo.fromToken||null,u=(null===r||void 0===r?void 0:r.length)>0?null===r||void 0===r?void 0:r[r.length-1]:this.swapQuoteInfo.toToken||null;if(c&&u){var d=this.swapQuoteInfo.from_price,m=this.swapQuoteInfo.to_price,p=Gt["utils"].formatUnits(c.amount,c.decimals),b=Gt["utils"].formatUnits(u.amount,u.decimals);return new Qo.a(p).times(d).div(new Qo.a(b).times(m)).minus(1).abs()}return""},priceImpact:function(){return this.priceImpactV?this.$f.formatNumber2(this.priceImpactV.times(100).toFixed(),2)+"%":""},swapButtonColor:function(){var e,t,o,n;return this.$store.state.currentAccount?null!==(e=this.priceImpactV)&&void 0!==e&&null!==(t=e.gt)&&void 0!==t&&t.call(e,.4)?"#999":null!==(o=this.priceImpactV)&&void 0!==o&&null!==(n=o.gt)&&void 0!==n&&n.call(o,.1)?"#F7933F":0===this.activeTab?this.$store.getters.upColor[3]:1===this.activeTab?this.$store.getters.downColor[3]:"#558BED":"#999"},limitButtonColor:function(){return this.$store.state.currentAccount?0===this.activeTab?this.$store.getters.upColor[3]:1===this.activeTab?this.$store.getters.downColor[3]:"#558BED":"#999"},priceImpactColor:function(){var e,t,o,n,i,a;return null!==(e=this.priceImpactV)&&void 0!==e&&null!==(t=e.gt)&&void 0!==t&&t.call(e,.4)?"#F81111":null!==(o=this.priceImpactV)&&void 0!==o&&null!==(n=o.gt)&&void 0!==n&&n.call(o,.1)?"#F7933F":null!==(i=this.priceImpactV)&&void 0!==i&&null!==(a=i.gt)&&void 0!==a&&a.call(i,.05)?"#f8be46":""},swapTokens:function(){var e,t=Object(Ot["a"])(null===(e=this.userBalanceTokens.slice())||void 0===e?void 0:e.filter((function(e){return!e.isWrapped})));return this.tokens.slice().forEach((function(e){var o=t.find((function(t){return t.id===e.id}));o?o.logo_url=o.logo_url||e.logo_url:t.push(e)})),t.length>0?t:this.tokens.slice()},isShow:function(){var e,t,o,n,i,a,l=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"",s=ln["a"].get("chainConfig",go["l"])||{};return!(!s||!l)&&(null!==(o=null===(n=s[l])||void 0===n||null===(i=n.swaps)||void 0===i||null===(a=i.some)||void 0===a?void 0:a.call(i,(function(e){return e.router_address})))&&void 0!==o&&o)},fromToken:function(){return 1===this.activeTab?this.token1:this.token2},toToken:function(){return 1===this.activeTab?this.token2:this.token1},disabled1:function(){var e,t;if(!Number(this.limitPrice))return!0;var o=null===(e=this.baseToken)||void 0===e||null===(t=e.token)||void 0===t?void 0:t.current_price_usd;return 1===this.activeTab&&this.limitPrice<o},disabled2:function(){var e,t;if(!Number(this.limitPrice))return!0;var o=null===(e=this.baseToken)||void 0===e||null===(t=e.token)||void 0===t?void 0:t.current_price_usd;return 0===this.activeTab&&this.limitPrice>o},estimatedFee:function(){var e,t,o=null!==(e=this.swapInfo.gasValue)&&void 0!==e?e:go["d"];if(!o)return"0";var n=this.$store.getters.netId,i=n?Object(kt["a"])({},(null===(t=this.gasSetting)||void 0===t?void 0:t[n])||{}):{},a=(null===i||void 0===i?void 0:i.customGasPrice)||go["c"],l="bsc"===n?a:this.gasPrice,s=this.nativePrice;return this.$f.formatNumberCurrencyUnit(new Qo.a(o.toString()).times(s).times(l).div(String(Math.pow(10,18))).toFixed()||"0",2)},customGasPrice:function(){var e,t,o=this.$store.getters.netId,n=(null===(e=this.gasSetting)||void 0===e||null===(t=e[o])||void 0===t?void 0:t.customGasPrice)||go["c"],i="bsc"===o?n:this.gasPrice;return i},wSOLAccount:function(){var e;if(!this.$store.state.currentAccount||"solana"!==this.chain)return null;var t=null===(e=this.userBalanceTokens)||void 0===e?void 0:e.find((function(e){return e.isWrapped}));return t},wSOLBalance:function(){var e,t;if(!this.$store.state.currentAccount||"solana"!==this.chain)return"0";var o=null===(e=this.userBalanceTokens)||void 0===e||null===(t=e.find((function(e){return e.isWrapped})))||void 0===t?void 0:t.balance;return o||"0"},isPumpCanSwap:function(){var e=(this.isPump||this.isMoonshot)&&"So11111111111111111111111111111111111111112"!==this.token2.address&&"solana"===this.token2.chain,t=(this.isFourMeme||this.isFlap)&&this.token2.address!==go["k"]&&"bsc"===this.token2.chain,o=this.isSunPump>0&&this.token2.address!==go["k"];return!e&&!t&&!o},isOnlyGetAmountsOut:function(){var e,t,o,n,i,a,l,s,r,c,u,d,m,p=["viridian","aerodrome","flapswap"],b=(null===(e=this.baseToken)||void 0===e||null===(t=e.pairs)||void 0===t||null===(o=t[0])||void 0===o?void 0:o.amm)&&(null===(n=["fourmeme","fourmemev2"])||void 0===n?void 0:n.includes(null===(i=this.baseToken)||void 0===i||null===(a=i.pairs)||void 0===a||null===(l=a[0])||void 0===l?void 0:l.amm)),f=(null===(s=this.baseToken)||void 0===s||null===(r=s.pairs)||void 0===r||null===(c=r[0])||void 0===c?void 0:c.amm)&&p.includes(null===(u=this.baseToken)||void 0===u||null===(d=u.pairs)||void 0===d||null===(m=d[0])||void 0===m?void 0:m.amm);return"ton"===this.chain||f||b||!1},isInsufficientTon:function(){if("ton"===this.chain){var e,t,o,n,i=(null===(e=this.tonQuoteResponse)||void 0===e?void 0:e.totalTransferAmount)||0,a=(null===(t=this.userBalanceTokens)||void 0===t||null===(o=t.find)||void 0===o||null===(n=o.call(t,(function(e){return e.address===go["k"]})))||void 0===n?void 0:n.initBalance)||0;if(i&&new Qo.a(i).gt(a))return!0}return!1}},watch:{"$route.params.id":function(e){e&&"Swap"===this.$route.name&&(this.autoSlippageValue=On,this.isTaxHigh=!1,this.isCannotSellAll=!1,this.baseTokenExtra={},this.baseTokenPrice=0,this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.selectedRouterIndex=0,this.getBaseToken(),this.getUserAllTxs(),this.getUserTokenList(),this.getAllowance(),this.getTokenDetails(),2===this.selected?this.supportChain():0!==this.selected&&1!==this.selected&&3!==this.selected||this.supportChainLimit(),this.getLimitAllowance())},"$store.state.currentAccount":function(e){e&&"Swap"===this.$route.name&&(this.autoSlippageValue=On,this.isTaxHigh=!1,this.isCannotSellAll=!1,this.selectedRouterIndex=0,this.getUserAllTxs(),this.getUserTokenList(),this.getSwapTokenList(),this.getAllowance(),this.getTokenDetails(),this.getLimitAllowance())},isPairShowMore:function(){this.getLeftHeight()},"$store.state.ws.tx":function(e){var t=this;this.tx=e,fn||(fn=setTimeout((function(){var e,o=t.tx,n=t.baseToken.token.chain||"",i=ln["a"].get("chainConfig",go["l"])||{},a=null===i||void 0===i?void 0:i[n],l=null===a||void 0===a?void 0:a.wmainWrapper,s=null===(e=t.baseToken)||void 0===e?void 0:e.token.token;s===go["k"]&&n&&l&&(s=l);var r=t.baseToken.token.price_change,c=100*Number(t.baseToken.token.current_price_usd)/(100+Number(r));o.from_address===s?(t.baseToken.token.current_price_usd=o.from_price_usd,t.baseToken.token.price_change=100*(o.from_price_usd-c)/c):o.to_address===s&&(t.baseToken.token.current_price_usd=o.to_price_usd,t.baseToken.token.price_change=100*(o.to_price_usd-c)/c),o.from_address===t.limitToken1.address?t.limitToken1.price=o.from_price_usd:o.to_address===t.limitToken1.address&&(t.limitToken1.price=o.to_price_usd),o.to_address===t.limitToken2.address?t.limitToken2.price=o.to_price_usd:o.from_address===t.limitToken2.address&&(t.limitToken2.price=o.from_price_usd),t.updateKline(o);var u=t.baseToken.pairs.findIndex((function(e){return e.pair===o.pair_address}));if(u>-1){var d=t.baseToken.pairs[u];o.from_address===d.token0_address?(o.from_reserve&&(t.baseToken.pairs[u].reserve0=o.from_reserve,t.baseToken.pairs[u].token0_price_usd=o.from_price_usd),o.to_reserve&&(t.baseToken.pairs[u].reserve1=o.to_reserve,t.baseToken.pairs[u].token1_price_usd=o.to_price_usd)):(o.to_reserve&&(t.baseToken.pairs[u].reserve0=o.to_reserve,t.baseToken.pairs[u].token0_price_usd=o.to_price_usd),o.from_reserve&&(t.baseToken.pairs[u].reserve1=o.from_reserve,t.baseToken.pairs[u].token1_price_usd=o.from_price_usd))}fn=null}),1e3))},types:function(e){var t,o=this,n=(e||[]).some((function(e){return e.value===o.selected}));n||(this.selected=(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.value)||2)},selected:function(e){var t,o,n;(this.$router.replace({name:"Swap",params:Object(kt["a"])(Object(kt["a"])({},this.$route.params),{},{type:e})}),2===this.selected)?(null===(t=this.$refs)||void 0===t||null===(o=t.percentStep)||void 0===o||null===(n=o.handleClick)||void 0===n||n.call(o,0),this.fromAmount="",this.toAmount="",this.getAllowance(),this.tabActive1="swap"):0===this.selected||1===this.selected?(this.supportChainLimit(),this.getLimitAllowance(),"solana"!==this.chain?(this.limitPrice=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"",this.triggerPrice=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):""):this.limitSolanaPriceU=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"",this.tabActive1="limit",this.quoteLimitSolana()):3===this.selected&&(this.supportChainLimit(),this.getLimitAllowance(),this.tabActive1="noGas")},tabActive1:function(e){"swap"===e?this.getUserAllTxs():"limit"===e?this.getLimitOrder():"noGas"===e&&this.getNoGasList()}},mounted:function(){var e,t,o,n,i,a,l,s=this;if(this.getFeeInfo(),window.ton)Object(un["a"])().then((function(e){console.log(e),s.initActivated()}));else if("evm"!==localStorage.okxwallet_chain&&(null!==(e=window)&&void 0!==e&&e.solana||null!==(t=window)&&void 0!==t&&null!==(o=t.trustwallet)&&void 0!==o&&o.solana&&(null===(n=window.ethereum)||void 0===n||null===(i=n.address)||void 0===i||null===(a=i.startsWith)||void 0===a||!a.call(i,"0x"))&&window.ethereum.address))Object(sn["d"])().then((function(e){s.initActivated()}));else if(!window.ethereum&&null!==(l=window)&&void 0!==l&&l.tronLink)Object(nn["a"])().then((function(e){console.log("connectTron",e),s.initActivated()}));else try{window.ethereum?Object(cn["a"])().then((function(e){s.initActivated()})):this.initActivated()}catch(r){console.log(r)}},activated:function(){},methods:{init:function(){this.getBaseToken(),this.getUserAllTxs(),this.getUserTokenList(),this.getAllowance(),this.getSwapTokenList(),2===this.selected?this.supportChain():0!==this.selected&&1!==this.selected&&3!==this.selected||this.supportChainLimit(),this.getLimitAllowance(),this.getLimitOrder(),this.getNoGasList()},initActivated:function(){var e,t,o,n,i,a,l;this.$f.setSwapSendType(""),this.handleWalletAddress(!1),this.selected=this.$route.params.type?Number(this.$route.params.type):2,3!==this.selected||null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appExchangeNoGas&&"eth"!==this.$store.getters.netId||(this.selected=2),this.tabActive1=null!==(o=jn[this.selected])&&void 0!==o?o:"swap";var s=sessionStorage.swap_token1?JSON.parse(sessionStorage.swap_token1):"",r=null===(n=this.$f.getAddressAndChainFromId(null===(i=this.$route.params)||void 0===i?void 0:i.id))||void 0===n?void 0:n.address,c=this.$store.getters.netId||(null===(a=this.$f.getAddressAndChainFromId(null===(l=this.$route.params)||void 0===l?void 0:l.id))||void 0===a?void 0:a.chain)||"";r&&(r!==this.token1.address||s&&s.address!==r)?(this.token1={address:r||"",chain:c||"",balance:0,symbol:""},this.limitToken1=Object(kt["a"])({},this.token1)):r||!s||c!==s.chain||this.token1.address||(this.limitToken1=Object(kt["a"])({},this.swap_token1));var u=sessionStorage.swap_token2?JSON.parse(sessionStorage.swap_token2):"";u&&c===u.chain&&!this.token2.address&&(this.token2=Object(kt["a"])({},u),this.limitToken2=Object(kt["a"])({},u)),this.getBaseToken(),this.getUserTokenList(),this.getAllowance(),this.getSwapTokenList(),2===this.selected?this.supportChain():0!==this.selected&&1!==this.selected&&3!==this.selected||this.supportChainLimit(),"swap"===this.tabActive1?this.getUserAllTxs():"limit"===this.tabActive1?this.getLimitOrder():"noGas"===this.tabActive1&&this.getNoGasList(),this.getLimitAllowance(),this.getNativeTokenPrice(),this.getGasPrice(),this.$store.dispatch("getTronAccountResource")},formatUnits:Gt["utils"].formatUnits,formatPrice:function(e){return this.$f.formatNumber(e&&""!==e&&this.$store.state.tokensPrice[e]||0)},getPrice:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!e||!t||isNaN(Number(e))||isNaN(Number(t))?"0":this.$f.formatNumber2(new Qo.a(t).times(100-o).div(100*e).toFixed(7))||"0"},getFeeInfo:function(){var e=this;Object(vo["C"])().then((function(t){var o=e.$store.getters.netId;e.$store.state.feeInfo=e.$f.formatFee(t,o)}))},watchFromAmount:function(){if(!this.quoteLoading||this.isAmount){var e=this.fromAmount,t=Number(e);""===e||"."===e?(this.fromAmount="",this.toAmount="",this.quoteLoading=!1):0===t&&0!==Number(this.toAmount)?(this.toAmount=0,this.quoteLoading=!1):t&&(this.isAmount=!0,this.toAmount="",this.getQuoteInfo())}},watchToAmount:function(){if(!this.quoteLoading||!this.isAmount){var e=this.toAmount,t=Number(e);""===e||"."===e?(this.fromAmount="",this.toAmount="",this.quoteLoading=!1):0===t&&0!==Number(this.fromAmount)?(this.fromAmount=0,this.quoteLoading=!1):t&&(this.fromAmount="",this.isAmount=!1,this.getQuoteInfo(!1))}},handleFromAmountMax:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.fromToken.balance||0;if(e){var o,n=this.fromToken.decimals||0;if((null===(o=this.fromToken)||void 0===o?void 0:o.address)===go["k"]){var i=this.fromToken.chain,a=go["j"][i]||.01;t=new Qo.a(t).minus(a).times(e).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(n,"})?")))[0]}else t=new Qo.a(t).times(e).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(n,"})?")))[0];0===Number(t)&&(t="")}this.fromAmount=t<0?0:t,this.watchFromAmount()},handlePercentChange:function(e,t){if(!t){var o=e/100,n=this.fromToken.balance||0;if(o){var i,a,l=this.fromToken.decimals||0;if((null===(i=this.fromToken)||void 0===i?void 0:i.address)===go["k"]||"So11111111111111111111111111111111111111112"===(null===(a=this.fromToken)||void 0===a?void 0:a.address)){var s=this.fromToken.chain,r=go["j"][s]||.01;if(new Qo.a(n).lt(r))return void this.$dialog.alert({title:this.$t("tips"),message:this.$t("balanceNotEnough",{n:r,s:this.fromToken.symbol}),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"});n=new Qo.a(n).minus(r).times(o).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(l,"})?")))[0]}else n=new Qo.a(n).times(o).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(l,"})?")))[0];0===Number(n)&&(n="")}else n="";this.fromAmount!==n&&(this.fromAmount=n<0?0:n,this.watchFromAmount())}},handleToAmountMax:function(){this.toAmount=this.toToken.balance||0,this.watchToAmount()},switchTab:function(e){this.activeTab=e,2===this.selected?(this.$refs.percentStep.handleClick(0),this.fromAmount="",this.toAmount="",this.getAllowance()):0!==this.selected&&1!==this.selected&&3!==this.selected||(this.$refs.percentStep1.handleClick(0),this.limitAmount1="",this.limitAmount2="",this.getLimitAllowance())},handlePercentChange1:function(e,t){if(!t){var o=e/100,n=0===this.activeTab?this.limitToken2:this.limitToken1,i=n.balance||0;if(o){var a=n.decimals||18;if((null===n||void 0===n?void 0:n.address)===go["k"]||"So11111111111111111111111111111111111111112"===(null===n||void 0===n?void 0:n.address)){var l=n.chain,s=go["j"][l]||.01;i=new Qo.a(i).minus(s).times(o).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0]}else i=new Qo.a(i).times(o).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0];0===Number(i)&&(i="")}else i="";0===this.activeTab?this.limitAmount2!==i&&(this.limitAmount2=i<0?0:i,this.watchLimitAmount2()):this.limitAmount1!==i&&(this.limitAmount1=i<0?0:i,this.watchLimitAmount1())}},watchLimitAmount1:function(){var e=this;this.limitQuoteLoading||(hn&&(clearTimeout(hn),hn=null),hn=setTimeout((function(){var t=e.limitAmount1,o=Number(t);""===t||"."===t?(e.limitAmount1="",e.limitAmount2=""):0===o&&0!==Number(e.limitAmount2)?e.limitAmount2=0:o&&(e.limitAmount2="",e.watchLimitPrice())}),500))},watchLimitAmount2:function(){var e=this;this.limitQuoteLoading||(vn&&(clearTimeout(vn),vn=null),vn=setTimeout((function(){var t=e.limitAmount2,o=Number(t);""===t||"."===t?(e.limitAmount1="",e.limitAmount2=""):0===o&&0!==Number(e.limitAmount1)?e.limitAmount1=0:o&&(e.limitAmount1="",e.watchLimitPrice())}),500))},watchLimitPrice:function(){var e=this;"solana"!==this.chain?this.supportChainLimit()&&(Number(this.limitPrice)&&(Number(this.limitAmount1)||Number(this.limitAmount2))&&this.limitToken1.address!==this.limitToken2.address&&""!==this.$store.state.wallet?(gn&&(clearTimeout(gn),gn=null),gn=setTimeout((function(){var t=0===e.activeTab?e.limitToken2:e.limitToken1,o=1===e.activeTab?e.limitToken2:e.limitToken1,n=Gt["utils"].parseUnits((0===e.activeTab?e.limitAmount2:e.limitAmount1)||"0",t.decimals).toString(),i=Gt["utils"].parseUnits((1===e.activeTab?e.limitAmount2:e.limitAmount1)||"0",o.decimals).toString(),a=t.address,l=o.address,s={from_token:a,to_token:l,amountIn:n,amountOut:i};3===e.selected&&(s.extraGas="250000"),e.limitQuoteLoading=!0,Object(vo["tb"])(s).then((function(t){var n,i,a,l;if(1!==t.toWrapper&&2!==t.toWrapper){e.limitGasU=t.gasU;var s=null===t||void 0===t||null===(n=t.routerPath)||void 0===n||null===(i=n.find)||void 0===i?void 0:i.call(n,(function(t){return t.address===e.limitToken1.address})),r=null===t||void 0===t||null===(a=t.routerPath)||void 0===a||null===(l=a.find)||void 0===l?void 0:l.call(a,(function(t){return t.address===e.limitToken2.address}));if(e.limitToken1.price=null===s||void 0===s?void 0:s.price,e.limitToken2.price=null===r||void 0===r?void 0:r.price,new Qo.a((null===s||void 0===s?void 0:s.amount)||0).lte(0)||new Qo.a((null===r||void 0===r?void 0:r.amount)||0).lte(0)||!t.isCanUseGas)e.$dialog.alert({title:e.$t("tips"),message:e.$t("limitOrderAmount"),confirmButtonText:e.$t("okay"),confirmButtonColor:"#558BED"});else{3===e.selected?e.limitAmount1&&e.limitAmount2?0===e.activeTab?e.limitAmount1=Gt["utils"].formatUnits(s.amount,s.decimals):e.limitAmount2=Gt["utils"].formatUnits(r.amount,r.decimals):e.limitAmount1?e.limitAmount2=Gt["utils"].formatUnits(r.amount,r.decimals):e.limitAmount2&&(e.limitAmount1=Gt["utils"].formatUnits(s.amount,s.decimals)):e.limitPrice&&e.limitAmount1&&e.limitAmount2?0===e.activeTab?e.limitAmount1=new Qo.a(Gt["utils"].formatUnits(s.amount,s.decimals)).times(s.price||0).div(e.limitPrice||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken1.decimals,"})?")))[0]:e.limitAmount2=new Qo.a(Gt["utils"].formatUnits(r.amount,r.decimals)).times(e.limitPrice||0).div(s.price||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken2.decimals,"})?")))[0]:e.limitPrice&&e.limitAmount1?e.limitAmount2=new Qo.a(Gt["utils"].formatUnits(r.amount,r.decimals)).times(e.limitPrice||0).div(s.price||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken2.decimals,"})?")))[0]:e.limitPrice&&e.limitAmount2&&(e.limitAmount1=new Qo.a(Gt["utils"].formatUnits(s.amount,s.decimals)).times(s.price||0).div(e.limitPrice||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken1.decimals,"})?")))[0]);var c=new Qo.a(e.limitSlippage||0);3===e.selected&&(c=new Qo.a(e.noGasSlippage||0)),c=new Qo.a(1).minus(c.div(100));var u=0===e.activeTab?e.limitAmount1:e.limitAmount2;e.limitMinReturn=new Qo.a(u||0).times(c).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(o.decimals,"})?")))[0]}}else e.limitQuoteLoading=!1})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.limitQuoteLoading=!1}))}),500)):this.limitToken1.address===this.limitToken2.address&&this.$toast({position:"top",message:this.$t("twoIdenticalTokens")})):this.watchLimitSolanaPrice()},minusLimitPrice:function(){this.limitPrice&&new Qo.a(this.limitPrice).gt("0")&&(this.limitPrice=this.$f.formatNumber(new Qo.a(this.limitPrice).times(.99).toFixed()),this.watchLimitPrice())},addLimitPrice:function(){this.limitPrice&&new Qo.a(this.limitPrice).gt("0")&&(this.limitPrice=this.$f.formatNumber(new Qo.a(this.limitPrice).times(1.01).toFixed()),this.watchLimitPrice())},quoteLimitTokenPrice:function(){var e=this,t=this.limitToken1.chain,o=this.limitToken1.address+"-"+t,n=this.limitToken2.address+"-"+t;return Object(vo["ib"])([o,n]).then(function(){var t=Object(gt["a"])(regeneratorRuntime.mark((function t(o){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.limitToken1.price=(null===o||void 0===o||null===(n=o[0])||void 0===n?void 0:n.current_price_usd)||0,e.limitToken2.price=(null===o||void 0===o||null===(i=o[1])||void 0===i?void 0:i.current_price_usd)||0,t.abrupt("return",[e.limitToken1.price,e.limitToken2.price]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getLeftHeight:function(){var e=this;this.$nextTick((function(){var t=Object(an["o"])(e.$refs.swapLeft),o=t.height;e.height=o}))},handleWalletAddress:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet?window.ethereum?(this.$store.state.importAddressVisible=!1,null!==(e=window)&&void 0!==e&&e.tronLink||this.$store.commit("changeConnectVisible",!0)):this.$toast({message:this.$t("browserWalletNotDetected"),position:"top"}):t&&this.$store.commit("changeDisconnectVisible",!0)},handleTaxSlippage:function(){if(1===this.activeTab){var e,t;if(Number(this.autoSlippageValue)>Number(null===(e=this.baseTokenExtra)||void 0===e?void 0:e.sell_tax)+1)return;var o=Math.max(Math.min(Number(null===(t=this.baseTokenExtra)||void 0===t?void 0:t.sell_tax)+1,49.99),.5);this.autoSlippageValue=String(Number(o.toFixed(2)))}else{var n,i;if(Number(this.autoSlippageValue)>Number(null===(n=this.baseTokenExtra)||void 0===n?void 0:n.buy_tax)+1)return;var a=Math.max(Math.min(Number(null===(i=this.baseTokenExtra)||void 0===i?void 0:i.buy_tax)+1,49.99),.5);this.autoSlippageValue=String(Number(a.toFixed(2)))}},onSubmit:function(){try{var e,t;if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return void this.handleWalletAddress();if(!this.supportChain())return;var o=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"";if(o!==this.netId)return void this.$toast({message:this.$t("plsSwitchChain",{chain:o}),position:"top"});2===this.selected&&(this.isApprove?this.getSwapTx():this.approve())}catch(n){console.log(n)}},getSwapTokenList:function(){var e,t,o=this,n=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"bsc";Object(vo["eb"])(n).then((function(e){var t,i;(o.tokens=(null===e||void 0===e?void 0:e.map((function(e){return Object(kt["a"])(Object(kt["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token,decimals:e.token===go["k"]?9:e.decimals})})))||[],"solana"===n)&&(o.tokens=null===(t=o.tokens)||void 0===t||null===(i=t.filter)||void 0===i?void 0:i.call(t,(function(e){return e.token!==go["k"]})).sort((function(e,t){return"So11111111111111111111111111111111111111112"===e.token?-1:1})));if((!o.token2.address||o.token1.address===o.token2.address||(o.isERC314||o.isFourMeme||o.isFlap||o.isSunPump>0)&&o.token2.address!==go["k"]||(o.isPump||o.isMoonshot)&&"solana"===n&&"So11111111111111111111111111111111111111112"===o.token2.address)&&o.tokens.length>0){var a=o.tokens.findIndex((function(e){return/USDT/.test(e.symbol)}));a=a<0?o.tokens.findIndex((function(e){return/USD/.test(e.symbol)})):a,a=a<0?0:a;var l,s=o.tokens[a];if(o.token1.address===s.address)s=0===a&&null!==(l=o.tokens[1])&&void 0!==l?l:o.tokens[0];if(o.isERC314||o.isPump||o.isMoonshot||o.isFourMeme||o.isFlap||o.isSunPump>0){var r,c,u=null===(r=o.tokens)||void 0===r||null===(c=r.slice)||void 0===c?void 0:c.call(r).find((function(e){return e.address===go["k"]||"So11111111111111111111111111111111111111112"===e.address}));o.token2=Object(kt["a"])({},u)}else o.token2=Object(kt["a"])({},s)}if((!o.limitToken2.address||o.limitToken1.address===o.limitToken2.address)&&o.tokens.length>0){var d=o.tokens.findIndex((function(e){return/USDT/.test(e.symbol)}));d=d<0?o.tokens.findIndex((function(e){return/USD/.test(e.symbol)})):d,d=d<0?0:d;var m,p=o.tokens[d];if(o.limitToken1.address===p.address)p=0===d&&null!==(m=o.tokens[1])&&void 0!==m?m:o.tokens[0];o.limitToken2=Object(kt["a"])({},p)}o.getTokenDetails()}))},getUserTokenList:function(){var e,t,o=this,n=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"bsc";Object(vo["nb"])(n).then((function(e){var t,i;"solana"===n||"ton"===n?o.userBalanceTokens=null===e||void 0===e?void 0:e.map((function(e){return Object(kt["a"])(Object(kt["a"])({},e),{},{value:e.balance})})):o.userBalanceTokens=(null===e||void 0===e||null===(t=e.map((function(e){return Object(kt["a"])(Object(kt["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token})})))||void 0===t||null===(i=t.filter)||void 0===i?void 0:i.call(t,(function(e){return(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag})))||[];o.userBalanceTokens.length>0&&"tron"!==n&&"brc20"!==n&&"solana"!==n&&"ton"!==n&&/^0x[0-9a-zA-Z]{40}$/.test(o.$store.state.currentAccount)&&Object(vo["r"])(o.userBalanceTokens.map((function(e){return e.token||""})),n).then((function(e){var t,n,i;o.userBalanceTokens=null===(t=o.userBalanceTokens)||void 0===t||null===(n=t.map)||void 0===n||null===(i=n.call(t,(function(t,o){return Object(kt["a"])(Object(kt["a"])({},t),{},{value:Gt["utils"].formatUnits(e[o],t.decimals||0)})})))||void 0===i?void 0:i.filter((function(e){return!!Number(e.value)}))}))}))},getTokenDetails:function(){var e=this;Promise.all([this.getToken2Info(),this.getToken1Info()]).then((function(){0===e.activeTab?e.allowance=e.token2.allowance||"0":e.allowance=e.token1.allowance||"0"}))},getToken2Info:function(){var e,t,o=this;return Object(vo["fb"])(null===(e=this.token2)||void 0===e?void 0:e.address,null===(t=this.token2)||void 0===t?void 0:t.chain,this.$f.getSwapContract(this.$store.getters.netId)).then(function(){var e=Object(gt["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("token2---",t),n=Object(kt["a"])({},t),n.address===o.token2.address&&(o.token2=Object(kt["a"])(Object(kt["a"])({},o.token2),n),sessionStorage.swap_token2=JSON.stringify(o.token2)),o.limitToken2=Object(kt["a"])(Object(kt["a"])({},o.limitToken2),n),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getToken1Info:function(){var e,t,o=this;return Object(vo["fb"])(null===(e=this.token1)||void 0===e?void 0:e.address,null===(t=this.token1)||void 0===t?void 0:t.chain,this.$f.getSwapContract(this.$store.getters.netId)).then(function(){var e=Object(gt["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("token1",t),n=Object(kt["a"])({},t),o.token1=Object(kt["a"])(Object(kt["a"])({},o.token1),n),sessionStorage.swap_token1=JSON.stringify(o.token1),o.limitToken1=Object(kt["a"])(Object(kt["a"])({},o.limitToken1),n),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getBaseToken:function(){var e,t=this,o=(null===(e=this.$route.params)||void 0===e?void 0:e.id)||"",n=this.$f.getAddressAndChainFromId(o,1),i=Object(jt["a"])(n,2),a=i[0],l=i[1];if(this.token1.address&&(a=this.token1.address),this.token1.chain&&(l=this.token1.chain),a&&l){var s=a+"-"+l,r=ln["a"].get("chainConfig",go["l"])||{},c=null===r||void 0===r?void 0:r[l],u=null===c||void 0===c?void 0:c.wmainWrapper,d=null===c||void 0===c?void 0:c.mainName;a===go["k"]&&l&&u&&(s=u+"-"+l);var m=Object(vo["M"])(s).then(function(){var e=Object(gt["a"])(regeneratorRuntime.mark((function e(o){var n,i,l,r,c,u,m,p,b,f,h,v,g,k,O,j,w;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("baseToken",o),t.baseToken=Object(kt["a"])(Object(kt["a"])({},o),a===go["k"]?{token:Object(kt["a"])(Object(kt["a"])({},o.token),{},{token:a,symbol:d,logoURI:t.$f.formatIcon(s)})}:{}),null!==o&&void 0!==o&&null!==(n=o.pairs)&&void 0!==n&&n.some((function(e){return"moonshot"===e.amm}))?sessionStorage.isMoonshot=!0:sessionStorage.removeItem("isMoonshot"),null!==o&&void 0!==o&&null!==(i=o.pairs)&&void 0!==i&&i.every((function(e){var t,o;return null===(t=e.amm)||void 0===t||null===(o=t.includes)||void 0===o?void 0:o.call(t,"meteora")}))?sessionStorage.isMeteora=!0:sessionStorage.removeItem("meteora"),h=null===o||void 0===o||null===(l=o.pairs)||void 0===l?void 0:l[0],v=null===h||void 0===h?void 0:h.pair,!v||"moonshot"===(null===h||void 0===h?void 0:h.amm)||null!==h&&void 0!==h&&null!==(r=h.amm)&&void 0!==r&&r.includes("fourmeme")||"flapswap"===(null===h||void 0===h?void 0:h.amm)||"sunpump"===(null===h||void 0===h?void 0:h.amm)||(null===h||void 0===h?void 0:h.target_token)!==v&&!new RegExp(null===h||void 0===h?void 0:h.target_token,"i").test(v)?t.isERC314=!1:(t.isERC314=!0,t.token2.address!==go["k"]&&(null===(g=t.tokens)||void 0===g?void 0:g.length)>0&&(j=Object(kt["a"])({},null===(k=t.tokens)||void 0===k||null===(O=k.slice())||void 0===O?void 0:O.find((function(e){return e.address===go["k"]}))),t.token2=Object(kt["a"])({},j),setTimeout((function(){t.handleSelectToken2(j)}),1e3))),"moonshot"===(null===h||void 0===h?void 0:h.amm)?t.isMoonshot=!0:t.isMoonshot=!1,null!==h&&void 0!==h&&null!==(c=h.amm)&&void 0!==c&&c.includes("fourmeme")?t.isFourMeme=!0:t.isFourMeme=!1,"flapswap"===(null===h||void 0===h?void 0:h.amm)?t.isFlap=!0:t.isFlap=!1,"sunpump"===(null===h||void 0===h?void 0:h.amm)?t.isSunPump=1:null!==o&&void 0!==o&&null!==(u=o.pairs)&&void 0!==u&&u.some((function(e){return"sunpump"===e.amm}))?t.isSunPump=2:t.isSunPump=0,t.amm=null===h||void 0===h?void 0:h.amm,t.getSolanaPumpInfo().catch(Object(gt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})))),w=null===h||void 0===h?void 0:h.chain,v&&t.getKlineHistory(v+"-"+w),t.token1=Object(kt["a"])(Object(kt["a"])(Object(kt["a"])({},t.token1),{},{address:t.baseToken.token.token},t.baseToken.token),{},{decimals:(null===(m=t.baseToken.token)||void 0===m?void 0:m.decimal)||(null===(p=t.baseToken.token)||void 0===p?void 0:p.decimals)}),sessionStorage.swap_token1=JSON.stringify(t.token1),t.limitToken1=Object(kt["a"])(Object(kt["a"])(Object(kt["a"])({},t.limitToken1),{},{address:t.baseToken.token.token},t.baseToken.token),{},{decimals:(null===(b=t.baseToken.token)||void 0===b?void 0:b.decimal)||(null===(f=t.baseToken.token)||void 0===f?void 0:f.decimals)}),t.getLeftHeight(),"solana"===w?t.limitSolanaPriceU=t.baseToken.token.current_price_usd?t.$f.formatNumber(t.baseToken.token.current_price_usd):"":(t.limitPrice=t.baseToken.token.current_price_usd?t.$f.formatNumber(t.baseToken.token.current_price_usd):"",t.triggerPrice=t.baseToken.token.current_price_usd?t.$f.formatNumber(t.baseToken.token.current_price_usd):""),t.quoteLimitSolana(),e.abrupt("return",o);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=Object(vo["gb"])(o).then(function(){var e=Object(gt["a"])(regeneratorRuntime.mark((function e(o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.baseTokenExtra=Object(kt["a"])(Object(kt["a"])({},o),{},{buy_tax:Number(Number(o.buy_tax).toFixed(2)),sell_tax:Number(Number(o.sell_tax).toFixed(2))}),t.handleTaxSlippage(),e.abrupt("return",o);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Promise.all([m,p]).finally((function(){console.log("initWs",s),t.$store.dispatch("initWs",s)}));var b=["0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee-eth","0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2-eth","0xdac17f958d2ee523a2206206994597c13d831ec7-eth","0x4fabb145d64652a948d72533023f6e7a623c7c53-eth","0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48-eth"];a===go["k"]||b.includes(o)?(this.hasMEVBot=!1,this.isHotToken=!1):Object(vo["H"])(o).then((function(e){t.hasMEVBot=(null===e||void 0===e?void 0:e.has_MEVBot)||!1,t.isHotToken=(null===e||void 0===e?void 0:e.is_hot_token)||!1})).catch((function(e){t.hasMEVBot=!1,t.isHotToken=!1}))}},getSelectedRouter:function(e){this.dialogListRouterVisible=!1,this.selectedRouterIndex=e,this.selectedRouter()},getQuoteInfo:function(){var e,t,o=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if("Swap"===this.$route.name&&this.supportChain())if(Number(this.fromAmount)||Number(this.toAmount))if(this.token1.address!==this.token2.address){mn&&(clearTimeout(mn),mn=null);var i=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"";mn=setTimeout((function(){o.dealGetQuoteInfo(n,i)}),500)}else this.$toast({position:"top",message:this.$t("twoIdenticalTokens")});else this.quoteLoading=!1},dealGetQuoteInfo:function(e,t){var o=this;return Object(gt["a"])(regeneratorRuntime.mark((function n(){var i,a,l,s,r,c,u,d,m,p,b,f,h,v,g,k,O,j,w,S,y,T,_,N,V,$,x,E,B,A,C,I,P,D,L,F,R,M,U,G,z,Q,W,q,H,K,Y,J,X,Z,ee,te,oe,ne,ie;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!o.fromAmount&&!o.toAmount||!o.fromToken.address||!o.toToken.address){n.next=91;break}if(r=o.fromToken.decimals,c=o.toToken.decimals,"solana"!==t){n.next=6;break}return o.quoteSolana(e,t),n.abrupt("return");case 6:if("ton"!==t){n.next=9;break}return o.quoteTon(e,t),n.abrupt("return");case 9:if("bsc"!==t){n.next=13;break}if(u=!((o.isFourMeme||o.isFlap)&&o.token2.address!==go["k"]&&"bsc"===o.token2.chain),u){n.next=13;break}return n.abrupt("return");case 13:if("tron"!==t){n.next=17;break}if(d=!(o.isSunPump>0&&o.token2.address!==go["k"]&&"tron"===o.token2.chain),d){n.next=17;break}return n.abrupt("return");case 17:if(o.quoteLoading=!0,m={from_token:o.fromToken.address,to_token:o.toToken.address,amountIn:e?Gt["utils"].parseUnits(new Qo.a(o.fromAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(r,"})?")))[0],r).toString():0,amountOut:e?0:Gt["utils"].parseUnits(new Qo.a(o.toAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(c,"})?")))[0],c).toString()},!o.isFourMeme){n.next=44;break}return n.prev=20,n.next=23,Object(vo["sb"])(m,t);case 23:j=n.sent,e?o.toAmount=Gt["utils"].formatUnits((null===j||void 0===j?void 0:j.amountOut)||"0",null===(w=o.toToken)||void 0===w?void 0:w.decimals):o.fromAmount=Gt["utils"].formatUnits((null===j||void 0===j?void 0:j.amountIn)||"0",null===(S=o.fromToken)||void 0===S?void 0:S.decimals),o.swapRouterPath=[{symbol:null===(p=o.fromToken)||void 0===p?void 0:p.symbol,nextAmm:"fourmeme"},{symbol:null===(b=o.toToken)||void 0===b?void 0:b.symbol,nextAmm:""}],o.swapQuoteInfo.fromAmount=Gt["utils"].parseUnits(o.fromAmount,null===(f=o.fromToken)||void 0===f?void 0:f.decimals).toString(),o.swapQuoteInfo.toAmount=Gt["utils"].parseUnits(o.toAmount,null===(h=o.toToken)||void 0===h?void 0:h.decimals).toString(),o.swapQuoteInfo.fromToken=Object(kt["a"])(Object(kt["a"])({},o.fromToken),{},{amount:o.swapQuoteInfo.fromAmount}),o.swapQuoteInfo.toToken=Object(kt["a"])(Object(kt["a"])({},o.toToken),{},{amount:o.swapQuoteInfo.toAmount}),o.swapQuoteInfo.quoteResult=Object(kt["a"])({},j),o.swapQuoteInfo.isAmountOut=!e,o.swapQuoteInfo.isFourMeme=!0,o.getAllowance(),y=(null===(v=o.fromToken)||void 0===v?void 0:v.address)+"-"+(null===(g=o.fromToken)||void 0===g?void 0:g.chain),T=(null===(k=o.toToken)||void 0===k?void 0:k.address)+"-"+(null===(O=o.toToken)||void 0===O?void 0:O.chain),Object(vo["ib"])([y,T]).then(function(){var e=Object(gt["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o.swapQuoteInfo.from_price=(null===t||void 0===t||null===(n=t[0])||void 0===n?void 0:n.current_price_usd)||0,o.swapQuoteInfo.to_price=(null===t||void 0===t||null===(i=t[1])||void 0===i?void 0:i.current_price_usd)||0,o.swapQuoteInfo.isFourMeme=!0;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o.quoteLoading=!1,n.next=43;break;case 39:n.prev=39,n.t0=n["catch"](20),o.quoteLoading=!1,o.$f.handleError(n.t0);case 43:return n.abrupt("return");case 44:if(!("tron"===t&&o.isSunPump>0)){n.next=69;break}return n.prev=45,n.next=48,Object(vo["vb"])(Object(kt["a"])(Object(kt["a"])({},m),{},{isSunPump:o.isSunPump}),t);case 48:C=n.sent,e?o.toAmount=Gt["utils"].formatUnits((null===C||void 0===C?void 0:C.amountOut)||"0",null===(I=o.toToken)||void 0===I?void 0:I.decimals):o.fromAmount=Gt["utils"].formatUnits((null===C||void 0===C?void 0:C.amountIn)||"0",null===(P=o.fromToken)||void 0===P?void 0:P.decimals),o.swapRouterPath=[{symbol:null===(_=o.fromToken)||void 0===_?void 0:_.symbol,nextAmm:"sunpump"},{symbol:null===(N=o.toToken)||void 0===N?void 0:N.symbol,nextAmm:""}],o.swapQuoteInfo.fromAmount=Gt["utils"].parseUnits(o.fromAmount,null===(V=o.fromToken)||void 0===V?void 0:V.decimals).toString(),o.swapQuoteInfo.toAmount=Gt["utils"].parseUnits(o.toAmount,null===($=o.toToken)||void 0===$?void 0:$.decimals).toString(),o.swapQuoteInfo.fromToken=Object(kt["a"])(Object(kt["a"])({},o.fromToken),{},{amount:o.swapQuoteInfo.fromAmount}),o.swapQuoteInfo.toToken=Object(kt["a"])(Object(kt["a"])({},o.toToken),{},{amount:o.swapQuoteInfo.toAmount}),o.swapQuoteInfo.quoteResult=Object(kt["a"])({},C),o.swapQuoteInfo.isAmountOut=!e,o.swapQuoteInfo.isSunPump=o.isSunPump,o.getAllowance(),D=(null===(x=o.fromToken)||void 0===x?void 0:x.address)+"-"+(null===(E=o.fromToken)||void 0===E?void 0:E.chain),L=(null===(B=o.toToken)||void 0===B?void 0:B.address)+"-"+(null===(A=o.toToken)||void 0===A?void 0:A.chain),Object(vo["ib"])([D,L]).then(function(){var e=Object(gt["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o.swapQuoteInfo.from_price=(null===t||void 0===t||null===(n=t[0])||void 0===n?void 0:n.current_price_usd)||0,o.swapQuoteInfo.to_price=(null===t||void 0===t||null===(i=t[1])||void 0===i?void 0:i.current_price_usd)||0,o.swapQuoteInfo.isSunPump=o.isSunPump;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o.quoteLoading=!1,n.next=68;break;case 64:n.prev=64,n.t1=n["catch"](45),o.quoteLoading=!1,o.$f.handleError(n.t1);case 68:return n.abrupt("return");case 69:if(F=null===(i=o.baseToken)||void 0===i?void 0:i.pairs,(null===F||void 0===F||null===(a=F[0])||void 0===a?void 0:a.target_token)!==(null===F||void 0===F||null===(l=F[0])||void 0===l?void 0:l.pair)||null===F||void 0===F||null===(s=F[0])||void 0===s||!s.pair){n.next=87;break}return n.next=73,Object(vo["rb"])(m,t);case 73:if(R=n.sent,console.log("res",R),!R){n.next=87;break}return e?o.toAmount=Gt["utils"].formatUnits(R||"0",null===(Y=o.toToken)||void 0===Y?void 0:Y.decimals):o.fromAmount=Gt["utils"].formatUnits(R||"0",null===(J=o.fromToken)||void 0===J?void 0:J.decimals),o.isERC314=!0,o.swapRouterPath=[{symbol:null===(M=o.fromToken)||void 0===M?void 0:M.symbol,nextAmm:null===F||void 0===F||null===(U=F[0])||void 0===U?void 0:U.amm},{symbol:null===(G=o.toToken)||void 0===G?void 0:G.symbol,nextAmm:""}],o.swapQuoteInfo.fromAmount=Gt["utils"].parseUnits(o.fromAmount,null===(z=o.fromToken)||void 0===z?void 0:z.decimals).toString(),o.swapQuoteInfo.toAmount=Gt["utils"].parseUnits(o.toAmount,null===(Q=o.toToken)||void 0===Q?void 0:Q.decimals).toString(),o.swapQuoteInfo.fromToken=Object(kt["a"])(Object(kt["a"])({},o.fromToken),{},{amount:o.swapQuoteInfo.fromAmount}),o.swapQuoteInfo.toToken=Object(kt["a"])(Object(kt["a"])({},o.toToken),{},{amount:o.swapQuoteInfo.toAmount}),X=(null===(W=o.fromToken)||void 0===W?void 0:W.address)+"-"+(null===(q=o.fromToken)||void 0===q?void 0:q.chain),Z=(null===(H=o.toToken)||void 0===H?void 0:H.address)+"-"+(null===(K=o.toToken)||void 0===K?void 0:K.chain),Object(vo["ib"])([X,Z]).then(function(){var e=Object(gt["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o.swapQuoteInfo.from_price=(null===t||void 0===t||null===(n=t[0])||void 0===n?void 0:n.current_price_usd)||0,o.swapQuoteInfo.to_price=(null===t||void 0===t||null===(i=t[1])||void 0===i?void 0:i.current_price_usd)||0,o.swapQuoteInfo.isERC314=!0;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o.quoteLoading=!1,n.abrupt("return");case 87:ee="","core"===t&&(null===F||void 0===F?void 0:F.length)>0&&(console.log("pairs",F),oe=(null===F||void 0===F||null===(te=F.find)||void 0===te?void 0:te.call(F,(function(e){var t=[e.token0_address,e.token1_address];return t.includes(m.token0_address)||t.includes(m.token1_address)})))||(null===F||void 0===F?void 0:F[0]),ne=null===oe||void 0===oe?void 0:oe.amm,ie={shadowswap:"0x191e94fa59739e188dce837f7f6978d84727ad01"},ee=(null===ie||void 0===ie?void 0:ie[ne])||"0x40375c92d9faf44d2f9db9bd9ba41a3317a2404f",console.log("wrapper",ee)),o.isERC314=!1,Object(vo["qb"])(Object(kt["a"])(Object(kt["a"])({},m),{},{amm:o.amm}),ee,t).then((function(e){o.swapPathList=e,o.selectedRouter(e),o.getSwapGas()})).catch((function(t){o.$f.handleError(t),e?o.toAmount="":o.fromAmount="",o.$nextTick((function(){setTimeout((function(){o.quoteLoading=!1,o.countDownFinishReset()}),800)}))}));case 91:case"end":return n.stop()}}),n,null,[[20,39],[45,64]])})))()},quoteSolana:function(e,t){var o=this;return Object(gt["a"])(regeneratorRuntime.mark((function n(){var i,a,l,s,r,c,u,d,m,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("solana"!==t){n.next=23;break}if(i=!((o.isPump||o.isMoonshot)&&"So11111111111111111111111111111111111111112"!==o.token2.address&&"solana"===o.token2.chain),i){n.next=4;break}return n.abrupt("return");case 4:if(a=o.fromToken.decimals,l=o.toToken.decimals,localStorage.solanaSlippage||!(Date.now()>o.getKlineTime+15e3)){n.next=13;break}if(c=null===(s=o.baseToken)||void 0===s||null===(r=s.pairs)||void 0===r?void 0:r[0],u=null===c||void 0===c?void 0:c.pair,d=null===c||void 0===c?void 0:c.chain,!u){n.next=13;break}return n.next=13,o.getKlineHistory(u+"-"+d);case 13:if(m={inputMint:o.fromToken.address,inputDecimals:a,inputMintSymbol:o.fromToken.symbol,inputMintName:o.fromToken.symbol,inputAmount:o.fromAmount||0,outputMint:o.toToken.address,outputDecimals:l,outputMintSymbol:o.toToken.symbol,outputMintName:o.toToken.symbol,amount:e?Gt["utils"].parseUnits(new Qo.a(o.fromAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0],a).toString():Gt["utils"].parseUnits(new Qo.a(o.toAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(l,"})?")))[0],l).toString(),slippageBps:new Qo.a(o.solanaSlippage).times(100).toFixed(0),swapMode:e?"ExactIn":"ExactOut",slippage:o.solanaSlippage||19,isPump:o.isPump,isMoonshot:o.isMoonshot},p=o.quoteSolanaPreParams.amount&&Object.keys(o.quoteSolanaPreParams).every((function(e){return m[e]===o.quoteSolanaPreParams[e]})),!p){n.next=19;break}return n.abrupt("return");case 19:o.quoteSolanaPreParams=Object(kt["a"])({},m),setTimeout((function(){o.quoteSolanaPreParams={}}),15e3);case 21:return o.quoteLoading=!0,n.abrupt("return",Object(sn["h"])(m).then((function(t){var n,i;if(console.log("solanaQuoteResponse",t),t.routeInfo&&t.transaction){var s,r,c,u,d,m,p,b,f,h;if(o.solanaQuoteResponse=t,console.log("amountIn",t.routeInfo),null!==(s=t.routeInfo)&&void 0!==s&&s.isExactOut)o.fromAmount=(null===(d=t.routeInfo)||void 0===d||null===(m=d.amountOut)||void 0===m||null===(p=m.amount)||void 0===p?void 0:p.toFixed())||"0";else o.toAmount=(null===(b=t.routeInfo)||void 0===b||null===(f=b.amountOut)||void 0===f||null===(h=f.amount)||void 0===h?void 0:h.toFixed())||"0";console.log("amountOut",(null===(r=t.routeInfo)||void 0===r||null===(c=r.amountOut)||void 0===c||null===(u=c.amount)||void 0===u?void 0:u.toFixed())||"0"),o.quoteSwapTokenPrice()}else{var v,g;if(e)if(t.outAmount)o.solanaQuoteResponse=t,o.toAmount=Gt["utils"].formatUnits(t.outAmount||"0",l||(null===(v=o.toToken)||void 0===v?void 0:v.decimals)),o.quoteSwapTokenPrice();else o.$f.handleError("can not get quote");else if(t.inAmount)o.solanaQuoteResponse=t,o.fromAmount=Gt["utils"].formatUnits(t.inAmount||"0",a||(null===(g=o.fromToken)||void 0===g?void 0:g.decimals)),o.quoteSwapTokenPrice();else o.$f.handleError("can not get quote")}return o.solanaSwapBaseTokenPrice=null===(n=o.baseToken)||void 0===n||null===(i=n.token)||void 0===i?void 0:i.current_price_usd,o.getSwapTx(!1),o.quoteLoading=!1,o.quoteSolanaPreParams={},t})).catch((function(e){return console.log(e),o.$f.handleError((null===e||void 0===e?void 0:e.error)||e),o.$nextTick((function(){setTimeout((function(){o.quoteLoading=!1,o.quoteSolanaPreParams={},o.countDownFinishReset()}),800)})),Promise.resolve("")})));case 23:case"end":return n.stop()}}),n)})))()},quoteTon:function(e,t){var o=this;return Object(gt["a"])(regeneratorRuntime.mark((function n(){var i,a,l,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("ton"!==t){n.next=9;break}return i=o.fromToken.decimals,a=o.toToken.decimals,console.log("fromAmount",o.fromAmount,o.fromToken),console.log("toToken",o.toToken),l=o.fromToken.address===go["k"]?new Qo.a(o.fromAmount||0).times("0.997"):new Qo.a(o.fromAmount||0),s={inputToken:o.fromToken.address,outputToken:o.toToken.address,inputTokenAmount:Gt["utils"].parseUnits(l.toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(i,"})?")))[0],i).toString(),slippageBps:new Qo.a(o.tonSlippage).times(100).toFixed(0)},o.quoteLoading=!0,n.abrupt("return",Object(vo["kb"])(s).then((function(t){var n,i;if(console.log("tonQuoteResponse",t),t.amountOut&&t.payload){var l,s;if(o.tonQuoteResponse=t,console.log("amountIn",t.routeInfo),e)console.log("toDecimals",a,null===(l=o.toToken)||void 0===l?void 0:l.decimals),o.toAmount=Gt["utils"].formatUnits(t.amountOut||"0",a||(null===(s=o.toToken)||void 0===s?void 0:s.decimals));console.log("amountOut",o.toAmount),o.quoteSwapTokenPrice()}else o.$f.handleError("can not get quote");return o.tonSwapBaseTokenPrice=null===(n=o.baseToken)||void 0===n||null===(i=n.token)||void 0===i?void 0:i.current_price_usd,o.getSwapTx(!1),o.quoteLoading=!1,t})).catch((function(e){return console.log(e),o.$f.handleError((null===e||void 0===e?void 0:e.error)||e),o.$nextTick((function(){setTimeout((function(){o.quoteLoading=!1,o.quoteSolanaPreParams={},o.countDownFinishReset()}),800)})),Promise.resolve("")})));case 9:case"end":return n.stop()}}),n)})))()},quoteSwapTokenPrice:function(){var e=this,t=this.fromToken.chain,o=this.fromToken.address+"-"+t,n=this.toToken.address+"-"+t;return sessionStorage.swap_tokenPrice===o+"-"+n?(this.swapTokenPrice=[0,0],"solana"===t?this.priceImpactSolana=0:"ton"===t&&(this.priceImpactTon=0,this.tonSwapTokenPrice=[0,0])):sessionStorage.swap_tokenPrice=o+"-"+n,Object(vo["ib"])([o,n]).then(function(){var o=Object(gt["a"])(regeneratorRuntime.mark((function o(n){var i,a,l,s,r,c,u;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:l=(null===n||void 0===n||null===(i=n[0])||void 0===i?void 0:i.current_price_usd)||0,s=(null===n||void 0===n||null===(a=n[1])||void 0===a?void 0:a.current_price_usd)||0,e.swapTokenPrice=[l,s],r=e.fromAmount||0,c=e.toAmount||0,u=Math.abs(Number(r)*l/(Number(c)*s)-1),"solana"===t?e.priceImpactSolana=u:"ton"===t&&(e.priceImpactTon=u,e.tonSwapTokenPrice=[l,s]),console.log("priceImpactSolana",u);case 8:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}())},selectedRouter:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.swapPathList,o=t[this.selectedRouterIndex],n=t[this.selectedRouterIndex].routerPath,i=this.isAmount,a=this.fromToken.decimals,l=this.toToken.decimals,s=!1;if(i){var r,c=Gt["utils"].parseUnits(new Qo.a(this.fromAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0],a).toString(),u=(null===(r=n[0])||void 0===r?void 0:r.amount)||0;s=c===u}else{var d,m=Gt["utils"].parseUnits(new Qo.a(this.toAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(l,"})?")))[0],l).toString(),p=(null===(d=n[n.length-1])||void 0===d?void 0:d.amount)||0;s=m===p}if(s){if(1===o.from_cannot_sell_all){var b,f=new Qo.a(Gt["utils"].parseUnits(String(this.fromToken.balance),null===(b=this.fromToken)||void 0===b?void 0:b.decimals).toString()),h=new Qo.a(null===o||void 0===o?void 0:o.routerPath[0].amount);this.isCannotSellAll=f.gt(0)&&h.div(f).gt(.99999)}else this.isCannotSellAll=!1;this.isTax=o.totalTax>0||o.total_sell_tax>0||o.total_buy_tax>0;var v=this.getPriceImpact(o);if(this.isTax||v.gt(.5)){this.isTaxHigh=o.total_sell_tax+o.total_buy_tax+1>49.99;var g=o.totalTax||o.total_sell_tax+o.total_buy_tax||0,k=Number(v);if(this.autoSlippage){var O=g+k+(g>5||k>5?2.5:2);console.log("swapPathList",t),O=Math.max(Math.min(O,49.99),.5),this.autoSlippageValue=String(Number(O.toFixed(2)))}}else this.isTaxHigh=!1,"auto"===this.customSlippage&&(this.autoSlippageValue=On);if(console.log("autoSlippageValue",this.autoSlippageValue),(o.weight>5e4||o.totalTax>0||o.total_sell_tax>0||o.total_buy_tax>0)&&!this.hasMEVBot?this.autoSwapMode="fast":0===this.activeTab?this.autoSwapMode="protect":this.autoSwapMode="private",console.log("autoSwapMode",this.autoSwapMode),this.swapQuoteInfo=o,this.swapRouterPath=n.map((function(e,t){var n,i;return{symbol:e.symbol,nextAmm:(null===o||void 0===o||null===(n=o.pair_path)||void 0===n||null===(i=n[t])||void 0===i?void 0:i.amm)||""}})),console.log(),this.listRouter=t.map((function(t){var o=0,n=0;if(i){var a,l=t.routerPath[t.routerPath.length-1];o=Gt["utils"].formatUnits(l.amount||"0",(null===l||void 0===l?void 0:l.decimals)||(null===(a=e.toToken)||void 0===a?void 0:a.decimals))}else{var s=t.routerPath[0];n=Gt["utils"].formatUnits(s.amount||"0",(null===s||void 0===s?void 0:s.decimals)||e.fromToken.decimals)}var r=t.routerPath.map((function(e,o){var n,i;return{symbol:e.symbol,nextAmm:(null===t||void 0===t||null===(n=t.pair_path)||void 0===n||null===(i=n[o])||void 0===i?void 0:i.amm)||""}}));return{path:r,amount:i?o:n,priceImpact:t.priceImpact}})),i){var j,w=n[n.length-1];this.toAmount=Gt["utils"].formatUnits(w.amount||"0",(null===w||void 0===w?void 0:w.decimals)||(null===(j=this.toToken)||void 0===j?void 0:j.decimals))}else{var S,y=n[0];this.fromAmount=Gt["utils"].formatUnits(y.amount||"0",(null===y||void 0===y?void 0:y.decimals)||(null===(S=this.fromToken)||void 0===S?void 0:S.decimals))}var T=o.totalTax||o.total_sell_tax+o.total_buy_tax||0;this.baseTokenPrice=new Qo.a(this.toAmount).div(this.fromAmount).times(100-T).div(100).toFixed(),s&&this.$nextTick((function(){setTimeout((function(){e.quoteLoading=!1,e.countDownFinishReset()}),800)}))}},handleSelectToken2:function(e){sessionStorage.swap_token2=JSON.stringify(e),this.swapRouterPath=[],this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.autoSlippageValue=On,this.baseTokenPrice=0,this.selectedRouterIndex=0,this.fromAmount="",this.toAmount="",this.getAllowance(),this.getToken2Info()},handleSelectToken1:function(e){sessionStorage.swap_token1=JSON.stringify(e),this.swapRouterPath=[],this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.autoSlippageValue=On,this.baseTokenPrice=0,this.selectedRouterIndex=0,this.fromAmount="",this.toAmount="",this.getToken1Info(),this.$router.replace({name:"Swap",params:{id:((null===e||void 0===e?void 0:e.address)||(null===e||void 0===e?void 0:e.token))+"-"+e.chain,type:this.$route.params.type||""}})},handleSelectLimitToken1:function(e){this.autoSlippageValue=On,this.limitAmount1="",this.limitAmount2="",this.$refs.percentStep1.handleClick(0),1===this.activeTab&&this.getLimitAllowance(),sessionStorage.swap_token1=JSON.stringify(e),this.token1=Object(kt["a"])({},e),this.$router.replace({name:"Swap",params:{id:((null===e||void 0===e?void 0:e.address)||(null===e||void 0===e?void 0:e.token))+"-"+e.chain,type:this.$route.params.type||""}}).catch((function(e){console.log("err",e)})),this.getToken1Info(),"solana"===this.chain&&this.quoteLimitSolana()},handleSelectLimitToken2:function(e){this.autoSlippageValue=On,this.limitAmount1="",this.limitAmount2="",this.$refs.percentStep1.handleClick(0),sessionStorage.swap_token2=JSON.stringify(e),this.token2=Object(kt["a"])({},e),this.getToken2Info(),0===this.activeTab&&this.getLimitAllowance(),"solana"===this.chain&&this.quoteLimitSolana()},getAllowance:function(){var e=this;if(this.$store.getters.netId&&this.$store.getters.netId===this.fromToken.chain&&this.fromToken.address){var t,o,n=this.$store.getters.netId;if("solana"===n)return void(this.allowance=go["i"]);var i=this.isFourMeme?null===(t=this.swapQuoteInfo)||void 0===t||null===(o=t.quoteResult)||void 0===o?void 0:o.tokenManager:this.$f.getSwapContract(this.$store.getters.netId),a=["","TTfvyrAz86hbZk5iDpKD78pqLGgi8C7AAw","TZFs5ch1R1C4mmjwrrmZqeqbUgGpxY1yWB"][this.isSunPump];i=a||i,this.loadingAllowance=!0,Object(vo["f"])(this.fromToken.address,i).then((function(t){e.allowance=t.toString(),console.log("this.allowance",e.allowance)})).catch((function(){e.allowance="0"})).finally((function(){e.loadingAllowance=!1}))}},approve:function(){var e=this;return Object(gt["a"])(regeneratorRuntime.mark((function t(){var o,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loadingApprove=!0,"bsc"!==e.$store.getters.netId&&"eth"!==e.$store.getters.netId||e.$f.setSwapSendType("fast"),i=e.isFourMeme?null===(o=e.swapQuoteInfo)||void 0===o||null===(n=o.quoteResult)||void 0===n?void 0:n.tokenManager:e.$f.getSwapContract(e.$store.getters.netId),a=["","TTfvyrAz86hbZk5iDpKD78pqLGgi8C7AAw","TZFs5ch1R1C4mmjwrrmZqeqbUgGpxY1yWB"][e.isSunPump],i=a||i,Object(vo["j"])(e.fromToken.address,{approveAmount:0===e.activeTab?"":go["i"],spender:i}).then((function(e){return e.wait()})).then((function(t){console.log(t),e.getAllowance(),e.getGasBalance()})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loadingApprove=!1,e.$f.setSwapSendType("")}));case 6:case"end":return t.stop()}}),t)})))()},getSwapGas:function(){var e=this;pn&&(clearTimeout(pn),pn=null),pn=setTimeout((function(){var t,o,n,i,a;console.log(e.checkAmount(),e.isApprove,e.$store.state.currentAccount),e.checkAmount()&&e.isApprove&&e.$store.state.currentAccount&&!e.loadingSwap&&((null===(t=e.swapQuoteInfo)||void 0===t?void 0:t.isSunPump)>0?Object(vo["Bb"])(e.swapQuoteInfo,e.slippage).then(function(){var t=Object(gt["a"])(regeneratorRuntime.mark((function t(o){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.swapSubmitInfo=Object(kt["a"])(Object(kt["a"])({},o),{},{isSunPump:null===(n=e.swapQuoteInfo)||void 0===n?void 0:n.isSunPump}),e.swapInfo=o.swapInfo,e.swapInfo.gasValue=o.gasValue,console.log("gasValue",o.gasValue),e.swapInfo.swapRouterPath=e.swapRouterPath;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$f.handleError(t)})):null!==(o=e.swapQuoteInfo)&&void 0!==o&&o.isFourMeme?Object(vo["n"])(e.swapQuoteInfo,e.slippage).then(function(){var t=Object(gt["a"])(regeneratorRuntime.mark((function t(o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.swapSubmitInfo=Object(kt["a"])(Object(kt["a"])({},o),{},{isFourMeme:!0}),e.swapInfo=o.swapInfo,e.swapInfo.gasValue=o.gasValue,console.log("gasValue",o.gasValue),e.swapInfo.swapRouterPath=e.swapRouterPath;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$f.handleError(t)})):null!==(n=e.swapQuoteInfo)&&void 0!==n&&n.isERC314?Object(vo["a"])(e.swapQuoteInfo).then(function(){var t=Object(gt["a"])(regeneratorRuntime.mark((function t(o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.swapSubmitInfo=Object(kt["a"])(Object(kt["a"])({},o),{},{isERC314:!0}),e.swapInfo=o.swapInfo,e.swapInfo.gasValue=o.gasValue,console.log("gasValue",o.gasValue),e.swapInfo.swapRouterPath=e.swapRouterPath;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$f.handleError(t)})):(null===(i=e.swapQuoteInfo)||void 0===i||null===(a=i.routerPath)||void 0===a?void 0:a.length)>0&&(Object(vo["Cb"])(e.swapQuoteInfo,e.slippage).then(function(){var t=Object(gt["a"])(regeneratorRuntime.mark((function t(o){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.swapSubmitInfo=o,e.swapInfo=Object(kt["a"])(Object(kt["a"])({},o.swapInfo),{},{fromToken:Object(kt["a"])(Object(kt["a"])({},e.fromToken),(null===o||void 0===o||null===(n=o.swapInfo)||void 0===n?void 0:n.fromToken)||{}),toToken:Object(kt["a"])(Object(kt["a"])({},e.toToken),(null===o||void 0===o||null===(i=o.swapInfo)||void 0===i?void 0:i.toToken)||{})}),e.swapInfo.gasValue=o.gasValue,console.log("gasValue",o.gasValue),e.swapInfo.swapRouterPath=e.swapRouterPath;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$f.handleError(t)})),e.getNativeTokenPrice(),e.getGasPrice()))}),1e3)},getSwapTx:function(){var e,t,o,n,i,a=this,l=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(pn&&(clearTimeout(pn),pn=null),this.checkAmount())if("ton"===this.chain){console.log("tonQuoteResponse",this.tonQuoteResponse);var s=[this.fromToken,this.toToken].map((function(e,t){var o;return{symbol:e.symbol,nextAmm:0===t&&(null===(o=a.tonQuoteResponse)||void 0===o?void 0:o.dex)||""}}));this.swapInfo={swapRouterPath:s,fromAmount:this.fromAmount,toAmount:this.toAmount,fromToken:this.fromToken,toToken:this.toToken},l&&(this.dialogVisibleSwap=!0),this.swapRouterPath=s}else if("solana"===this.chain){var r=[this.fromToken,this.toToken].map((function(e,t){return{symbol:e.symbol,nextAmm:""}}));this.swapInfo={swapRouterPath:r,fromAmount:this.fromAmount,toAmount:this.toAmount,fromToken:this.fromToken,toToken:this.toToken},l&&(this.dialogVisibleSwap=!0)}else(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.isSunPump)>0?(this.loadingSwap=!0,Object(vo["Bb"])(this.swapQuoteInfo,this.slippage).then(function(){var e=Object(gt["a"])(regeneratorRuntime.mark((function e(t){var o,n,i,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.swapSubmitInfo=Object(kt["a"])(Object(kt["a"])({},t),{},{isSunPump:null===(o=a.swapQuoteInfo)||void 0===o?void 0:o.isSunPump}),a.swapInfo=t.swapInfo,a.swapInfo.gasValue=t.gasValue,a.swapInfo.swapRouterPath=a.swapRouterPath,a.loadingSwap=!1,l&&(r=(null===(n=window)||void 0===n||null===(i=n._tw_)||void 0===i||null===(s=i.appGetFreePay)||void 0===s?void 0:s.call(i))||!1,r=r&&"false"!==r,r?a.submitSwap():a.dialogVisibleSwap=!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){a.loadingSwap=!1,a.$f.handleError(e)})),this.getNativeTokenPrice(),this.getGasPrice()):null!==(t=this.swapQuoteInfo)&&void 0!==t&&t.isFourMeme?(this.loadingSwap=!0,Object(vo["n"])(this.swapQuoteInfo,this.slippage).then(function(){var e=Object(gt["a"])(regeneratorRuntime.mark((function e(t){var o,n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.swapSubmitInfo=Object(kt["a"])(Object(kt["a"])({},t),{},{isFourMeme:!0}),a.swapInfo=t.swapInfo,a.swapInfo.gasValue=t.gasValue,a.swapInfo.swapRouterPath=a.swapRouterPath,a.loadingSwap=!1,l&&(s=(null===(o=window)||void 0===o||null===(n=o._tw_)||void 0===n||null===(i=n.appGetFreePay)||void 0===i?void 0:i.call(n))||!1,s=s&&"false"!==s,s?a.submitSwap():a.dialogVisibleSwap=!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){a.loadingSwap=!1,a.$f.handleError(e)})),this.getNativeTokenPrice(),this.getGasPrice()):null!==(o=this.swapQuoteInfo)&&void 0!==o&&o.isERC314?(this.loadingSwap=!0,Object(vo["a"])(this.swapQuoteInfo).then(function(){var e=Object(gt["a"])(regeneratorRuntime.mark((function e(t){var o,n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.swapSubmitInfo=Object(kt["a"])(Object(kt["a"])({},t),{},{isERC314:!0}),a.swapInfo=t.swapInfo,a.swapInfo.gasValue=t.gasValue,a.swapInfo.swapRouterPath=a.swapRouterPath,a.loadingSwap=!1,l&&(s=(null===(o=window)||void 0===o||null===(n=o._tw_)||void 0===n||null===(i=n.appGetFreePay)||void 0===i?void 0:i.call(n))||!1,s=s&&"false"!==s,s?a.submitSwap():a.dialogVisibleSwap=!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){a.loadingSwap=!1,a.$f.handleError(e)})),this.getNativeTokenPrice(),this.getGasPrice()):(null===(n=this.swapQuoteInfo)||void 0===n||null===(i=n.routerPath)||void 0===i?void 0:i.length)>0&&(this.loadingSwap=!0,Object(vo["Cb"])(this.swapQuoteInfo,this.slippage,this.activeTab).then(function(){var e=Object(gt["a"])(regeneratorRuntime.mark((function e(t){var o,n,i,s,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.swapSubmitInfo=t,a.swapInfo=Object(kt["a"])(Object(kt["a"])({},t.swapInfo),{},{fromToken:Object(kt["a"])(Object(kt["a"])({},a.fromToken),(null===t||void 0===t||null===(o=t.swapInfo)||void 0===o?void 0:o.fromToken)||{}),toToken:Object(kt["a"])(Object(kt["a"])({},a.toToken),(null===t||void 0===t||null===(n=t.swapInfo)||void 0===n?void 0:n.toToken)||{})}),a.swapInfo.gasValue=t.gasValue,a.swapInfo.swapRouterPath=a.swapRouterPath,a.swapInfo.subTxs=t.subTxs,a.loadingSwap=!1,l&&(c=(null===(i=window)||void 0===i||null===(s=i._tw_)||void 0===s||null===(r=s.appGetFreePay)||void 0===r?void 0:r.call(s))||!1,c=c&&"false"!==c,c?a.submitSwap():a.dialogVisibleSwap=!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){a.loadingSwap=!1,a.$f.handleError(e)})),this.getNativeTokenPrice(),this.getGasPrice());else this.$dialog.alert({title:this.$t("tips"),message:this.checkAmountMessage(),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})},submitSwap:function(){var e=arguments,t=this;return Object(gt["a"])(regeneratorRuntime.mark((function o(){var n,i,a,l,s,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(n=e.length>0&&void 0!==e[0]?e[0]:t.swapSubmitInfo,o.prev=1,"solana"!==t.chain){o.next=5;break}return t.submitSolanaSwap(),o.abrupt("return");case 5:if("ton"!==t.chain){o.next=8;break}return t.submitTonSwap(),o.abrupt("return");case 8:return t.loadingConfirmSwap=!0,t.loadingSwap=!0,console.log("swapSubmitInfo",n),o.next=13,n.swapCallStatic();case 13:i=o.sent,console.log("swapCallStaticResult",i.toString()),a=n.swapInfo,l=!(a.fromToken.isWrapper&&a.toToken.isETH||a.toToken.isWrapper&&a.fromToken.isETH),console.log("isSwap",l),s={from_address:a.fromToken.address,from_symbol:a.fromToken.symbol,from_amount:Number(Gt["utils"].formatUnits(a.fromTokenAmount||0,a.fromToken.decimals)),to_address:a.toToken.address,to_symbol:a.toToken.symbol,to_amount:Number(Gt["utils"].formatUnits(a.toTokenAmount||0,a.toToken.decimals)),chain:t.netId,transaction:"",wallet_address:t.$store.state.currentAccount},r={},"bsc"!==t.$store.getters.netId&&"eth"!==t.$store.getters.netId||(console.log("set swapMode",t.swapMode||"fast"),t.$f.setSwapSendType(t.swapMode||"fast")),n.swap().then((function(e){var o,i,c,u,d,m,p;(console.warn("swap confirm time end",t.$f.formatDate(Date.now())),console.log("---confirm transaction---",e),t.swapInfo.transaction=e.hash,l)&&(s.transaction=e.hash,r={time:parseInt(Date.now()/1e3),id:s.transaction,chain:t.netId,transaction:e.hash,from_address:s.from_address,from_price_eth:0,from_price_usd:(null===(u=t.swapQuoteInfo)||void 0===u?void 0:u.from_price)||0,from_symbol:a.fromToken.symbol,from_amount:Number(Gt["utils"].formatUnits(a.fromTokenAmount||0,a.fromToken.decimals)),to_address:s.to_address,to_price_eth:0,to_price_usd:(null===(d=t.swapQuoteInfo)||void 0===d?void 0:d.to_price)||0,to_symbol:a.toToken.symbol,to_amount:Number(Gt["utils"].formatUnits(a.toTokenAmount||0,a.toToken.decimals)),is_merged:0,isERC314:(null===n||void 0===n?void 0:n.isERC314)||!1,isFourMeme:(null===n||void 0===n?void 0:n.isFourMeme)||!1,isSunPump:(null===n||void 0===n?void 0:n.isSunPump)||0,wallet_address:t.$store.state.currentAccount,from_address_logo_url:null===(m=t.fromToken)||void 0===m?void 0:m.logo_url,to_address_logo_url:null===(p=t.toToken)||void 0===p?void 0:p.logo_url},t.initTxs.unshift(r));t.loadingSwap=!1,t.loadingConfirmSwap=!1,t.fromAmount="",t.toAmount="",null===(o=t.$refs)||void 0===o||null===(i=o.percentStep)||void 0===i||null===(c=i.handleClick)||void 0===c||c.call(i,0),t.dialogVisibleSwap=!1;try{Object(vo["h"])(n.subTxs)}catch(b){console.log(b)}return e.wait()})).then((function(e){return console.warn("swap transaction end",t.$f.formatDate(Date.now())),console.log("----transaction---",e),1===e.status?(t.$notify({type:"success",message:t.$t("tradeSuccess")}),t.getTokenDetails(),t.getUserTokenList(),t.getAllowance(),l&&(t.initTxs.forEach((function(o){var n,i,a,l;o.transaction===e.transactionHash&&(o.is_merged=1,o.time=parseInt(Date.now()/1e3),(null!==o&&void 0!==o&&o.isERC314||null!==o&&void 0!==o&&o.isFourMeme||(null===o||void 0===o?void 0:o.isSunPump)>0)&&(t.ERC314SwapTxs=[o].concat(Object(Ot["a"])(null===(n=t.ERC314SwapTxs)||void 0===n||null===(i=n.slice)||void 0===i||null===(a=i.call(n))||void 0===a||null===(l=a.filter)||void 0===l?void 0:l.call(a,(function(t){return t.transaction!==e.transactionHash}))))))})),null!==n&&void 0!==n&&n.isERC314||null!==n&&void 0!==n&&n.isFourMeme||null!==n&&void 0!==n&&n.isSunPump||t.getUserAllTxs(r)),t.getGasBalance()):(t.$notify({type:"danger",message:t.$t("tradeFail")}),l&&(t.initTxs=t.initTxs.filter((function(t){return t.transaction!==e.transactionHash})))),t.$f.setSwapSendType(""),e})).catch((function(e){console.log("err",e),t.$refs.countDown.reset(),t.loadingSwap=!1,t.loadingConfirmSwap=!1,l&&t.getUserAllTxs(),t.$f.handleError(e,"swap"),t.$f.setSwapSendType("")})),o.next=30;break;case 24:o.prev=24,o.t0=o["catch"](1),t.loadingSwap=!1,t.loadingConfirmSwap=!1,t.$f.handleError(o.t0,"swap"),t.$f.setSwapSendType("");case 30:case"end":return o.stop()}}),o,null,[[1,24]])})))()},submitSolanaSwap:function(){var e=this;return Object(gt["a"])(regeneratorRuntime.mark((function t(){var o,n,i,a,l,s,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.loadingConfirmSwap=!0,e.loadingSwap=!0,i=(null===(o=e.baseToken)||void 0===o||null===(n=o.token)||void 0===n?void 0:n.current_price_usd)||0,a=!e.solanaSwapBaseTokenPrice||new Qo.a(i).minus(e.solanaSwapBaseTokenPrice).times(100).div(e.solanaSwapBaseTokenPrice).abs().gt(e.solanaSlippage),console.log("price",i,e.solanaSwapBaseTokenPrice,a),!a){t.next=9;break}return t.next=9,e.quoteSolana(e.isAmount,"solana");case 9:l=e.swapInfo,s={time:parseInt(Date.now()/1e3),from_address:l.fromToken.address,from_symbol:l.fromToken.symbol,from_amount:Number(Gt["utils"].formatUnits(l.fromTokenAmount||0,l.fromToken.decimals)),to_address:l.toToken.address,to_symbol:l.toToken.symbol,to_amount:Number(Gt["utils"].formatUnits(l.toTokenAmount||0,l.toToken.decimals)),chain:e.netId,transaction:"",wallet_address:e.$store.state.currentAccount},r={},setTimeout((function(){e.dialogVisibleSwap||(e.loadingSwap=!1,e.loadingConfirmSwap=!1)}),6e3),c=!0,Object(sn["k"])(e.solanaQuoteResponse).then((function(t){var o,n,i,a,u;(console.warn("swap confirm time end",e.$f.formatDate(Date.now())),console.log("---confirm transaction---",t),e.swapInfo.transaction=t.hash,c)&&(s.transaction=t.hash,r={time:parseInt(Date.now()/1e3),id:s.transaction,chain:e.netId,transaction:t.hash,from_address:s.from_address,from_price_eth:0,from_price_usd:"",from_symbol:l.fromToken.symbol,from_amount:l.fromAmount,to_address:s.to_address,to_price_eth:0,to_price_usd:"",to_symbol:l.toToken.symbol,to_amount:l.toAmount,is_merged:0,wallet_address:e.$store.state.currentAccount||"",from_address_logo_url:l.fromToken.logo_url,to_address_logo_url:l.toToken.logo_url},e.solanaTxs.unshift(r),e.solanaTxs=null===(a=e.solanaTxs)||void 0===a||null===(u=a.slice)||void 0===u?void 0:u.call(a,0,500));return e.loadingSwap=!1,e.loadingConfirmSwap=!1,e.fromAmount="",e.toAmount="",null===(o=e.$refs)||void 0===o||null===(n=o.percentStep)||void 0===n||null===(i=n.handleClick)||void 0===i||i.call(n,0),e.dialogVisibleSwap=!1,t.wait()})).then((function(t){if(console.warn("swap transaction end",e.$f.formatDate(Date.now())),console.log("----transaction---",t),t){var o=Object(sn["j"])(t,l.fromToken.address,l.toToken.address),n=Object(jt["a"])(o,2),i=n[0],a=n[1];e.$notify({type:"success",message:e.$t("tradeSuccess")}),e.getTokenDetails(),e.getUserTokenList(),c&&(e.solanaTxs=e.solanaTxs.slice().map((function(e){var o,n=Object(kt["a"])({},e);return e.transaction===(null===t||void 0===t||null===(o=t.transaction)||void 0===o?void 0:o.signatures[0])&&(n.is_merged=1,n.time=null===t||void 0===t?void 0:t.blockTime,i&&Number(i)>0&&(n.from_amount=i),a&&Number(a)>0&&(n.to_amount=a)),n})))}else e.$notify({type:"danger",message:e.$t("tradeFail")}),c&&(e.solanaTxs=e.solanaTxs.filter((function(e){return e.transaction!==t.transactionHash})));return e.$f.setSwapSendType(""),t})).catch((function(t){if(console.warn("solana error",t),"Timeout"===(t||(null===t||void 0===t?void 0:t.message)))e.solanaTxs=e.solanaTxs.map((function(e){return e.transaction===s.transaction?Object(kt["a"])(Object(kt["a"])({},e),{},{status:"timeout"}):Object(kt["a"])({},e)}));else if("Swap fail"===(t||(null===t||void 0===t?void 0:t.message)))e.solanaTxs=e.solanaTxs.map((function(e){return e.transaction===s.transaction?Object(kt["a"])(Object(kt["a"])({},e),{},{status:"fail"}):Object(kt["a"])({},e)}));else{var o,n;e.solanaTxs=(null===(o=e.solanaTxs)||void 0===o||null===(n=o.filter)||void 0===n?void 0:n.call(o,(function(e){return e.transaction!==s.transaction})))||[]}e.solanaSwapBaseTokenPrice=0,e.$refs.countDown.reset(),e.loadingSwap=!1,e.loadingConfirmSwap=!1,e.$f.handleError(t,"solana"),e.$f.setSwapSendType("")})),t.next=24;break;case 17:t.prev=17,t.t0=t["catch"](0),e.solanaSwapBaseTokenPrice=0,e.loadingSwap=!1,e.loadingConfirmSwap=!1,e.$f.handleError(t.t0,"solana"),e.$f.setSwapSendType("");case 24:case"end":return t.stop()}}),t,null,[[0,17]])})))()},submitTonSwap:function(){var e=this;return Object(gt["a"])(regeneratorRuntime.mark((function t(){var o,n,i,a,l,s,r,c,u,d,m,p,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.loadingConfirmSwap=!0,e.loadingSwap=!0,s=(null===(o=e.baseToken)||void 0===o||null===(n=o.token)||void 0===n?void 0:n.current_price_usd)||0,r=!e.tonSwapBaseTokenPrice||new Qo.a(s).minus(e.tonSwapBaseTokenPrice).times(100).div(e.tonSwapBaseTokenPrice).abs().gt(e.tonSlippage),console.log("price",s,e.solanaSwapBaseTokenPrice,r),!r){t.next=9;break}return t.next=9,e.quoteTon(e.isAmount,"ton");case 9:return c=e.swapInfo,u={from_address:c.fromToken.address,from_symbol:c.fromToken.symbol,from_amount:null===c||void 0===c?void 0:c.fromAmount,from_decimals:null===c||void 0===c?void 0:c.fromToken.decimals,to_address:c.toToken.address,to_symbol:c.toToken.symbol,to_amount:null===c||void 0===c?void 0:c.toAmount,to_decimals:null===c||void 0===c?void 0:c.toToken.decimals,chain:"ton",transaction:"",wallet_address:e.$store.state.currentAccount},console.log("txInfo",u),d={},setTimeout((function(){e.dialogVisibleSwap||(e.loadingSwap=!1,e.loadingConfirmSwap=!1)}),6e3),m=!0,console.log("tonQuoteResponse",e.tonQuoteResponse,u),p=[{address:null===(i=e.tonQuoteResponse)||void 0===i?void 0:i.to,amount:null===(a=e.tonQuoteResponse)||void 0===a?void 0:a.totalTransferAmount,payload:null===(l=e.tonQuoteResponse)||void 0===l?void 0:l.payload}],t.next=19,Object(un["e"])(u);case 19:b=t.sent,b&&p.push(b),Object(un["h"])(p).then((function(t){var o,n,i,a,l;(console.warn("swap confirm time end",e.$f.formatDate(Date.now())),console.log("---confirm transaction---",t),e.swapInfo.transaction=t.hash,m)&&(u.transaction=t.hash,d={time:parseInt(Date.now()/1e3),id:u.transaction,chain:e.netId,transaction:t.hash,from_address:u.from_address,from_price_eth:0,from_price_usd:"",from_symbol:c.fromToken.symbol,from_amount:c.fromAmount,to_address:u.to_address,to_price_eth:0,to_price_usd:"",to_symbol:c.toToken.symbol,to_amount:c.toAmount,is_merged:0,wallet_address:e.$store.state.currentAccount||"",from_address_logo_url:c.fromToken.logo_url,to_address_logo_url:c.toToken.logo_url},e.tonTxs.unshift(d),e.tonTxs=null===(a=e.tonTxs)||void 0===a||null===(l=a.slice)||void 0===l?void 0:l.call(a,0,500));return e.loadingSwap=!1,e.loadingConfirmSwap=!1,e.fromAmount="",e.toAmount="",null===(o=e.$refs)||void 0===o||null===(n=o.percentStep)||void 0===n||null===(i=n.handleClick)||void 0===i||i.call(n,0),e.dialogVisibleSwap=!1,t.wait()})).then(function(){var t=Object(gt["a"])(regeneratorRuntime.mark((function t(o){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.warn("swap transaction end",e.$f.formatDate(Date.now())),console.log("----transaction---",o),!o){t.next=12;break}return e.$notify({type:"success",message:e.$t("tradeSuccess")}),e.getTokenDetails(),e.getUserTokenList(),t.next=8,Object(un["f"])(o);case 8:n=t.sent,m&&(e.tonTxs=e.tonTxs.slice().map((function(e){var t=Object(kt["a"])({},e);return e.transaction===(null===o||void 0===o?void 0:o.hash)&&(t.is_merged=1,t.time=null===o||void 0===o?void 0:o.timestamp,t.event_id=null===o||void 0===o?void 0:o.event_id,t=Object(kt["a"])(Object(kt["a"])({},t),n)),t}))),t.next=14;break;case 12:e.$notify({type:"danger",message:e.$t("tradeFail")}),m&&(e.tonTxs=e.tonTxs.filter((function(e){return e.transaction!==o.hash})));case 14:return e.$f.setSwapSendType(""),t.abrupt("return",o);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){if(console.warn("ton error",t),"Timeout"===(t||(null===t||void 0===t?void 0:t.message)))e.tonTxs=e.tonTxs.map((function(e){return e.transaction===u.transaction?Object(kt["a"])(Object(kt["a"])({},e),{},{status:"timeout"}):Object(kt["a"])({},e)}));else if("Swap fail"===(t||(null===t||void 0===t?void 0:t.message)))e.tonTxs=e.tonTxs.map((function(e){return e.transaction===u.transaction?Object(kt["a"])(Object(kt["a"])({},e),{},{status:"fail"}):Object(kt["a"])({},e)}));else{var o,n;e.tonTxs=(null===(o=e.tonTxs)||void 0===o||null===(n=o.filter)||void 0===n?void 0:n.call(o,(function(e){return e.transaction!==u.transaction})))||[]}e.tonSwapBaseTokenPrice=0,e.$refs.countDown.reset(),e.loadingSwap=!1,e.loadingConfirmSwap=!1,e.$f.handleError(t,"solana"),e.$f.setSwapSendType("")})),t.next=31;break;case 24:t.prev=24,t.t0=t["catch"](0),e.tonSwapBaseTokenPrice=0,e.loadingSwap=!1,e.loadingConfirmSwap=!1,e.$f.handleError(t.t0,"solana"),e.$f.setSwapSendType("");case 31:case"end":return t.stop()}}),t,null,[[0,24]])})))()},checkAmount:function(){if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return!0;var e=this.fromToken.balance||0,t=(this.isPump||this.isMoonshot)&&"So11111111111111111111111111111111111111112"!==this.token2.address,o=(this.isFourMeme||this.isFlap)&&this.token2.address!==go["k"],n=this.isSunPump>0&&this.token2.address!==go["k"];if("ton"===this.chain){var i,a,l,s,r=(null===(i=this.tonQuoteResponse)||void 0===i?void 0:i.totalTransferAmount)||0,c=(null===(a=this.userBalanceTokens)||void 0===a||null===(l=a.find)||void 0===l||null===(s=l.call(a,(function(e){return e.address===go["k"]})))||void 0===s?void 0:s.initBalance)||0;if(r&&new Qo.a(r).gt(c))return!1}return!(0===Number(e)||Number(e)<Number(this.fromAmount)||""===this.$store.state.wallet||"0"===String(this.fromAmount)||this.token1.address===this.token2.address||this.isERC314&&this.token2.address!==go["k"]||t||o||n)},checkAmountMessage:function(){var e,t,o,n,i,a=this.fromToken.balance||0,l=(this.isPump||this.isMoonshot)&&"So11111111111111111111111111111111111111112"!==this.token2.address,s=(this.isFourMeme||this.isFlap)&&this.token2.address!==go["k"],r=this.isSunPump>0&&this.token2.address!==go["k"];if(!this.$store.state.currentAccount)return this.$t("pConnectWallet");if(!(!this.$store.state.currentAccount||window.ethereum||null!==(e=window)&&void 0!==e&&e.solana||null!==(t=window.trustwallet)&&void 0!==t&&t.solana||null!==(o=window)&&void 0!==o&&o.tronWeb||null!==(n=window)&&void 0!==n&&null!==(i=n.mytonwallet)&&void 0!==i&&i.tonconnect))return this.$t("observeAddressNotSwap");if(this.isERC314&&this.token2.address!==go["k"]||l||s||r)return this.$t("ERC314Tips");if(0===Number(a)||Number(a)<Number(this.fromAmount)||!this.$store.state.currentAccount)return this.$t("insufficientBalance");if("0"===String(this.fromAmount))return this.$t("AmountCannotBeZero");if("ton"===this.chain){var c,u,d,m,p=(null===(c=this.tonQuoteResponse)||void 0===c?void 0:c.totalTransferAmount)||0,b=(null===(u=this.userBalanceTokens)||void 0===u||null===(d=u.find)||void 0===d||null===(m=d.call(u,(function(e){return e.address===go["k"]})))||void 0===m?void 0:m.initBalance)||0;if(p&&new Qo.a(p).gt(b))return this.$t("tonInsufficientBalance")}},getNativeTokenPrice:function(){var e,t,o,n,i=this;if(this.$store.getters.netId===(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)){var a=this.$store.getters.netId||(null===(o=this.$f.getAddressAndChainFromId(null===(n=this.$route.params)||void 0===n?void 0:n.id))||void 0===o?void 0:o.chain)||"";Object(vo["N"])(a).then((function(e){var t;i.nativePrice=e;var o=(null===(t=i.gasSetting)||void 0===t?void 0:t[a])||{};i.gasSetting=Object(kt["a"])(Object(kt["a"])({},i.gasSetting),{},Object(vt["a"])({},a,Object(kt["a"])(Object(kt["a"])({},o),{},{nativePrice:e}))),ln["a"].set("gasSetting",i.gasSetting)}))}},getKlineHistory:function(e){var t,o,n=this;return Object(vo["I"])(e,"1",(null===(t=this.$f.getAddressAndChainFromId(null===(o=this.$route.params)||void 0===o?void 0:o.id))||void 0===t?void 0:t.chain)||"").then((function(e){var t,o=(null===e||void 0===e||null===(t=e.slice)||void 0===t?void 0:t.call(e,-10))||[];if(n.dataX=o.map((function(e){return e.time})),n.dataY=o.map((function(e){return e.close})),"solana"===n.chain){var i=o[o.length-2],a=o[o.length-1],l=new Qo.a((null===i||void 0===i?void 0:i.high)||0).minus((null===i||void 0===i?void 0:i.low)||0).div((null===i||void 0===i?void 0:i.low)||1),s=new Qo.a((null===a||void 0===a?void 0:a.high)||0).minus((null===a||void 0===a?void 0:a.low)||0).div((null===a||void 0===a?void 0:a.low)||1),r=Qo.a.max(2,Qo.a.min(9,l.plus(s).times(100).div(2)));n.solanaPriceChg={solanaAutoSlippage:r,k0_price_chg:l,k1_price_chg:s},r.gte(2)&&(n.solanaSlippage=localStorage.solanaSlippage||r.toFixed(0)),l.gt(.1)&&s.gt(.1)&&(n.isHotToken=!0),n.getKlineTime=Date.now()}return Promise.resolve(e)}))},updateKline:function(e){var t,o=null===(t=this.token1)||void 0===t?void 0:t.address;if(o){var n=this.dataX[this.dataX.length-1],i=this.dataY[this.dataY.length-1];e.from_address===o?i=e.from_price_usd:e.to_address===o&&(i=e.to_price_usd);var a=parseInt(n/60),l=parseInt(e.time/60);a===l?this.dataY[this.dataY.length-1]=i:a<l&&(this.dataY=[].concat(Object(Ot["a"])(this.dataY),[i]).slice(-10),this.dataX=[].concat(Object(Ot["a"])(this.dataX),[Number(e.time)]).slice(-10))}},getUserAllTxs:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=this.$store.state.currentAccount;o&&(this.txsLoading=!0,Object(vo["lb"])().then((function(o){var n,i,a,l,s=Array.isArray(o)?o:[],r=t&&!(null!==s&&void 0!==s&&null!==(n=s.some)&&void 0!==n&&n.call(s,(function(e){return e.transaction===t.transaction})))&&Date.now()-1e3*t.time<6e5;r&&setTimeout((function(){e.getUserAllTxs(t)}),1e4),s.length>0&&(e.initTxs=(null===s||void 0===s?void 0:s.map((function(e){return e.id?Object(kt["a"])({},e):Object(kt["a"])(Object(kt["a"])({},e),{},{id:e.transaction})})))||[]),!r||null!==(i=(a=e.initTxs).some)&&void 0!==i&&i.call(a,(function(e){return e.transaction===t.transaction}))||e.initTxs.unshift(t);var c=[],u={};null===s||void 0===s||null===(l=s.forEach)||void 0===l||l.call(s,(function(e){u[e.from_address]||(c.push({address:e.from_address,symbol:e.from_symbol,chain:e.chain}),u[e.from_address]=!0),u[e.to_address]||(c.push({address:e.to_address,symbol:e.to_symbol,chain:e.chain}),u[e.to_address]=!0)})),e.txsTokens=c,sessionStorage.txsTokens=JSON.stringify(c||[])})).finally((function(){e.txsLoading=!1})))},alertTips:function(e,t){this.$dialog.alert({title:e,message:t,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"}).then((function(){}))},alertSupportChainTips:function(e){var t,o,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n?this.$dialog.confirm({title:"",message:e,confirmButtonText:null!==(t=window)&&void 0!==t&&null!==(o=t._tw_)&&void 0!==o&&o.appSwitchChain?this.$t("switchChain"):this.$t("getIt"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then((function(){var e,t,o,n;null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appSwitchChain&&(null===(o=window)||void 0===o||null===(n=o._tw_)||void 0===n||n.appSwitchChain())})):this.$dialog.alert({title:"",message:e,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"})},supportChain:function(){if("Swap"===this.$route.name){var e,t,o,n,i,a,l,s,r,c=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"",u=Object.keys(go["y"]),d=ln["a"].get("chainConfig",go["l"])||{},m=null===u||void 0===u||null===(o=u.map)||void 0===o||null===(n=o.call(u,(function(e){var t;return null===d||void 0===d||null===(t=d[e])||void 0===t?void 0:t.name})))||void 0===n||null===(i=n.join)||void 0===i?void 0:i.call(n,", "),p=null===d||void 0===d||null===(a=d[c])||void 0===a?void 0:a.name;if("solana"===c||"ton"===c)return!0;if(!this.$store.getters.netId&&this.$store.state.chainId)return this.alertSupportChainTips(this.$t("notYetSupportedChainTips",{chains:m}),!0),!1;if(c&&(null===u||void 0===u||null===(l=u.includes)||void 0===l||!l.call(u,c)))return this.alertSupportChainTips(this.$t("notYetSupportedChainTips1",{chain:p,chains:m}),!0),!1;if((null===(s=this.$f.getAddressAndChainFromId(null===(r=this.$route.params)||void 0===r?void 0:r.id))||void 0===s?void 0:s.chain)!==this.$store.getters.netId&&this.$store.getters.netId)return this.alertSupportChainTips(this.$t("chainNotSame"),!0),!1}return!0},getGasPrice:function(){var e,t,o,n,i,a,l,s=this,r=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"";"evm"!==localStorage.okxwallet_chain&&(window.solana||null!==(o=window)&&void 0!==o&&null!==(n=o.trustwallet)&&void 0!==n&&n.solana&&(null===(i=window.ethereum)||void 0===i||null===(a=i.address)||void 0===a||null===(l=a.startsWith)||void 0===l||!l.call(a,"0x"))&&window.ethereum.address)&&(r="solana"),"solana"!==r&&"ton"!==r&&"tron"!==r&&Object(vo["E"])(r).then((function(e){var t,o,n=e.toString();"bsc"===r&&null!==e&&void 0!==e&&null!==(t=e.lt)&&void 0!==t&&t.call(e,"3000000000")&&(n="3000000000"),s.gasPrice=n;var i=(null===(o=s.gasSetting)||void 0===o?void 0:o[r])||{};s.gasSetting=Object(kt["a"])(Object(kt["a"])({},s.gasSetting),{},Object(vt["a"])({},r,Object(kt["a"])(Object(kt["a"])({},i),{},{gasPrice:n}))),ln["a"].set("gasSetting",s.gasSetting)})).catch((function(e){console.log(e),s.gasPrice="0","bsc"===r&&(s.gasPrice="3000000000")}))},getPriceImpact:function(e){if(!Number(this.fromAmount)&&!Number(this.toAmount))return new Qo.a(0);if(this.isERC314||null!==e&&void 0!==e&&e.isERC314)return new Qo.a(0);var t=e.routerPath,o=(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t[0]:null,n=(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t[t.length-1]:null;if(o&&n){var i=e.from_price,a=e.to_price,l=Gt["utils"].formatUnits(o.amount,o.decimals),s=Gt["utils"].formatUnits(n.amount,n.decimals);return new Qo.a(l).times(i).div(new Qo.a(s).times(a)).minus(1).abs().times(100)}return new Qo.a(0)},goAudit:function(){this.$f.openBrowser("https://beosin.com/audits/SwapFinder_202209021725.pdf")},onCountDownFinish:function(){2===this.selected&&this.token1.address!==this.token2.address&&(this.loadingConfirmSwap||this.loadingApprove||"hidden"===document.visibilityState?this.$refs.countDown.reset():this.isAmount?this.watchFromAmount():this.watchToAmount())},countDownFinishReset:function(){this.$refs.countDown.reset(),this.dialogVisibleSwap&&this.isApprove&&!this.loadingConfirmSwap&&this.getSwapTx(!1)},appSwitchChain:function(e){var t,o,n,i;null!==(t=window)&&void 0!==t&&null!==(o=t._tw_)&&void 0!==o&&o.appSwitchChain&&(null===(n=window)||void 0===n||null===(i=n._tw_)||void 0===i||i.appSwitchChain(),e.stopPropagation())},formatPriceImpactColor:function(e){return e>40?"#F81111":e>10?"#F7933F":e>5?"#f8be46":""},goLiquidity:function(){var e,t;if(null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.openLp){var o,n,i,a,l=ln["a"].get("chainConfig",go["l"])||{},s=this.$store.getters.netId||(null===(o=this.$f.getAddressAndChainFromId(null===(n=this.$route.params)||void 0===n?void 0:n.id))||void 0===o?void 0:o.chain)||"",r=null===l||void 0===l?void 0:l[s],c=null===r||void 0===r?void 0:r.wmainWrapper,u=null===(i=l[s])||void 0===i?void 0:i.swaps,d=null===(a=this.baseToken)||void 0===a?void 0:a.pairs,m=d.find((function(e){return u.some((function(t){return t.name===e.amm&&t.router_address}))}));if(m){var p,b,f=m.token0_address===c?go["k"]:m.token0_address,h=m.token1_address===c?go["k"]:m.token1_address,v=m.amm;null===(p=window)||void 0===p||null===(b=p._tw_)||void 0===b||b.openLp(f,h,v)}else{var g,k,O,j,w=this.tokenInfo.address||(null===(g=this.baseToken)||void 0===g||null===(k=g.token)||void 0===k?void 0:k.token)||"";w=w===c?go["k"]:w,null===(O=window)||void 0===O||null===(j=O._tw_)||void 0===j||j.openLp(w,"","")}}},checkLimitAmount:function(){if("solana"===this.chain&&this.limitSolanaError)return!1;var e=0===this.activeTab?this.limitToken2:this.limitToken1;if(e.address===go["k"]&&3===this.selected)return!1;var t=e.balance||0,o=0===this.activeTab?this.limitAmount2:this.limitAmount1;return!(0===Number(t)||Number(t)<Number(o)||""===this.$store.state.wallet||"0"===String(o)||this.limitToken1.address===this.limitToken2.address)},checkLimitAmountMessage:function(){var e,t,o;if("solana"===this.chain&&this.limitSolanaError)return this.$t("noSToken");var n=0===this.activeTab?this.limitToken2:this.limitToken1;if(n.address===go["k"]&&3===this.selected)return this.$t("noSNativeToken");var i=n.balance||0,a=0===this.activeTab?this.limitAmount2:this.limitAmount1;return this.$store.state.currentAccount?!this.$store.state.currentAccount||window.ethereum||null!==(e=window)&&void 0!==e&&e.solana||null!==(t=window.trustwallet)&&void 0!==t&&t.solana||null!==(o=window)&&void 0!==o&&o.tronWeb?Number(0===i||Number(i)<Number(a)||""===this.$store.state.wallet)?this.$t("insufficientBalance"):"0"===String(a)?this.$t("AmountCannotBeZero"):"":this.$t("observeAddressNotSwap"):this.$t("pConnectWallet")},getLimitAllowance:function(){var e=this,t=0===this.activeTab?this.limitToken2:this.limitToken1;if(this.$store.getters.netId&&this.$store.getters.netId===t.chain&&t.address){var o=t.chain||this.$store.getters.netId;if("solana"===o||"ton"===o)return;var n=go["v"][o];this.loadingLimitAllowance=!0,Object(vo["f"])(t.address,n).then((function(t){e.limitAllowance=t.toString(),console.log("limitAllowance",e.limitAllowance)})).finally((function(){e.loadingLimitAllowance=!1}))}},getLimitOrder:function(e,t){var o=this;if(this.$store.getters.netId){var n=this.limitToken1.chain||this.$store.getters.netId||"bsc";if("solana"===n)return void this.getSolanaLimitOrder(e,t);this.loadingGetLimitOrder=!0,Object(vo["K"])({chain:n}).then((function(e){o.limitOrders=e})).finally((function(){setTimeout((function(){o.loadingGetLimitOrder=!1}),800)}))}},getSolanaLimitOrder:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if("solana"===this.$store.getters.netId)return this.loadingGetLimitOrder=!0,Promise.all([Object(vo["U"])({wallet:this.$store.state.currentAccount}),Object(vo["V"])({wallet:this.$store.state.currentAccount,take:100})]).then(function(){var n=Object(gt["a"])(regeneratorRuntime.mark((function n(i){var a,l,s,r,c,u,d,m,p,b,f,h,v,g,k,O,j,w;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return p=null===i||void 0===i||null===(a=i[0])||void 0===a||null===(l=a.map)||void 0===l?void 0:l.call(a,(function(e){var t,o;return[(null===e||void 0===e||null===(t=e.account)||void 0===t?void 0:t.inputMint)+"-solana",(null===e||void 0===e||null===(o=e.account)||void 0===o?void 0:o.outputMint)+"-solana"]})),b=null===i||void 0===i||null===(s=i[1])||void 0===s||null===(r=s.map)||void 0===r?void 0:r.call(s,(function(e){return[(null===e||void 0===e?void 0:e.inputMint)+"-solana",(null===e||void 0===e?void 0:e.outputMint)+"-solana"]})),f=Array.from(new Set([].concat(Object(Ot["a"])(null===p||void 0===p?void 0:p.flat()),Object(Ot["a"])(null===b||void 0===b?void 0:b.flat())))),n.next=5,Object(vo["jb"])(f).catch(function(){var e=Object(gt["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",{});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:if(h=n.sent,v=null===i||void 0===i||null===(c=i[0])||void 0===c||null===(u=c.map)||void 0===u?void 0:u.call(c,(function(e){var t,o,n,i,a,l,s,r,c=e.account;return Object(kt["a"])(Object(kt["a"])(Object(kt["a"])({},e),c),{},{from_token:c.inputMint,from_token_symbol:null===(t=h[c.inputMint+"-solana"])||void 0===t?void 0:t.symbol,from_token_decimals:null===(o=h[c.inputMint+"-solana"])||void 0===o?void 0:o.decimal,from_token_price:null===(n=h[c.inputMint+"-solana"])||void 0===n?void 0:n.current_price_usd,to_token:c.outputMint,to_token_symbol:null===(i=h[c.outputMint+"-solana"])||void 0===i?void 0:i.symbol,to_token_decimals:null===(a=h[c.outputMint+"-solana"])||void 0===a?void 0:a.decimal,to_token_price:null===(l=h[c.outputMint+"-solana"])||void 0===l?void 0:l.current_price_usd,from_amount:Number(c.oriInAmount)||0,to_amount:Number(c.oriOutAmount)||0,id:e.publicKey,orderKey:e.publicKey,chain:"solana",created_at:0,state:"Pending",from_amount_used:new Qo.a(c.oriInAmount).minus(c.inAmount).toFixed(),to_amount_used:new Qo.a(c.oriOutAmount).minus(c.outAmount).toFixed(),percent:new Qo.a(c.oriInAmount).minus(c.inAmount).div(c.oriInAmount).times(100).toFixed(),from_token_logo_url:null===(s=h[c.inputMint+"-solana"])||void 0===s?void 0:s.logo_url,to_token_logo_url:null===(r=h[c.outputMint+"-solana"])||void 0===r?void 0:r.logo_url})})),g=null===i||void 0===i||null===(d=i[1])||void 0===d||null===(m=d.map)||void 0===m?void 0:m.call(d,(function(e){var t,o,n,i,a,l,s,r;return Object(kt["a"])(Object(kt["a"])({},e),{},{from_token:e.inputMint,from_token_symbol:null===(t=h[e.inputMint+"-solana"])||void 0===t?void 0:t.symbol,from_token_decimals:null===(o=h[e.inputMint+"-solana"])||void 0===o?void 0:o.decimal,from_token_price:null===(n=h[e.inputMint+"-solana"])||void 0===n?void 0:n.current_price_usd,to_token:e.outputMint,to_token_symbol:null===(i=h[e.outputMint+"-solana"])||void 0===i?void 0:i.symbol,to_token_decimals:null===(a=h[e.outputMint+"-solana"])||void 0===a?void 0:a.decimal,to_token_price:null===(l=h[e.outputMint+"-solana"])||void 0===l?void 0:l.current_price_usd,from_amount:Number(e.oriInAmount)||0,to_amount:Number(e.oriOutAmount)||0,chain:"solana",from_amount_used:new Qo.a(e.oriInAmount).minus(e.inAmount).toFixed(),to_amount_used:new Qo.a(e.oriOutAmount).minus(e.outAmount).toFixed(),percent:new Qo.a(e.oriInAmount).minus(e.inAmount).div(e.oriInAmount).times(100).toFixed(),from_token_logo_url:null===(s=h[e.inputMint+"-solana"])||void 0===s?void 0:s.logo_url,to_token_logo_url:null===(r=h[e.outputMint+"-solana"])||void 0===r?void 0:r.logo_url})})),k=[].concat(Object(Ot["a"])(v),Object(Ot["a"])(g)),O=null===k||void 0===k?void 0:k.some((function(t){return t.orderKey===e})),j=null===k||void 0===k?void 0:k.some((function(t){return t.orderKey===e&&"Cancelled"===t.state})),console.log("limitOrderList",k),!(e&&t.getSolanaLimitOrderTime<=30&&(0!==o&&!O||0===o&&!j))){n.next=17;break}return kn&&(clearTimeout(kn),kn=null),n.abrupt("return",new Promise((function(n,i){kn=setTimeout((function(){t.getSolanaLimitOrderTime+=5,t.getSolanaLimitOrder(e,o).then((function(e){n(e)}))}),5e3)})));case 17:return t.loadingGetLimitOrder=!1,t.limitOrders=null===k||void 0===k||null===(w=k.filter)||void 0===w?void 0:w.call(k,(function(t){return!(t.orderKey===e&&"Pending"===t.state&&0===o)})),t.getSolanaLimitOrderTime=0,n.abrupt("return",k);case 21:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(){t.getSolanaLimitOrderTime=0,t.loadingGetLimitOrder=!1}))},refreshLimit:function(e,t){var o=this;"solana"===e.chain?this.getSolanaLimitOrder(e.publicKey,0).then((function(n){console.log("refreshLimit",n),t[e.publicKey]=!1,e.from_token===o.limitToken1.address?o.getToken1Info():e.from_token===o.limitToken2.address&&o.getToken2Info()})):(this.getLimitOrder(),e.from_token===go["k"]&&(e.from_token===this.limitToken1.address?this.getToken1Info():e.from_token===this.limitToken2.address&&this.getToken2Info()))},approveLimit:function(){var e=this;return Object(gt["a"])(regeneratorRuntime.mark((function t(){var o,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.supportChainLimit()){t.next=2;break}return t.abrupt("return");case 2:e.loadingLimitApprove=!0,o=e.limitToken1.chain||e.$store.getters.netId||"bsc",n=go["v"][o],i=0===e.activeTab?e.limitToken2:e.limitToken1,"bsc"!==e.$store.getters.netId&&"eth"!==e.$store.getters.netId||e.$f.setSwapSendType("fast"),Object(vo["i"])(i.address,n).then((function(e){return e.wait()})).then((function(t){console.log(t),e.getLimitAllowance(),e.getGasBalance()})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loadingLimitApprove=!1,e.$f.setSwapSendType("")}));case 8:case"end":return t.stop()}}),t)})))()},supportChainLimit:function(){if("Swap"===this.$route.name){var e,t,o,n,i,a,l,s,r,c,u=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"",d=Object.keys(go["v"]).concat("solana"),m=ln["a"].get("chainConfig",go["l"])||{},p=d.map((function(e){return m[e].name})).join(", ");if(null!==(o=this.$store.state.currentAccount)&&void 0!==o&&null!==(n=o.startsWith)&&void 0!==n&&n.call(o,"T")||u&&(null===d||void 0===d||null===(i=d.includes)||void 0===i||!i.call(d,u))){this.$t("notYetSupportedChainNoGasTips",{chains:p});return this.$toast({message:this.$t("notYetSupportedChainLimitTips",{chains:p}),position:"top"}),!1}if(console.warn(null===(a=this.$route.params)||void 0===a?void 0:a.id,this.$store.getters.netId),(null===(l=this.$f.getAddressAndChainFromId(null===(s=this.$route.params)||void 0===s?void 0:s.id))||void 0===l?void 0:l.chain)!==this.$store.getters.netId&&this.$store.getters.netId)return this.$dialog.confirm({title:"",message:this.$t("chainNotSame"),confirmButtonText:null!==(r=window)&&void 0!==r&&null!==(c=r._tw_)&&void 0!==c&&c.appSwitchChain?this.$t("switchChain"):this.$t("getIt"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then((function(){var e,t,o,n;null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appSwitchChain&&(null===(o=window)||void 0===o||null===(n=o._tw_)||void 0===n||n.appSwitchChain())})),!1}return!0},onLimitSubmit:function(){try{var e,t;if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return void this.handleWalletAddress();if(!this.supportChainLimit())return;var o=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"";if(o!==this.netId)return void this.$toast({message:this.$t("plsSwitchChain",{chain:o}),position:"top"});0!==this.selected&&1!==this.selected&&3!==this.selected||(this.isLimitApprove||3===this.selected?this.openConfirmLimit():this.approveLimit())}catch(n){console.log(n)}},openConfirmLimit:function(){var e=this,t=0===this.activeTab?this.limitToken2:this.limitToken1,o=0===this.activeTab?this.limitToken1:this.limitToken2,n=0===this.activeTab?this.limitAmount2:this.limitAmount1,i=0===this.activeTab?this.limitAmount1:this.limitAmount2,a=0===this.activeTab?this.limitToken1.decimals:this.limitToken2.decimals;if(t.address===go["k"]){var l=window.navigator.userAgent;if(l.includes("OSType/2")){var s=l.replace(/^.*Ave.ai\/(.*) OSType\/2;$/,"$1"),r=dn.lte(s,"2.4.0")&&"1.0.6"!==s;if(r)return void this.$dialog.alert({title:this.$t("tips"),message:this.$t("limitOrderTips1"),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})}}var c=new Qo.a(this.limitSlippage||0);3===this.selected&&(c=new Qo.a(this.noGasSlippage||0)),c=new Qo.a(1).minus(c.div(100));var u=new Qo.a(go["w"][t.chain||this.$store.getters.netId]||0).times(5);u=u.gte(3)?u.gte(50)?new Qo.a(50):u:new Qo.a(3);var d=new Qo.a(n).times(t.price).gte(u.times(.999));if(!d){var m=this.$t("minimumTransactionAmount",{n:u.toFixed()});return 3===this.selected&&(m=this.$t("minimumTransactionNoGasAmount",{n:u.toFixed()})),void this.$dialog.alert({title:this.$t("tips"),message:m,confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})}var p=this.limitToken1.chain||this.$store.getters.netId;this.limitInfo={chain:p,orderType:3===this.selected?2:this.selected,fromToken:t,toToken:o,fromAmount:n,toAmount:i,targetToken:this.limitToken1.address,targetTokenInfo:this.limitToken1,targetLimitPrice:"solana"===p?this.limitSolanaPriceU:this.limitPrice,triggerPrice:this.triggerPrice,activeTab:this.activeTab,minReturn:new Qo.a(i||0).times(c).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0],slippage:3===this.selected?this.noGasSlippage:this.limitSlippage},"solana"===p?(this.loadingLimit=!0,Object(vo["ib"])([this.limitInfo.targetToken+"-"+p]).then((function(t){var o,n,i,a,l,s,r,c,u,d,m=(null===t||void 0===t||null===(o=t[0])||void 0===o?void 0:o.current_price_usd)||(null===(n=e.limitInfo)||void 0===n||null===(i=n.targetTokenInfo)||void 0===i?void 0:i.current_price_usd);if(0===e.activeTab&&(console.log("price",m,null===(a=e.limitInfo)||void 0===a?void 0:a.targetLimitPrice),new Qo.a(m).lt(null===(l=e.limitInfo)||void 0===l?void 0:l.targetLimitPrice)))return void e.$dialog.alert({title:e.$t("tips"),message:e.$t("limitPriceTips",{p1:e.$f.formatNumber2(null===(s=e.limitInfo)||void 0===s?void 0:s.targetLimitPrice),p2:e.$f.formatNumber2(m)}),confirmButtonText:e.$t("okay"),confirmButtonColor:"#558BED"});if(1===e.activeTab&&(console.log("price",m,null===(r=e.limitInfo)||void 0===r?void 0:r.targetLimitPrice,new Qo.a(m).gt(null===(c=e.limitInfo)||void 0===c?void 0:c.targetLimitPrice)),new Qo.a(m).gt(null===(u=e.limitInfo)||void 0===u?void 0:u.targetLimitPrice)))return void e.$dialog.alert({title:e.$t("tips"),message:e.$t("limitPriceTips1",{p1:e.$f.formatNumber2(null===(d=e.limitInfo)||void 0===d?void 0:d.targetLimitPrice),p2:e.$f.formatNumber2(m)}),confirmButtonText:e.$t("okay"),confirmButtonColor:"#558BED"});e.dialogVisibleLimit=!0,e.loadingLimit=!1})).catch((function(t){console.log(t),e.$f.handleError(t)})).finally((function(){e.loadingLimit=!1}))):this.dialogVisibleLimit=!0},submitLimitOrder:function(){var e=this;if(this.supportChainLimit()){var t=new Qo.a(this.limitSlippage||0);3===this.selected&&(t=new Qo.a(this.noGasSlippage||0)),t=new Qo.a(1).minus(t.div(100));var o=this.$store.state.currentAccount;console.log("maker",o);var n=0===this.activeTab?this.limitToken2:this.limitToken1,i=0===this.activeTab?this.limitToken1:this.limitToken2,a=0===this.activeTab?this.limitAmount2:this.limitAmount1,l=0===this.activeTab?this.limitAmount1:this.limitAmount2,s=n.address,r=Gt["utils"].parseUnits(new Qo.a(a||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(n.decimals,"})?")))[0],n.decimals).toString(),c=i.address,u=Gt["utils"].parseUnits(new Qo.a(l||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(i.decimals,"})?")))[0],i.decimals).toString(),d=Gt["utils"].parseUnits(new Qo.a(l||0).times(t).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(i.decimals,"})?")))[0],i.decimals).toString(),m=this.limitToken1.address,p=this.limitPrice;this.loadingConfirmLimit=!0;var b=3===this.selected?2:this.selected,f=this.triggerPrice,h=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"";if(3===this.selected){var v={chain:this.$store.getters.netId,from_token:s,from_amount:r,to_token:c,to_amount:u,maker:o,to_min_amount:d,target_token:m,target_limit_price:"0",trigger_price:"0",current_price:"0",order_type:2,open_time:0};Object(vo["g"])(v).then((function(t){console.log("appExchangeNoGas result",t),t?setTimeout((function(){e.loadingConfirmLimit=!1,e.dialogVisibleLimit=!1,e.$toast.success(e.$t("transactionsSubmitted")),e.limitAmount1="",e.limitAmount2="",e.getNoGasList(!0)}),1e3):(e.loadingConfirmLimit=!1,e.$toast({message:e.$t("fail"),type:"fail"}))})).catch((function(t){console.log(t),e.loadingConfirmLimit=!1,e.$f.handleError(t)}))}else{if("solana"===this.chain){var g=this.solanaLimitExpiredTime?Number(parseInt(Date.now()/1e3)+parseInt(this.solanaLimitExpiredTime)):null,k="";return void Object(vo["m"])({fromToken:s,fromAmount:r,toToken:c,toAmount:u,expiredAt:g}).then((function(e){var t=e.result;return k=t.orderPubkey,console.log("result",t),e.send()})).then((function(t){console.log(t);var o={from_token:s,from_token_symbol:null===n||void 0===n?void 0:n.symbol,from_token_decimals:null===n||void 0===n?void 0:n.decimals,to_token:c,to_token_symbol:null===i||void 0===i?void 0:i.symbol,to_token_decimals:null===i||void 0===i?void 0:i.decimals,from_amount:Number(r)||0,to_amount:Number(u)||0,id:k,orderKey:k,chain:"solana",created_at:0,state:"Sending",from_amount_used:"0",percent:"0",expiredAt:g};return e.limitOrders=[o].concat(Object(Ot["a"])(e.limitOrders)),e.loadingConfirmLimit=!1,e.dialogVisibleLimit=!1,t.wait()})).then((function(){e.getLimitOrder(k),e.limitAmount1="",e.limitAmount2=""})).catch((function(t){e.limitOrders=e.limitOrders.filter((function(e){return e.orderKey!==k})),e.$f.handleError(t)})).finally((function(){e.loadingConfirmLimit=!1,e.dialogVisibleLimit=!1}))}Object(vo["Ab"])(o,s,r,c,d,u,m,p,b,f,h).then((function(t){console.log(t),e.$notify({type:"success",message:e.$t("submitOrdersSuccess")}),e.getLimitOrder(),e.limitAmount1="",e.limitAmount2="",e.getGasBalance(),s===go["k"]&&(s===e.limitToken1.address?e.getToken1Info():s===e.limitToken2.address&&e.getToken2Info())})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loadingConfirmLimit=!1,e.dialogVisibleLimit=!1}))}}},getAvgPrice:function(){if(!this.fromAmount||!this.toAmount)return"--";var e=this.fromAmount,t=this.toAmount;if(this.isTax){var o,n,i,a,l=(null===(o=this.swapQuoteInfo)||void 0===o?void 0:o.totalTax)||((null===(n=this.swapQuoteInfo)||void 0===n?void 0:n.total_sell_tax)||0)+((null===(i=this.swapQuoteInfo)||void 0===i?void 0:i.total_buy_tax)||0);l=Math.min(49,l),null!==(a=this.swapQuoteInfo)&&void 0!==a&&a.isAmountOut?e=new Qo.a(e).times(100+l).div(100):t=new Qo.a(t).times(100-l).div(100)}var s=["solana","ton"].includes(this.chain),r=s?this.swapTokenPrice[0]:this.swapQuoteInfo.from_price,c=s?this.swapTokenPrice[1]:this.swapQuoteInfo.to_price;return r&&c?0===this.activeTab?this.$f.formatNumber2(e/t/(c/r)*c):1===this.activeTab?this.$f.formatNumber2(t/e/(r/c)*r):void 0:"--"},onSubmitSlippage:function(e){this.slippageInfo=e,this.autoSlippage!==e.autoSlippage&&e.autoSlippage?(this.slippage=On,localStorage.slippage=JSON.stringify(e.slippage),this.onCountDownFinish()):(this.slippage=e.slippage,localStorage.slippage=JSON.stringify(e.slippage)),this.autoSlippage=e.autoSlippage,localStorage.autoSlippage=JSON.stringify(e.autoSlippage)},onSubmitLimitSlippage:function(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.limitSlippage=(null===e||void 0===e?void 0:e.slippage)||"5")},onSubmitNoGasSlippage:function(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.noGasSlippage=(null===e||void 0===e?void 0:e.slippage)||"5")},minusTriggerPrice:function(){this.triggerPrice&&new Qo.a(this.triggerPrice).gt("0")&&(this.triggerPrice=this.$f.formatNumber(new Qo.a(this.triggerPrice).times(.99).toFixed()))},addTriggerPrice:function(){this.limitPrice&&new Qo.a(this.triggerPrice).gt("0")&&(this.triggerPrice=this.$f.formatNumber(new Qo.a(this.triggerPrice).times(1.01).toFixed()))},getNoGasList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o={account:this.$store.state.currentAccount,chain:this.$store.getters.netId};if(null!==o&&void 0!==o&&o.account&&null!==o&&void 0!==o&&o.chain){var n={maker:null===o||void 0===o?void 0:o.account,chain:null===o||void 0===o?void 0:o.chain};this.loadingGetNoGasList=!0,this.isHasUnTx=!0,Object(vo["O"])(n).then((function(o){var n,i;e.noGasTxList=o||[],e.isHasUnTx=null===(n=e.noGasTxList)||void 0===n||null===(i=n.some)||void 0===i?void 0:i.call(n,(function(e){return 0===e.status||-1===e.status})),!e.isHasUnTx&&t&&(e.getUserTokenList(),e.getGasBalance(),e.getTokenDetails())})).finally((function(){setTimeout((function(){e.loadingGetNoGasList=!1}),800),bn&&(clearTimeout(bn),bn=null),bn=setTimeout((function(){var o,n;null!==(o=e.noGasTxList)&&void 0!==o&&null!==(n=o.some)&&void 0!==n&&n.call(o,(function(e){return 0===e.status||-1===e.status}))&&e.getNoGasList(t)}),1e4)}))}},getGasBalance:function(){var e,t,o,n,i;this.$store.getters.netId;"evm"!==localStorage.okxwallet_chain&&(window.solana||null!==(e=window)&&void 0!==e&&null!==(t=e.trustwallet)&&void 0!==t&&t.solana&&(null===(o=window.ethereum)||void 0===o||null===(n=o.address)||void 0===n||null===(i=n.startsWith)||void 0===i||!i.call(n,"0x"))&&window.ethereum.address)},hasNoGas:function(){var e,t;if(null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appExchangeNoGas){new Qo.a(this.gasBalance||0);var o=0===this.activeTab?this.token2:this.token1,n=o.chain||this.$store.getters.netId,i=(new Qo.a(go["j"][n]||.001).div(2),!1);return i&&2===this.selected?(this.selected=3,this.$dialog.alert({title:this.$t("tips"),message:this.$t("freeGasTips"),confirmButtonText:this.$t("confirm"),confirmButtonColor:"#3F80F7"})):i||3!==this.selected||(this.selected=2),void(this.isNoGas=i)}3===this.selected&&(this.selected=2),this.isNoGas=!1},updateGasPrice:function(e){this.gasSetting=e},onSubmitSolanaSlippage:function(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.solanaSlippage=(null===e||void 0===e?void 0:e.slippage)||"2",this.solanaSlippage=localStorage.solanaSlippage,this.solanaProtection=null===e||void 0===e?void 0:e.protection,localStorage.solanaProtection=JSON.stringify(this.solanaProtection||!1),this.isAmount?this.watchFromAmount():this.watchToAmount())},unwrapSol:function(e){var t=this;this.loadingUnwrap=!0,Object(sn["n"])(e).then((function(e){return e.wait()})).then((function(e){console.log(e),t.$toast.success(t.$t("unwrapSuccess")),t.getUserTokenList(),t.getTokenDetails()})).catch((function(e){console.log(e),t.$f.handleError(e)})).finally((function(){t.loadingUnwrap=!1}))},watchLimitSolanaPrice:function(){var e=this;Number(this.limitSolanaPriceU)&&(Number(this.limitAmount1)||Number(this.limitAmount2))&&this.limitToken1.address!==this.limitToken2.address&&""!==this.$store.state.wallet?(gn&&(clearTimeout(gn),gn=null),this.limitQuoteLoading=!0,gn=setTimeout((function(){e.limitAmount1?e.quoteLimitTokenPrice().then((function(t){var o;console.log("res",t),e.limitAmount2=new Qo.a(e.limitAmount1).times(e.limitSolanaPriceU).div((null===(o=e.limitToken2)||void 0===o?void 0:o.price)||1).toFixed(e.limitToken2.decimals)})).finally((function(){e.limitQuoteLoading=!1})):e.limitAmount2?e.quoteLimitTokenPrice().then((function(t){var o;console.log("res",t),e.limitAmount1=new Qo.a(e.limitAmount2).times((null===(o=e.limitToken2)||void 0===o?void 0:o.price)||0).div(e.limitSolanaPriceU).toFixed(e.limitToken1.decimals)})).finally((function(){e.limitQuoteLoading=!1})):e.limitQuoteLoading=!1}),1e3)):this.limitToken1.address===this.limitToken2.address&&this.$toast({position:"top",message:this.$t("twoIdenticalTokens")})},minusLimitSolanaPrice:function(){this.limitSolanaPriceU&&new Qo.a(this.limitSolanaPriceU).gt("0")&&(this.limitSolanaPriceU=this.$f.formatNumber(new Qo.a(this.limitSolanaPriceU).times(.99).toFixed()),this.watchLimitSolanaPrice())},addLimitSolanaPrice:function(){this.limitSolanaPriceU&&new Qo.a(this.limitSolanaPriceU).gt("0")&&(this.limitSolanaPriceU=this.$f.formatNumber(new Qo.a(this.limitSolanaPriceU).times(1.01).toFixed()),this.watchLimitSolanaPrice())},quoteLimitSolana:function(){var e,t,o,n,i,a=this;if(null!==(e=this.limitToken1)&&void 0!==e&&e.address&&null!==(t=this.limitToken2)&&void 0!==t&&t.address&&"solana"===this.chain&&0===this.selected){var l={from_token:null===(o=this.limitToken1)||void 0===o?void 0:o.address,to_token:null===(n=this.limitToken2)||void 0===n?void 0:n.address,amountIn:Gt["utils"].parseUnits("1",null===(i=this.limitToken1)||void 0===i?void 0:i.decimals).toString()};this.limitSolanaError="",Object(vo["ub"])(l).then((function(e){var t,o=Gt["utils"].formatUnits((null===e||void 0===e?void 0:e.outAmount)||0,null===(t=a.limitToken2)||void 0===t?void 0:t.decimals);a.limitSolanaPrice=o,a.quoteLimitTokenPrice().then((function(e){console.log("res",e)})),a.limitSolanaError=""})).catch((function(e){console.log("err",e),a.limitSolanaPrice=0,a.limitSolanaError="1"}))}},getSolanaPumpInfo:function(){var e=this;return new Promise((function(t,o){null===(n=e.$route.params)||void 0===n||n.id;var n,i,a=e.$f.getAddressAndChainFromId(null===(i=e.$route.params)||void 0===i?void 0:i.id,1),l=Object(jt["a"])(a,2),s=l[0],r=l[1];e.token1.address&&(s=e.token1.address),e.token1.chain&&(r=e.token1.chain),s&&"solana"===r?Object(vo["Y"])(s).then((function(o){if(console.log("getSolanaPumpInfo",o),!1===(null===o||void 0===o?void 0:o.completed)){var n;if(e.isPump=!0,"So11111111111111111111111111111111111111112"!==e.token2.address&&(null===(n=e.tokens)||void 0===n?void 0:n.length)>0){var i,a;console.log(e.tokens);var l=Object(kt["a"])({},null===(i=e.tokens)||void 0===i||null===(a=i.slice())||void 0===a?void 0:a.find((function(e){return"So11111111111111111111111111111111111111112"===e.address})));e.token2=Object(kt["a"])({},l),setTimeout((function(){e.handleSelectToken2(l)}),1e3)}t(!0)}else e.isPump=!1,t(!1)})):(e.isPump=!1,t(!1))}))},onSubmitTonSlippage:function(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.tonSlippage=(null===e||void 0===e?void 0:e.slippage)||"2",this.tonSlippage=localStorage.tonSlippage,this.watchFromAmount())},goTronRent:function(){location.href="https://tronsave.io/"}}};o("a954");const Sn=Ht()(wn,[["render",ht],["__scopeId","data-v-041b0fe1"]]);t["default"]=Sn},3731:function(e,t,o){"use strict";o("f898")},3963:function(e,t,o){},"404a":function(e,t,o){"use strict";o("c240")},"449c":function(e,t,o){"use strict";var n=o("7a23"),i=function(e){return Object(n["pushScopeId"])("data-v-0301828e"),e=e(),Object(n["popScopeId"])(),e},a=i((function(){return Object(n["createElementVNode"])("use",{"xlink:href":"#icon-slippage"},null,-1)})),l=[a],s={class:"popup-title"},r={class:"slippage-label"},c=i((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),u={style:{width:"100%"}},d={class:"radio-group"},m={key:0,style:{flex:"1"}},p=["id","value","disabled"],b=["for"],f={class:"slippage-input"},h=i((function(){return Object(n["createElementVNode"])("span",null,"%",-1)})),v={key:0,class:"flex justify-between items-center mt-15 color-333"},g={class:"flex flex-col justify-center text-14px flex-1"},k={class:"text-12px mt-3px color-#FF9E19"},O={class:"form-submit"};function j(e,t,o,i,a,j){var w=this,S=Object(n["resolveComponent"])("van-checkbox"),y=Object(n["resolveComponent"])("van-field"),T=Object(n["resolveComponent"])("van-switch"),_=Object(n["resolveComponent"])("van-button"),N=Object(n["resolveComponent"])("van-form"),V=Object(n["resolveComponent"])("van-popup");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[0===o.icon?(Object(n["openBlock"])(),Object(n["createElementBlock"])("svg",{key:0,class:"icon-svg icon-slippage","aria-hidden":"true",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return a.slippageVisible=!0}),["stop"]))},l)):1===o.icon?(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",{key:1,class:"iconfont icon-settings",style:{color:"#999999"},onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(e){return a.slippageVisible=!0}),["stop"]))})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(V,{show:a.slippageVisible,"onUpdate:show":t[8]||(t[8]=function(e){return a.slippageVisible=e}),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"20vh"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("h3",s,Object(n["toDisplayString"])(e.$t("setSlippage")),1),Object(n["createVNode"])(N,{class:"popup-content",onSubmit:j.confirmSubmit},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[2]||(t[2]=Object(n["withModifiers"])((function(){return j.openSlippageTips&&j.openSlippageTips.apply(j,arguments)}),["stop"])),style:{"font-size":"0.38rem","margin-left":"0.05rem",color:"#558BED"}}),c,o.isAutoSlippage?(Object(n["openBlock"])(),Object(n["createBlock"])(S,{key:0,modelValue:a.autoSlippage,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.autoSlippage=e})},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("autoSlippage")),1)]})),_:1},8,["modelValue"])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])(y,{name:"slippage",modelValue:a.slippageValue,"onUpdate:modelValue":t[6]||(t[6]=function(e){return a.slippageValue=e}),disabled:a.autoSlippage,label:"",style:{"--van-cell-horizontal-padding":"0"},rules:[{required:!0,message:w.$t("enterSlippage")},{validator:j.validator,message:w.$t("slippageMaxTip")}],border:!1},{input:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",u,[Object(n["createElementVNode"])("div",d,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(o.slippageList,(function(e,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:o},[0!==o?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",m)):Object(n["createCommentVNode"])("",!0),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"radio",id:"radio-".concat(e),"onUpdate:modelValue":t[4]||(t[4]=function(e){return a.slippageValue=e}),value:e,class:"radio-input",disabled:a.autoSlippage},null,8,p),[[n["vModelRadio"],a.slippageValue]]),Object(n["createElementVNode"])("label",{for:"radio-".concat(e),class:"radio-item"},Object(n["toDisplayString"])(e)+"%",9,b)],64)})),128))]),Object(n["createElementVNode"])("div",f,[Object(n["createVNode"])(y,{class:"input",name:"slippage",type:"number",min:"0",max:"49.99",modelValue:a.slippageValue,"onUpdate:modelValue":t[5]||(t[5]=function(e){return a.slippageValue=e}),disabled:a.autoSlippage,onBlur:j.handleBlur,clearable:""},null,8,["modelValue","disabled","onBlur"]),h])])]})),_:1},8,["modelValue","disabled","rules"]),o.isProtection?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",v,[Object(n["createElementVNode"])("div",g,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("protection")),1),Object(n["createElementVNode"])("span",k,Object(n["toDisplayString"])(e.$t("protectionTip")),1)]),Object(n["createVNode"])(T,{modelValue:a.protection,"onUpdate:modelValue":t[7]||(t[7]=function(e){return a.protection=e}),size:"0.4rem","inactive-color":"#BFBFBF","active-color":"#558BED"},null,8,["modelValue"])])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",O,[Object(n["createVNode"])(_,{class:"btn",block:"",round:"","native-type":"submit",size:"normal",type:"primary"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm1")),1)]})),_:1})])]})),_:1},8,["onSubmit"])]})),_:1},8,["show"])],64)}o("a9e3");var w={name:"slippageButton",props:{slippage:{type:String,default:"2"},slippageList:{type:Array,default:function(){return["0.5","1","2"]}},min:{type:Number,default:0},icon:{type:Number,default:0},isAutoSlippage:{type:Boolean,default:!1},initAutoSlippage:{type:Boolean,default:!0},isProtection:{type:Boolean,default:!1},initProtection:{type:Boolean,default:!1}},emits:["update:slippage","onSubmit"],data:function(){return{slippageVisible:!1,slippageValue:this.slippage||"1",autoSlippage:this.initAutoSlippage,protection:this.initProtection||!1}},watch:{slippageVisible:function(e){var t,o,n;e&&(this.slippageValue=this.slippage||"1",this.isAutoSlippage?this.autoSlippage=this.initAutoSlippage:this.autoSlippage=!1),console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(o=t._tw_)||void 0===o||null===(n=o.isRefreshEnable)||void 0===n||n.call(o,"bridge",!e)}},methods:{confirmSubmit:function(){this.slippageVisible&&Number(this.slippageValue)<this.min&&(this.slippageValue=this.min),this.$emit("update:slippage",this.slippageValue),this.$emit("onSubmit",{slippage:this.slippageValue,autoSlippage:this.autoSlippage,protection:this.protection}),this.slippageVisible=!1},openSlippageTips:function(){this.$dialog.alert({title:this.$t("slippage"),message:this.$t("slippageTips"),confirmButtonText:this.$t("iKnown"),confirmButtonColor:"#558BED",messageAlign:"left"}).then((function(){}))},handleBlur:function(){this.slippageVisible&&Number(this.slippageValue)<0&&(this.slippageValue=0),this.slippageVisible&&Number(this.slippageValue)<this.min&&(this.slippageValue=this.min)},validator:function(e){return Number(e)<=49.99}}},S=(o("6d9f"),o("6b0d")),y=o.n(S);const T=y()(w,[["render",j],["__scopeId","data-v-0301828e"]]);t["a"]=T},"497e":function(e,t,o){"use strict";o("caad"),o("2532"),o("ac1f"),o("5319");var n=o("7a23"),i=o("335a"),a=o("7f08"),l=o("4360"),s=["onClick"],r={class:"rebate-bg"},c={class:"rebate-bg fastTrade"},u={setup:function(e){var t,u,d,m,p,b,f,h,v=o("ddc3"),g=null===(t=(null===(d=window)||void 0===d?void 0:d.main)||(null===(m=window)||void 0===m?void 0:m._tw_)||{})||void 0===t||null===(u=t.appGetPlatform)||void 0===u?void 0:u.call(t),k=null===(p=(null===(f=window)||void 0===f?void 0:f.main)||(null===(h=window)||void 0===h?void 0:h._tw_)||{})||void 0===p||null===(b=p.getAppVersionCode)||void 0===b?void 0:b.call(p),O=Object(n["computed"])((function(){var e=window.navigator.userAgent;return!!e.includes("OSType/2")||"android"===g&&k>104})),j=Object(n["computed"])((function(){var e,t,o=window.navigator.userAgent,n=l["a"].getters.netId;if(o.includes("OSType/2")){var i,a,s=o.replace(/^.*Ave.ai\/(.*) OSType\/2;$/,"$1"),r=v.gte(s,"2.3.0");return(null===(i=(a=["eth","bsc"]).includes)||void 0===i?void 0:i.call(a,n))&&r}var c="android"===g&&k>112;return(null===(e=(t=["eth","bsc"]).includes)||void 0===e?void 0:e.call(t,n))&&c}));function w(){var e,t=(null===(e=i["a"].get("ave_globalConfig",{}))||void 0===e?void 0:e.Inviter_Url)||"https://m.avepromotion.xyz";Object(a["appOpenWebPage"])(t)}return function(e,t){var o=Object(n["resolveComponent"])("van-swipe-item"),i=Object(n["resolveComponent"])("van-swipe");return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(i,{class:"rebate-swipe",autoplay:3e3,"lazy-render":"","show-indicators":!1},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(o,null,{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",{class:"rebate-container clickable",onClick:Object(n["withModifiers"])(w,["stop"])},[Object(n["createElementVNode"])("div",r,Object(n["toDisplayString"])(e.$t("rebateTips")),1)],8,s)]})),_:1}),Object(n["unref"])(j)?(Object(n["openBlock"])(),Object(n["createBlock"])(o,{key:0},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",{class:"rebate-container",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(){}),["stop"]))},[Object(n["createElementVNode"])("div",c,Object(n["toDisplayString"])(e.$t("fastTradeTips")),1)])]})),_:1})):Object(n["createCommentVNode"])("",!0)]})),_:1},512)),[[n["vShow"],Object(n["unref"])(O)]])}}},d=(o("404a"),o("6b0d")),m=o.n(d);const p=m()(u,[["__scopeId","data-v-9bc1a90a"]]);t["a"]=p},"57c9":function(e,t,o){"use strict";o("a9e3");var n=o("7a23"),i=o("afd7"),a=o.n(i),l={class:"tx-li-item_1"},s={style:{display:"flex","align-items":"center","justify-content":"left","min-width":"42%"}},r={style:{display:"flex","align-items":"center",flex:"1","justify-content":"center","overflow-x":"hidden","min-width":"0.4rem"}},c={key:0,src:a.a,style:{width:"100%"},alt:"",srcset:""},u={key:1,class:"iconfont icon-jiantou2"},d={style:{display:"flex","align-items":"center","min-width":"42%","justify-content":"right","flex-wrap":"wrap"}},m={style:{"text-align":"right","word-break":"break-word","margin-left":"0.1rem"}},p={class:"tx-li-item_3"},b={key:0},f={key:1,style:{color:"#999999"}},h={key:2};function v(e,t,i,a,v,g){var k,O,j,w,S,y,T,_,N,V,$,x,E=Object(n["resolveComponent"])("van-image");return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:"tx-li-item",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(){return g.goLink&&g.goLink.apply(g,arguments)}),["stop"]))},[Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("div",s,[Object(n["createVNode"])(E,{round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem",style:{"margin-right":"0.1rem"},"lazy-load":"","show-loading":"",src:null!==(k=i.item)&&void 0!==k&&k.from_address_logo_url?e.$f.formatIcon({logo_url:i.item.from_address_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber2(i.item.from_amount))+" "+Object(n["toDisplayString"])(i.item.from_symbol||""),1)]),Object(n["createElementVNode"])("div",r,[0===(null===(O=i.item)||void 0===O?void 0:O.is_merged)&&1e3*(null===(j=i.item)||void 0===j?void 0:j.time)>=Date.now()-6e4&&"timeout"!==(null===(w=i.item)||void 0===w?void 0:w.status)&&"fail"!==(null===(S=i.item)||void 0===S?void 0:S.status)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",c)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",u))]),Object(n["createElementVNode"])("div",d,[Object(n["createVNode"])(E,{round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem",style:{"margin-right":"0.1rem","min-width":"0.32rem"},"lazy-load":"","show-loading":"",src:null!==(y=i.item)&&void 0!==y&&y.to_address_logo_url?e.$f.formatIcon({logo_url:i.item.to_address_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber2(i.item.to_amount)),1),Object(n["createElementVNode"])("span",m,Object(n["toDisplayString"])(i.item.to_symbol||""),1)])]),Object(n["createElementVNode"])("ul",p,[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.item.time?e.$f.formatDate(i.item.time):"--"),1),1===i.item.is_merged&&""!==i.item.from_price_usd?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",b,Object(n["toDisplayString"])(e.$f.formatNumberCurrencyUnit((Number(i.item.from_amount)||0)*(Number(i.item.from_price_usd)||0))),1)):!("timeout"===(null===(T=i.item)||void 0===T?void 0:T.status)||"fail"===(null===(_=i.item)||void 0===_?void 0:_.status)||1e3*(null===(N=i.item)||void 0===N?void 0:N.time)<Date.now()-6e4)||0!==i.item.is_merged||"solana"!==(null===(V=i.item)||void 0===V?void 0:V.chain)&&"ton"!==(null===($=i.item)||void 0===$?void 0:$.chain)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",h,"--")):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",f,Object(n["toDisplayString"])("fail"===(null===(x=i.item)||void 0===x?void 0:x.status)?e.$t("failed"):e.$t("timeout")),1))])])])}var g={name:"TxItem",props:{item:Object},data:function(){return{}},methods:{goLink:function(){this.$f.openBrowser(this.$f.formatExplorerUrl(this.item.chain,this.item.transaction,"tx"))}}},k=(o("26d9"),o("6b0d")),O=o.n(k);const j=O()(g,[["render",v],["__scopeId","data-v-11f60edf"]]);t["a"]=j},"5c10":function(e,t,o){},"6d9f":function(e,t,o){"use strict";o("0e93")},"85b6":function(e,t,o){"use strict";var n=o("7a23"),i=function(e){return Object(n["pushScopeId"])("data-v-b557f64c"),e=e(),Object(n["popScopeId"])(),e},a={key:0,class:"gap"},l=["onClick"],s=i((function(){return Object(n["createElementVNode"])("div",{class:"bar"},null,-1)})),r={class:"text"};function c(e,t,o,i,c,u){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"percent-container",style:Object(n["normalizeStyle"])({"--percent-active-color":o.activeColor})},[Object(n["createElementVNode"])("div",{for:"percent-radio-0",class:Object(n["normalizeClass"])({active:0===c.activePercent})},null,2),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(c.percentList,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:t},[0!==t?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",a)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["label",{active:e===c.activePercent}]),onClick:Object(n["withModifiers"])((function(t){return u.handleClick(e)}),["stop"])},[s,Object(n["createElementVNode"])("div",r,Object(n["toDisplayString"])(e)+"%",1)],10,l)],64)})),128))],4)}var u={name:"PercentStep",props:{activeColor:String},emits:["change"],data:function(){return{activePercent:0,percentList:[25,50,75,100]}},methods:{handleClick:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e===this.activePercent?(this.activePercent=0,this.$emit("change",0,t)):(this.activePercent=e,this.$emit("change",e,t))}}},d=(o("3731"),o("6b0d")),m=o.n(d);const p=m()(u,[["render",c],["__scopeId","data-v-b557f64c"]]);t["a"]=p},"8dc0":function(e,t,o){"use strict";o("c752")},"8e2e":function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var n=o("f3f3"),i=o("0122"),a=(o("e9c4"),o("a002")),l=o.n(a),s=o("7a23");function r(e,t){var o=Object(s["ref"])(t);function a(){l.a.getItem(e).then((function(n){console.log("read",e,null!==n&&void 0!==n?n:t),null===n?(o.value=t,l.a.setItem(e,t)):o.value=n})).catch((function(e){o.value=v}))}function r(t){var a=t||o.value;return a?Array.isArray(a)?l.a.setItem(e,JSON.parse(JSON.stringify(o.value))):void("object"===Object(i["a"])(o.value)?l.a.setItem(e,Object(n["a"])({},a)):l.a.setItem(e,a)):l.a.removeItem(e)}return a(),Object(s["watch"])(o,(function(e){r()})),o}},"940b":function(e,t,o){"use strict";o.d(t,"a",(function(){return l}));o("f3f3"),o("c964"),o("96cf"),o("d3b7"),o("2ca0");var n=o("4360");o("a18c");function i(){window.addEventListener("message",(function(e){e.data.message&&"accountsChanged"===e.data.message.action&&(console.log("got accountsChanged event",e.data),n["a"].commit("setCurrentAccount",window.tronWeb.defaultAddress.base58)),e.data.message&&"setNode"==e.data.message.action&&console.log("got setNode event",e.data),e.data.message&&"connect"==e.data.message.action&&console.log("got connect event",e.data),e.data.message&&"disconnect"==e.data.message.action&&(console.log("got connect event",e.data),n["a"].commit("setWallet",""),n["a"].commit("setProvider",""))}))}function a(){return new Promise((function(e,t){window.tronLink?e(!0):(window.addEventListener("tronLink#initialized",(function(){window.tronLink?(console.log("tronLink successfully detected!"),e(!0)):(console.log("Please install TronLink-Extension!"),t("Please install TronLink-Extension!"))}),{once:!0}),setTimeout((function(){window.tronLink?(console.log("tronLink successfully detected!"),e(!0)):(console.log("Please install TronLink-Extension!"),t("Please install TronLink-Extension!"))}),3e3))}))}function l(){return i(),new Promise((function(e,t){var o,i,l;window.tronLink?(console.log("---tron_requestAccounts start----",null===(o=window)||void 0===o?void 0:o.tronWeb),null===(i=window)||void 0===i||null===(l=i.tronLink)||void 0===l||l.request({method:"tron_requestAccounts"}).then((function(o){var i,a,l;console.log("tron_requestAccounts",o),200===o.code&&null!==(i=window)&&void 0!==i&&null!==(a=i.tronWeb)&&void 0!==a&&null!==(l=a.defaultAddress)&&void 0!==l&&l.base58?(n["a"].commit("setCurrentAccount",window.tronWeb.defaultAddress.base58),n["a"].commit("setProvider",window.tronWeb),n["a"].commit("setChainId","tron"),n["a"].commit("setWallet","TronLink"),e(window.tronWeb.defaultAddress.base58)):4001===o.code&&t(o)})).catch((function(e){console.log("connect tronLink error",e),4001===e.code?t("please connect tronLink"):console.error(e)}))):a().then((function(){var o,i;null===(o=window)||void 0===o||null===(i=o.tronLink)||void 0===i||i.request({method:"tron_requestAccounts"}).then((function(o){var i,a,l;console.log("tron_requestAccounts",o),200===o.code&&null!==(i=window)&&void 0!==i&&null!==(a=i.tronWeb)&&void 0!==a&&null!==(l=a.defaultAddress)&&void 0!==l&&l.base58?(n["a"].commit("setProvider",window.tronWeb),n["a"].commit("setChainId","tron"),n["a"].commit("setWallet","TronLink"),n["a"].commit("setCurrentAccount",window.tronWeb.defaultAddress.base58),e(window.tronWeb.defaultAddress.base58)):4001===o.code&&t(o)})).catch((function(e){console.log("connect tronLink error",e),4001===e.code?t("请连接"):console.error(e)}))}))}))}},9587:function(e,t,o){"use strict";o("99af");var n=o("7a23"),i=function(e){return Object(n["pushScopeId"])("data-v-9640257c"),e=e(),Object(n["popScopeId"])(),e},a={class:"flex items-center"},l={class:"label mr-20"},s={key:0,class:"token-container"},r={class:"icon-token-container mr-5"},c=["src"],u={class:"mr-5"},d=i((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),m={class:"flex items-center mt-10"},p={class:"label mr-20"},b={key:0,class:"token-container"},f={class:"icon-token-container mr-5"},h=["src"],v={class:"mr-5"},g={class:"flex items-center mt-10"},k={class:"label mr-20"},O={key:0,class:"token-container"},j={class:"flex items-center justify-between mt-10"},w={class:"label mr-20 flex items-center"},S={key:0},y=i((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),T={class:"flex items-center"},_={class:"label mr-20"},N={key:0,class:"token-container"},V={class:"icon-token-container mr-5"},$=["src"],x={class:"mr-5"},E=i((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),B={class:"flex items-center mt-10"},A={class:"label mr-20"},C={key:0,class:"token-container"},I={class:"icon-token-container mr-5"},P=["src"],D={class:"mr-5"},L={class:"flex justify-between mt-10"},F={class:"label mr-20"},R={class:"token-container flex items-end flex-col",style:{"align-items":"end"}},M={class:"text-size-12"},U={class:"color-999 text-size-12"},G={class:"flex items-center justify-between mt-10"},z={class:"mr-20 label"},Q={key:0,class:"color-333 text-size-12"},W={class:"label"},q={key:1,class:"color-333 text-size-12"},H={class:"label"},K={key:0,class:"flex items-center justify-between mt-10"},Y={class:"mr-20 label"},J={class:"color-333 text-size-12"};function X(e,t,i,X,Z,ee){var te,oe,ne,ie,ae,le,se,re,ce=Object(n["resolveComponent"])("van-image"),ue=Object(n["resolveComponent"])("van-loading"),de=Object(n["resolveComponent"])("van-button");return"solana"!==i.item.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:0,class:"tx-li-item van-hairline--bottom clickable",onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(e){return ee.goLink(i.item)}),["stop"]))},[Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("span",l,Object(n["toDisplayString"])(e.$t("from")),1),i.item.from_token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",s,[Object(n["createElementVNode"])("div",r,[Object(n["createVNode"])(ce,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(te=i.item)&&void 0!==te&&te.from_token_logo_url?e.$f.formatIcon({logo_url:i.item.from_token_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("img",{class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(i.item.chain,".png"),alt:"",srcset:""},null,8,c)]),Object(n["createElementVNode"])("span",u,Object(n["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(i.item.from_amount,i.item.from_token_decimals))),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.item.from_token_symbol||""),1)])):Object(n["createCommentVNode"])("",!0),d,0===i.item.is_merged?(Object(n["openBlock"])(),Object(n["createBlock"])(ue,{key:1,size:"0.32rem",color:"#3F80F7","text-size":"0.24rem"})):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",m,[Object(n["createElementVNode"])("span",p,Object(n["toDisplayString"])(e.$t("to")),1),i.item.to_token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",b,[Object(n["createElementVNode"])("div",f,[Object(n["createVNode"])(ce,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(oe=i.item)&&void 0!==oe&&oe.to_token_logo_url?e.$f.formatIcon({logo_url:i.item.to_token_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("img",{class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(i.item.chain,".png"),alt:"",srcset:""},null,8,h)]),Object(n["createElementVNode"])("span",v,Object(n["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(i.item.to_amount,i.item.to_token_decimals))),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])((null===(ne=i.item)||void 0===ne?void 0:ne.to_token_symbol)||""),1)])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",g,[Object(n["createElementVNode"])("span",k,Object(n["toDisplayString"])(e.$t("delegatePrice"))+"("+Object(n["toDisplayString"])(i.item.target_token===i.item.from_token?(null===(ie=i.item)||void 0===ie?void 0:ie.from_token_symbol)||"":(null===(ae=i.item)||void 0===ae?void 0:ae.to_token_symbol)||"")+")",1),i.item.target_token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",O,[Object(n["createElementVNode"])("span",null,"$"+Object(n["toDisplayString"])(i.item.target_limit_price?e.$f.formatNumber2(i.item.target_limit_price):"--"),1)])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",j,[Object(n["createElementVNode"])("div",w,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatDate(i.item.created_at)),1),(0===i.item.status||-1===i.item.status)&&Date.now()<1e3*i.item.created_at+Z.LimitExpiredTime?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",S,"("+Object(n["toDisplayString"])(e.$t("expiresInTime",{t:e.$dayjs(1e3*i.item.created_at+Z.LimitExpiredTime).fromNow()}))+")",1)):Object(n["createCommentVNode"])("",!0)]),1===i.item.status||2===i.item.status?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"status-txt",style:Object(n["normalizeStyle"])({color:ee.formatStatusColor(i.item)})},Object(n["toDisplayString"])(ee.formatStatus(i.item)),5)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[y,0!==i.item.status||(0===i.item.status||-1===i.item.status)&&1e3*i.item.created_at+Z.LimitExpiredTime<Date.now()&&"solana"!==i.item.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"status-txt",style:Object(n["normalizeStyle"])({color:ee.formatStatusColor(i.item)})},Object(n["toDisplayString"])(ee.formatStatus(i.item)),5)):Object(n["createCommentVNode"])("",!0),"solana"===i.item.chain&&0===i.item.status||i.item.from_token===Z.NATIVE_TOKEN||(0===i.item.status||-1===i.item.status)&&1e3*i.item.created_at+Z.LimitExpiredTime>Date.now()?(Object(n["openBlock"])(),Object(n["createBlock"])(de,{key:1,class:"btn-s",plain:"",hairline:"",type:"primary",size:"small",loading:Z.loading,"loading-text":e.$t("revoke"),"loading-size":"0.28rem",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return ee.confirmCancel(i.item)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("revoke")),1)]})),_:1},8,["loading","loading-text"])):Object(n["createCommentVNode"])("",!0)],64))])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:1,class:"tx-li-item van-hairline--bottom clickable",onClick:t[3]||(t[3]=Object(n["withModifiers"])((function(e){return ee.goLink(i.item)}),["stop"]))},[Object(n["createElementVNode"])("div",T,[Object(n["createElementVNode"])("span",_,Object(n["toDisplayString"])(e.$t("from")),1),i.item.from_token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",N,[Object(n["createElementVNode"])("div",V,[Object(n["createVNode"])(ce,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(le=i.item)&&void 0!==le&&le.from_token_logo_url?e.$f.formatIcon({logo_url:i.item.from_token_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("img",{class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(i.item.chain,".png"),alt:"",srcset:""},null,8,$)]),Object(n["createElementVNode"])("span",x,Object(n["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(i.item.from_amount,i.item.from_token_decimals))),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.item.from_token_symbol||""),1)])):Object(n["createCommentVNode"])("",!0),E,"Sending"===i.item.state?(Object(n["openBlock"])(),Object(n["createBlock"])(ue,{key:1,size:"0.32rem",color:"#3F80F7","text-size":"0.24rem"})):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:2},[Object(n["createElementVNode"])("span",{class:"label",style:Object(n["normalizeStyle"])({color:ee.formatSolanaStatusColor(i.item)})},Object(n["toDisplayString"])(ee.formatSolanaStatus(i.item)),5),"solana"===i.item.chain&&"Pending"===i.item.state?(Object(n["openBlock"])(),Object(n["createBlock"])(de,{key:0,class:"btn-s",plain:"",hairline:"",type:"primary",size:"small",loading:Z.loadingSolana[i.item.publicKey],"loading-text":e.$t("revoke"),"loading-size":"0.28rem",onClick:t[2]||(t[2]=Object(n["withModifiers"])((function(e){return ee.confirmCancel(i.item)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("revoke")),1)]})),_:1},8,["loading","loading-text"])):Object(n["createCommentVNode"])("",!0)],64))]),Object(n["createElementVNode"])("div",B,[Object(n["createElementVNode"])("span",A,Object(n["toDisplayString"])(e.$t("to")),1),i.item.to_token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",C,[Object(n["createElementVNode"])("div",I,[Object(n["createVNode"])(ce,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(se=i.item)&&void 0!==se&&se.to_token_logo_url?e.$f.formatIcon({logo_url:i.item.to_token_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("img",{class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(i.item.chain,".png"),alt:"",srcset:""},null,8,P)]),Object(n["createElementVNode"])("span",D,Object(n["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(i.item.to_amount,i.item.to_token_decimals))),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])((null===(re=i.item)||void 0===re?void 0:re.to_token_symbol)||""),1)])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",L,[Object(n["createElementVNode"])("span",F,Object(n["toDisplayString"])(e.$t("delegatePrice"))+"("+Object(n["toDisplayString"])(ee.solanaPriceSymbol(i.item))+")",1),Object(n["createElementVNode"])("div",R,[Object(n["createElementVNode"])("span",M,"$"+Object(n["toDisplayString"])(ee.solanaPriceU(i.item)),1),Object(n["createElementVNode"])("span",U,"("+Object(n["toDisplayString"])(ee.solanaPrice(i.item))+")",1)])]),Object(n["createElementVNode"])("div",G,[Object(n["createElementVNode"])("span",z,Object(n["toDisplayString"])(e.$t("amount1")),1),ee.solanaTarget(i.item)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Q,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(i.item.from_amount_used||0,i.item.from_token_decimals)))+"/"+Object(n["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(i.item.from_amount||0,i.item.from_token_decimals)))+" "+Object(n["toDisplayString"])(i.item.from_token_symbol),1),Object(n["createElementVNode"])("span",W,"("+Object(n["toDisplayString"])(e.$f.formatNumber2(i.item.percent||0))+"%)",1)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",q,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(i.item.to_amount_used||0,i.item.to_token_decimals)))+"/"+Object(n["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(i.item.to_amount||0,i.item.to_token_decimals)))+" "+Object(n["toDisplayString"])(i.item.to_token_symbol),1),Object(n["createElementVNode"])("span",H,"("+Object(n["toDisplayString"])(e.$f.formatNumber2(i.item.percent||0))+"%)",1)]))]),void 0!==i.item.expiredAt?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",K,[Object(n["createElementVNode"])("span",Y,Object(n["toDisplayString"])(e.$t("expiredTime")),1),Object(n["createElementVNode"])("span",J,Object(n["toDisplayString"])(i.item.expiredAt?e.$f.formatDate(i.item.expiredAt):e.$t("never")),1)])):Object(n["createCommentVNode"])("",!0)]))}o("d3b7"),o("b680"),o("a9e3");var Z=o("365c"),ee=o("c9d9"),te=o("6779"),oe=o("901e"),ne=o.n(oe),ie={name:"TxItem",props:{item:Object},emits:["refresh"],data:function(){return{loading:!1,LimitExpiredTime:ee["g"],NATIVE_TOKEN:ee["k"],loadingSolana:{}}},methods:{formatUnits:te["utils"].formatUnits,goLink:function(e){if("solana"===e.chain){if("Sending"===(null===e||void 0===e?void 0:e.state))return;this.$router.push({name:"LimitOrder",params:{id:e.orderKey},query:{chain:"solana",inputMint:e.from_token,outputMint:e.to_token,wallet:e.maker}})}else this.$router.push({name:"LimitOrder",params:{id:e.id}})},confirmCancel:function(e){var t=this,o="solana"===(null===e||void 0===e?void 0:e.chain)?this.$t("cancelOrderConfirmingSolana"):this.$t("confirmCancelMessage");this.$dialog.confirm({title:this.$t("cancelOrderConfirming"),message:o,confirmButtonText:this.$t("confirm1"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then((function(){t.cancelLimitOrder(e)}))},cancelLimitOrder:function(e){var t=this;if("solana"!==e.chain){var o={fromToken:e.from_token,fromAmount:e.from_amount,toToken:e.to_token,minReturn:e.to_min_amount,salt:e.salt,id:e.id,order_id:e.order_id};console.log(o),this.loading=!0,Object(Z["k"])(o).then((function(o){console.log(o),t.$notify({type:"success",message:t.$t("cancelledOrderSuccessfully")}),t.$emit("refresh",e)})).catch((function(e){t.$f.handleError(e)})).finally((function(){t.loading=!1}))}else this.cancelSolanaLimitOrder(e)},cancelSolanaLimitOrder:function(e){var t=this;this.loadingSolana[e.publicKey]=!0,Object(Z["l"])(e.publicKey).then((function(e){return console.log(e),e.wait()})).then((function(o){console.log(o),setTimeout((function(){t.$emit("refresh",e,t.loadingSolana)}),3e3)})).catch((function(o){t.$f.handleError(o),t.loadingSolana[e.publicKey]=!1})).finally((function(){}))},formatStatus:function(e){var t;if((0===e.status||-1===e.status)&&1e3*e.created_at+ee["g"]<Date.now()&&"solana"!==e.chain)return this.$t("expired1");var o=e.status,n={0:"",1:this.$t("cancelled"),2:this.$t("completed"),3:this.$t("unknownError1"),7:this.$t("unknownError1"),5:this.$t("insufficientSlippage1"),8:this.$t("insufficientSlippage1"),6:this.$t("transferFailed"),4:this.$t("fail1")+"(".concat(this.$t("notEnoughBalance"),")"),10:this.$t("fail1")+"(".concat(this.$t("nonceError"),")"),11:this.$t("fail1")+"(".concat(this.$t("chainError"),")"),12:this.$t("fail1")+"(".concat(this.$t("signatureError"),")"),13:this.$t("fail1")+"(".concat(this.$t("approveGasPriceLow"),")"),"-1":""};return null!==(t=n[o])&&void 0!==t?t:o},formatStatusColor:function(e){if((0===e.status||-1===e.status)&&1e3*e.created_at+ee["g"]<Date.now())return"#999999";var t=e.status;return 1===t||10===t||11===t||12===t||4===t?"#999999":2===t?"#12B886":0===t?"#3F80F7":"#FF0000"},solanaTarget:function(e){var t=["So11111111111111111111111111111111111111112","EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v","Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"],o=t.indexOf(e.from_token),n=t.indexOf(e.to_token);return o<=n},solanaPriceSymbol:function(e){return this.solanaTarget(e)?(null===e||void 0===e?void 0:e.from_token_symbol)||"":(null===e||void 0===e?void 0:e.to_token_symbol)||""},solanaPriceU:function(e){return this.solanaTarget(e)?this.$f.formatNumber2(new ne.a(e.to_amount).times(Math.pow(10,(null===e||void 0===e?void 0:e.from_token_decimals)-(null===e||void 0===e?void 0:e.to_token_decimals))).times((null===e||void 0===e?void 0:e.to_token_price)||0).div(e.from_amount).toFixed()):this.$f.formatNumber2(new ne.a(e.from_amount).times(Math.pow(10,(null===e||void 0===e?void 0:e.to_token_decimals)-(null===e||void 0===e?void 0:e.from_token_decimals))).times((null===e||void 0===e?void 0:e.from_token_price)||0).div(e.to_amount).toFixed())},solanaPrice:function(e){return this.solanaTarget(e)?this.$f.formatNumber2(e.to_amount*Math.pow(10,(null===e||void 0===e?void 0:e.from_token_decimals)-(null===e||void 0===e?void 0:e.to_token_decimals))/e.from_amount)+" "+((null===e||void 0===e?void 0:e.to_token_symbol)||"")+" per "+((null===e||void 0===e?void 0:e.from_token_symbol)||""):this.$f.formatNumber2(e.from_amount*Math.pow(10,(null===e||void 0===e?void 0:e.to_token_decimals)-(null===e||void 0===e?void 0:e.from_token_decimals))/e.to_amount)+" "+((null===e||void 0===e?void 0:e.from_token_symbol)||"")+" per "+((null===e||void 0===e?void 0:e.to_token_symbol)||"")},formatSolanaStatus:function(e){var t;if("Pending"===(null===e||void 0===e?void 0:e.state)&&null!==(null===e||void 0===e?void 0:e.expiredAt)&&Date.now()>1e3*Number((null===e||void 0===e?void 0:e.expiredAt)||0))return this.$t("expired1");var o=e.state,n={Pending:"",Completed:this.$t("completed"),Cancelled:this.$t("cancelled")};return null!==(t=n[o])&&void 0!==t?t:o},formatSolanaStatusColor:function(e){var t;if("Pending"===(null===e||void 0===e?void 0:e.state)&&null!==(null===e||void 0===e?void 0:e.expiredAt)&&Date.now()>1e3*Number((null===e||void 0===e?void 0:e.expiredAt)||0))return"#999999";var o=e.state,n={Pending:"",Completed:"#12B886",Cancelled:"#999999"};return null!==(t=n[o])&&void 0!==t?t:"#3F80F7"}}},ae=(o("8dc0"),o("6b0d")),le=o.n(ae);const se=le()(ie,[["render",X],["__scopeId","data-v-9640257c"]]);t["a"]=se},"965b":function(e,t,o){e.exports=o.p+"static/img/audit-logo.01052351.png"},"969b":function(e,t,o){},"98fe":function(e,t,o){},a277:function(e,t,o){"use strict";o("5c10")},a28f:function(e,t,o){"use strict";o("3963")},a2ef:function(e,t,o){"use strict";o("b0c0"),o("fb6a"),o("99af");var n=o("7a23"),i=o("e524"),a=o.n(i),l={class:"swap-title"},s={class:"swap-info"},r={class:"swap-info_item header"},c={class:"header-li"},u={class:"header-li_left"},d=["src"],m={class:"header-li_right"},p={class:"switch-box"},b={class:"header-li"},f={class:"header-li_left"},h=["src"],v={class:"header-li_right"},g={key:0,class:"b-s-c"},k={class:"color-3f80f7"},O=Object(n["createTextVNode"])(") "),j={class:"text-size-12 color-999",style:{"max-height":"2rem","overflow-y":"auto"}},w={class:"flex justify-between items-center mt-5"},S={key:0,style:{color:"var(--van-danger-color)"}},y={key:1},T={key:1,class:"bg-change"},_={class:"swap-info_item"},N={class:"swap-info_item-label"},V={class:"swap-info_item-value"},$={class:"p-item"},x={class:"p-item"},E={key:2,class:"swap-info_item"},B={class:"swap-info_item-label"},A={class:"swap-info_item-value"},C={key:3,class:"swap-info_item"},I={class:"swap-info_item-label"},P={class:"swap-info_item-value"},D={key:0,class:"swap-info_item"},L={class:"swap-info_item-label"},F={class:"swap-info_item-value"},R={key:1,class:"swap-info_item"},M={class:"swap-info_item-label"},U={class:"swap-info_item-value"},G={class:"swap-info_item"},z={class:"swap-info_item-label"},Q={key:0,class:"swap-info_item-value path-list"},W={key:0},q={class:"path-amm"},H={key:1,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},K={key:1},Y={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},J={key:1},X={key:5,class:"swap-info_item"},Z={class:"swap-info_item-label"},ee={class:"swap-info_item-value"},te=["href"],oe={class:"iconfont icon-copy",style:{"margin-left":"0.1rem"}},ne={class:"footer"};function ie(e,t,i,a,ie,ae){var le=Object(n["resolveComponent"])("van-icon"),se=Object(n["resolveComponent"])("van-button"),re=Object(n["resolveComponent"])("van-image"),ce=Object(n["resolveComponent"])("van-popup"),ue=Object(n["resolveDirective"])("copy");return Object(n["openBlock"])(),Object(n["createBlock"])(ce,{show:ae.dialogVisible,"onUpdate:show":t[1]||(t[1]=function(e){return ae.dialogVisible=e}),style:Object(n["normalizeStyle"])({width:"90%",padding:"0.4rem"}),closeable:"",round:"",teleport:"#app"},{default:Object(n["withCtx"])((function(){var a,ce,de,me,pe,be,fe,he,ve,ge,ke,Oe,je,we,Se,ye,Te;return[Object(n["createElementVNode"])("header",l,Object(n["toDisplayString"])(e.$t("tradeConfirm")),1),Object(n["createElementVNode"])("ul",s,[Object(n["createElementVNode"])("li",r,[Object(n["createElementVNode"])("div",c,[Object(n["createElementVNode"])("div",u,[Object(n["createElementVNode"])("img",{class:"icon-token",src:ae.formatLogo(i.swapInfo.fromToken),alt:"",height:"20"},null,8,d),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.swapInfo.fromToken.symbol),1)]),Object(n["createElementVNode"])("div",m,Object(n["toDisplayString"])(e.$f.formatNumber2((null===(a=i.swapInfo)||void 0===a?void 0:a.fromAmount)||ae.formatUnits(i.swapInfo.fromTokenAmount||0,i.swapInfo.fromToken.decimals))||"0"),1)]),Object(n["createElementVNode"])("div",p,[Object(n["createVNode"])(le,{class:"switch-icon",name:"down"})]),Object(n["createElementVNode"])("div",b,[Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("img",{class:"icon-token",src:ae.formatLogo(i.swapInfo.toToken),alt:"",height:"20"},null,8,h),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.swapInfo.toToken.symbol),1)]),Object(n["createElementVNode"])("div",v,Object(n["toDisplayString"])(e.$f.formatNumber2((null===(ce=i.swapInfo)||void 0===ce?void 0:ce.toAmount)||ae.formatUnits(i.swapInfo.toTokenAmount||0,i.swapInfo.toToken.decimals))||"0"),1)])]),e.$store.state.isBatchSwap&&ie.isCanBatchSwap?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",g,[Object(n["createElementVNode"])("button",{class:"clickable",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return ie.isShowBatchAddress=!ie.isShowBatchAddress}),["stop"]))},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("batchSwapDetails"))+"(",1),Object(n["createElementVNode"])("span",k,Object(n["toDisplayString"])((null===(de=ae.selectSubWallets)||void 0===de?void 0:de.length)||0),1),O,Object(n["withDirectives"])(Object(n["createVNode"])(le,{name:"arrow-down"},null,512),[[n["vShow"],!ie.isShowBatchAddress]]),Object(n["withDirectives"])(Object(n["createVNode"])(le,{name:"arrow-up"},null,512),[[n["vShow"],ie.isShowBatchAddress]])]),Object(n["withDirectives"])(Object(n["createElementVNode"])("ul",j,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(ae.selectSubWallets||[],(function(t,o){var a;return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",w,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(null===t||void 0===t?void 0:t.name)+"("+Object(n["toDisplayString"])(null===t||void 0===t?void 0:t.address.slice(0,6))+"..."+Object(n["toDisplayString"])(null===t||void 0===t?void 0:t.address.slice(-4))+")",1),null!==(a=ae.swapTxs)&&void 0!==a&&a[o]?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",y,"-"+Object(n["toDisplayString"])(e.$f.formatNumber2(ae.formatUnits(i.swapInfo.fromTokenAmount||0,i.swapInfo.fromToken.decimals))||"0")+" "+Object(n["toDisplayString"])(i.swapInfo.fromToken.symbol),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",S,Object(n["toDisplayString"])(e.$t("insufficientBalance")),1))])})),256))],512),[[n["vShow"],ie.isShowBatchAddress]])])):Object(n["createCommentVNode"])("",!0),ie.priceUpdated?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",T,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$t("priceUpdated")),1),Object(n["createVNode"])(se,{class:"btn",type:"primary",color:"#3F80F7",size:"small",round:"",onClick:ae.accept},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("accept")),1)]})),_:1},8,["onClick"])])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("li",_,[Object(n["createElementVNode"])("div",N,Object(n["toDisplayString"])(e.$t("price")),1),Object(n["createElementVNode"])("div",V,[Object(n["createElementVNode"])("div",$,"1 "+Object(n["toDisplayString"])(i.swapInfo.fromToken.symbol)+" = "+Object(n["toDisplayString"])(ae.getPrice((null===(me=i.swapInfo)||void 0===me?void 0:me.fromAmount)||ae.formatUnits(i.swapInfo.fromTokenAmount||0,i.swapInfo.fromToken.decimals),(null===(pe=i.swapInfo)||void 0===pe?void 0:pe.toAmount)||ae.formatUnits(i.swapInfo.toTokenAmount||0,i.swapInfo.toToken.decimals)))+" "+Object(n["toDisplayString"])(i.swapInfo.toToken.symbol),1),Object(n["createElementVNode"])("div",x,"1 "+Object(n["toDisplayString"])(i.swapInfo.toToken.symbol)+" = "+Object(n["toDisplayString"])(ae.getPrice((null===(be=i.swapInfo)||void 0===be?void 0:be.toAmount)||ae.formatUnits(i.swapInfo.toTokenAmount||0,i.swapInfo.toToken.decimals),(null===(fe=i.swapInfo)||void 0===fe?void 0:fe.fromAmount)||ae.formatUnits(i.swapInfo.fromTokenAmount||0,i.swapInfo.fromToken.decimals)))+" "+Object(n["toDisplayString"])(i.swapInfo.fromToken.symbol),1)])]),i.swapInfo.fromToken.isWrapper&&i.swapInfo.toToken.isETH||i.swapInfo.toToken.isWrapper&&i.swapInfo.fromToken.isETH?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",E,[Object(n["createElementVNode"])("div",B,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("div",A,Object(n["toDisplayString"])(i.slippage)+"%",1)])),i.swapInfo.gasValue&&i.swapInfo.gasValue>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",C,[Object(n["createElementVNode"])("div",I,Object(n["toDisplayString"])(e.$t("estimatedGas")),1),Object(n["createElementVNode"])("div",P,"≈ "+Object(n["toDisplayString"])(ae.getEstimatedFee(i.swapInfo.gasValue)),1)])):Object(n["createCommentVNode"])("",!0),i.swapInfo.fromToken.isWrapper&&i.swapInfo.toToken.isETH||i.swapInfo.toToken.isWrapper&&i.swapInfo.fromToken.isETH?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:4},[i.swapInfo.isAmountOut?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",R,[Object(n["createElementVNode"])("div",M,Object(n["toDisplayString"])(e.$t("maximumReceived")),1),Object(n["createElementVNode"])("div",U,Object(n["toDisplayString"])(ae.maxSold)+" "+Object(n["toDisplayString"])(null===(ge=i.swapInfo)||void 0===ge||null===(ke=ge.fromToken)||void 0===ke?void 0:ke.symbol),1)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",D,[Object(n["createElementVNode"])("div",L,Object(n["toDisplayString"])(e.$t("minimumReceived")),1),Object(n["createElementVNode"])("div",F,Object(n["toDisplayString"])(ae.minReceived)+" "+Object(n["toDisplayString"])(null===(he=i.swapInfo)||void 0===he||null===(ve=he.toToken)||void 0===ve?void 0:ve.symbol),1)]))],64)),Object(n["createElementVNode"])("li",G,[Object(n["createElementVNode"])("div",z,Object(n["toDisplayString"])(e.$t("tokenRoute")),1),i.swapInfo.fromToken.isWrapper&&i.swapInfo.toToken.isETH||i.swapInfo.toToken.isWrapper&&i.swapInfo.fromToken.isETH?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",K,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(ae.swapRouterPath,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:t},[0!==t?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",Y)):Object(n["createCommentVNode"])("",!0),e.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",J,Object(n["toDisplayString"])(e.symbol),1)):Object(n["createCommentVNode"])("",!0)],64)})),128))])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Q,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(ae.swapRouterPath,(function(t,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:i},[t.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",W,Object(n["toDisplayString"])(t.symbol),1)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",q,[t.nextAmm&&"unknown"!==t.nextAmm?(Object(n["openBlock"])(),Object(n["createBlock"])(re,{key:0,class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(t.nextAmm,".jpeg"),"error-icon":o("aeccf")},null,8,["src","error-icon"])):Object(n["createCommentVNode"])("",!0),i!==ae.swapRouterPath.length-1?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",H)):Object(n["createCommentVNode"])("",!0)])],64)})),128))]))]),null!==(Oe=i.swapInfo)&&void 0!==Oe&&Oe.transaction?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",X,[Object(n["createElementVNode"])("div",Z,Object(n["toDisplayString"])(e.$t("txHash")),1),Object(n["createElementVNode"])("div",ee,[Object(n["createElementVNode"])("a",{href:e.$f.formatExplorerUrl(i.chain,i.swapInfo.transaction,"tx"),target:"_blank"},Object(n["toDisplayString"])((null===(je=i.swapInfo)||void 0===je||null===(we=je.transaction)||void 0===we?void 0:we.slice(0,6))+"..."+(null===(Se=i.swapInfo)||void 0===Se||null===(ye=Se.transaction)||void 0===ye?void 0:ye.slice(-6))),9,te),Object(n["withDirectives"])(Object(n["createElementVNode"])("i",oe,null,512),[[ue,null===(Te=i.swapInfo)||void 0===Te?void 0:Te.transaction]])])])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",ne,[Object(n["createVNode"])(se,{class:"submit-button",type:"primary",loading:ae.isLoading,"loading-text":e.$t("confirming"),block:"",onClick:Object(n["withModifiers"])(ae.submitSwap,["stop"]),disabled:ie.priceUpdated},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm")),1)]})),_:1},8,["loading","loading-text","onClick","disabled"])])]})),_:1},8,["show","style"])}o("a9e3"),o("b680"),o("d3b7"),o("25f0"),o("caad"),o("2532");var ae=o("901e"),le=o.n(ae),se=o("6779"),re=o("c9d9"),ce={name:"ConfirmSwap",props:{visible:Boolean,swapInfo:Object,slippage:String,loading:Boolean,chain:String,nativePrice:Number,gasPrice:String},emits:["update:visible","submit"],data:function(){var e,t;return{priceUpdated:!1,isShowBatchAddress:!0,isCanBatchSwap:!(null===(e=window)||void 0===e||null===(t=e._tw_)||void 0===t||!t.appSelectSubWallet)||!1}},computed:{dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},isLoading:function(){return this.loading},minReceived:function(){var e,t,o,n,i=(null===(e=this.swapInfo)||void 0===e||null===(t=e.toToken)||void 0===t?void 0:t.decimals)||0,a=null===(o=this.swapInfo)||void 0===o?void 0:o.toAmount;return a?this.$f.formatNumber(new le.a(a||0).times(100-Number(this.slippage)).div(100).toFixed()):this.$f.formatNumber(se["utils"].formatUnits(new le.a((null===(n=this.swapInfo)||void 0===n?void 0:n.toTokenAmount)||0).times(100-Number(this.slippage)).div(100).toFixed(0),i))},maxSold:function(){var e,t,o,n,i=(null===(e=this.swapInfo)||void 0===e||null===(t=e.fromToken)||void 0===t?void 0:t.decimals)||0,a=null===(o=this.swapInfo)||void 0===o?void 0:o.fromAmount;return a?this.$f.formatNumber(new le.a(a||0).times(100+Number(this.slippage)).div(100).toFixed()):this.$f.formatNumber(se["utils"].formatUnits(new le.a((null===(n=this.swapInfo)||void 0===n?void 0:n.fromTokenAmount)||0).times(100+Number(this.slippage)).div(100).toFixed(0),i))},swapRouterPath:function(){var e;return(null===(e=this.swapInfo)||void 0===e?void 0:e.swapRouterPath)||[]},subTxs:function(){var e;return(null===(e=this.swapInfo)||void 0===e?void 0:e.subTxs)||{}},selectSubWallets:function(){return this.$store.getters.selectSubWallets||[]},swapTxs:function(){var e,t;return(null===(e=this.$store.state)||void 0===e||null===(t=e.subTxs)||void 0===t?void 0:t.swapTxs)||[]}},watch:{swapInfo:function(e,t){},visible:function(e){var t,o,n;e&&(this.priceUpdated=!1),null===(t=window)||void 0===t||null===(o=t._tw_)||void 0===o||null===(n=o.isRefreshEnable)||void 0===n||n.call(o,"bridge",!e)}},methods:{formatUnits:se["utils"].formatUnits,formatPrice:function(e){return this.$f.formatNumber(e&&""!==e?se["utils"].formatEther(this.nativePrice):0)},getPrice:function(e,t){return!e||!t||isNaN(Number(e))||isNaN(Number(t))?"0":this.$f.formatNumber2(new le.a(t).div(e).toFixed())||"0"},getEstimatedFee:function(e){return e?this.$f.formatNumberCurrencyUnit(new le.a(e.toString()).times(this.nativePrice).times(this.gasPrice).div(String(Math.pow(10,18))).toFixed()||"0",2):"0"},submitSwap:function(){this.$emit("submit")},formatLogo:function(e){var t;return!e.logoURI||null!==e&&void 0!==e&&null!==(t=e.logoURI)&&void 0!==t&&t.includes("empty-token")?e.logo_url?this.$f.formatIcon(e):e.isETH?this.$f.formatIcon(re["k"]+"-"+this.chain):"/icon-default.png":e.logoURI},goLink:function(){this.$f.openBrowser(this.$f.formatExplorerUrl(this.chain,this.swapInfo.transaction,"tx"))},accept:function(){this.priceUpdated=!1}}},ue=(o("a28f"),o("6b0d")),de=o.n(ue);const me=de()(ce,[["render",ie],["__scopeId","data-v-3eabeb3e"]]);t["a"]=me},a6ec:function(e,t,o){"use strict";o("24500")},a954:function(e,t,o){"use strict";o("98fe")},aa57:function(e,t,o){},aeccf:function(e,t,o){e.exports=o.p+"static/img/icon-default.75f6e9a0.png"},afd7:function(e,t,o){e.exports=o.p+"static/img/loading.fdd45987.svg"},c240:function(e,t,o){},c2b9:function(e,t,o){},c752:function(e,t,o){},ce94:function(e,t,o){"use strict";var n=o("7a23"),i={key:0,class:"swap-title"},a={key:1,class:"swap-title"},l={key:2,class:"swap-title"},s={key:3,class:"swap-info"},r={key:0,class:"swap-info_item"},c={class:"swap-info_item-label"},u={class:"swap-info_item-value"},d={class:"swap-info_item"},m={class:"swap-info_item-label"},p={class:"swap-info_item-value"},b=["src"],f={class:"ml-5"},h={key:0,class:"swap-info_item"},v={class:"swap-info_item-label"},g={class:"swap-info_item-value",style:{"font-size":"0.24rem"}},k={style:{color:"#3F80F7"}},O={key:1,class:"swap-info_item"},j={class:"swap-info_item-label"},w={class:"swap-info_item-value",style:{"font-size":"0.24rem"}},S={style:{color:"#3F80F7"}},y={class:"swap-info_item"},T={class:"swap-info_item-label"},_={class:"swap-info_item-value"},N=["src"],V={class:"ml-5"},$={class:"swap-info_item"},x={class:"swap-info_item-label"},E={class:"swap-info_item-value"},B=["src"],A={class:"ml-5"},C={key:0,class:"swap-info_item"},I={class:"swap-info_item-label"},P={class:"swap-info_item-value",style:{"font-size":"0.24rem"}},D={style:{color:"#3F80F7"}},L={key:1,class:"swap-info_item"},F={class:"swap-info_item-label"},R={class:"swap-info_item-value",style:{"font-size":"0.24rem"}},M={style:{color:"#3F80F7"}},U={class:"swap-info_item"},G={class:"swap-info_item-label"},z={class:"swap-info_item-value"},Q=["src"],W={class:"ml-5"},q={key:3,class:"swap-info_item"},H={class:"swap-info_item-label"},K={class:"swap-info_item-value",style:{"text-align":"right"}},Y={class:"swap-info_item tips warning"},J={class:"swap-info_item tips warning"},X={key:0,class:"swap-info_item tips warning"},Z={key:1,class:"swap-info_item tips warning"},ee={key:4,class:"swap-info"},te={class:"swap-info_item header"},oe={class:"header-li"},ne={class:"header-li_left"},ie=["src"],ae={class:"header-li_right"},le={class:"switch-box"},se={class:"header-li"},re={class:"header-li_left"},ce=["src"],ue={class:"header-li_right"},de={class:"swap-info_item"},me={class:"swap-info_item-label"},pe={class:"swap-info_item-value"},be={class:"swap-info_item"},fe={class:"swap-info_item-label"},he={class:"swap-info_item-value"},ve={class:"swap-info_item"},ge={class:"swap-info_item-label"},ke={class:"swap-info_item-value"},Oe={class:"footer"};function je(e,t,o,je,we,Se){var ye=Object(n["resolveComponent"])("van-icon"),Te=Object(n["resolveComponent"])("van-button"),_e=Object(n["resolveComponent"])("van-popup");return Object(n["openBlock"])(),Object(n["createBlock"])(_e,{show:Se.dialogVisible,"onUpdate:show":t[1]||(t[1]=function(e){return Se.dialogVisible=e}),style:Object(n["normalizeStyle"])({width:"90%",padding:"0.4rem"}),closeable:"",round:"",teleport:"#app"},{default:Object(n["withCtx"])((function(){var je,_e,Ne,Ve,$e,xe,Ee,Be,Ae,Ce,Ie,Pe,De,Le,Fe,Re,Me,Ue,Ge,ze,Qe,We,qe,He,Ke,Ye,Je,Xe,Ze,et,tt,ot,nt,it,at,lt;return[0===o.limitInfo.orderType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("header",i,Object(n["toDisplayString"])(0===o.limitInfo.activeTab?e.$t("limitBuy"):e.$t("limitSell")),1)):Object(n["createCommentVNode"])("",!0),1===o.limitInfo.orderType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("header",a,Object(n["toDisplayString"])(0===o.limitInfo.activeTab?e.$t("stopLimitBuy"):e.$t("stopLimitSell")),1)):Object(n["createCommentVNode"])("",!0),2===o.limitInfo.orderType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("header",l,Object(n["toDisplayString"])(e.$t("tradeConfirm")),1)):Object(n["createCommentVNode"])("",!0),0===o.limitInfo.orderType||1===o.limitInfo.orderType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",s,[1===o.limitInfo.orderType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",r,[Object(n["createElementVNode"])("div",c,Object(n["toDisplayString"])(e.$t("limitEffective")),1),Object(n["createElementVNode"])("div",u,Object(n["toDisplayString"])(e.$t("triggerPriceEffective",{symbol:1===o.limitInfo.activeTab?(null===(je=o.limitInfo)||void 0===je||null===(_e=je.fromToken)||void 0===_e?void 0:_e.symbol)||"":(null===(Ne=o.limitInfo)||void 0===Ne||null===(Ve=Ne.toToken)||void 0===Ve?void 0:Ve.symbol)||"",price:e.$f.formatNumber2((null===($e=o.limitInfo)||void 0===$e?void 0:$e.triggerPrice)||0)})),1)])):Object(n["createCommentVNode"])("",!0),0===o.limitInfo.activeTab?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createElementVNode"])("li",d,[Object(n["createElementVNode"])("div",m,Object(n["toDisplayString"])(e.$t("limitBuy")),1),Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("img",{class:"icon-token",src:Se.formatLogo(o.limitInfo.toToken),alt:"",height:"20"},null,8,b),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.toAmount||0)),1),Object(n["createElementVNode"])("span",f,Object(n["toDisplayString"])((null===(xe=o.limitInfo)||void 0===xe||null===(Ee=xe.toToken)||void 0===Ee?void 0:Ee.symbol)||""),1)])]),"solana"!==o.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",h,[Object(n["createElementVNode"])("div",v,Object(n["toDisplayString"])(e.$t("limitPrice"))+"("+Object(n["toDisplayString"])(1===o.limitInfo.activeTab?(null===(Be=o.limitInfo)||void 0===Be||null===(Ae=Be.fromToken)||void 0===Ae?void 0:Ae.symbol)||"":(null===(Ce=o.limitInfo)||void 0===Ce||null===(Ie=Ce.toToken)||void 0===Ie?void 0:Ie.symbol)||"")+")",1),Object(n["createElementVNode"])("div",g,[Object(n["createElementVNode"])("span",null,"$"+Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.targetLimitPrice||0)),1),Object(n["createElementVNode"])("span",k,"("+Object(n["toDisplayString"])(e.$t("auto-submitWhenPriceBuy"))+")",1)])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",O,[Object(n["createElementVNode"])("div",j,Object(n["toDisplayString"])(e.$t("limitPrice"))+"("+Object(n["toDisplayString"])(1===o.limitInfo.activeTab?(null===(Pe=o.limitInfo)||void 0===Pe||null===(De=Pe.fromToken)||void 0===De?void 0:De.symbol)||"":(null===(Le=o.limitInfo)||void 0===Le||null===(Fe=Le.toToken)||void 0===Fe?void 0:Fe.symbol)||"")+")",1),Object(n["createElementVNode"])("div",w,[Object(n["createElementVNode"])("span",null,"$"+Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.targetLimitPrice||0)),1),Object(n["createElementVNode"])("span",S,"("+Object(n["toDisplayString"])(e.$t("auto-submitWhenPriceBuy"))+")",1)])])),Object(n["createElementVNode"])("li",y,[Object(n["createElementVNode"])("div",T,Object(n["toDisplayString"])(e.$t("expectedPayment")),1),Object(n["createElementVNode"])("div",_,[Object(n["createElementVNode"])("img",{class:"icon-token",src:Se.formatLogo(o.limitInfo.fromToken),alt:"",height:"20"},null,8,N),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.fromAmount||0)),1),Object(n["createElementVNode"])("span",V,Object(n["toDisplayString"])((null===(Re=o.limitInfo)||void 0===Re||null===(Me=Re.fromToken)||void 0===Me?void 0:Me.symbol)||""),1)])])],64)):Object(n["createCommentVNode"])("",!0),1===o.limitInfo.activeTab?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:2},[Object(n["createElementVNode"])("li",$,[Object(n["createElementVNode"])("div",x,Object(n["toDisplayString"])(e.$t("limitSell")),1),Object(n["createElementVNode"])("div",E,[Object(n["createElementVNode"])("img",{class:"icon-token",src:Se.formatLogo(o.limitInfo.fromToken),alt:"",height:"20"},null,8,B),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.fromAmount||0)),1),Object(n["createElementVNode"])("span",A,Object(n["toDisplayString"])((null===(Ue=o.limitInfo)||void 0===Ue||null===(Ge=Ue.fromToken)||void 0===Ge?void 0:Ge.symbol)||""),1)])]),"solana"!==o.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",C,[Object(n["createElementVNode"])("div",I,Object(n["toDisplayString"])(e.$t("limitPrice"))+"("+Object(n["toDisplayString"])(1===o.limitInfo.activeTab?(null===(ze=o.limitInfo)||void 0===ze||null===(Qe=ze.fromToken)||void 0===Qe?void 0:Qe.symbol)||"":(null===(We=o.limitInfo)||void 0===We||null===(qe=We.toToken)||void 0===qe?void 0:qe.symbol)||"")+")",1),Object(n["createElementVNode"])("div",P,[Object(n["createElementVNode"])("span",null,"$"+Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.targetLimitPrice||0)),1),Object(n["createElementVNode"])("span",D,"("+Object(n["toDisplayString"])(e.$t("auto-submitWhenPriceSell"))+")",1)])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",L,[Object(n["createElementVNode"])("div",F,Object(n["toDisplayString"])(e.$t("limitPrice"))+"("+Object(n["toDisplayString"])(1===o.limitInfo.activeTab?(null===(He=o.limitInfo)||void 0===He||null===(Ke=He.fromToken)||void 0===Ke?void 0:Ke.symbol)||"":(null===(Ye=o.limitInfo)||void 0===Ye||null===(Je=Ye.toToken)||void 0===Je?void 0:Je.symbol)||"")+")",1),Object(n["createElementVNode"])("div",R,[Object(n["createElementVNode"])("span",null,"$"+Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.targetLimitPrice||0)),1),Object(n["createElementVNode"])("span",M,"("+Object(n["toDisplayString"])(e.$t("auto-submitWhenPriceSell"))+")",1)])])),Object(n["createElementVNode"])("li",U,[Object(n["createElementVNode"])("div",G,Object(n["toDisplayString"])(e.$t("expectedReceivable")),1),Object(n["createElementVNode"])("div",z,[Object(n["createElementVNode"])("img",{class:"icon-token",src:Se.formatLogo(o.limitInfo.toToken),alt:"",height:"20"},null,8,Q),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.toAmount||0)),1),Object(n["createElementVNode"])("span",W,Object(n["toDisplayString"])((null===(Xe=o.limitInfo)||void 0===Xe||null===(Ze=Xe.toToken)||void 0===Ze?void 0:Ze.symbol)||""),1)])])],64)):Object(n["createCommentVNode"])("",!0),"solana"!==o.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",q,[Object(n["createElementVNode"])("div",H,Object(n["toDisplayString"])(e.$t("estimateGas")),1),Object(n["createElementVNode"])("div",K,Object(n["toDisplayString"])(e.$t("estimateGasTips",{n:e.$f.formatNumber2("solana"===o.chain?"0.1":null!==(et=o.limitGasU)&&void 0!==et?et:1,1)})),1)])):Object(n["createCommentVNode"])("",!0),"solana"!==o.chain?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:4},[Object(n["createElementVNode"])("li",Y,"* "+Object(n["toDisplayString"])(e.$t("limitFeeTip")),1),Object(n["createElementVNode"])("li",J,"* "+Object(n["toDisplayString"])(e.$t("limitTokenTips")),1),(null===(tt=o.limitInfo)||void 0===tt||null===(ot=tt.fromToken)||void 0===ot?void 0:ot.address)===we.NATIVE_TOKEN?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",X,Object(n["toDisplayString"])(e.$t("limitTips1")),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",Z,Object(n["toDisplayString"])(e.$t("limitTips2")),1))],64)):Object(n["createCommentVNode"])("",!0)])):2===o.limitInfo.orderType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",ee,[Object(n["createElementVNode"])("li",te,[Object(n["createElementVNode"])("div",oe,[Object(n["createElementVNode"])("div",ne,[Object(n["createElementVNode"])("img",{class:"icon-token",src:Se.formatLogo(o.limitInfo.fromToken),alt:"",height:"20"},null,8,ie),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(o.limitInfo.fromToken.symbol),1)]),Object(n["createElementVNode"])("div",ae,Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.fromAmount||0)||"0"),1)]),Object(n["createElementVNode"])("div",le,[Object(n["createVNode"])(ye,{class:"switch-icon",name:"down"})]),Object(n["createElementVNode"])("div",se,[Object(n["createElementVNode"])("div",re,[Object(n["createElementVNode"])("img",{class:"icon-token",src:Se.formatLogo(o.limitInfo.toToken),alt:"",height:"20"},null,8,ce),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(o.limitInfo.toToken.symbol),1)]),Object(n["createElementVNode"])("div",ue,Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.toAmount||0)||"0"),1)])]),Object(n["createElementVNode"])("li",de,[Object(n["createElementVNode"])("div",me,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("div",pe,Object(n["toDisplayString"])(null===(nt=o.limitInfo)||void 0===nt?void 0:nt.slippage)+"%",1)]),Object(n["createElementVNode"])("li",be,[Object(n["createElementVNode"])("div",fe,Object(n["toDisplayString"])(e.$t("estimatedGas")),1),Object(n["createElementVNode"])("div",he,[Object(n["createElementVNode"])("span",null,"≈ $"+Object(n["toDisplayString"])(e.$f.formatNumber2(o.limitGasU||"0")),1),Object(n["createElementVNode"])("button",{type:"button",class:"clickable flex items-center tag-question",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(t){var n,i;return e.$dialog.alert({title:e.$t("tips"),message:e.$t("noGasTips",{s:(null===(n=o.limitInfo)||void 0===n||null===(i=n.fromToken)||void 0===i?void 0:i.symbol)||""}),confirmButtonText:e.$t("iKnown"),confirmButtonColor:"#3F80F7",messageAlign:"center"})}),["stop"]))},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("noGas")),1),Object(n["createVNode"])(ye,{name:"question-o"})])])]),Object(n["createElementVNode"])("li",ve,[Object(n["createElementVNode"])("div",ge,Object(n["toDisplayString"])(e.$t("minimumReceived")),1),Object(n["createElementVNode"])("div",ke,Object(n["toDisplayString"])(e.$f.formatNumber2((null===(it=o.limitInfo)||void 0===it?void 0:it.minReturn)||0))+" "+Object(n["toDisplayString"])(null===(at=o.limitInfo)||void 0===at||null===(lt=at.toToken)||void 0===lt?void 0:lt.symbol),1)])])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",Oe,[Object(n["createVNode"])(Te,{class:"submit-button",type:"primary",loading:Se.isLoading,"loading-text":e.$t("confirming"),block:"",round:"",onClick:Object(n["withModifiers"])(Se.submitSwap,["stop"])},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm")),1)]})),_:1},8,["loading","loading-text","onClick"])])]})),_:1},8,["show","style"])}o("a9e3"),o("b680"),o("caad"),o("2532");var we=o("901e"),Se=o.n(we),ye=o("6779"),Te=o("c9d9"),_e={name:"ConfirmLimit",props:{visible:Boolean,limitInfo:Object,loading:Boolean,chain:String,limitGasU:String},emits:["update:visible","submit"],data:function(){return{NATIVE_TOKEN:Te["k"],limitContractsFee:Te["w"]}},computed:{dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},isLoading:function(){return this.loading}},watch:{visible:function(e){var t,o,n;console.log("isRefreshEnable",e),null===(t=window)||void 0===t||null===(o=t._tw_)||void 0===o||null===(n=o.isRefreshEnable)||void 0===n||n.call(o,"bridge",!e)}},methods:{formatUnits:ye["utils"].formatUnits,getPrice:function(e,t){return!e||!t||isNaN(Number(e))||isNaN(Number(t))?"0":this.$f.formatNumber2(new Se.a(t).div(e).toFixed())||"0"},submitSwap:function(){this.$emit("submit")},formatLogo:function(e){var t;return!e.logoURI||null!==e&&void 0!==e&&null!==(t=e.logoURI)&&void 0!==t&&t.includes("empty-token")?e.logo_url?this.$f.formatIcon(e):"/icon-default.png":e.logoURI},goLink:function(){this.$f.openBrowser(this.$f.formatExplorerUrl(this.chain,this.limitInfo.transaction,"tx"))}}},Ne=(o("a277"),o("6b0d")),Ve=o.n(Ne);const $e=Ve()(_e,[["render",je],["__scopeId","data-v-37f08fbf"]]);t["a"]=$e},cf1a:function(e,t,o){"use strict";var n=o("7a23"),i={class:"chart-container"},a=["id"];function l(e,t,o,l,s,r){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",i,[Object(n["createElementVNode"])("div",{id:s.chartId,style:Object(n["normalizeStyle"])({height:"1.45rem",width:"100%"})},null,12,a)])}o("d81d");var s=o("22b4"),r=o("1be7"),c=o("3620"),u=o("2da7"),d=o("4b2a"),m=o("5e81"),p=o("e600"),b=o("ee29"),f=o("c55a"),h=o("f95e"),v=o("ec26");s["a"]([u["a"],d["a"],m["a"],p["a"],c["a"],b["a"],f["a"],h["a"]]);var g={name:"PriceChart",props:{dataX:Array,dataY:Array},data:function(){return{chartId:"chart-".concat(Object(v["a"])()),myChart:null,loading:!1}},watch:{dataY:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dataX,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.dataY,n=t.map((function(t){return e.$f.formatDate(t,"MM-DD HH:mm")}));if(document.getElementById(this.chartId)){var i=r["b"](document.getElementById(this.chartId));i||(i=r["c"](document.getElementById(this.chartId)));var a={tooltip:{trigger:"axis",appendToBody:!0},grid:{left:"0",right:"0",top:"5%",bottom:"3%",containLabel:!0},xAxis:{data:n,axisLine:{show:!1,lineStyle:{color:"#23293C"}},axisLabel:{show:!1,color:"#777"},axisTick:{show:!1},nameTextStyle:{fontSize:12}},yAxis:{type:"value",name:"",nameTextStyle:{fontSize:14},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{show:!1,lineStyle:{type:"solid",color:["#FF646D"]}}},series:[{name:"",type:"line",data:o,smooth:!0,symbolSize:3,areaStyle:{color:"#558BED",opacity:.2},itemStyle:{color:"#558BED",lineStyle:{color:"#558BED"}},tooltip:{valueFormatter:function(t){return e.$f.formatNumberCurrencyUnit(t||0,3,4)}}}]};i.setOption(a)}}}},k=(o("fcef"),o("6b0d")),O=o.n(k);const j=O()(g,[["render",l],["__scopeId","data-v-08c733db"]]);t["a"]=j},cffb:function(e,t,o){},e524:function(e,t,o){e.exports=o.p+"static/img/arrow-right.484eb652.svg"},e60c:function(e,t,o){},eb18:function(e,t,o){"use strict";o("c2b9")},f7ee:function(e,t,o){"use strict";o("aa57")},f898:function(e,t,o){},fadf:function(e,t,o){"use strict";o("b0c0"),o("99af"),o("fb6a");var n=o("7a23"),i=function(e){return Object(n["pushScopeId"])("data-v-a962d930"),e=e(),Object(n["popScopeId"])(),e},a={class:"select-box"},l={class:"flex items-center"},s={key:0,class:"color-999"},r=Object(n["createTextVNode"])("("),c=Object(n["createTextVNode"])(")"),u=i((function(){return Object(n["createElementVNode"])("span",{class:"mr-5 ml-5"},"|",-1)})),d={style:{"margin-right":"0.1rem"}},m=i((function(){return Object(n["createElementVNode"])("span",{class:"mr-5 ml-5"},"|",-1)})),p={class:"mr-5"},b={style:{background:"#fff",padding:"0 0.3rem 1rem 0.3rem","--van-cell-background-color":"transparent"}},f={class:"setting-title"},h={class:"slippage-setting"},v=Object(n["createTextVNode"])("%"),g={key:0,class:"class-b-s"},k={class:"setting-title flex items-center justify-between"},O={class:"mr-5"},j=Object(n["createTextVNode"])("NEW"),w=i((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),S={class:"flex items-center justify-between text-size-14 mt-15"},y={style:{"max-width":"65%"}},T={key:0,class:"flex items-center justify-between clickable",style:{padding:"0",color:"#BFBFBF"}},_={class:"setting-title mb-0"},N={class:"inline-flex items-center"},V={class:"mr-5"},$={key:0,class:"icon-svg",style:{"font-size":"0.46rem"},"aria-hidden":"true"},x=i((function(){return Object(n["createElementVNode"])("use",{"xlink:href":"#icon-HOT"},null,-1)})),E=[x],B={class:"popup-title"},A={class:"form-submit mt-10"};function C(e,t,o,i,x,C){var I,P,D=Object(n["resolveComponent"])("van-field"),L=Object(n["resolveComponent"])("van-tag"),F=Object(n["resolveComponent"])("van-switch"),R=Object(n["resolveComponent"])("van-icon"),M=Object(n["resolveComponent"])("van-divider"),U=Object(n["resolveComponent"])("van-radio"),G=Object(n["resolveComponent"])("van-cell"),z=Object(n["resolveComponent"])("van-radio-group"),Q=Object(n["resolveComponent"])("van-button"),W=Object(n["resolveComponent"])("van-action-sheet"),q=Object(n["resolveComponent"])("van-checkbox"),H=Object(n["resolveComponent"])("van-checkbox-group"),K=Object(n["resolveComponent"])("van-empty"),Y=Object(n["resolveComponent"])("van-form"),J=Object(n["resolveComponent"])("van-popup");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",a,[Object(n["createElementVNode"])("div",l,[C.isSwapMode?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createElementVNode"])("span",{style:Object(n["normalizeStyle"])([{"text-align":"right"},{color:"protect"===o.swapMode?"#F81111":"",fontWeight:"protect"===o.swapMode?"500":"normal"}])},Object(n["toDisplayString"])(C.swapModeName),5),C.autoName?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",s,[r,Object(n["createElementVNode"])("span",{style:Object(n["normalizeStyle"])({color:"protect"===o.autoSwapMode?"#F81111":"",fontWeight:"protect"===o.autoSwapMode?"500":"normal"})},Object(n["toDisplayString"])(C.autoName),5),c])):Object(n["createCommentVNode"])("",!0),u],64)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",d,Object(n["toDisplayString"])("auto"===o.slippage?e.$t("autoSlippage"):e.$t("manualSlippage"))+"("+Object(n["toDisplayString"])("auto"===o.slippage?o.autoSlippage:o.slippage)+"%)",1),x.isCanBatchSwap&&(null===(I=C.selectSubWallets)||void 0===I?void 0:I.length)>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[m,Object(n["createElementVNode"])("span",p,Object(n["toDisplayString"])((null===(P=C.selectSubWallets)||void 0===P?void 0:P.length)||0)+" "+Object(n["toDisplayString"])(e.$t("subWallets")),1)],64)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("i",{class:"iconfont icon-settings",style:{color:"#999999"},onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return x.show=!0}),["stop"]))})]),Object(n["createVNode"])(W,{show:x.show,"onUpdate:show":t[9]||(t[9]=function(e){return x.show=e}),title:e.$t("swapSet"),style:{"--van-popup-background-color":"#fff","min-height":"40%"}},{default:Object(n["withCtx"])((function(){var o,i;return[Object(n["createElementVNode"])("div",b,[Object(n["createElementVNode"])("div",f,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("div",h,[Object(n["createElementVNode"])("button",{type:"button",class:Object(n["normalizeClass"])({active:"0.5"===x.slippageValue}),onClick:t[1]||(t[1]=function(e){return x.slippageValue="0.5"})},"0.5%",2),Object(n["createElementVNode"])("button",{type:"button",class:Object(n["normalizeClass"])({active:"1"===x.slippageValue}),onClick:t[2]||(t[2]=function(e){return x.slippageValue="1"})},"1%",2),Object(n["createElementVNode"])("button",{type:"button",class:Object(n["normalizeClass"])({active:void 0===x.slippageValue}),onClick:t[3]||(t[3]=function(e){return x.slippageValue=void 0})},Object(n["toDisplayString"])(e.$t("smartSetting")),3),Object(n["createVNode"])(D,{class:"input",name:"slippage",type:"number",min:"0",max:"49.99",placeholder:e.$t("custom"),modelValue:x.slippageValue,"onUpdate:modelValue":t[4]||(t[4]=function(e){return x.slippageValue=e}),onBlur:C.handleBlur,clearable:""},{"right-icon":Object(n["withCtx"])((function(){return[v]})),_:1},8,["placeholder","modelValue","onBlur"])]),x.isCanBatchSwap?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",g,[Object(n["createElementVNode"])("div",k,[Object(n["createElementVNode"])("span",O,Object(n["toDisplayString"])(e.$t("batchSwap")),1),Object(n["createVNode"])(L,{type:"danger",color:"#eb5139"},{default:Object(n["withCtx"])((function(){return[j]})),_:1}),w,Object(n["createVNode"])(F,{modelValue:x.isBatchSwap,"onUpdate:modelValue":t[5]||(t[5]=function(e){return x.isBatchSwap=e}),size:"0.32rem","inactive-color":"#BFBFBF"},null,8,["modelValue"])]),Object(n["createElementVNode"])("div",S,[Object(n["createElementVNode"])("span",y,Object(n["toDisplayString"])(e.$t("selectAddressCanSwapSameTime")),1),x.isBatchSwap?0===(null===(o=C.selectSubWallets)||void 0===o?void 0:o.length)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:1,onClick:t[6]||(t[6]=Object(n["withModifiers"])((function(e){return x.selectSubWalletVisible=!0}),["stop"])),class:"flex items-center justify-between clickable",style:{padding:"0",color:"#F6465D"}},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("plsSelectAddress")),1),Object(n["createVNode"])(R,{name:"arrow"})])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:2,class:"flex items-center justify-between clickable text-right",style:{padding:"0",color:"#3F80F7"},onClick:t[7]||(t[7]=Object(n["withModifiers"])((function(e){return x.selectSubWalletVisible=!0}),["stop"]))},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("selectedAddress",{n:null===(i=C.selectSubWallets)||void 0===i?void 0:i.length})),1),Object(n["createVNode"])(R,{name:"arrow"})])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",T,[Object(n["createVNode"])(R,{name:"arrow"})]))])])):Object(n["createCommentVNode"])("",!0),C.isSwapMode?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[x.isCanBatchSwap?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(M,{key:0,style:{margin:"0.4rem 0"}})),Object(n["createElementVNode"])("div",_,Object(n["toDisplayString"])(e.$t("swapMode")),1),Object(n["createVNode"])(z,{modelValue:x.swapModeValue,"onUpdate:modelValue":t[8]||(t[8]=function(e){return x.swapModeValue=e}),style:{"--van-cell-label-margin-top":"0"}},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(C.typeSwapMode,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(G,{key:e.value,border:!1,clickable:"",onClick:function(t){return x.swapModeValue=e.value},style:{padding:"0.16rem 0"}},{title:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",N,[Object(n["createElementVNode"])("i",{class:Object(n["normalizeClass"])("iconfont icon-".concat(e.icon))},null,2),Object(n["createElementVNode"])("span",V,Object(n["toDisplayString"])(e.name),1),"auto"===e.value?(Object(n["openBlock"])(),Object(n["createElementBlock"])("svg",$,E)):Object(n["createCommentVNode"])("",!0)])]})),label:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.label),1)]})),"right-icon":Object(n["withCtx"])((function(){return[Object(n["createVNode"])(U,{"icon-size":"0.3rem",name:e.value},null,8,["name"])]})),_:2},1032,["onClick"])})),128))]})),_:1},8,["modelValue"])],64)):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(Q,{block:"",type:"primary","native-type":"button",color:"#3F80F7",class:"submit-btn",style:Object(n["normalizeStyle"])({marginTop:C.isSwapMode?"0.5rem":"1.5rem"}),onClick:Object(n["withModifiers"])(C.submitSwapSet,["stop"])},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm")),1)]})),_:1},8,["style","onClick"])])]})),_:1},8,["show","title"]),Object(n["createVNode"])(J,{show:x.selectSubWalletVisible,"onUpdate:show":t[12]||(t[12]=function(e){return x.selectSubWalletVisible=e}),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"20vh"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("h3",B,Object(n["toDisplayString"])(e.$t("selectSubWallet")),1),Object(n["createVNode"])(Y,{class:"popup-content",onSubmit:C.confirmSubmitSelectSubWallet},{default:Object(n["withCtx"])((function(){var o;return[C.subWallets&&(null===(o=C.subWallets)||void 0===o?void 0:o.length)>0?(Object(n["openBlock"])(),Object(n["createBlock"])(H,{key:0,modelValue:x.subWalletChecked,"onUpdate:modelValue":t[11]||(t[11]=function(e){return x.subWalletChecked=e}),style:{"max-height":"50vh","min-height":"30vh","--van-cell-horizontal-padding":"0.1rem","--van-cell-background-color":"transparent","overflow-y":"auto"}},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(C.subWallets,(function(e,o){var i,a,l,s;return Object(n["openBlock"])(),Object(n["createBlock"])(G,{clickable:"",key:e,border:!1,title:"".concat(e.name,"(").concat(null===e||void 0===e||null===(i=e.address)||void 0===i||null===(a=i.slice)||void 0===a?void 0:a.call(i,0,4),"...").concat(null===e||void 0===e||null===(l=e.address)||void 0===l||null===(s=l.slice)||void 0===s?void 0:s.call(l,-4),")"),onClick:function(e){return C.toggle(o)}},{"right-icon":Object(n["withCtx"])((function(){return[Object(n["createVNode"])(q,{name:e.address,ref_for:!0,ref:"checkbox-".concat(o),onClick:t[10]||(t[10]=Object(n["withModifiers"])((function(){}),["stop"]))},null,8,["name"])]})),_:2},1032,["title","onClick"])})),128))]})),_:1},8,["modelValue"])):(Object(n["openBlock"])(),Object(n["createBlock"])(K,{key:1,style:{"--van-empty-padding":"0.1rem 0 0.5rem 0","--van-empty-description-color":"#888"},description:e.$t("noWallets")},null,8,["description"])),Object(n["createElementVNode"])("div",A,[Object(n["createVNode"])(Q,{class:"btn",style:{"border-radius":"0.08rem"},block:"","native-type":"submit",size:"normal",type:"primary"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm1")),1)]})),_:1})])]})),_:1},8,["onSubmit"])]})),_:1},8,["show"])])}o("7db0"),o("d3b7"),o("caad"),o("2532"),o("ac1f"),o("5319"),o("d81d"),o("a9e3"),o("4de4");var I=o("2c28"),P=o("ddc3"),D={name:"SwapSelectMode",props:{autoSwapMode:String,swapMode:String,slippage:{type:String,default:"2"},autoSlippage:String},emits:["update:swapMode","update:slippage"],setup:function(){var e=Object(I["useStorage"])("batchSwapClicked",!1,localStorage);return{batchSwapClicked:e}},data:function(){var e,t,o;return{show:!1,slippageValue:"auto"===this.slippage?void 0:this.slippage,swapModeValue:this.swapMode,isBatchSwap:(null===(e=this.$store.state)||void 0===e?void 0:e.isBatchSwap)||!1,addressList:[],selectSubWalletVisible:!1,subWalletChecked:[],isCanBatchSwap:!(null===(t=window)||void 0===t||null===(o=t._tw_)||void 0===o||!o.appSelectSubWallet)||!1}},computed:{typeSwapMode:function(){return[{name:this.$t("fastMode"),value:"fast",label:this.$t("fastLabel"),icon:"jisu",symbol:this.$t("fast")},{name:this.$t("semi-privateMode"),value:"private",label:this.$t("semi-privateLabel"),icon:"banyinsi",symbol:this.$t("semi-Private")},{name:this.$t("privacy"),value:"protect",label:this.$t("protectLabel"),icon:"yinsi",symbol:this.$t("protect")},{name:this.$t("smartMode"),value:"auto",label:this.$t("smartLabel"),icon:"zhineng"}]},swapModeName:function(){var e,t=this;return null===(e=this.typeSwapMode.find((function(e){return e.value===t.swapMode})))||void 0===e?void 0:e.name},autoName:function(){var e=this;if("auto"===this.swapMode){var t,o=null===(t=this.typeSwapMode.find((function(t){return t.value===e.autoSwapMode})))||void 0===t?void 0:t.symbol;return"".concat(o)}return""},isSwapMode:function(){var e,t,o,n,i,a,l,s,r,c,u=window.navigator.userAgent;if(u.includes("OSType/2")){var d,m,p=u.replace(/^.*Ave.ai\/(.*) OSType\/2;$/,"$1"),b=P.gte(p,"2.3.0");return(null===(d=(m=["eth","bsc"]).includes)||void 0===d?void 0:d.call(m,this.$store.getters.netId))&&b}var f=null===(e=(null===(o=window)||void 0===o?void 0:o.main)||(null===(n=window)||void 0===n?void 0:n._tw_)||{})||void 0===e||null===(t=e.appGetPlatform)||void 0===t?void 0:t.call(e),h=null===(i=(null===(l=window)||void 0===l?void 0:l.main)||(null===(s=window)||void 0===s?void 0:s._tw_)||{})||void 0===i||null===(a=i.getAppVersionCode)||void 0===a?void 0:a.call(i),v="android"===f&&h>112;return(null===(r=(c=["eth","bsc"]).includes)||void 0===r?void 0:r.call(c,this.$store.getters.netId))&&v},subWallets:function(){return this.$store.state.subWallets||[]},selectSubWallets:function(){return this.$store.getters.selectSubWallets||[]}},watch:{show:function(e){var t,o,n,i;e&&(this.slippageValue="auto"===this.slippage?void 0:this.slippage,this.isBatchSwap=(null===(i=this.$store.state)||void 0===i?void 0:i.isBatchSwap)||!1,console.log("subWallets",this.subWallets));console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(o=t._tw_)||void 0===o||null===(n=o.isRefreshEnable)||void 0===n||n.call(o,"bridge",!e)},selectSubWalletVisible:function(e){e&&(this.subWalletChecked=this.selectSubWallets.map((function(e){return e.address})))}},methods:{handleBlur:function(){"auto"!==this.slippageValue&&(this.show&&Number(this.slippageValue)<0&&(this.slippageValue="0"),this.show&&Number(this.slippageValue)>49.99&&(this.slippageValue="49.99"))},submitSwapSet:function(){this.$emit("update:swapMode",this.swapModeValue),localStorage.swapMode=this.swapModeValue,void 0===this.slippageValue?(this.$emit("update:slippage","auto"),localStorage.swapSlippage="auto"):(this.$emit("update:slippage",this.slippageValue),localStorage.swapSlippage=this.slippageValue),this.$store.state.isBatchSwap=this.isBatchSwap,this.isBatchSwap||this.$store.commit("setSelectSubWallets",[]),this.show=!1},confirmSubmitSelectSubWallet:function(){var e,t,o=this;console.log("confirmSubmitSelectSubWallet----");var n=null===(e=this.subWallets)||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,(function(e){return o.subWalletChecked.includes(e.address)}));console.log(n),this.$store.commit("setSelectSubWallets",n),this.selectSubWalletVisible=!1},toggle:function(e){var t,o,n;null===(t=this.$refs["checkbox-".concat(e)])||void 0===t||null===(o=t[0])||void 0===o||null===(n=o.toggle)||void 0===n||n.call(o)}}},L=(o("a6ec"),o("6b0d")),F=o.n(L);const R=F()(D,[["render",C],["__scopeId","data-v-a962d930"]]);t["a"]=R},fae6:function(e,t,o){"use strict";o("969b")},fcef:function(e,t,o){"use strict";o("0e64")}}]);